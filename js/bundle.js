webpackJsonp([0],{106:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=function(t,e,n,r,i){var o=i.add.text(t,e,"number"==typeof n?n.toString():n,{color:"#000",fontSize:"24px",fontFamily:"Alata"});return r.add(o),o};e.default=r},107:function(t,e,n){var r,i,o;!function(a){"use strict";"object"==typeof t&&"object"==typeof t.exports?t.exports=a():null!=n(80)?(i=[],r=a,void 0!==(o="function"==typeof r?r.apply(e,i):r)&&(t.exports=o)):self.sanctuaryTypeIdentifiers=a()}(function(){"use strict";function t(t){return null!=t&&null!=t.constructor&&t.constructor.prototype!==t&&"string"==typeof t[e]?t[e]:Object.prototype.toString.call(t).slice("[object ".length,-"]".length)}var e="@@type",n=new RegExp("^([\\s\\S]+)/([\\s\\S]+?)(?:@([0-9]+))?$");return t.parse=function(t){var e=null,r=t,i=0,o=n.exec(t);return null!=o&&(e=o[1],r=o[2],null!=o[3]&&(i=Number(o[3]))),{namespace:e,name:r,version:i}},t})},132:function(t,e,n){"use strict";function r(t){return t[Math.floor(Math.random()*t.length)]}function i(t,e){var n=e.type,r=e.name,i=Object.keys(o.modifiers),a=function(t,e){var n,r=e[0],o=e[1];return i.includes(r)?l(l({},t),(n={},n[r]=parseInt(o),n)):t},s=Object.entries(e).filter(function(t){return!["name","type","description"].includes(t[0])}),c=s.reduce(a,o.modifiers),f=o.itemTypeSlots[n];return o.itemTypeSlots[n]?t.concat([{id:(0,u.idfy)(e.name),name:r,type:n,slot:f,description:e.description,modifiers:c}]):t}Object.defineProperty(e,"__esModule",{value:!0}),e.randomItem=r,e.default=e.clearDB=e.player=e.items=e.squads=e.units=e.classes=void 0;var o=n(579),a=function(t){return t&&t.__esModule?t:{default:t}}(n(1493)),u=n(1494),s=n(1495),c=n(287),f=n(581),l=function(){return l=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},l.apply(this,arguments)},p=["fighter","mage","archer"];e.classes=p;var h=(0,c.indexById)(Array.from({length:10},function(t,e){return e}).map(function(t){return(0,s.fromJSON)(t)}));e.units=h;var d={};e.squads=d;for(var y=0;y<4;y++)d[y.toString()]=function(t,e){var n;return e.squad={id:t.toString(),x:2,y:2},{id:t.toString(),name:e.name,emblem:"Emoji",members:(n={},n[e.id]={id:e.id,leader:!0,x:2,y:2},n)}}(y,h[y]);var v=(0,c.indexById)(a.default.reduce(i,[]));e.items=v;var m={id:"player_1",name:"Player Derp",gold:100,iventory:{iron_sword:2,steel_sword:1},units:(0,f.Range)(0,10).map(function(t){return t.toString()}).toJS()};e.player=m;var _={soundEnabled:!0,musicEnabled:!0},g=[["units",h],["squads",d],["items",v],["itemTypes",o.itemTypeSlots],["player",m],["options",_]],b=function(){w(!0),alert("Data Cleared!")};e.clearDB=b;var w=function(t){g.forEach(function(e){var n=e[0],r=e[1];(null===localStorage.getItem(n)||t)&&localStorage.setItem(n,JSON.stringify(r))})},O=w;e.default=O},133:function(t,e,n){"use strict";function r(t,e,n,r){return{id:t.id,pos:{x:n,y:r},range:5,validSteps:[],enemiesInRange:[],status:"alive",force:e}}function i(t){var e=t.unit,n=t.stat,r=t.items,i=t.slot,o=e.equips[i],a=r[o];if(!a)throw new Error("Invalid State: Item should be in index");var u=a.modifiers[n];return u||0}function o(t,e,n){return n[t]+l.map(function(r){return i({unit:n,stat:t,items:e,slot:r})}).reduce(u.sum,0)}function a(t){return Object.values(t).reduce(function(t,e){var n;return e.squad?t:s(s({},t),(n={},n[e.id]=e,n))},{})}Object.defineProperty(e,"__esModule",{value:!0}),e.unitToMapUnit=r,e.getActualStat=o,e.getUnitsWithoutSquad=a,e.HAIR_STYLES=e.makeAnimatedUnit=e.unitClassLabels=void 0;var u=n(580),s=(n(32),function(){return s=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},s.apply(this,arguments)}),c={archer:"Archer",mage:"Mage",fighter:"Fighter"};e.unitClassLabels=c;var f=function(t,e){return s(s({},e),{container:t.add.container(0,0),tweens:[]})};e.makeAnimatedUnit=f;var l=["mainHand","offHand","chest","ornament"],p=["dark1","long1","split","long2","split2"];e.HAIR_STYLES=p},134:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SKIN_COLORS=e.SKIN_COLOR_BLACK=e.SKIN_COLOR_DARK_MED=e.SKIN_COLOR_MED=e.SKIN_COLOR_LIGHT_MED=e.SKIN_COLOR_LIGHT=e.HAIR_COLORS=e.HAIR_COLOR_RED=e.HAIR_COLOR_GREEN=e.HAIR_COLOR_BLUE=e.HAIR_COLOR_PINK=e.HAIR_COLOR_ORANGE=e.HAIR_COLOR_BLONDE=e.HAIR_COLOR_WHITE=e.HAIR_COLOR_BLACK=e.HAIR_COLOR_DARK_BROWN=e.TRUNK_BACK_Y=e.TRUNK_BACK_X=e.RIGHT_FOOT_BACK_Y=e.RIGHT_FOOT_BACK_X=e.LEFT_FOOT_BACK_Y=e.LEFT_FOOT_BACK_X=e.LEFT_HAND_BACK_Y=e.LEFT_HAND_BACK_X=e.RIGHT_HAND_BACK_Y=e.RIGHT_HAND_BACK_X=e.HEAD_BACK_Y=e.HEAD_BACK_X=e.RIGHT_HAND_FRONT_Y=e.RIGHT_HAND_FRONT_X=e.LEFT_HAND_FRONT_Y=e.LEFT_HAND_FRONT_X=e.TRUNK_FRONT_Y=e.TRUNK_FRONT_X=e.RIGHT_FOOT_FRONT_Y=e.RIGHT_FOOT_FRONT_X=e.LEFT_FOOT_FRONT_Y=e.LEFT_FOOT_FRONT_X=e.HEAD_FRONT_Y=e.HEAD_FRONT_X=e.CHARA_WRAPPER_Y=e.CHARA_WRAPPER_X=void 0;e.CHARA_WRAPPER_X=0;e.CHARA_WRAPPER_Y=0;e.HEAD_FRONT_X=0;e.HEAD_FRONT_Y=-10;e.LEFT_FOOT_FRONT_X=20;e.LEFT_FOOT_FRONT_Y=90;e.RIGHT_FOOT_FRONT_X=-10;e.RIGHT_FOOT_FRONT_Y=97;e.TRUNK_FRONT_X=0;e.TRUNK_FRONT_Y=55;e.LEFT_HAND_FRONT_X=35;e.LEFT_HAND_FRONT_Y=50;e.RIGHT_HAND_FRONT_X=-25;e.RIGHT_HAND_FRONT_Y=65;e.HEAD_BACK_X=0;e.HEAD_BACK_Y=0;e.RIGHT_HAND_BACK_X=-30;e.RIGHT_HAND_BACK_Y=70;e.LEFT_HAND_BACK_X=10;e.LEFT_HAND_BACK_Y=30;e.LEFT_FOOT_BACK_X=20;e.LEFT_FOOT_BACK_Y=80;e.RIGHT_FOOT_BACK_X=-10;e.RIGHT_FOOT_BACK_Y=87;e.TRUNK_BACK_X=0;e.TRUNK_BACK_Y=55;e.HAIR_COLOR_DARK_BROWN=6636321;e.HAIR_COLOR_BLACK=0;e.HAIR_COLOR_WHITE=16777215;e.HAIR_COLOR_BLONDE=15061137;e.HAIR_COLOR_ORANGE=12997965;e.HAIR_COLOR_PINK=13402813;e.HAIR_COLOR_BLUE=6326216;e.HAIR_COLOR_GREEN=8103772;e.HAIR_COLOR_RED=9833739;var r=[6636321,0,16777215,15061137,8103772,6326216,13402813,12997965,9833739];e.HAIR_COLORS=r;e.SKIN_COLOR_LIGHT=15518891;e.SKIN_COLOR_LIGHT_MED=13801836;e.SKIN_COLOR_MED=12811341;e.SKIN_COLOR_DARK_MED=11955006;e.SKIN_COLOR_BLACK=9325363;var i=[15518891,13801836,12811341,11955006,9325363];e.SKIN_COLORS=i},135:function(t,e,n){(function(r){var i,o,a;!function(r){"use strict";"object"==typeof t&&"object"==typeof t.exports?t.exports=r(n(584),n(182),n(585),n(586),n(51),n(52),n(107)):null!=n(80)?(o=[n(584),n(182),n(585),n(586),n(51),n(52),n(107)],i=r,void 0!==(a="function"==typeof i?i.apply(e,o):i)&&(t.exports=a)):self.sanctuary=r(self.sanctuaryDef,self.sanctuaryEither,self.sanctuaryMaybe,self.sanctuaryPair,self.sanctuaryShow,self.sanctuaryTypeClasses,self.sanctuaryTypeIdentifiers)}(function(t,e,i,o,a,u,s){"use strict";function c(t){return function(e){return function(n){return t(e(n))}}}function f(t){return function(e){return function(n){return t(n)(e)}}}function l(t){return c(function(e){return t in e?de(e[t]):he})(d)}function p(t){return function(e){return e[t]()}}function h(t){return function(e){return function(n){return n[t](e)}}}function d(t){return null==t?Object.create(null):Object(t)}function y(n){var r=t.create(n),o={env:n.env,is:r("is")({})([t.Type,t.Any,t.Boolean])(t.test(n.env)),Maybe:i,Nothing:he,Either:e};return Object.keys(xe).forEach(function(t){o[t]=r(t)(xe[t].consts)(xe[t].types)(xe[t].impl)}),o.unchecked=n.checkTypes?y({checkTypes:!1,env:n.env}):o,o}function v(t){var e=s.parse(s(t));return e.namespace=u.reject(m(null),de(e.namespace)),e}function m(t){return function(e){return u.equals(t,e)}}function _(t){return function(e){return u.lt(e,t)}}function g(t){return function(e){return u.lte(e,t)}}function b(t){return function(e){return u.gt(e,t)}}function w(t){return function(e){return u.gte(e,t)}}function O(t){return function(e){return u.filter(t,e)}}function S(t){return function(e){return u.reject(t,e)}}function A(t){return function(e){return u.map(t,e)}}function E(t){return function(e){return u.flip(t,e)}}function T(t){return function(e){return u.alt(e,t)}}function C(t){return function(e){return function(n){return u.reduce(function(e,n){return t(e)(n)},e,n)}}}function I(t){return function(e){return u.of(t,e)}}function k(t){return function(e){function n(t,n,r){return u.map(J(t)(n),e(r))}return function(e){return u.chainRec(t,n,e)}}}function x(t){return t}function R(t){return function(e){return t}}function N(t){return function(e){return e(t)}}function M(t){return function(e){return function(n){return t(e,n)}}}function P(t){return function(e){return function(n){return function(r){return t(e,n,r)}}}}function j(t){return function(e){return function(n){return function(r){return function(i){return t(e,n,r,i)}}}}}function D(t){return function(e){return function(n){return function(r){return function(i){return function(o){return t(e,n,r,i,o)}}}}}}function F(t){return function(e){return C(N)(e)(t)}}function H(t){return function(e){return u.reduce(function(t,e){return u.chain(e,t)},e,t)}}function L(t){return function(e){return function(n){return function(r){return t(e(n))(e(r))}}}}function U(t){return function(e){return t(e.fst)(e.snd)}}function q(t){return t.isNothing}function B(t){return t.isJust}function W(t){return function(e){return function(n){return n.isJust?e(n.value):t}}}function z(t){return function(e){return function(n){return n.isJust?e(n.value):t()}}}function Y(t){return A(Tt("value"))(O(B)(t))}function K(t){return t.isJust?t.value:null}function V(t){return W(le(t))(pe)}function G(t){return t.isLeft}function X(t){return t.isRight}function J(t){return function(e){return function(n){return(n.isLeft?t:e)(n.value)}}}function $(t){return J(x)(R(t))}function Z(t){return J(R(t))(x)}function Q(t){return J(R(t))(x)}function tt(t){return ut(t)(pe)(le)}function et(t){return function(e){try{return pe(t(e))}catch(t){return le(t)}}}function nt(t){return t.isLeft?he:de(t.value)}function rt(t){return function(e){return t&&e}}function it(t){return function(e){return t||e}}function ot(t){return!t}function at(t){return function(e){return function(n){return n?e:t}}}function ut(t){return function(e){return function(n){return function(r){return(t(r)?e:n)(r)}}}}function st(t){return f(ut(t))(x)}function ct(t){return ut(t)(x)}function ft(t){return function(e){return function(n){return 0===n.length?t:e(n[0])(n.slice(1))}}}function lt(t){return Array.isArray(t)?t.length>0?de(t[0]):he:u.reduce(function(t,e){return t.isJust?t:de(e)},he,t)}function pt(t){return Array.isArray(t)?t.length>0?de(t[t.length-1]):he:u.reduce(function(t,e){return de(e)},he,t)}function ht(t){if(Array.isArray(t))return t.length>0?de(t.slice(1)):he;var e=u.empty(t.constructor);return u.reduce(function(t,n){return de(W(e)(bt(n))(t))},he,t)}function dt(t){if(Array.isArray(t))return t.length>0?de(t.slice(0,-1)):he;var e=u.empty(t.constructor);return u.map(o.snd,u.reduce(function(t,n){return de(o(n)(W(e)(U(bt))(t)))},he,t))}function yt(t,e){return function(n){return function(r){if(n<0)return he;if(Array.isArray(r))return n<=r.length?de(t(n,r)):he;var i=u.reduce(function(t,n){return u.map(function(t){var r=t.fst,i=t.snd;return o(r-1)(e(r,i,n))},t)},de(o(n)(u.empty(r.constructor))),r);return u.map(o.snd,u.reject(c(b(0))(o.fst),i))}}}function vt(t){return function(e){return u.map(u.reverse,Re(t)(u.reverse(e)))}}function mt(t){return function(e){return u.map(u.reverse,Ne(t)(u.reverse(e)))}}function _t(t){return function(e){for(var n=0;n<e.length&&t(e[n]);)n+=1;return e.slice(0,n)}}function gt(t){return function(e){for(var n=0;n<e.length&&t(e[n]);)n+=1;return e.slice(n)}}function bt(t){return function(e){return u.append(t,e)}}function wt(t){return function(e){return u.reduce(function(e,n){return e.isJust?e:t(n)?de(n):he},he,e)}}function Ot(t){return function(e){for(var n=[],r=t(e);r.isJust;r=t(r.value.snd))n.push(r.value.fst);return n}}function St(t){return function(e){for(var n=[],r=t;r<e;r+=1)n.push(r);return n}}function At(t){return function(e){if(0===e.length)return[];for(var n=e[0],r=[n],i=[r],o=1;o<e.length;o+=1){var a=e[o];t(n)(a)?r.push(a):i.push(r=[n=a])}return i}}function Et(t){return function(e){return function(n){for(var r=[],i=Math.min(e.length,n.length),o=0;o<i;o+=1)r.push(t(e[o])(n[o]));return r}}}function Tt(t){return function(e){var n=d(e);if(t in n)return n[t];throw new TypeError("‘prop’ expected object to have a property named ‘"+t+"’; "+a(e)+" does not")}}function Ct(t){return function(e){return t.reduce(function(e,n){var r=d(e);if(n in r)return r[n];throw new TypeError("‘props’ expected object to have a property at "+a(t)+"; "+a(e)+" does not")},e)}}function It(t){return c(c(O(t)))(l)}function kt(t){return function(e){return function(n){return u.filter(t,e.reduce(function(t,e){return u.chain(l(e),t)},de(n)))}}}function xt(t){return function(e){return Object.prototype.propertyIsEnumerable.call(e,t)?de(e[t]):he}}function Rt(t){return function(e){var n={};return n[t]=e,n}}function Nt(t){return function(e){return function(n){return u.concat(n,Rt(t)(e))}}}function Mt(t){return function(e){var n=u.concat(e,{});return delete n[t],n}}function Pt(t){return u.map(function(e){return t[e]},Object.keys(t))}function jt(t){return u.map(function(e){return o(e)(t[e])},Object.keys(t))}function Dt(t){return u.reduce(function(t,e){return t[e.fst]=e.snd,t},{},t)}function Ft(t){return-t}function Ht(t){return function(e){return t+e}}function Lt(t){return function(e){return e-t}}function Ut(t){return function(e){return t*e}}function qt(t){return function(e){return e/t}}function Bt(t){return function(e){return Math.pow(e,t)}}function Wt(t){var e=u.reduce(function(t,e){return t.total+=e,t.count+=1,t},{total:0,count:0},t);return e.count>0?de(e.total/e.count):he}function zt(t){return t%2==0}function Yt(t){return t%2!=0}function Kt(t){var e=new Date(t);return isNaN(e.valueOf())?he:de(e)}function Vt(t){return"(?:"+t.join("|")+")"}function Gt(t){return Me.test(t)?de(parseFloat(t)):he}function Xt(e){return function(n){var r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ".slice(0,e),i=new RegExp("^["+r+"]+$","i"),o=n.replace(/^[+-]/,"");if(i.test(16===e?o.replace(/^0x/i,""):o)){var a=parseInt(n,e);if(t.test([])(t.Integer)(a))return de(a)}return he}}function Jt(t){return c(O(t))(c(nt)(et(JSON.parse)))}function $t(t){return{match:t[0],groups:u.map(c(S(m(void 0)))(de),t.slice(1))}}function Zt(t,e){var n=t.lastIndex,r=e();return t.lastIndex=n,r}function Qt(t){return function(e){return new RegExp(e,t)}}function te(t){return t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}function ee(t){return function(e){return Zt(t,function(){return t.test(e)})}}function ne(t){return function(e){return u.map($t,u.reject(m(null),de(e.match(t))))}}function re(t){return function(e){return Zt(t,function(){return Ot(function(n){return u.map(function(t){return o($t(t))(null)},u.reject(m(null),de(t.exec(e))))})([])})}}function ie(t){return function(e){var n=t.length;return e.slice(0,n)===t?de(e.slice(n)):he}}function oe(t){return function(e){var n=e.length-t.length;return e.slice(n)===t?de(e.slice(0,n)):he}}function ae(t){var e=t.split(/\s+/),n=e.length;return e.slice(""===e[0]?1:0,""===e[n-1]?n-1:n)}function ue(t){return""===t?[]:t.replace(/\r\n?/g,"\n").match(/^(?=[\s\S]).*/gm)}function se(t){return t.reduce(function(t,e){return t+e+"\n"},"")}function ce(t){return function(e){return Zt(t,function(){for(var n,r=[],i=0;null!=(n=t.exec(e));)if(t.lastIndex===i&&""===n[0]){if(t.lastIndex===e.length)return r;t.lastIndex+=1}else r.push(e.slice(i,n.index)),i=n.index+n[0].length;return r.push(e.slice(i)),r})}}if("undefined"!=typeof __doctest){var fe=(__doctest.require("sanctuary-descending"),__doctest.require("./test/internal/List").Nil,__doctest.require("./test/internal/List").Cons,__doctest.require("./test/internal/Sum"));(function(e){var n=e.create({checkTypes:!0,env:e.env.concat([__doctest.require("./test/internal/List").Type(t.Unknown),fe.Type])});n.env=e.env})(n(135))}var le=e.Left,pe=e.Right,he=i.Nothing,de=i.Just,ye=t.TypeVariable("a"),ve=t.TypeVariable("b"),me=t.TypeVariable("c"),_e=t.TypeVariable("d"),ge=t.TypeVariable("e"),be=t.TypeVariable("g"),we=t.TypeVariable("r"),Oe=t.UnaryTypeVariable("f"),Se=t.UnaryTypeVariable("m"),Ae=t.UnaryTypeVariable("t"),Ee=t.UnaryTypeVariable("w"),Te=t.BinaryTypeVariable("p"),Ce=t.BinaryTypeVariable("s"),Ie=t.UnaryType("TypeRep")("https://github.com/fantasyland/fantasy-land#type-representatives")([])(R(!0))(R([])),ke=t.RecordType({checkTypes:t.Boolean,env:t.Array(t.Any)}),xe={};xe.create={consts:{},types:[ke,t.Object],impl:y},xe.type={consts:{},types:[t.Any,t.RecordType({namespace:t.Maybe(t.String),name:t.String,version:t.NonNegativeInteger})],impl:v},xe.show={consts:{},types:[t.Any,t.String],impl:a},xe.equals={consts:{a:[u.Setoid]},types:[ye,ye,t.Boolean],impl:m},xe.lt={consts:{a:[u.Ord]},types:[ye,ye,t.Boolean],impl:_},xe.lte={consts:{a:[u.Ord]},types:[ye,ye,t.Boolean],impl:g},xe.gt={consts:{a:[u.Ord]},types:[ye,ye,t.Boolean],impl:b},xe.gte={consts:{a:[u.Ord]},types:[ye,ye,t.Boolean],impl:w},xe.min={consts:{a:[u.Ord]},types:[ye,ye,ye],impl:M(u.min)},xe.max={consts:{a:[u.Ord]},types:[ye,ye,ye],impl:M(u.max)},xe.clamp={consts:{a:[u.Ord]},types:[ye,ye,ye,ye],impl:P(u.clamp)},xe.id={consts:{c:[u.Category]},types:[Ie(me),me],impl:u.id},xe.concat={consts:{a:[u.Semigroup]},types:[ye,ye,ye],impl:M(u.concat)},xe.empty={consts:{a:[u.Monoid]},types:[Ie(ye),ye],impl:u.empty},xe.invert={consts:{g:[u.Group]},types:[be,be],impl:u.invert},xe.filter={consts:{f:[u.Filterable]},types:[t.Predicate(ye),Oe(ye),Oe(ye)],impl:O},xe.reject={consts:{f:[u.Filterable]},types:[t.Predicate(ye),Oe(ye),Oe(ye)],impl:S},xe.map={consts:{f:[u.Functor]},types:[t.Fn(ye)(ve),Oe(ye),Oe(ve)],impl:A},xe.flip={consts:{f:[u.Functor]},types:[Oe(t.Fn(ye)(ve)),ye,Oe(ve)],impl:E},xe.bimap={consts:{p:[u.Bifunctor]},types:[t.Fn(ye)(ve),t.Fn(me)(_e),Te(ye)(me),Te(ve)(_e)],impl:P(u.bimap)},xe.mapLeft={consts:{p:[u.Bifunctor]},types:[t.Fn(ye)(ve),Te(ye)(me),Te(ve)(me)],impl:M(u.mapLeft)},xe.promap={consts:{p:[u.Profunctor]},types:[t.Fn(ye)(ve),t.Fn(me)(_e),Te(ve)(me),Te(ye)(_e)],impl:P(u.promap)},xe.alt={consts:{f:[u.Alt]},types:[Oe(ye),Oe(ye),Oe(ye)],impl:T},xe.zero={consts:{f:[u.Plus]},types:[Ie(Oe(ye)),Oe(ye)],impl:u.zero},xe.reduce={consts:{f:[u.Foldable]},types:[t.Fn(ve)(t.Fn(ye)(ve)),ve,Oe(ye),ve],impl:C},xe.reduce_={consts:{f:[u.Foldable]},types:[t.Fn(ye)(t.Fn(ve)(ve)),ve,Oe(ye),ve],impl:c(C)(E)},xe.traverse={consts:{f:[u.Applicative],t:[u.Traversable]},types:[Ie(Oe(ve)),t.Fn(ye)(Oe(ve)),Ae(ye),Oe(Ae(ve))],impl:P(u.traverse)},xe.sequence={consts:{f:[u.Applicative],t:[u.Traversable]},types:[Ie(Oe(ye)),Ae(Oe(ye)),Oe(Ae(ye))],impl:M(u.sequence)},xe.ap={consts:{f:[u.Apply]},types:[Oe(t.Fn(ye)(ve)),Oe(ye),Oe(ve)],impl:M(u.ap)},xe.lift2={consts:{f:[u.Apply]},types:[t.Fn(ye)(t.Fn(ve)(me)),Oe(ye),Oe(ve),Oe(me)],impl:P(u.lift2)},xe.lift3={consts:{f:[u.Apply]},types:[t.Fn(ye)(t.Fn(ve)(t.Fn(me)(_e))),Oe(ye),Oe(ve),Oe(me),Oe(_e)],impl:j(u.lift3)},xe.apFirst={consts:{f:[u.Apply]},types:[Oe(ye),Oe(ve),Oe(ye)],impl:M(u.apFirst)},xe.apSecond={consts:{f:[u.Apply]},types:[Oe(ye),Oe(ve),Oe(ve)],impl:M(u.apSecond)},xe.of={consts:{f:[u.Applicative]},types:[Ie(Oe(ye)),ye,Oe(ye)],impl:I},xe.chain={consts:{m:[u.Chain]},types:[t.Fn(ye)(Se(ve)),Se(ye),Se(ve)],impl:M(u.chain)},xe.join={consts:{m:[u.Chain]},types:[Se(Se(ye)),Se(ye)],impl:u.join},xe.chainRec={consts:{m:[u.ChainRec]},types:[Ie(Se(ve)),t.Fn(ye)(Se(t.Either(ye)(ve))),ye,Se(ve)],impl:k},xe.extend={consts:{w:[u.Extend]},types:[t.Fn(Ee(ye))(ve),Ee(ye),Ee(ve)],impl:M(u.extend)},xe.duplicate={consts:{w:[u.Extend]},types:[Ee(ye),Ee(Ee(ye))],impl:u.duplicate},xe.extract={consts:{w:[u.Comonad]},types:[Ee(ye),ye],impl:u.extract},xe.contramap={consts:{f:[u.Contravariant]},types:[t.Fn(ve)(ye),Oe(ye),Oe(ve)],impl:M(u.contramap)},xe.I={consts:{},types:[ye,ye],impl:x},xe.K={consts:{},types:[ye,ve,ye],impl:R},xe.T={consts:{},types:[ye,t.Fn(ye)(ve),ve],impl:N},xe.curry2={consts:{},types:[t.Function([ye,ve,me]),ye,ve,me],impl:M},xe.curry3={consts:{},types:[t.Function([ye,ve,me,_e]),ye,ve,me,_e],impl:P},xe.curry4={consts:{},types:[t.Function([ye,ve,me,_e,ge]),ye,ve,me,_e,ge],impl:j},xe.curry5={consts:{},types:[t.Function([ye,ve,me,_e,ge,we]),ye,ve,me,_e,ge,we],impl:D},xe.compose={consts:{s:[u.Semigroupoid]},types:[Ce(ve)(me),Ce(ye)(ve),Ce(ye)(me)],impl:M(u.compose)},xe.pipe={consts:{f:[u.Foldable]},types:[Oe(t.Fn(t.Any)(t.Any)),ye,ve],impl:F},xe.pipeK={consts:{f:[u.Foldable],m:[u.Chain]},types:[Oe(t.Fn(t.Any)(Se(t.Any))),Se(ye),Se(ve)],impl:H},xe.on={consts:{},types:[t.Fn(ve)(t.Fn(ve)(me)),t.Fn(ye)(ve),ye,ye,me],impl:L},xe.Pair={consts:{},types:[ye,ve,t.Pair(ye)(ve)],impl:o},xe.pair={consts:{},types:[t.Fn(ye)(t.Fn(ve)(me)),t.Pair(ye)(ve),me],impl:U},xe.fst={consts:{},types:[t.Pair(ye)(ve),ye],impl:U(R)},xe.snd={consts:{},types:[t.Pair(ye)(ve),ve],impl:U(f(R))},xe.swap={consts:{},types:[t.Pair(ye)(ve),t.Pair(ve)(ye)],impl:U(f(o))},xe.Just={consts:{},types:[ye,t.Maybe(ye)],impl:de},xe.isNothing={consts:{},types:[t.Maybe(ye),t.Boolean],impl:q},xe.isJust={consts:{},types:[t.Maybe(ye),t.Boolean],impl:B},xe.maybe={consts:{},types:[ve,t.Fn(ye)(ve),t.Maybe(ye),ve],impl:W},xe.maybe_={consts:{},types:[t.Thunk(ve),t.Fn(ye)(ve),t.Maybe(ye),ve],impl:z},xe.fromMaybe={consts:{},types:[ye,t.Maybe(ye),ye],impl:f(W)(x)},xe.fromMaybe_={consts:{},types:[t.Thunk(ye),t.Maybe(ye),ye],impl:f(z)(x)},xe.justs={consts:{f:[u.Filterable,u.Functor]},types:[Oe(t.Maybe(ye)),Oe(ye)],impl:Y},xe.mapMaybe={consts:{f:[u.Filterable,u.Functor]},types:[t.Fn(ye)(t.Maybe(ve)),Oe(ye),Oe(ve)],impl:c(c(Y))(A)},xe.maybeToNullable={consts:{},types:[t.Maybe(ye),t.Nullable(ye)],impl:K},xe.maybeToEither={consts:{},types:[ye,t.Maybe(ve),t.Either(ye)(ve)],impl:V},xe.Left={consts:{},types:[ye,t.Either(ye)(ve)],impl:le},xe.Right={consts:{},types:[ve,t.Either(ye)(ve)],impl:pe},xe.isLeft={consts:{},types:[t.Either(ye)(ve),t.Boolean],impl:G},xe.isRight={consts:{},types:[t.Either(ye)(ve),t.Boolean],impl:X},xe.either={consts:{},types:[t.Fn(ye)(me),t.Fn(ve)(me),t.Either(ye)(ve),me],impl:J},xe.fromLeft={consts:{},types:[ye,t.Either(ye)(ve),ye],impl:$},xe.fromRight={consts:{},types:[ve,t.Either(ye)(ve),ve],impl:Z},xe.fromEither={consts:{},types:[ve,t.Either(ye)(ve),ve],impl:Q},xe.lefts={consts:{f:[u.Filterable,u.Functor]},types:[Oe(t.Either(ye)(ve)),Oe(ye)],impl:c(A(Tt("value")))(O(G))},xe.rights={consts:{f:[u.Filterable,u.Functor]},types:[Oe(t.Either(ye)(ve)),Oe(ve)],impl:c(A(Tt("value")))(O(X))},xe.tagBy={consts:{},types:[t.Predicate(ye),ye,t.Either(ye)(ye)],impl:tt},xe.encase={consts:{},types:[function(e){return function(n){return function(r){var i=t.Fn(n)(r);return i.format=function(t,i){return t("Throwing "+a(e))+t(" ")+i("$1")(a(n))+t(" ")+i("$2")(a(r))},i}}}(ge)(ye)(ve),ye,t.Either(ge)(ve)],impl:et},xe.eitherToMaybe={consts:{},types:[t.Either(ye)(ve),t.Maybe(ve)],impl:nt},xe.and={consts:{},types:[t.Boolean,t.Boolean,t.Boolean],impl:rt},xe.or={consts:{},types:[t.Boolean,t.Boolean,t.Boolean],impl:it},xe.not={consts:{},types:[t.Boolean,t.Boolean],impl:ot},xe.complement={consts:{},types:[t.Predicate(ye),ye,t.Boolean],impl:c(ot)},xe.boolean={consts:{},types:[ye,ye,t.Boolean,ye],impl:at},xe.ifElse={consts:{},types:[t.Predicate(ye),t.Fn(ye)(ve),t.Fn(ye)(ve),ye,ve],impl:ut},xe.when={consts:{},types:[t.Predicate(ye),t.Fn(ye)(ye),ye,ye],impl:st},xe.unless={consts:{},types:[t.Predicate(ye),t.Fn(ye)(ye),ye,ye],impl:ct},xe.array={consts:{},types:[ve,t.Fn(ye)(t.Fn(t.Array(ye))(ve)),t.Array(ye),ve],impl:ft},xe.head={consts:{f:[u.Foldable]},types:[Oe(ye),t.Maybe(ye)],impl:lt},xe.last={consts:{f:[u.Foldable]},types:[Oe(ye),t.Maybe(ye)],impl:pt},xe.tail={consts:{f:[u.Applicative,u.Foldable,u.Monoid]},types:[Oe(ye),t.Maybe(Oe(ye))],impl:ht},xe.init={consts:{f:[u.Applicative,u.Foldable,u.Monoid]},types:[Oe(ye),t.Maybe(Oe(ye))],impl:dt};var Re=yt(function(t,e){return e.slice(0,t)},function(t,e,n){return t>0?u.append(n,e):e});xe.take={consts:{f:[u.Applicative,u.Foldable,u.Monoid]},types:[t.Integer,Oe(ye),t.Maybe(Oe(ye))],impl:Re};var Ne=yt(function(t,e){return e.slice(t)},function(t,e,n){return t>0?e:u.append(n,e)});xe.drop={consts:{f:[u.Applicative,u.Foldable,u.Monoid]},types:[t.Integer,Oe(ye),t.Maybe(Oe(ye))],impl:Ne},xe.takeLast={consts:{f:[u.Applicative,u.Foldable,u.Monoid]},types:[t.Integer,Oe(ye),t.Maybe(Oe(ye))],impl:vt},xe.dropLast={consts:{f:[u.Applicative,u.Foldable,u.Monoid]},types:[t.Integer,Oe(ye),t.Maybe(Oe(ye))],impl:mt},xe.takeWhile={consts:{},types:[t.Predicate(ye),t.Array(ye),t.Array(ye)],impl:_t},xe.dropWhile={consts:{},types:[t.Predicate(ye),t.Array(ye),t.Array(ye)],impl:gt},xe.size={consts:{f:[u.Foldable]},types:[Oe(ye),t.NonNegativeInteger],impl:u.size},xe.all={consts:{f:[u.Foldable]},types:[t.Predicate(ye),Oe(ye),t.Boolean],impl:M(u.all)},xe.any={consts:{f:[u.Foldable]},types:[t.Predicate(ye),Oe(ye),t.Boolean],impl:M(u.any)},xe.none={consts:{f:[u.Foldable]},types:[t.Predicate(ye),Oe(ye),t.Boolean],impl:M(u.none)},xe.append={consts:{f:[u.Applicative,u.Semigroup]},types:[ye,Oe(ye),Oe(ye)],impl:bt},xe.prepend={consts:{f:[u.Applicative,u.Semigroup]},types:[ye,Oe(ye),Oe(ye)],impl:M(u.prepend)},xe.joinWith={consts:{},types:[t.String,t.Array(t.String),t.String],impl:h("join")},xe.elem={consts:{a:[u.Setoid],f:[u.Foldable]},types:[ye,Oe(ye),t.Boolean],impl:M(u.elem)},xe.find={consts:{f:[u.Foldable]},types:[t.Predicate(ye),Oe(ye),t.Maybe(ye)],impl:wt},xe.intercalate={consts:{a:[u.Monoid],f:[u.Foldable]},types:[ye,Oe(ye),ye],impl:M(u.intercalate)},xe.foldMap={consts:{b:[u.Monoid],f:[u.Foldable]},types:[Ie(ve),t.Fn(ye)(ve),Oe(ye),ve],impl:P(u.foldMap)},xe.unfoldr={consts:{},types:[t.Fn(ve)(t.Maybe(t.Pair(ye)(ve))),ve,t.Array(ye)],impl:Ot},xe.range={consts:{},types:[t.Integer,t.Integer,t.Array(t.Integer)],impl:St},xe.groupBy={consts:{},types:[t.Fn(ye)(t.Predicate(ye)),t.Array(ye),t.Array(t.Array(ye))],impl:At},xe.reverse={consts:{f:[u.Applicative,u.Foldable,u.Monoid]},types:[Oe(ye),Oe(ye)],impl:u.reverse},xe.sort={consts:{a:[u.Ord],m:[u.Applicative,u.Foldable,u.Monoid]},types:[Se(ye),Se(ye)],impl:u.sort},xe.sortBy={consts:{b:[u.Ord],m:[u.Applicative,u.Foldable,u.Monoid]},types:[t.Fn(ye)(ve),Se(ye),Se(ye)],impl:M(u.sortBy)},xe.zip={consts:{},types:[t.Array(ye),t.Array(ve),t.Array(t.Pair(ye)(ve))],impl:Et(o)},xe.zipWith={consts:{},types:[t.Fn(ye)(t.Fn(ve)(me)),t.Array(ye),t.Array(ve),t.Array(me)],impl:Et},xe.prop={consts:{},types:[t.String,ye,ve],impl:Tt},xe.props={consts:{},types:[t.Array(t.String),ye,ve],impl:Ct},xe.get={consts:{},types:[t.Predicate(t.Any),t.String,ye,t.Maybe(ve)],impl:It},xe.gets={consts:{},types:[t.Predicate(t.Any),t.Array(t.String),ye,t.Maybe(ve)],impl:kt},xe.value={consts:{},types:[t.String,t.StrMap(ye),t.Maybe(ye)],impl:xt},xe.singleton={consts:{},types:[t.String,ye,t.StrMap(ye)],impl:Rt},xe.insert={consts:{},types:[t.String,ye,t.StrMap(ye),t.StrMap(ye)],impl:Nt},xe.remove={consts:{},types:[t.String,t.StrMap(ye),t.StrMap(ye)],impl:Mt},xe.keys={consts:{},types:[t.StrMap(ye),t.Array(t.String)],impl:Object.keys},xe.values={consts:{},types:[t.StrMap(ye),t.Array(ye)],impl:Pt},xe.pairs={consts:{},types:[t.StrMap(ye),t.Array(t.Pair(t.String)(ye))],impl:jt},xe.fromPairs={consts:{f:[u.Foldable]},types:[Oe(t.Pair(t.String)(ye)),t.StrMap(ye)],impl:Dt},xe.negate={consts:{},types:[t.ValidNumber,t.ValidNumber],impl:Ft},xe.add={consts:{},types:[t.FiniteNumber,t.FiniteNumber,t.FiniteNumber],impl:Ht},xe.sum={consts:{f:[u.Foldable]},types:[Oe(t.FiniteNumber),t.FiniteNumber],impl:C(Ht)(0)},xe.sub={consts:{},types:[t.FiniteNumber,t.FiniteNumber,t.FiniteNumber],impl:Lt},xe.mult={consts:{},types:[t.FiniteNumber,t.FiniteNumber,t.FiniteNumber],impl:Ut},xe.product={consts:{f:[u.Foldable]},types:[Oe(t.FiniteNumber),t.FiniteNumber],impl:C(Ut)(1)},xe.div={consts:{},types:[t.NonZeroFiniteNumber,t.FiniteNumber,t.FiniteNumber],impl:qt},xe.pow={consts:{},types:[t.FiniteNumber,t.FiniteNumber,t.FiniteNumber],impl:Bt},xe.mean={consts:{f:[u.Foldable]},types:[Oe(t.FiniteNumber),t.Maybe(t.FiniteNumber)],impl:Wt},xe.even={consts:{},types:[t.Integer,t.Boolean],impl:zt},xe.odd={consts:{},types:[t.Integer,t.Boolean],impl:Yt},xe.parseDate={consts:{},types:[t.String,t.Maybe(t.ValidDate)],impl:Kt};var Me=new RegExp("^\\s*[+-]?"+Vt(["Infinity","NaN",Vt(["[0-9]+","[0-9]+[.][0-9]+","[0-9]+[.]","[.][0-9]+"])+function(t){return Vt(t)+"?"}(["[Ee][+-]?[0-9]+"])])+"\\s*$");xe.parseFloat={consts:{},types:[t.String,t.Maybe(t.Number)],impl:Gt};var Pe=t.NullaryType("Radix")("")([t.Integer])(function(t){return t>=2&&t<=36});xe.parseInt={consts:{},types:[Pe,t.String,t.Maybe(t.Integer)],impl:Xt},xe.parseJson={consts:{},types:[t.Predicate(t.Any),t.String,t.Maybe(ye)],impl:Jt};var je=t.RecordType({match:t.String,groups:t.Array(t.Maybe(t.String))});return xe.regex={consts:{},types:[t.RegexFlags,t.String,t.RegExp],impl:Qt},xe.regexEscape={consts:{},types:[t.String,t.String],impl:te},xe.test={consts:{},types:[t.RegExp,t.String,t.Boolean],impl:ee},xe.match={consts:{},types:[t.NonGlobalRegExp,t.String,t.Maybe(je)],impl:ne},xe.matchAll={consts:{},types:[t.GlobalRegExp,t.String,t.Array(je)],impl:re},xe.toUpper={consts:{},types:[t.String,t.String],impl:p("toUpperCase")},xe.toLower={consts:{},types:[t.String,t.String],impl:p("toLowerCase")},xe.trim={consts:{},types:[t.String,t.String],impl:p("trim")},xe.stripPrefix={consts:{},types:[t.String,t.String,t.Maybe(t.String)],impl:ie},xe.stripSuffix={consts:{},types:[t.String,t.String,t.Maybe(t.String)],impl:oe},xe.words={consts:{},types:[t.String,t.Array(t.String)],impl:ae},xe.unwords={consts:{},types:[t.Array(t.String),t.String],impl:h("join")(" ")},xe.lines={consts:{},types:[t.String,t.Array(t.String)],impl:ue},xe.unlines={consts:{},types:[t.Array(t.String),t.String],impl:se},xe.splitOn={consts:{},types:[t.String,t.String,t.Array(t.String)],impl:h("split")},xe.splitOnRegex={consts:{},types:[t.GlobalRegExp,t.String,t.Array(t.String)],impl:ce},y({checkTypes:void 0===r||null==r||null==r.env||!1,env:t.env})})}).call(e,n(145))},136:function(t,e){t.exports={manhattan:function(t,e){return t+e},euclidean:function(t,e){return Math.sqrt(t*t+e*e)},octile:function(t,e){var n=Math.SQRT2-1;return t<e?n*t+e:n*e+t},chebyshev:function(t,e){return Math.max(t,e)}}},1491:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=r(n(25)),o=n(32),a=r(n(132)),u=n(180),s=r(n(66)),c=n(78),f=n(79),l=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),p=function(t){function e(){var e=t.call(this,"TitleScene")||this;return e.music=null,e.charas=[],e.container=null,e.preload=u.preload,e}return l(e,t),e.prototype.turnOff=function(){var t,e=this;this.charas.map(function(t){return t.container.destroy()}),this.charas.map(function(t){return e.scene.remove(t)}),this.charas=[],null===(t=this.container)||void 0===t||t.destroy()},e.prototype.create=function(){var t=this;this.container=this.add.container(0,0);var e=this.add.image(0,0,"backgrounds/sunset");e.setOrigin(0,0),e.displayWidth=c.SCREEN_WIDTH,e.displayHeight=c.SCREEN_HEIGHT,this.container.add(e),this.charas=[new f.Chara("3",this,(0,o.getUnit)("3"),250,500,1.3,!1,!0),new f.Chara("1",this,(0,o.getUnit)("1"),350,520,1.5,!1,!0),new f.Chara("2",this,(0,o.getUnit)("2"),450,550,1.6,!1,!0)],this.charas.map(function(t){t.container.scaleX=-1.5}),this.charas.map(function(e){var n;return null===(n=t.container)||void 0===n?void 0:n.add(e.container)}),this.music||(this.sound.stopAll(),(0,o.getOptions)().musicEnabled&&(this.music=this.sound.add("title"),this.music.setVolume(.1),this.music.play())),(0,s.default)(20,50,"List Units",this.container,this,function(){t.turnOff(),t.scene.transition({target:"ListUnitsScene",duration:0,moveBelow:!0})}),(0,s.default)(20,110,"Edit Squad 0",this.container,this,function(){t.turnOff(),t.scene.transition({target:"EditSquadScene",duration:0,moveBelow:!0,data:{squad:(0,o.getSquads)()[0]}})}),(0,s.default)(20,170,"List Squads",this.container,this,function(){t.turnOff(),t.scene.start("ListSquadsScene")}),(0,s.default)(20,230,"Maps",this.container,this,function(){t.turnOff(),t.scene.start("MapListScene")}),(0,s.default)(20,290,"Combat",this.container,this,function(){t.turnOff(),t.scene.start("CombatScene",{top:"0",bottom:"1",onCombatFinish:function(){t.scene.start("TitleScene")}})}),(0,s.default)(20,650,"Erase Data",this.container,this,function(){(0,a.default)(!0),alert("Data erased!")}),(0,s.default)(220,650,"Go Fullscreen",this.container,this,function(){window.document.body.requestFullscreen()}),(0,s.default)(c.SCREEN_WIDTH/2,550,"New Game",this.container,this,function(){t.cameras.main.fadeOut(1e3,0,0,0),t.scene.transition({target:"WorldScene",duration:1e3,moveBelow:!0,remove:!0})}),(0,s.default)(c.SCREEN_WIDTH/2,620,"Options",this.container,this,function(){t.turnOff(),t.scene.transition({target:"OptionsScene",duration:0,moveBelow:!0})})},e}(i.default.Scene),h=p;e.default=h},1492:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.unitsWithoutSquadSelector=void 0;var r=function(t){return Object.entries(t).filter(function(t){t[0];return null===t[1].squad}).map(function(t){t[0];return t[1]})};e.unitsWithoutSquadSelector=r},1493:function(t,e){t.exports=[{name:"Iron Sword",type:"sword",description:"A short sword",atk:"3",m_atk:"0",def:"0",m_def:"0",str:"0",int:"0",agi:"0",dex:"0",vit:"0",wis:"0",res_fire:"0",res_wind:"0",res_earth:"0",res_water:"0",res_light:"0",res_shadow:"0",atk_fire:"0",atk_wind:"0",atk_earth:"0",atk_water:"0",atk_light:"0",atk_hadow:"0"},{name:"Iron Armor",type:"light_armor",description:"A simple metal armor",atk:"0",m_atk:"0",def:"3",m_def:"0",str:"0",int:"0",agi:"0",dex:"0",vit:"0",wis:"0",res_fire:"0",res_wind:"0",res_earth:"0",res_water:"0",res_light:"0",res_shadow:"0",atk_fire:"0",atk_wind:"0",atk_earth:"0",atk_water:"0",atk_light:"0",atk_hadow:"0"},{name:"Iron Shield",type:"shield",description:"A simple metal shield",atk:"0",m_atk:"0",def:"4",m_def:"0",str:"0",int:"0",agi:"0",dex:"0",vit:"0",wis:"0",res_fire:"0",res_wind:"0",res_earth:"0",res_water:"0",res_light:"0",res_shadow:"0",atk_fire:"0",atk_wind:"0",atk_earth:"0",atk_water:"0",atk_light:"0",atk_hadow:"0"},{name:"Amulet",type:"accessory",description:"An amulet used in encantations",atk:"0",m_atk:"2",def:"0",m_def:"2",str:"0",int:"2",agi:"0",dex:"0",vit:"0",wis:"0",res_fire:"0",res_wind:"0",res_earth:"0",res_water:"0",res_light:"0",res_shadow:"0",atk_fire:"0",atk_wind:"0",atk_earth:"0",atk_water:"0",atk_light:"0",atk_hadow:"0"},{name:"Steel Sword",type:"sword",description:"A high quality sword",atk:"5",m_atk:"0",def:"0",m_def:"0",str:"0",int:"0",agi:"0",dex:"0",vit:"0",wis:"0",res_fire:"0",res_wind:"0",res_earth:"0",res_water:"0",res_light:"0",res_shadow:"0",atk_fire:"0",atk_wind:"0",atk_earth:"0",atk_water:"0",atk_light:"0",atk_hadow:"0"},{name:"Steel Armor",type:"light_armor",description:"A very resistant armor",atk:"0",m_atk:"0",def:"5",m_def:"0",str:"0",int:"0",agi:"0",dex:"0",vit:"0",wis:"0",res_fire:"0",res_wind:"0",res_earth:"0",res_water:"0",res_light:"0",res_shadow:"0",atk_fire:"0",atk_wind:"0",atk_earth:"0",atk_water:"0",atk_light:"0",atk_hadow:"0"},{name:"Steel Shield",type:"shield",description:"You can trust in this shield",atk:"0",m_atk:"0",def:"6",m_def:"0",str:"0",int:"0",agi:"0",dex:"0",vit:"0",wis:"0",res_fire:"0",res_wind:"0",res_earth:"0",res_water:"0",res_light:"0",res_shadow:"0",atk_fire:"0",atk_wind:"0",atk_earth:"0",atk_water:"0",atk_light:"0",atk_hadow:"0"},{name:"Baldar Sword",type:"sword",description:"One of the best swords that you can find",atk:"7",m_atk:"0",def:"0",m_def:"0",str:"2",int:"0",agi:"0",dex:"0",vit:"0",wis:"0",res_fire:"0",res_wind:"0",res_earth:"0",res_water:"0",res_light:"0",res_shadow:"0",atk_fire:"0",atk_wind:"0",atk_earth:"0",atk_water:"0",atk_light:"0",atk_hadow:"0"},{name:"Baldar Armor",type:"light_armor",description:"This armor can keep you safe",atk:"0",m_atk:"0",def:"8",m_def:"0",str:"2",int:"0",agi:"0",dex:"0",vit:"0",wis:"0",res_fire:"0",res_wind:"0",res_earth:"0",res_water:"0",res_light:"0",res_shadow:"0",atk_fire:"0",atk_wind:"0",atk_earth:"0",atk_water:"0",atk_light:"0",atk_hadow:"0"},{name:"Baldar Shield",type:"shield",description:"An unbreakable shield",atk:"0",m_atk:"0",def:"9",m_def:"0",str:"2",int:"0",agi:"0",dex:"0",vit:"0",wis:"0",res_fire:"0",res_wind:"0",res_earth:"0",res_water:"0",res_light:"0",res_shadow:"0",atk_fire:"0",atk_wind:"0",atk_earth:"0",atk_water:"0",atk_light:"0",atk_hadow:"0"},{name:"Oaken Staff",type:"staff",description:"A staff given to apprentice wizards",atk:"0",m_atk:"11",def:"0",m_def:"0",str:"0",int:"0",agi:"0",dex:"0",vit:"0",wis:"0",res_fire:"0",res_wind:"0",res_earth:"0",res_water:"0",res_light:"0",res_shadow:"0",atk_fire:"0",atk_wind:"0",atk_earth:"0",atk_water:"0",atk_light:"0",atk_hadow:"0"},{name:"Iron Spear",type:"spear",description:"A simple spear made of iron.",atk:"3",m_atk:"0",def:"0",m_def:"0",str:"0",int:"0",agi:"0",dex:"0",vit:"0",wis:"0",res_fire:"0",res_wind:"0",res_earth:"0",res_water:"0",res_light:"0",res_shadow:"0",atk_fire:"0",atk_wind:"0",atk_earth:"0",atk_water:"0",atk_light:"0",atk_hadow:"0"},{name:"Iron Helm",type:"helm",description:"No different then placing a cooking pot in the head.",atk:"0",m_atk:"0",def:"3",m_def:"0",str:"0",int:"0",agi:"0",dex:"0",vit:"0",wis:"0",res_fire:"0",res_wind:"0",res_earth:"0",res_water:"0",res_light:"0",res_shadow:"0",atk_fire:"0",atk_wind:"0",atk_earth:"0",atk_water:"0",atk_light:"0",atk_hadow:"0"},{name:"Bow",type:"bow",description:"A small bow.",atk:"3",m_atk:"0",def:"0",m_def:"0",str:"0",int:"0",agi:"0",dex:"0",vit:"0",wis:"0",res_fire:"0",res_wind:"0",res_earth:"0",res_water:"0",res_light:"0",res_shadow:"0",atk_fire:"0",atk_wind:"0",atk_earth:"0",atk_water:"0",atk_light:"0",atk_hadow:"0"},{name:"Robe",type:"robe",description:"A robe for apprentice mages.",atk:"3",m_atk:"0",def:"0",m_def:"0",str:"0",int:"0",agi:"0",dex:"0",vit:"0",wis:"0",res_fire:"0",res_wind:"0",res_earth:"0",res_water:"0",res_light:"0",res_shadow:"0",atk_fire:"0",atk_wind:"0",atk_earth:"0",atk_water:"0",atk_light:"0",atk_hadow:"0"},{name:"Leather Armor",type:"light_armor",description:"A simple leather armor.",atk:"3",m_atk:"0",def:"0",m_def:"0",str:"0",int:"0",agi:"0",dex:"0",vit:"0",wis:"0",res_fire:"0",res_wind:"0",res_earth:"0",res_water:"0",res_light:"0",res_shadow:"0",atk_fire:"0",atk_wind:"0",atk_earth:"0",atk_water:"0",atk_light:"0",atk_hadow:"0"}]},1494:function(t,e,n){"use strict";function r(t){return t.toLowerCase().split(" ").join("_")}Object.defineProperty(e,"__esModule",{value:!0}),e.idfy=r},1495:function(t,e,n){"use strict";function r(t){var e=(0,u.randomItem)(u.classes);return{id:t.toString(),name:(0,u.randomItem)(a.maleNames),class:e,movement:"plain",elem:"neutral",gender:(0,u.randomItem)(["male","female"]),equips:f[e],squad:null,lvl:1,hp:50,currentHp:50,exp:0,str:10,dex:10,int:10,style:{skinColor:(0,u.randomItem)(s.SKIN_COLORS),hairColor:(0,u.randomItem)(s.HAIR_COLORS),hair:(0,u.randomItem)(o.HAIR_STYLES),displayHat:(0,u.randomItem)([!0,!1])},attacks:(0,c.getUnitAttacks)(e)}}function i(t){throw new Error("Not implemented.")}Object.defineProperty(e,"__esModule",{value:!0}),e.fromJSON=r,e.toJSON=i;var o=n(133),a=n(1496),u=n(132),s=n(134),c=n(288),f={mage:{ornament:"amulet",chest:"robe",mainHand:"oaken_staff",offHand:"none",head:"wiz_hat"},fighter:{ornament:"amulet",chest:"iron_armor",mainHand:"iron_sword",offHand:"iron_shield",head:"iron_helm"},archer:{ornament:"amulet",chest:"leather_armor",mainHand:"bow",offHand:"none",head:"archer_hat"}}},1496:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.maleNames=void 0;var r=["Lydan","Syrin","Ptorik","Joz","Varog","Gethrod","Hezra","Feron","Ophni","Colborn","Fintis","Gatlin","Jinto","Hagalbar","Krinn","Lenox","Revvyn","Hodus","Dimian","Paskel","Kontas","Weston","Azamarr","Jather","Tekren","Jareth","Adon","Zaden","Eune","Graff","Tez","Jessop","Gunnar","Pike","Domnhar","Baske","Jerrick","Mavrek","Riordan","Wulfe","Straus","Tyvrik","Henndar","Favroe","Whit","Jaris","Renham","Kagran","Lassrin","Vadim","Arlo","Quintis","Vale","Caelan","Yorjan","Khron","Ishmael","Jakrin","Fangar","Roux","Baxar","Hawke","Gatlen","Barak","Nazim","Kadric","Paquin","Kent","Moki","Rankar","Lothe","Ryven","Clawsen","Pakker","Embre","Cassian","Verssek","Dagfinn","Ebraheim","Nesso","Eldermar","Rivik","Rourke","Barton","Hemm","Sarkin","Blaiz","Talon","Agro","Zagaroth","Turrek","Esdel","Lustros","Zenner","Baashar","Dagrod","Gentar","Feston","Khastan","Prishnak","Magnus","Leia","Dio","Asnabel","Liedel","Hugo"];e.maleNames=r},1497:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n(134),i=n(287),o=function(t){return t&&t.__esModule?t:{default:t}}(n(582)),a=function(t){t.clearAnimations(),t.add.tween({targets:t.leftFoot,x:r.LEFT_FOOT_FRONT_X-20,yoyo:!0,rotation:-.2,repeat:-1,duration:500}),t.add.tween({targets:t.rightFoot,x:r.RIGHT_FOOT_FRONT_X+10,yoyo:!0,rotation:-.2,repeat:-1,duration:500}),t.add.tween({targets:t.leftHand,x:r.LEFT_HAND_FRONT_X+10,yoyo:!0,rotation:-.2,repeat:-1,duration:500}),t.add.tween({targets:t.mainHandContainer,x:r.RIGHT_HAND_FRONT_X-10,yoyo:!0,rotation:-.2,repeat:-1,duration:500}),t.add.tween({targets:t.charaWrapper,y:r.CHARA_WRAPPER_Y-20,yoyo:!0,repeat:-1,duration:100})},u=function(t){var e,n,r,a;t.clearAnimations(),(0,o.default)(t)(t.charaWrapper,-12,100),t.add.tween({targets:t.leftFoot,x:(0,i.maybeZero)(null===(e=t.leftFoot)||void 0===e?void 0:e.x)-20,yoyo:!0,rotation:-.2,repeat:-1,duration:500}),t.add.tween({targets:t.rightFoot,x:(0,i.maybeZero)(null===(n=t.rightFoot)||void 0===n?void 0:n.x)+10,yoyo:!0,rotation:-.2,repeat:-1,duration:500}),t.add.tween({targets:t.leftHand,x:(0,i.maybeZero)(null===(r=t.leftHand)||void 0===r?void 0:r.x)+10,yoyo:!0,rotation:-.2,repeat:-1,duration:500}),t.add.tween({targets:t.mainHandContainer,x:(0,i.maybeZero)(null===(a=t.mainHandContainer)||void 0===a?void 0:a.x)-10,yoyo:!0,rotation:-.2,repeat:-1,duration:500})},s=function(t){t.front?a(t):u(t)};e.default=s},1498:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n(65),i=n(134),o=function(t){if(t.tweens.killAll(),!(t.head&&t.trunk&&t.leftHand&&t.rightHand&&t.mainHandContainer&&t.offHandContainer&&t.leftFoot&&t.rightFoot&&t.charaWrapper))throw new Error(r.INVALID_STATE);t.head.rotation=0,t.leftFoot.rotation=0,t.leftHand.rotation=0,t.rightHand.rotation=0,t.rightFoot.rotation=0,t.mainHandContainer.rotation=0,t.offHandContainer.rotation=0,t.trunk.rotation=0,t.front?(t.charaWrapper.x=i.CHARA_WRAPPER_X,t.charaWrapper.y=i.CHARA_WRAPPER_Y,t.head.x=i.HEAD_FRONT_X,t.head.y=i.HEAD_FRONT_Y,t.leftFoot.x=i.LEFT_FOOT_FRONT_X,t.leftFoot.y=i.LEFT_FOOT_FRONT_Y,t.rightFoot.x=i.RIGHT_FOOT_FRONT_X,t.rightFoot.y=i.RIGHT_FOOT_FRONT_Y,t.leftHand.x=0,t.leftHand.y=0,t.rightHand.x=0,t.rightHand.y=0,t.mainHandContainer.x=i.RIGHT_HAND_FRONT_X,t.mainHandContainer.y=i.RIGHT_HAND_FRONT_Y,t.offHandContainer.x=i.LEFT_HAND_FRONT_X,t.offHandContainer.y=i.LEFT_HAND_FRONT_Y,"iron_spear"===t.unit.equips.mainHand&&t.leftHand.setPosition(i.LEFT_HAND_FRONT_X+5,i.LEFT_HAND_FRONT_Y+10)):(t.charaWrapper.x=i.CHARA_WRAPPER_X,t.charaWrapper.y=i.CHARA_WRAPPER_Y,t.head.x=i.HEAD_BACK_X,t.head.y=i.HEAD_BACK_Y,t.leftFoot.x=i.LEFT_FOOT_BACK_X,t.leftFoot.y=i.LEFT_FOOT_BACK_Y,t.rightFoot.x=i.RIGHT_FOOT_BACK_X,t.rightFoot.y=i.RIGHT_FOOT_BACK_Y,t.leftHand.x=i.LEFT_HAND_BACK_X,t.leftHand.y=i.LEFT_HAND_BACK_Y,t.mainHandContainer.x=i.RIGHT_HAND_BACK_X,t.mainHandContainer.y=i.RIGHT_HAND_BACK_Y,t.offHandContainer.x=i.LEFT_HAND_BACK_X,t.offHandContainer.y=i.LEFT_HAND_BACK_Y)};e.default=o},1499:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n(134),i=function(t){return t&&t.__esModule?t:{default:t}}(n(582)),o=function(t){t.clearAnimations(),t.tweens.add({targets:t.head,y:r.HEAD_FRONT_Y-2,duration:1600,yoyo:!0,repeat:-1}),t.tweens.add({targets:t.trunk,y:r.TRUNK_FRONT_Y+2,duration:1600,yoyo:!0,repeat:-1}),"iron_spear"===t.unit.equips.mainHand?t.tweens.add({targets:t.offHandContainer,y:r.LEFT_HAND_FRONT_Y,duration:1600,yoyo:!0,repeat:-1}):t.tweens.add({targets:t.offHandContainer,y:r.LEFT_HAND_FRONT_Y+8,duration:1600,yoyo:!0,repeat:-1}),t.tweens.add({targets:t.mainHandContainer,y:r.RIGHT_HAND_FRONT_Y-4,duration:1600,yoyo:!0,repeat:-1})},a=function(t){t.clearAnimations();var e=(0,i.default)(t);e(t.head,-2,1600),e(t.trunk,2,1600),e(t.leftHand,4,1600),e(t.mainHandContainer,-4,1600)},u=function(t){t.front?o(t):a(t)};e.default=u},1500:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=function(t,e,n){t.parent.tweens.add({targets:null===t||void 0===t?void 0:t.container,rotation:t.front?-.2:.2,yoyo:!n,duration:n?100:200,onComplete:function(){n&&t.die()}}),t.tweens.add({targets:null===t||void 0===t?void 0:t.container,alpha:0,yoyo:!0,repeat:2,duration:20});var r=t.parent.add.text(-25,0,e.toString(),{fontSize:48});r.setShadow(2,2,"#000"),r.setStroke("#000000",2),t.container.add(r),t.parent.tweens.add({targets:r,y:-200,alpha:0,duration:3e3,ease:"Expo",onComplete:function(){r.destroy()}})};e.default=r},1501:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=function(t,e){var n,r;t.clearAnimations(),t.parent.tweens.add({targets:null===t||void 0===t?void 0:t.mainHandContainer,rotation:t.front?1.9:-1.9,yoyo:!0,x:((null===(n=t.mainHandContainer)||void 0===n?void 0:n.x)||0)+(t.front?30:-60),Y:((null===(r=t.mainHandContainer)||void 0===r?void 0:r.y)||0)-20,duration:250,ease:"Expo",onComplete:function(){e()}}),t.sound.add("sword_hit").play()};e.default=r},1502:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=function(t,e){var n,r,i,o;t.clearAnimations(),t.parent.tweens.add({targets:null===t||void 0===t?void 0:t.mainHandContainer,yoyo:!0,x:((null===(n=t.mainHandContainer)||void 0===n?void 0:n.x)||0)+(t.front?-30:30),y:((null===(r=t.mainHandContainer)||void 0===r?void 0:r.y)||0)-20,duration:500,ease:"ExpoOut",onComplete:function(){e()}}),t.parent.tweens.add({targets:null===t||void 0===t?void 0:t.offHandContainer,yoyo:!0,rotation:t.front?-1.2:.5,x:((null===(i=t.mainHandContainer)||void 0===i?void 0:i.y)||0)+20,Y:((null===(o=t.mainHandContainer)||void 0===o?void 0:o.y)||0)-5,duration:500,ease:"ExpoOut"}),t.sound.add("sword_hit").play()};e.default=r},1503:function(t,e,n){"use strict";function r(t,e){var n,r,i,s,c;void 0===e&&(e=!1);var f=t.unit.style,l=f.skinColor,p=f.hair,h=f.hairColor,d=function(e,n){var r,i=t.add.image(e,n,"foot");return null===(r=t.container)||void 0===r||r.add(i),i},y=function(e,n){var r,i=t.add.image(e,n,"hand");return i.setTint(l),null===(r=t.container)||void 0===r||r.add(i),i};t.head=function(e,n){var r,i=t.add.image(e,n,"head");return i.setTint(l),null===(r=t.container)||void 0===r||r.add(i),i}(o.HEAD_FRONT_X,o.HEAD_FRONT_Y),t.hair=function(e,n){var r;if(!a(t))return null;var i=t.add.image(e,n,p);return i.setTint(h),null===(r=t.container)||void 0===r||r.add(i),i}(o.HEAD_FRONT_X,o.HEAD_FRONT_Y),t.hat=function(e,n){var r;if(!u(t))return null;var i=t.add.image(e,n,"equips/"+t.unit.equips.head);return null===(r=t.container)||void 0===r||r.add(i),i}(o.HEAD_FRONT_X,o.HEAD_FRONT_Y),e||(t.leftFoot=d(o.LEFT_FOOT_FRONT_X,o.LEFT_FOOT_FRONT_Y),t.rightFoot=d(o.RIGHT_FOOT_FRONT_X,o.RIGHT_FOOT_FRONT_Y),t.leftHand=y(0,0),t.trunk=function(e,n,r){var i,o=t.add.image(n,r,"trunk_"+e);return null===(i=t.container)||void 0===i||i.add(o),o}(t.unit.class,o.TRUNK_FRONT_X,o.TRUNK_FRONT_Y),t.rightHand=y(0,0),t.mainHandContainer=t.add.container(o.RIGHT_HAND_FRONT_X,o.RIGHT_HAND_FRONT_Y),t.offHandContainer=t.add.container(o.LEFT_HAND_FRONT_X,o.LEFT_HAND_FRONT_Y),null===(n=t.container)||void 0===n||n.add(t.mainHandContainer),null===(r=t.container)||void 0===r||r.add(t.offHandContainer),t.mainHandContainer.add(t.rightHand),t.offHandContainer.add(t.leftHand),"mage"===t.unit.class?(t.rightHandEquip=t.add.image(23,17,"equips/"+t.unit.equips.mainHand),t.rightHandEquip.setScale(-.3,.3),t.rightHandEquip.setOrigin(.45,.7),t.rightHandEquip.setRotation(-.2),t.rightHandEquip.setPosition(3,17),t.mainHandContainer.add(t.rightHandEquip),t.mainHandContainer.sendToBack(t.rightHandEquip)):"fighter"===t.unit.class?(t.rightHandEquip=t.add.image(23,17,"equips/"+t.unit.equips.mainHand),t.rightHandEquip.setScale(.2),t.rightHandEquip.setOrigin(1,1),t.mainHandContainer.add(t.rightHandEquip),t.mainHandContainer.sendToBack(t.rightHandEquip)):"archer"===t.unit.class&&(t.leftHandEquip=t.add.image(0,0,"equips/"+t.unit.equips.mainHand),t.offHandContainer.add(t.leftHandEquip),t.offHandContainer.sendToBack(t.leftHandEquip),t.leftHand.setPosition(5,0),t.offHandContainer.sendToBack(t.leftHandEquip)),t.container.sendToBack(t.offHandContainer),null===(i=t.container)||void 0===i||i.bringToTop(t.head),t.hair&&(null===(s=t.container)||void 0===s||s.bringToTop(t.hair)),t.hat&&(null===(c=t.container)||void 0===c||c.bringToTop(t.hat)),t.container.bringToTop(t.mainHandContainer))}function i(t,e){function n(e,n){var r,i=t.add.image(e,n,"foot");return i.scaleX=-1,i.rotation=.6,null===(r=t.container)||void 0===r||r.add(i),i}function r(e,n){var r,i=t.add.image(e,n,"hand");return i.setTint(d),null===(r=t.container)||void 0===r||r.add(i),i}var i,s,c,f,l,p;void 0===e&&(e=!1);var h=t.unit.style,d=h.skinColor,y=h.hair,v=h.hairColor;t.head=function(e,n){var r,i=t.add.image(e,n,"back_head");return i.setTint(d),null===(r=t.container)||void 0===r||r.add(i),i}(o.HEAD_BACK_X,o.HEAD_BACK_Y),t.hair=function(e,n){var r;if(!a(t))return null;var i=t.add.image(e,n,"back_"+y);return i.setTint(v),null===(r=t.container)||void 0===r||r.add(i),i}(o.HEAD_FRONT_X,o.HEAD_FRONT_Y),t.hat=function(e,n){var r;if(!u(t))return null;var i=t.add.image(e,n,"equips/back_"+t.unit.equips.head);return null===(r=t.container)||void 0===r||r.add(i),i}(o.HEAD_BACK_X,o.HEAD_BACK_Y),e||(t.leftFoot=n(o.LEFT_FOOT_BACK_X,o.LEFT_FOOT_BACK_Y),t.rightFoot=n(o.RIGHT_FOOT_BACK_X,o.RIGHT_FOOT_BACK_Y),t.leftHand=r(0,0),t.trunk=function(e,n,r){var i,o=t.add.image(n,r,"trunk_back_"+e);return null===(i=t.container)||void 0===i||i.add(o),o}(t.unit.class,o.TRUNK_BACK_X,o.TRUNK_BACK_Y),t.rightHand=r(0,0),t.mainHandContainer=t.add.container(o.RIGHT_HAND_BACK_X,o.RIGHT_HAND_BACK_Y),t.offHandContainer=t.add.container(o.LEFT_HAND_BACK_X,o.LEFT_HAND_BACK_Y),null===(i=t.container)||void 0===i||i.add(t.mainHandContainer),null===(s=t.container)||void 0===s||s.add(t.offHandContainer),t.mainHandContainer.add(t.rightHand),t.offHandContainer.add(t.leftHand),"mage"===t.unit.class?(t.rightHandEquip=t.add.image(13,17,"equips/"+t.unit.equips.mainHand),t.rightHandEquip.setScale(-.3,.3),t.rightHandEquip.setOrigin(.45,.7),t.rightHandEquip.setRotation(-.2),t.rightHandEquip.setPosition(3,17),t.mainHandContainer.add(t.rightHandEquip),t.mainHandContainer.sendToBack(t.rightHandEquip)):"fighter"===t.unit.class?(t.rightHandEquip=t.add.image(23,17,"equips/"+t.unit.equips.mainHand),t.rightHandEquip.setScale(.2),t.rightHandEquip.setOrigin(1,1),t.mainHandContainer.add(t.rightHandEquip),t.mainHandContainer.sendToBack(t.rightHandEquip),t.container.bringToTop(t.mainHandContainer)):"archer"===t.unit.class&&(t.leftHandEquip=t.add.image(0,20,"equips/"+t.unit.equips.mainHand),t.leftHandEquip.rotation=1,t.offHandContainer.add(t.leftHandEquip),t.offHandContainer.sendToBack(t.leftHandEquip),t.leftHand.setPosition(5,0),t.offHandContainer.sendToBack(t.leftHandEquip),t.offHandContainer.sendToBack(t.leftHandEquip)),t.container.sendToBack(t.offHandContainer),null===(c=t.container)||void 0===c||c.bringToTop(t.head),t.hair&&(null===(f=t.container)||void 0===f||f.bringToTop(t.hair)),t.hat&&(null===(l=t.container)||void 0===l||l.bringToTop(t.hat)),null===(p=t.container)||void 0===p||p.bringToTop(t.mainHandContainer))}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=n(134),a=function(t){return!t.unit.style.displayHat||"none"===t.unit.equips.head},u=function(t){return t.unit.style.displayHat&&"none"!==t.unit.equips.head},s=function(t,e){void 0===e&&(e=!1),t.front?r(t,e):i(t,e)};e.default=s},1504:function(t,e,n){"use strict";function r(t){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t){return t&&t.__esModule?t:{default:t}}function o(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return o=function(){return t},t}function a(t){if(t&&t.__esModule)return t;if(null===t||"object"!==r(t)&&"function"!=typeof t)return{default:t};var e=o();if(e&&e.has(t))return e.get(t);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){var u=i?Object.getOwnPropertyDescriptor(t,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=t[a]}return n.default=t,e&&e.set(t,n),n}Object.defineProperty(e,"__esModule",{value:!0}),e.EditSquadScene=void 0;var u=a(n(25)),s=n(32),c=i(n(1505)),f=a(n(1506)),l=i(n(66)),p=i(n(290)),h=i(n(1507)),d=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),y=function(t){function e(){var e=t.call(this,"EditSquadScene")||this;return e.unitListScene=null,e.boardScene=null,e.unitDetails=null,console.log("EditSquadScene constructor. this:",e),e}return d(e,t),e.prototype.create=function(t){var e=t.squad;(0,p.default)(this),this.renderBoard(e),this.renderUnitList(),this.renderReturnBtn()},e.prototype.renderBoard=function(t){var e=this;this.boardScene=new f.default(t),this.scene.add(f.BOARD_SCENE_KEY,this.boardScene,!0),this.boardScene.makeUnitsClickable(function(t){var n;null===(n=e.unitDetails)||void 0===n||n.destroy(),e.unitDetails=(0,h.default)(0,650,e,t.unit.id)})},e.prototype.renderUnitList=function(){var t=this;this.unitListScene=new c.default(50,40,6),this.unitListScene.onDrag=function(e,n,r){return t.onDragFromList(e,n,r)},this.unitListScene.onDragEnd=function(e,n,r,i){return t.onDragEndFromList(e,n,r,i)},this.scene.add("UnitListScene",this.unitListScene,!0)},e.prototype.onDragEndFromList=function(t,e,n,r){var i,o,a,u,c,f=null===(i=this.boardScene)||void 0===i?void 0:i.findTileByXY(e,n),l=this.boardScene;if(l)if(f){var p=(0,s.addUnitToSquad)(t,l.squad,f.boardX,f.boardY),h=Object.values(l.squad.members).find(function(t){return t.x===f.boardX&&t.y===f.boardY});if(l.squad=p,null===(o=this.unitListScene)||void 0===o||o.removeUnit(t),l.placeUnit({member:p.members[t.id],fromOutside:!0}),h){var d=l.unitList.find(function(t){return t.unit.id===h.id});this.tweens.add({targets:null===d||void 0===d?void 0:d.container,y:((null===(a=null===d||void 0===d?void 0:d.container)||void 0===a?void 0:a.y)||0)-200,alpha:0,ease:"Cubic",duration:400,repeat:0,paused:!1,yoyo:!1})}l.highlightTile(f)}else null===(u=this.unitListScene)||void 0===u||u.returnToOriginalPosition(t),null===(c=this.unitListScene)||void 0===c||c.scaleDown(r),l.tiles.forEach(function(t){return t.sprite.clearTint()})},e.prototype.onDragFromList=function(t,e,n){var r=this.boardScene;if(r){r.tiles.forEach(function(t){return t.sprite.clearTint()});var i=r.findTileByXY(e,n);i&&i.sprite.setTint(3407752)}},e.prototype.renderReturnBtn=function(){var t=this;(0,l.default)(1100,100,"Return to title",this.add.container(0,0),this,function(){t.scene.transition({target:"TitleScene",duration:0,moveBelow:!0}),t.destroyChildren()}),(0,l.default)(1100,200,"Return to List",this.add.container(0,0),this,function(){t.destroyChildren(),t.scene.transition({target:"ListSquadsScene",duration:0,moveBelow:!0})})},e.prototype.destroyChildren=function(){var t,e;null===(t=this.boardScene)||void 0===t||t.destroy(),null===(e=this.unitListScene)||void 0===e||e.destroy()},e}(u.Scene);e.EditSquadScene=y},1505:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=function(t){return t&&t.__esModule?t:{default:t}}(n(25)),i=n(133),o=n(32),a=n(79),u=n(65),s=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),c=function(t){function e(e,n,r){var i=t.call(this,"UnitListScene")||this;return i.x=e,i.y=n,i.itemsPerPage=r,i.controls=[],i.onUnitClick=null,i.onDrag=null,i.onDragEnd=null,i.rows=[],i.page=0,i}return s(e,t),e.prototype.create=function(){this.render(),this.renderControls()},e.prototype.makeBackground=function(){var t=new r.default.Geom.Rectangle(-50,-30,200,90),e=this.add.graphics({fillStyle:{color:255}});return e.alpha=.2,e.fillRectShape(t),e},e.prototype.destroy=function(){var t=this;this.rows.forEach(function(e){return t.scene.remove(t.makeUnitKey(e.chara.unit))}),this.scene.remove()},e.prototype.renderControls=function(){var t=this;this.controls.forEach(function(t){return t.destroy()});var e=(0,i.getUnitsWithoutSquad)((0,o.getUnits)()),n=Object.keys(e).length,r=this.add.image(this.x+100,this.y+580,"arrow_right");n<this.itemsPerPage||this.itemsPerPage*(this.page+1)>=n?r.setAlpha(.5):(r.setInteractive(),r.on("pointerdown",function(e){t.nextPage()}));var a=this.add.image(this.x,this.y+580,"arrow_right");a.setScale(-1,1),0===this.page?a.setAlpha(.5):(a.setInteractive(),a.on("pointerdown",function(e){t.prevPage()})),this.controls=[r,a]},e.prototype.nextPage=function(){this.page=this.page+1,this.clearUnitList(),this.render(),this.renderControls()},e.prototype.prevPage=function(){this.page=this.page-1,this.clearUnitList(),this.render(),this.renderControls()},e.prototype.clearUnitList=function(){var t=this;this.rows.forEach(function(e){t.scene.remove(e.chara.key),t.children.remove(e.container)}),this.rows=[]},e.prototype.getUnitsToRender=function(){var t=(0,i.getUnitsWithoutSquad)((0,o.getUnits)());return Object.values(t).slice(this.page*this.itemsPerPage,this.page*this.itemsPerPage+this.itemsPerPage)},e.prototype.render=function(){var t=this,e=this.getUnitsToRender();console.log("....",e),e.forEach(function(e,n){t.renderUnitListItem(e,n)})},e.prototype.handleUnitClick=function(t){this.onUnitClick&&(console.log("An event to handle unit click has been defined",t),this.onUnitClick(t))},e.prototype.handleUnitDrag=function(t,e,n,r){if(this.scaleUp(r),this.scene.bringToTop(r.key),this.onDrag)return this.onDrag(t,e,n)},e.prototype.handleUnitDragEnd=function(t,e,n,r){this.renderControls(),this.onDragEnd&&this.onDragEnd(t,e,n,r)},e.prototype.renderUnitListItem=function(t,e){var n=this.getRowPosition(e),i=n.charaX,o=n.charaY,u=this.makeUnitKey(t),s=this.add.container(i,o),c=this.onUnitClick?this.handleUnitClick.bind(this):void 0,f=this.onDrag?this.handleUnitDrag.bind(this):void 0,l=this.onDragEnd?this.handleUnitDragEnd.bind(this):void 0,p=new r.default.Geom.Rectangle(-50,-30,200,90),h=this.makeBackground();h.setInteractive(p,r.default.Geom.Rectangle.Contains),s.add(h),c&&h.on("pointerdown",function(){c(t)});var d=new a.Chara(u,this,t,i,o,.5,!0);f&&l&&d.enableDrag(f.bind(this),l.bind(this));var y=this.add.text(40,30,t.name);return s.add(y),this.rows.push({chara:d,text:y,container:s}),d},e.prototype.getRowPosition=function(t){return{charaX:this.x,charaY:this.y+100*t}},e.prototype.getUnitIndex=function(t){return this.rows.findIndex(function(e){return e.chara.unit.id===t.id})},e.prototype.returnToOriginalPosition=function(t){var e=this,n=this.getUnitIndex(t),r=this.rows.find(function(n){return n.chara.key===e.makeUnitKey(t)});if(!r)return(0,u.error)(u.INVALID_STATE);this.reposition(r,n)},e.prototype.scaleUp=function(t){this.tweens.add({targets:t.container,scale:1,duration:400,ease:"Cubic",repeat:0,paused:!1,yoyo:!1})},e.prototype.scaleDown=function(t){this.tweens.add({targets:t.container,scale:.5,duration:400,ease:"Cubic",repeat:0,paused:!1,yoyo:!1})},e.prototype.makeUnitKey=function(t){return"unit-list-"+t.id},e.prototype.reposition=function(t,e){var n=t.chara,r=t.container,i=this.getRowPosition(e),o=i.charaX,a=i.charaY;this.tweens.add({targets:n.container,x:o,y:a,duration:600,ease:"Cubic",repeat:0,paused:!1,yoyo:!1}),this.tweens.add({targets:r,x:o,y:a,duration:600,ease:"Cubic",repeat:0,paused:!1,yoyo:!1})},e.prototype.removeUnit=function(t){var e=this,n=function(e){return e.chara.unit.id===t.id};this.rows.filter(n).forEach(function(t){e.scene.remove(t.chara),e.children.remove(t.container)}),this.rows=this.rows.filter(function(t){return!n(t)}),this.rows.forEach(function(t,n){return e.reposition(t,n)});var r=this.getUnitsToRender();if(!(r.length<1)){var i=r[r.length-1];if(!this.rows.some(function(t){return t.chara.unit.id===i.id})){var o=this.renderUnitListItem(i,this.itemsPerPage-1);o.container&&o.container.setPosition(o.container.x,o.container.y+300);var a=this.rows[this.rows.length-1];a&&this.reposition(a,this.itemsPerPage-1)}}},e}(r.default.Scene),f=c;e.default=f},1506:function(t,e,n){"use strict";function r(t){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return i=function(){return t},t}function o(t){var e=(0,c.cartesianToIsometric)(t.x,t.y);return{x:e.x,y:e.y-230}}function a(t){return function(e){var n=Math.abs(e.sprite.x-t.x),r=Math.abs(e.sprite.y-t.y);return n/l.tileWidth+r/l.tileHeight<1}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.BOARD_SCENE_KEY=void 0;var u=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==r(t)&&"function"!=typeof t)return{default:t};var e=i();if(e&&e.has(t))return e.get(t);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){var u=o?Object.getOwnPropertyDescriptor(t,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=t[a]}return n.default=t,e&&e.set(t,n),n}(n(25)),s=n(79),c=n(289),f=n(32),l=n(78),p=n(65),h=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),d="BoardScene";e.BOARD_SCENE_KEY=d;var y=function(t){function e(e){var n=t.call(this,d)||this;return n.squad=e,n.tiles=[],n.unitList=[],n.onUnitDragEnd=function(t,e,r){var i,a=n.squad,u=n.findTileByXY(e,r),s=a.members[t.id];if(!s)throw new Error("Invalid state. Unit should be in board object.");if(u&&function(t){return s.x!==t.boardX||s.y!==t.boardY}(u))n.changeUnitPositionInBoard({unit:t,x:u.boardX,y:u.boardY});else{var c=o(s),f=c.x,l=c.y;n.tweens.add({targets:null===(i=n.getChara(t))||void 0===i?void 0:i.container,x:f,y:l,ease:"Cubic",duration:400,repeat:0,paused:!1,yoyo:!1}),n.tiles.forEach(function(t){t.boardX===s.x&&t.boardY===s.y?n.highlightTile(t):t.sprite.clearTint()})}},n.onUnitDrag=function(t,e,r){var i=n.findTileByXY(e,r);i&&n.highlightTile(i),n.scene.bringToTop(n.makeUnitKey(t))},console.log("boardScene constructor"),n}return h(e,t),e.prototype.create=function(){this.tiles=this.placeTiles({mapWidth:3,mapHeight:3}),this.placeUnits()},e.prototype.findTileByXY=function(t,e){return this.tiles.find(a({x:t,y:e+100}))},e.prototype.changeUnitPositionInBoard=function(t){var e=this,n=t.unit,r=t.x,i=t.y,o=(0,f.changeSquadMemberPosition)(this.squad.members[n.id],this.squad,r,i);this.squad.members=o.members,o.updatedUnits.forEach(function(t){e.moveUnitToBoardTile(t.id,t.x,t.y)})},e.prototype.moveUnitToBoardTile=function(t,e,n){var r=this,i=this.unitList.find(function(e){return e.unit.id===t});if(i){var a=i.unit,u=o(this.squad.members[a.id]);this.tweens.add({targets:null===i||void 0===i?void 0:i.container,x:u.x,y:u.y,ease:"Cubic",duration:400,repeat:0,paused:!1,yoyo:!1}).on("complete",function(){r.sortUnitsByDepth()})}},e.prototype.getChara=function(t){var e=this;return this.unitList.find(function(n){return n.key===e.makeUnitKey(t)})},e.prototype.placeTiles=function(t){for(var e=this,n=t.mapWidth,r=t.mapHeight,i=[[]],o=[],u=0;u<n;u++){i[u]=[];for(var s=0;s<r;s++)i[u][s]=null}return i.forEach(function(t,n){t.forEach(function(t,r){var i=(0,c.cartesianToIsometric)(r,n),a=i.x,u=i.y,s=e.add.image(a,u,"tile");s.depth=u,s.setInteractive(),o.push({sprite:s,x:a,y:u,boardX:r+1,boardY:n+1})})}),this.input.on("pointerdown",function(t){e.tiles.filter(a(t)).forEach(function(t){})}),o},e.prototype.addUnitToBoard=function(t){var e=o(t),n=e.x,r=e.y,i=(0,f.getUnit)(t.id);if(!i)throw new Error("Invalid member supplied.");var a=this.makeUnitKey(i),u=new s.Chara(a,this,i,n,r,1,!0);return u.enableDrag(this.onUnitDrag.bind(this),this.onUnitDragEnd.bind(this)),u},e.prototype.makeUnitsClickable=function(t){var e=this;this.unitList.map(function(n){n.onClick(function(r){var i=Object.values(e.squad.members).find(function(t){return t.id===n.unit.id});if(!i)throw new Error(p.INVALID_STATE);var o=e.tiles.find(function(t){return t.boardX===i.x&&t.boardY===i.y});o&&e.highlightTile(o),t(r)})})},e.prototype.highlightTile=function(t){this.tiles.forEach(function(t){return t.sprite.clearTint()}),t.sprite.setTint(52224)},e.prototype.placeUnits=function(){var t=this,e=this.squad;Object.values(e.members).forEach(function(e){return t.placeUnit({member:e,fromOutside:!1})})},e.prototype.placeUnit=function(t){var e=t.member,n=t.fromOutside,r=this.addUnitToBoard(e);this.unitList=this.unitList.concat([r]),this.sortUnitsByDepth(),n&&(this.squad.members[e.id]=e)},e.prototype.makeUnitKey=function(t){return"board-"+t.id},e.prototype.sortUnitsByDepth=function(){this.unitList.forEach(function(t){var e;return t.container.setDepth(null===(e=t.container)||void 0===e?void 0:e.y)}),this.unitList.sort(function(t,e){var n,r;return((null===(n=t.container)||void 0===n?void 0:n.depth)||0)-((null===(r=e.container)||void 0===r?void 0:r.depth)||0)}).forEach(function(t){return t.scene.bringToTop()})},e.prototype.destroy=function(){var t=this;this.tiles.forEach(function(t){return t.sprite.destroy()}),this.unitList.forEach(function(e){return t.scene.remove(t.makeUnitKey(e.unit))}),this.scene.remove()},e}(u.Scene),v=y;e.default=v},1507:function(t,e,n){"use strict";function r(t){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return i=function(){return t},t}function o(t,e,n,r){var i=n.add.container(),o=n.add.image(t,e,"panel");return i.add(o),o.setOrigin(0,0),o.displayWidth=1260,o.displayHeight=50,a(t,e,i,n,u.getUnit(r)),i}function a(t,e,n,r,i){var o=i.name,a=i.lvl,u=i.exp,c=i.currentHp,l=i.hp;f(n,r)(t+10,e+10,[o,s.unitClassLabels[i.class],"Lvl "+a,"Exp "+u,"","","",c+" / "+l+" HP"])}Object.defineProperty(e,"__esModule",{value:!0}),e.default=o;var u=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==r(t)&&"function"!=typeof t)return{default:t};var e=i();if(e&&e.has(t))return e.get(t);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){var u=o?Object.getOwnPropertyDescriptor(t,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=t[a]}return n.default=t,e&&e.set(t,n),n}(n(32)),s=n(133),c=function(t){return t&&t.__esModule?t:{default:t}}(n(106)),f=function(t,e){return function(n,r,i){return i.forEach(function(i,o){return l(t,e)(n+150*o,r,i)})}},l=function(t,e){return function(n,r,i){return(0,c.default)(n,r,i,t,e)}}},1508:function(t,e,n){"use strict";function r(t){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t){return t&&t.__esModule?t:{default:t}}function o(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return o=function(){return t},t}function a(t){if(t&&t.__esModule)return t;if(null===t||"object"!==r(t)&&"function"!=typeof t)return{default:t};var e=o();if(e&&e.has(t))return e.get(t);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){var u=i?Object.getOwnPropertyDescriptor(t,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=t[a]}return n.default=t,e&&e.set(t,n),n}Object.defineProperty(e,"__esModule",{value:!0}),e.ListSquadsScene=void 0;var u=a(n(25)),s=a(n(32)),c=i(n(583)),f=i(n(66)),l=i(n(291)),p=n(78),h=i(n(106)),d=i(n(135)),y=i(n(290)),v=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),m=function(t){function e(){var e=t.call(this,"ListSquadsScene")||this;return e.boardScenes=[],e.controls=[],e.page=0,e.itemsPerPage=16,e}return v(e,t),e.prototype.create=function(){(0,y.default)(this);var t=this.getSquads();this.renderSquadList(t),this.renderControls(),this.selectSquad(t[0])},e.prototype.getSquads=function(){return Object.values(s.getSquads()).slice(this.page*this.itemsPerPage,this.page*this.itemsPerPage+this.itemsPerPage)},e.prototype.renderSquadList=function(t){var e=this;this.formatList(t,[]).forEach(function(t,n){return t.forEach(function(t,r){return e.renderBoard(t,r,n)})})},e.prototype.formatList=function(t,e){if(t.length<=4)return e.concat([t]);var n=t.slice(0,4);return this.formatList(t.slice(4,t.length),e.concat([n]))},e.prototype.renderSelectSquadInfo=function(t){var e=this,n=this.add.container(0,670),r=(0,l.default)(0,0,p.SCREEN_WIDTH,100,n,this);n.add([r]),(0,h.default)(10,10,t.name,n,this),(0,f.default)(200,10,"Edit",n,this,function(){e.editSquad(t)}),(0,f.default)(1e3,10,"Disband Squad",n,this,function(){s.disbandSquad(t.id),n.destroy(),e.refresh()})},e.prototype.renderBoard=function(t,e,n){var r=this,i=250*e,o=130*n,a=new c.default(t,i,o,.3);this.scene.add("board-squad-"+t.id,a,!0),a.onClick(function(t){r.selectSquad(t)}),this.boardScenes.push(a)},e.prototype.squadSceneIO=function(t,e){var n=d.default.find(function(e){return e.squad.id===t})(this.boardScenes);d.default.map(function(t){e(t)})(n)},e.prototype.selectSquad=function(t){var e=this;this.squadSceneIO(t.id,function(n){e.renderSelectSquadInfo(t),e.boardScenes.filter(function(t){return t.isSelected}).forEach(function(t){return t.deselect()}),n.select()})},e.prototype.renderControls=function(){var t=this;(0,f.default)(1e3,10,"Return to Title",this.add.container(0,0),this,function(){t.removeChildren(),t.scene.transition({target:"TitleScene",duration:0,moveBelow:!0})}),(0,f.default)(1e3,600,"Create Squad",this.add.container(0,0),this,function(){t.removeChildren();var e=Object.keys(s.getSquads());t.scene.transition({target:"EditSquadScene",duration:0,moveBelow:!0,data:{squad:{id:(e.length+1).toString(),name:"",emblem:"",members:{}}}})}),this.renderNavigation()},e.prototype.renderNavigation=function(){var t=this,e=s.getSquads(),n=Object.keys(e).length,r=this.add.image(500,620,"arrow_right");r.setScale(-1,1),0===this.page?r.setAlpha(.5):(r.setInteractive(),r.on("pointerdown",function(e){t.prevPage()})),this.controls.push(r);var i=this.add.image(600,620,"arrow_right");n<this.itemsPerPage||this.itemsPerPage*(this.page+1)>=n?i.setAlpha(.5):(i.setInteractive(),i.on("pointerdown",function(){t.nextPage()})),this.controls.push(i)},e.prototype.refresh=function(){var t=this.getSquads();this.removeChildren(),this.renderSquadList(t),this.renderControls()},e.prototype.nextPage=function(){this.page=this.page+1,this.refresh(),this.selectSquad(this.getSquads()[0])},e.prototype.prevPage=function(){this.page=this.page-1,this.refresh(),this.selectSquad(this.getSquads()[0])},e.prototype.removeChildren=function(){var t=this;this.boardScenes.forEach(function(e){e.destroy(t)}),this.boardScenes=[],this.controls.forEach(function(t){return t.destroy()}),this.controls=[]},e.prototype.editSquad=function(t){this.removeChildren(),this.scene.transition({target:"EditSquadScene",duration:0,moveBelow:!0,data:{squad:t}})},e}(u.Scene);e.ListSquadsScene=m},1509:function(t,e,n){"use strict";(function(t){function r(){return o.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function i(t,e){if(r()<e)throw new RangeError("Invalid typed array length");return o.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e),t.__proto__=o.prototype):(null===t&&(t=new o(e)),t.length=e),t}function o(t,e,n){if(!(o.TYPED_ARRAY_SUPPORT||this instanceof o))return new o(t,e,n);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return c(this,t)}return a(this,t,e,n)}function a(t,e,n,r){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?p(t,e,n,r):"string"==typeof e?f(t,e,n):h(t,e)}function u(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function s(t,e,n,r){return u(e),e<=0?i(t,e):void 0!==n?"string"==typeof r?i(t,e).fill(n,r):i(t,e).fill(n):i(t,e)}function c(t,e){if(u(e),t=i(t,e<0?0:0|d(e)),!o.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function f(t,e,n){if("string"==typeof n&&""!==n||(n="utf8"),!o.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|v(e,n);t=i(t,r);var a=t.write(e,n);return a!==r&&(t=t.slice(0,a)),t}function l(t,e){var n=e.length<0?0:0|d(e.length);t=i(t,n);for(var r=0;r<n;r+=1)t[r]=255&e[r];return t}function p(t,e,n,r){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return e=void 0===n&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,n):new Uint8Array(e,n,r),o.TYPED_ARRAY_SUPPORT?(t=e,t.__proto__=o.prototype):t=l(t,e),t}function h(t,e){if(o.isBuffer(e)){var n=0|d(e.length);return t=i(t,n),0===t.length?t:(e.copy(t,0,0,n),t)}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||X(e.length)?i(t,0):l(t,e);if("Buffer"===e.type&&Z(e.data))return l(t,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function d(t){if(t>=r())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r().toString(16)+" bytes");return 0|t}function y(t){return+t!=t&&(t=0),o.alloc(+t)}function v(t,e){if(o.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return z(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return V(t).length;default:if(r)return z(t).length;e=(""+e).toLowerCase(),r=!0}}function m(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if(n>>>=0,e>>>=0,n<=e)return"";for(t||(t="utf8");;)switch(t){case"hex":return N(this,e,n);case"utf8":case"utf-8":return I(this,e,n);case"ascii":return x(this,e,n);case"latin1":case"binary":return R(this,e,n);case"base64":return C(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return M(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function _(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function g(t,e,n,r,i){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(i)return-1;n=t.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof e&&(e=o.from(e,r)),o.isBuffer(e))return 0===e.length?-1:b(t,e,n,r,i);if("number"==typeof e)return e&=255,o.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):b(t,[e],n,r,i);throw new TypeError("val must be string, number or Buffer")}function b(t,e,n,r,i){function o(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}var a=1,u=t.length,s=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;a=2,u/=2,s/=2,n/=2}var c;if(i){var f=-1;for(c=n;c<u;c++)if(o(t,c)===o(e,-1===f?0:c-f)){if(-1===f&&(f=c),c-f+1===s)return f*a}else-1!==f&&(c-=c-f),f=-1}else for(n+s>u&&(n=u-s),c=n;c>=0;c--){for(var l=!0,p=0;p<s;p++)if(o(t,c+p)!==o(e,p)){l=!1;break}if(l)return c}return-1}function w(t,e,n,r){n=Number(n)||0;var i=t.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=e.length;if(o%2!=0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var a=0;a<r;++a){var u=parseInt(e.substr(2*a,2),16);if(isNaN(u))return a;t[n+a]=u}return a}function O(t,e,n,r){return G(z(e,t.length-n),t,n,r)}function S(t,e,n,r){return G(Y(e),t,n,r)}function A(t,e,n,r){return S(t,e,n,r)}function E(t,e,n,r){return G(V(e),t,n,r)}function T(t,e,n,r){return G(K(e,t.length-n),t,n,r)}function C(t,e,n){return 0===e&&n===t.length?J.fromByteArray(t):J.fromByteArray(t.slice(e,n))}function I(t,e,n){n=Math.min(t.length,n);for(var r=[],i=e;i<n;){var o=t[i],a=null,u=o>239?4:o>223?3:o>191?2:1;if(i+u<=n){var s,c,f,l;switch(u){case 1:o<128&&(a=o);break;case 2:s=t[i+1],128==(192&s)&&(l=(31&o)<<6|63&s)>127&&(a=l);break;case 3:s=t[i+1],c=t[i+2],128==(192&s)&&128==(192&c)&&(l=(15&o)<<12|(63&s)<<6|63&c)>2047&&(l<55296||l>57343)&&(a=l);break;case 4:s=t[i+1],c=t[i+2],f=t[i+3],128==(192&s)&&128==(192&c)&&128==(192&f)&&(l=(15&o)<<18|(63&s)<<12|(63&c)<<6|63&f)>65535&&l<1114112&&(a=l)}}null===a?(a=65533,u=1):a>65535&&(a-=65536,r.push(a>>>10&1023|55296),a=56320|1023&a),r.push(a),i+=u}return k(r)}function k(t){var e=t.length;if(e<=Q)return String.fromCharCode.apply(String,t);for(var n="",r=0;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=Q));return n}function x(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function R(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function N(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=e;o<n;++o)i+=W(t[o]);return i}function M(t,e,n){for(var r=t.slice(e,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function P(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function j(t,e,n,r,i,a){if(!o.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<a)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function D(t,e,n,r){e<0&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-n,2);i<o;++i)t[n+i]=(e&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function F(t,e,n,r){e<0&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-n,4);i<o;++i)t[n+i]=e>>>8*(r?i:3-i)&255}function H(t,e,n,r,i,o){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function L(t,e,n,r,i){return i||H(t,e,n,4,3.4028234663852886e38,-3.4028234663852886e38),$.write(t,e,n,r,23,4),n+4}function U(t,e,n,r,i){return i||H(t,e,n,8,1.7976931348623157e308,-1.7976931348623157e308),$.write(t,e,n,r,52,8),n+8}function q(t){if(t=B(t).replace(tt,""),t.length<2)return"";for(;t.length%4!=0;)t+="=";return t}function B(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function W(t){return t<16?"0"+t.toString(16):t.toString(16)}function z(t,e){e=e||1/0;for(var n,r=t.length,i=null,o=[],a=0;a<r;++a){if((n=t.charCodeAt(a))>55295&&n<57344){if(!i){if(n>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(e-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function Y(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}function K(t,e){for(var n,r,i,o=[],a=0;a<t.length&&!((e-=2)<0);++a)n=t.charCodeAt(a),r=n>>8,i=n%256,o.push(i),o.push(r);return o}function V(t){return J.toByteArray(q(t))}function G(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}function X(t){return t!==t}var J=n(1510),$=n(1511),Z=n(1512);e.Buffer=o,e.SlowBuffer=y,e.INSPECT_MAX_BYTES=50,o.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=r(),o.poolSize=8192,o._augment=function(t){return t.__proto__=o.prototype,t},o.from=function(t,e,n){return a(null,t,e,n)},o.TYPED_ARRAY_SUPPORT&&(o.prototype.__proto__=Uint8Array.prototype,o.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&o[Symbol.species]===o&&Object.defineProperty(o,Symbol.species,{value:null,configurable:!0})),o.alloc=function(t,e,n){return s(null,t,e,n)},o.allocUnsafe=function(t){return c(null,t)},o.allocUnsafeSlow=function(t){return c(null,t)},o.isBuffer=function(t){return!(null==t||!t._isBuffer)},o.compare=function(t,e){if(!o.isBuffer(t)||!o.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,r=e.length,i=0,a=Math.min(n,r);i<a;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0},o.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(t,e){if(!Z(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return o.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=o.allocUnsafe(e),i=0;for(n=0;n<t.length;++n){var a=t[n];if(!o.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(r,i),i+=a.length}return r},o.byteLength=v,o.prototype._isBuffer=!0,o.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)_(this,e,e+1);return this},o.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)_(this,e,e+3),_(this,e+1,e+2);return this},o.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)_(this,e,e+7),_(this,e+1,e+6),_(this,e+2,e+5),_(this,e+3,e+4);return this},o.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?I(this,0,t):m.apply(this,arguments)},o.prototype.equals=function(t){if(!o.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===o.compare(this,t)},o.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},o.prototype.compare=function(t,e,n,r,i){if(!o.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),e<0||n>t.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&e>=n)return 0;if(r>=i)return-1;if(e>=n)return 1;if(e>>>=0,n>>>=0,r>>>=0,i>>>=0,this===t)return 0;for(var a=i-r,u=n-e,s=Math.min(a,u),c=this.slice(r,i),f=t.slice(e,n),l=0;l<s;++l)if(c[l]!==f[l]){a=c[l],u=f[l];break}return a<u?-1:u<a?1:0},o.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},o.prototype.indexOf=function(t,e,n){return g(this,t,e,n,!0)},o.prototype.lastIndexOf=function(t,e,n){return g(this,t,e,n,!1)},o.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-e;if((void 0===n||n>i)&&(n=i),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return w(this,t,e,n);case"utf8":case"utf-8":return O(this,t,e,n);case"ascii":return S(this,t,e,n);case"latin1":case"binary":return A(this,t,e,n);case"base64":return E(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,t,e,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var Q=4096;o.prototype.slice=function(t,e){var n=this.length;t=~~t,e=void 0===e?n:~~e,t<0?(t+=n)<0&&(t=0):t>n&&(t=n),e<0?(e+=n)<0&&(e=0):e>n&&(e=n),e<t&&(e=t);var r;if(o.TYPED_ARRAY_SUPPORT)r=this.subarray(t,e),r.__proto__=o.prototype;else{var i=e-t;r=new o(i,void 0);for(var a=0;a<i;++a)r[a]=this[a+t]}return r},o.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||P(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r},o.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||P(t,e,this.length);for(var r=this[t+--e],i=1;e>0&&(i*=256);)r+=this[t+--e]*i;return r},o.prototype.readUInt8=function(t,e){return e||P(t,1,this.length),this[t]},o.prototype.readUInt16LE=function(t,e){return e||P(t,2,this.length),this[t]|this[t+1]<<8},o.prototype.readUInt16BE=function(t,e){return e||P(t,2,this.length),this[t]<<8|this[t+1]},o.prototype.readUInt32LE=function(t,e){return e||P(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},o.prototype.readUInt32BE=function(t,e){return e||P(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},o.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||P(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return i*=128,r>=i&&(r-=Math.pow(2,8*e)),r},o.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||P(t,e,this.length);for(var r=e,i=1,o=this[t+--r];r>0&&(i*=256);)o+=this[t+--r]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*e)),o},o.prototype.readInt8=function(t,e){return e||P(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},o.prototype.readInt16LE=function(t,e){e||P(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},o.prototype.readInt16BE=function(t,e){e||P(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},o.prototype.readInt32LE=function(t,e){return e||P(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},o.prototype.readInt32BE=function(t,e){return e||P(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},o.prototype.readFloatLE=function(t,e){return e||P(t,4,this.length),$.read(this,t,!0,23,4)},o.prototype.readFloatBE=function(t,e){return e||P(t,4,this.length),$.read(this,t,!1,23,4)},o.prototype.readDoubleLE=function(t,e){return e||P(t,8,this.length),$.read(this,t,!0,52,8)},o.prototype.readDoubleBE=function(t,e){return e||P(t,8,this.length),$.read(this,t,!1,52,8)},o.prototype.writeUIntLE=function(t,e,n,r){if(t=+t,e|=0,n|=0,!r){j(this,t,e,n,Math.pow(2,8*n)-1,0)}var i=1,o=0;for(this[e]=255&t;++o<n&&(i*=256);)this[e+o]=t/i&255;return e+n},o.prototype.writeUIntBE=function(t,e,n,r){if(t=+t,e|=0,n|=0,!r){j(this,t,e,n,Math.pow(2,8*n)-1,0)}var i=n-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+n},o.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||j(this,t,e,1,255,0),o.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},o.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||j(this,t,e,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):D(this,t,e,!0),e+2},o.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||j(this,t,e,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):D(this,t,e,!1),e+2},o.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||j(this,t,e,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):F(this,t,e,!0),e+4},o.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||j(this,t,e,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):F(this,t,e,!1),e+4},o.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);j(this,t,e,n,i-1,-i)}var o=0,a=1,u=0;for(this[e]=255&t;++o<n&&(a*=256);)t<0&&0===u&&0!==this[e+o-1]&&(u=1),this[e+o]=(t/a>>0)-u&255;return e+n},o.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);j(this,t,e,n,i-1,-i)}var o=n-1,a=1,u=0;for(this[e+o]=255&t;--o>=0&&(a*=256);)t<0&&0===u&&0!==this[e+o+1]&&(u=1),this[e+o]=(t/a>>0)-u&255;return e+n},o.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||j(this,t,e,1,127,-128),o.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},o.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||j(this,t,e,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):D(this,t,e,!0),e+2},o.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||j(this,t,e,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):D(this,t,e,!1),e+2},o.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||j(this,t,e,4,2147483647,-2147483648),o.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):F(this,t,e,!0),e+4},o.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||j(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),o.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):F(this,t,e,!1),e+4},o.prototype.writeFloatLE=function(t,e,n){return L(this,t,e,!0,n)},o.prototype.writeFloatBE=function(t,e,n){return L(this,t,e,!1,n)},o.prototype.writeDoubleLE=function(t,e,n){return U(this,t,e,!0,n)},o.prototype.writeDoubleBE=function(t,e,n){return U(this,t,e,!1,n)},o.prototype.copy=function(t,e,n,r){if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var i,a=r-n;if(this===t&&n<e&&e<r)for(i=a-1;i>=0;--i)t[i+e]=this[i+n];else if(a<1e3||!o.TYPED_ARRAY_SUPPORT)for(i=0;i<a;++i)t[i+e]=this[i+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+a),e);return a},o.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!o.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0);var a;if("number"==typeof t)for(a=e;a<n;++a)this[a]=t;else{var u=o.isBuffer(t)?t:z(new o(t,r).toString()),s=u.length;for(a=0;a<n-e;++a)this[a+e]=u[a%s]}return this};var tt=/[^+\/0-9A-Za-z-_]/g}).call(e,n(295))},1510:function(t,e,n){"use strict";function r(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function i(t){var e=r(t),n=e[0],i=e[1];return 3*(n+i)/4-i}function o(t,e,n){return 3*(e+n)/4-n}function a(t){var e,n,i=r(t),a=i[0],u=i[1],s=new p(o(t,a,u)),c=0,f=u>0?a-4:a;for(n=0;n<f;n+=4)e=l[t.charCodeAt(n)]<<18|l[t.charCodeAt(n+1)]<<12|l[t.charCodeAt(n+2)]<<6|l[t.charCodeAt(n+3)],s[c++]=e>>16&255,s[c++]=e>>8&255,s[c++]=255&e;return 2===u&&(e=l[t.charCodeAt(n)]<<2|l[t.charCodeAt(n+1)]>>4,s[c++]=255&e),1===u&&(e=l[t.charCodeAt(n)]<<10|l[t.charCodeAt(n+1)]<<4|l[t.charCodeAt(n+2)]>>2,s[c++]=e>>8&255,s[c++]=255&e),s}function u(t){return f[t>>18&63]+f[t>>12&63]+f[t>>6&63]+f[63&t]}function s(t,e,n){for(var r,i=[],o=e;o<n;o+=3)r=(t[o]<<16&16711680)+(t[o+1]<<8&65280)+(255&t[o+2]),i.push(u(r));return i.join("")}function c(t){for(var e,n=t.length,r=n%3,i=[],o=0,a=n-r;o<a;o+=16383)i.push(s(t,o,o+16383>a?a:o+16383));return 1===r?(e=t[n-1],i.push(f[e>>2]+f[e<<4&63]+"==")):2===r&&(e=(t[n-2]<<8)+t[n-1],i.push(f[e>>10]+f[e>>4&63]+f[e<<2&63]+"=")),i.join("")}e.byteLength=i,e.toByteArray=a,e.fromByteArray=c;for(var f=[],l=[],p="undefined"!=typeof Uint8Array?Uint8Array:Array,h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",d=0,y=h.length;d<y;++d)f[d]=h[d],l[h.charCodeAt(d)]=d;l["-".charCodeAt(0)]=62,l["_".charCodeAt(0)]=63},1511:function(t,e){e.read=function(t,e,n,r,i){var o,a,u=8*i-r-1,s=(1<<u)-1,c=s>>1,f=-7,l=n?i-1:0,p=n?-1:1,h=t[e+l];for(l+=p,o=h&(1<<-f)-1,h>>=-f,f+=u;f>0;o=256*o+t[e+l],l+=p,f-=8);for(a=o&(1<<-f)-1,o>>=-f,f+=r;f>0;a=256*a+t[e+l],l+=p,f-=8);if(0===o)o=1-c;else{if(o===s)return a?NaN:1/0*(h?-1:1);a+=Math.pow(2,r),o-=c}return(h?-1:1)*a*Math.pow(2,o-r)},e.write=function(t,e,n,r,i,o){var a,u,s,c=8*o-i-1,f=(1<<c)-1,l=f>>1,p=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:o-1,d=r?1:-1,y=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(u=isNaN(e)?1:0,a=f):(a=Math.floor(Math.log(e)/Math.LN2),e*(s=Math.pow(2,-a))<1&&(a--,s*=2),e+=a+l>=1?p/s:p*Math.pow(2,1-l),e*s>=2&&(a++,s/=2),a+l>=f?(u=0,a=f):a+l>=1?(u=(e*s-1)*Math.pow(2,i),a+=l):(u=e*Math.pow(2,l-1)*Math.pow(2,i),a=0));i>=8;t[n+h]=255&u,h+=d,u/=256,i-=8);for(a=a<<i|u,c+=i;c>0;t[n+h]=255&a,h+=d,a/=256,c-=8);t[n+h-d]|=128*y}},1512:function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},1513:function(t,e){t.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},1514:function(t,e){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},1515:function(t,e,n){"use strict";function r(t){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t){return t&&t.__esModule?t:{default:t}}function o(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return o=function(){return t},t}function a(t){if(t&&t.__esModule)return t;if(null===t||"object"!==r(t)&&"function"!=typeof t)return{default:t};var e=o();if(e&&e.has(t))return e.get(t);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){var u=i?Object.getOwnPropertyDescriptor(t,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=t[a]}return n.default=t,e&&e.set(t,n),n}Object.defineProperty(e,"__esModule",{value:!0}),e.ListUnitsScene=void 0;var u=a(n(25)),s=a(n(32)),c=n(79),f=n(1516),l=i(n(66)),p=i(n(290)),h=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),d=function(t){function e(){var e=t.call(this,"ListUnitsScene")||this;return e.units=[],e.page=0,e.itemsPerPage=30,e.unitDetails=[],e.detailsBar=null,e}return h(e,t),e.prototype.getUnits=function(){return Object.values(s.getUnits()).slice(this.page*this.itemsPerPage,this.page*this.itemsPerPage+this.itemsPerPage)},e.prototype.create=function(){var t=this;(0,p.default)(this);var e=this.getUnits();this.detailsBar=new f.UnitDetailsBarScene,this.renderUnitsList(e),this.scene.add("details-bar",this.detailsBar,!0),(0,l.default)(1120,20,"Back to Title",this.add.container(0,0),this,function(){t.removeChildren(),t.scene.remove("UnitDetailsBarScene"),t.scene.transition({target:"TitleScene",duration:0,moveBelow:!0})}),this.selectUnit(e[0].id)},e.prototype.renderUnitsList=function(t){var e=this;this.formatList(t,[]).forEach(function(t,n){return t.forEach(function(t,r){return e.renderUnit(t,r,n)})})},e.prototype.formatList=function(t,e){if(t.length<=10)return e.concat([t]);var n=t.slice(0,10);return this.formatList(t.slice(10,t.length),e.concat([n]))},e.prototype.renderUnit=function(t,e,n){var r=this,i="list-chara-"+t.id,o=100+120*e,a=100+130*n,u=this.add.image(o+2,a+63,"tile");u.setScale(.4);var s=new c.Chara(i,this,t,o,a,.6,!0,!1);s.onClick(function(){return r.selectUnit(t.id)}),u.setInteractive(),u.on("pointerdown",function(){return r.selectUnit(t.id)}),this.units.push({tile:u,chara:s})},e.prototype.selectUnit=function(t){this.units.forEach(function(t){return t.tile.clearTint()});var e=this.units.find(function(e){return e.chara.unit.id===t});e&&(e.tile.setTint(3355443),this.renderUnitDetails(e.chara))},e.prototype.renderUnitDetails=function(t){var e=this;this.detailsBar&&(this.detailsBar.render(t.unit.id),this.detailsBar.onHatToggle=function(t){e.removeUnitList(),e.renderUnitsList(e.getUnits()),e.selectUnit(t.id)})},e.prototype.refresh=function(){this.removeChildren(),this.renderUnitsList(this.getUnits())},e.prototype.removeUnitList=function(){var t=this;this.units.forEach(function(e){t.scene.remove("list-chara-"+e.chara.unit.id),e.tile.destroy()}),this.units=[]},e.prototype.removeChildren=function(){var t;this.removeUnitList(),null===(t=this.detailsBar)||void 0===t||t.destroy(this)},e}(u.Scene);e.ListUnitsScene=d},1516:function(t,e,n){"use strict";function r(t){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t){return t&&t.__esModule?t:{default:t}}function o(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return o=function(){return t},t}function a(t){if(t&&t.__esModule)return t;if(null===t||"object"!==r(t)&&"function"!=typeof t)return{default:t};var e=o();if(e&&e.has(t))return e.get(t);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){var u=i?Object.getOwnPropertyDescriptor(t,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=t[a]}return n.default=t,e&&e.set(t,n),n}Object.defineProperty(e,"__esModule",{value:!0}),e.UnitDetailsBarScene=void 0;var u=a(n(25)),s=a(n(32)),c=n(79),f=n(133),l=n(65),p=n(1517),h=i(n(106)),d=i(n(66)),y=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),v=function(){return v=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},v.apply(this,arguments)},m=function(t){function e(){var e=t.call(this,"UnitDetailsBarScene")||this;return e.colWidth=150,e.rowHeight=40,e.chara=null,e.container=null,e.itemDetail=null,e.onHatToggle=null,e.write=function(t,n,r){return e.container?(0,h.default)(t,n,r,e.container,e):null},e.col=function(t,n,r){return r.forEach(function(r,i){return e.write(t,n+e.rowHeight*i,r)})},e.row=function(t,n,r){return r.forEach(function(r,i){return e.write(t+e.colWidth*i,n,r)})},e}return y(e,t),e.prototype.create=function(){this.itemDetail=new p.ItemDetailWindowScene,this.scene.add("item-detail",this.itemDetail,!0)},e.prototype.destroy=function(t){var e;null===(e=this.container)||void 0===e||e.destroy(),t.scene.remove("ItemDetailWindowScene"),t.scene.remove("UnitDetailsBarScene")},e.prototype.clearChildren=function(){var t;null===(t=this.container)||void 0===t||t.destroy(),this.container=this.add.container(10,480)},e.prototype.renderBgLayer=function(){},e.prototype.render=function(t){var e;this.clearChildren();var n=this.add.image(0,0,"panel");null===(e=this.container)||void 0===e||e.add(n),n.setOrigin(0,0),n.displayWidth=1260,n.displayHeight=220;var r=s.getUnit(t);if(!r)throw new Error(l.INVALID_STATE);this.unitStats(r),this.unitItems(r),this.unitControls(r)},e.prototype.unitStats=function(t){var e,n=t.str,r=t.int,i=t.dex,o=t.lvl,a=t.exp,u=t.currentHp,s=t.hp,l=t.attacks;this.row(20,20,[t.name,f.unitClassLabels[t.class],"Lvl "+o,"Exp "+a,"","","",u+" / "+s+" HP"]),this.scene.remove("pic");var p=new c.Chara("pic",this,t,100,150,1.3,!0,!1,!0);null===(e=this.container)||void 0===e||e.add(p.container),this.col(20+this.colWidth+20,20+this.rowHeight+20,["STR "+n,"DEX "+i,"INT "+r]);var h=l.front(t),d=l.middle(t),y=l.back(t);this.col(20+2*this.colWidth+20,20+this.rowHeight+20,["Front  - "+h.name+" - "+h.damage+" x "+h.times,"Middle - "+d.name+" - "+d.damage+" x "+d.times,"Back   - "+y.name+" - "+y.damage+" x "+y.times])},e.prototype.unitItems=function(t){var e=this,n=function(n,r,i){var o,a,u=t.equips[i],c="none"!==u?s.getItem(u):null,f=e.add.image(n,r,"panel");if(f.displayWidth=74,f.displayHeight=74,null===(o=e.container)||void 0===o||o.add(f),c){var l=e.add.image(n,r,c.id);l.displayWidth=64,l.displayHeight=64,l.setInteractive(),l.on("pointerdown",function(){var n;null===(n=e.itemDetail)||void 0===n||n.render(c.id,t.id,function(){return e.render(t.id)})}),null===(a=e.container)||void 0===a||a.add(l),e.container&&(0,h.default)(n+32+5+10,r,c.name,e.container,e)}};n(700,90,"mainHand"),n(700,169,"offHand"),n(979,90,"chest"),n(979,169,"ornament")},e.prototype.unitControls=function(t){var e=this;this.container&&(0,d.default)(600,20,"Toggle Hat",this.container,this,function(){s.saveUnit(v(v({},t),{style:v(v({},t.style),{displayHat:!t.style.displayHat})})),e.onHatToggle&&e.onHatToggle(t)})},e}(u.Scene);e.UnitDetailsBarScene=m},1517:function(t,e,n){"use strict";function r(t){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return i=function(){return t},t}function o(t){if(t&&t.__esModule)return t;if(null===t||"object"!==r(t)&&"function"!=typeof t)return{default:t};var e=i();if(e&&e.has(t))return e.get(t);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){var u=o?Object.getOwnPropertyDescriptor(t,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=t[a]}return n.default=t,e&&e.set(t,n),n}Object.defineProperty(e,"__esModule",{value:!0}),e.ItemDetailWindowScene=void 0;var a=o(n(25)),u=o(n(32)),s=n(65),c=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),f=function(t){function e(){var e=t.call(this,"ItemDetailWindowScene")||this;return e.x=100,e.y=100,e.colWidth=100,e.rowHeight=30,e.container=null,e.selectecItemDetailsContainer=null,e.write=function(t,n,r,i){var o,a=e.add.text(t,n,"number"==typeof r?r.toString():r,{color:"#000"});i?i.add(a):null===(o=e.container)||void 0===o||o.add(a)},e.col=function(t,n,r){return r.forEach(function(r,i){return e.write(t,n+e.rowHeight*i,r,null)})},e}return c(e,t),e.prototype.create=function(){},e.prototype.clearChildren=function(){var t;null===(t=this.container)||void 0===t||t.destroy()},e.prototype.render=function(t,e,n){var r=this;this.clearChildren(),this.container=this.add.container(this.x,this.y),this.renderBgLayer(this.container),this.renderPanel(0,0,300,300,this.container);var i=u.getItem(t);if(!i)throw new Error(s.INVALID_STATE);this.itemIcon(100,50,i,60,this.container),this.write(100,10,i.name,this.container),this.itemStats(i,10,120,this.container),this.btn(150,250,"Replace",function(){return r.replaceItemList(i,e,n)})},e.prototype.renderBgLayer=function(t){var e=this,n=new a.Geom.Rectangle(-1*this.x,-1*this.y,1280,520),r=this.add.graphics({fillStyle:{color:0}});r.alpha=.3,r.fillRectShape(n),t.add(r),r.setInteractive(n,a.Geom.Rectangle.Contains),r.on("pointerdown",function(){e.clearChildren(),r.destroy()})},e.prototype.renderPanel=function(t,e,n,r,i){var o,u=new a.Geom.Rectangle(t,e,n,r),s=this.add.graphics({fillStyle:{color:14592647},lineStyle:{width:2,color:0}});s.strokeRectShape(u),s.fillRectShape(u),s.strokeRect(t,e,n,r),i?i.add(s):null===(o=this.container)||void 0===o||o.add(s)},e.prototype.replaceItemList=function(t,e,n){var r=this,i=u.getItemList().filter(function(e){return e.slot===t.slot&&e.id!==t.id});this.renderPanel(350,0,300,400,this.container),i.forEach(function(t,i){if(!r.container)throw new Error(s.INVALID_STATE);var o=100*i+10,u=r.makeBackground(350,0);u.x=360,u.y=o;var c=new a.Geom.Rectangle(0,0,300,80);u.setInteractive(c,a.Geom.Rectangle.Contains),u.on("pointerdown",function(){r.selectedItemDetails(t,e,350,0,n)}),r.container.add(u),r.itemIcon(360,o,t,50,r.container),r.write(450,50+o,t.name,r.container)})},e.prototype.itemIcon=function(t,e,n,r,i){this.renderPanel(t,e,r+20,r+20,i);var o=this.add.image(t+r/2+10,e+r/2+10,n.id);o.displayWidth=r,o.displayHeight=r,null===i||void 0===i||i.add(o)},e.prototype.selectedItemDetails=function(t,e,n,r,i){var o,a,s=this;null===(o=this.selectecItemDetailsContainer)||void 0===o||o.destroy(),this.selectecItemDetailsContainer=this.add.container(0,0),null===(a=this.container)||void 0===a||a.add(this.selectecItemDetailsContainer),this.renderPanel(n+350,r,300,300,this.selectecItemDetailsContainer),this.write(n+370,r+20,t.name,this.selectecItemDetailsContainer),this.itemIcon(n+450,r+50,t,60,this.selectecItemDetailsContainer),this.itemStats(t,n+370,r+130,this.selectecItemDetailsContainer),this.btn(n+400,r+250,"Equip",function(){console.log(t),u.equipItem(t.id,e),s.clearChildren(),i()})},e.prototype.makeBackground=function(t,e){var n=new a.Geom.Rectangle(-10,e+-10,300,80),r=this.add.graphics({fillStyle:{color:255}});return r.alpha=.2,r.fillRectShape(n),r},e.prototype.btn=function(t,e,n,r){var i,o,a=this.add.text(t,e,n,{color:"#000"}),u=this.add.image(t-15,e-10,"panel");u.setOrigin(0,0),null===(i=this.container)||void 0===i||i.add(u),null===(o=this.container)||void 0===o||o.add(a),u.setInteractive(),u.displayWidth=a.width+30,u.displayHeight=a.height+20,u.on("pointerdown",function(){r()})},e.prototype.itemStats=function(t,e,n,r){var i=this;Object.keys(t.modifiers).filter(function(e){var n=t.modifiers[e];return n&&0!==n}).forEach(function(o,a){var u=t.modifiers[o];i.write(e,n+i.rowHeight*a,o,r),i.write(e+200,n+i.rowHeight*a,u.toString(),r)})},e}(a.Scene);e.ItemDetailWindowScene=f},1518:function(t,e,n){"use strict";function r(t){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t){return t&&t.__esModule?t:{default:t}}function o(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return o=function(){return t},t}Object.defineProperty(e,"__esModule",{value:!0}),e.MapScene=void 0;var a=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==r(t)&&"function"!=typeof t)return{default:t};var e=o();if(e&&e.has(t))return e.get(t);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){var u=i?Object.getOwnPropertyDescriptor(t,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=t[a]}return n.default=t,e&&e.set(t,n),n}(n(25)),u=n(79),s=n(32),c=n(65),f=i(n(66)),l=i(n(291)),p=i(n(106)),h=n(1519),d=n(587),y=n(132),v=i(n(135)),m=n(78),_=i(n(583)),g=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),b=function(){return b=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},b.apply(this,arguments)},w=125,O=[0],S=function(t){function e(){var e=t.call(this,"MapScene")||this;return e.charas=[],e.tiles=[],e.citySprites=[],e.mapContainer={},e.missionContainer={},e.uiContainer={},e.actionWindowContainer=null,e.state={},e.selectedEntity=null,e.currentForce=d.PLAYER_FORCE,e.movedUnits=[],e.dragState=null,e.mapX=0,e.mapY=0,e.bounds={x:{min:0,max:0},y:{min:0,max:0}},e.hasShownVictoryCondition=!1,e.dragDisabled=!1,e.cellClickDisabled=!1,e.cityClickDisabled=!1,e.mapUnit=function(t){return function(n){return v.default.map(function(e){return t(e)})(e.getUnit(n))}},e.unitIO=function(t){return function(n){v.default.map(function(e){return t(e)})(e.getUnit(n))}},e.cityIO=function(t){return function(n){v.default.map(function(e){return t(e)})(v.default.find(function(t){return t.id===n})(e.state.cities))}},e.citySpriteIO=function(t){return function(n){v.default.map(function(e){return t(e)})(v.default.find(function(t){return t.name===n})(e.citySprites))}},e.charaIO=function(t){return function(n){v.default.map(function(e){return t(e)})(e.getChara(n))}},e.moveUnit=function(t,n,r){var i=function(){n.forEach(function(t){return e.getTileAt(t.x,t.y).tile.clearTint()}),r()},o=n.filter(function(t,e){return e>0}).map(function(n){var r=e.getCellPositionOnScreen(n);return{targets:t.container,x:r.x,y:r.y,duration:w,ease:"Cubic"}}).concat([{targets:t.container,duration:200,alpha:.2,onComplete:i.bind(e)}]);return e.tweens.timeline({tweens:o})},e}return g(e,t),e.prototype.signal=function(t){var e=this;t.forEach(function(t){if(console.log("SIGNAL::",t),"DESTROY_TEAM"===t.type){e.unitIO(function(t){t.status="defeated",e.movedUnits=v.default.reject(function(e){return e===t.id})(e.movedUnits)})(t.target);var n=function(){return e.charaIO(function(t){t.fadeOut(function(){})})(t.target)};e.time.addEvent({delay:100,callback:function(){return n()}})}else if("UPDATE_STATE"===t.type)e.updateState(t.target);else if("UPDATE_UNIT_POS"===t.type)e.state.units=e.state.units.map(function(e){return e.id===t.id?b(b({},e),{pos:t.pos}):e});else if("CLICK_CELL"===t.type)v.default.map(function(n){e.showCellMenu(n,t.cell,function(){return e.checkTurnEnd()})})(e.getSelectedUnit());else if("CLICK_UNIT"===t.type)e.clickUnit(t.unit);else if("MOVE_CAMERA_TO"===t.type)e.moveCameraTo({x:t.x,y:t.y},t.duration);else if("SELECT_CITY"===t.type)e.signal([{type:"CLOSE_ACTION_PANEL"},{type:"CLEAR_TILES"}]),e.setSelectedCity(t.id),e.cityIO(function(t){e.signal([{type:"MOVE_CAMERA_TO",x:t.x,y:t.y,duration:500}])})(t.id);else if("CLEAR_TILES"===t.type)e.clearTiles();else if("CLEAR_TILES_EVENTS"===t.type)e.clearAllTileEvents();else if("CLEAR_TILES_TINTING"===t.type)e.clearAllTileTint();else if("SHOW_UNIT_PANEL"===t.type)e.showUnitPanel(t.unit);else if("SHOW_CLICKABLE_CELLS"===t.type)e.showClickableCellsForUnit(t.unit);else if("HIGHLIGHT_CELL"===t.type){var r=t.pos,i=r.x,o=r.y,a=e.tileAt(i,o);a.tile.setTint(10048938)}else if("CLOSE_ACTION_PANEL"===t.type)e.closeActionWindow();else if("END_UNIT_TURN"===t.type){var u=e.getAliveUnitsFromForce(e.currentForce).map(function(t){return t.id}),s=e.getDefeatedForces();console.log("defeated::",s),s.includes(d.PLAYER_FORCE)?console.log("player loses!"):s.includes(d.CPU_FORCE)?console.log("player wins!"):v.default.equals(u)(e.movedUnits)?(console.log("all units moved, finish turn"),e.endTurn()):e.currentForce===d.CPU_FORCE?(console.log("ai turn, proceed"),e.time.addEvent({delay:500,callback:function(){return e.runAi(e.currentForce)}})):console.log("player turn!!")}else"RUN_TURN"===t.type?e.runTurn():"CITY_CLICK"===t.type?(e.selectedEntity&&"unit"===e.selectedEntity.type?e.cityIO(function(t){e.unitIO(function(n){"PLAYER_FORCE"===n.force&&e.showCellMenu(n,t,function(){return e.checkTurnEnd()})})(e.selectedEntity.id)})(t.id):e.signal([{type:"SELECT_CITY",id:t.id}]),e.renderUI()):"CAPTURE_CITY"===t.type&&(e.state.cities=e.state.cities.map(function(e){return e.id===t.id?b(b({},e),{force:t.force}):e}),e.citySpriteIO(function(t){return t.setTint(6750054)})(t.id))})},e.prototype.updateState=function(t){this.state=t},e.prototype.create=function(t){console.log("CREATE COMMANDS:",t),this.sound.stopAll();var e=this.sound.add("map1");e.setVolume(.3),e.play(),this.mapContainer=this.add.container(this.mapX,this.mapY),this.uiContainer=this.add.container(),this.missionContainer=this.add.container(),this.actionWindowContainer=this.add.container(),this.signal(t),this.renderMap(),this.renderStructures(),this.setValidMoves(),this.renderUnits(),this.renderUI(),this.setWorldBounds(),this.makeWorldDraggable(),this.runTurn()},e.prototype.tween=function(t){var e=this;return new Promise(function(n){return e.tweens.add(b(b({},t),{onComplete:n}))})},e.prototype.delay=function(t){var e=this;return new Promise(function(n){return e.time.addEvent({delay:t,callback:n})})},e.prototype.showVictoryCondition=function(){var t=this,e=this.label(m.SCREEN_WIDTH/2,60,"Victory Condition");e.setAlpha(0),v.default.pipe([v.default.prop("cities"),v.default.find(function(t){return"castle"===t.type&&t.force===d.CPU_FORCE}),v.default.map(function(n){t.delay(500).then(function(){return t.tween({targets:e,alpha:1,duration:1e3})}).then(function(){return t.delay(500)}).then(function(){return t.moveCameraTo(n,1e3)}).then(function(){var e=t.label(m.SCREEN_WIDTH/2,160,"Conquer enemy headquarters");return e.setAlpha(0),t.tween({targets:e,alpha:1,duration:500})}).then(function(){var e=t.add.sprite(m.SCREEN_WIDTH/2,350,"merano");e.setOrigin(.5),e.setDisplaySize(250,250);var n=t.label(m.SCREEN_WIDTH/2,520,"Merano Castle");return e.setAlpha(0),n.setAlpha(0),t.missionContainer.add(e),t.tween({targets:[e,n],alpha:1,duration:1e3})}).then(function(){return t.delay(1e3)}).then(function(){return t.tween({targets:t.missionContainer,alpha:0,duration:1e3})}).then(function(){t.missionContainer.destroy(),t.missionContainer=t.add.container();var e=t.label(m.SCREEN_WIDTH/2,m.SCREEN_HEIGHT/2,"Mission Start");return e.setAlpha(0),t.tween({targets:e,alpha:1,duration:1e3})}).then(function(){return t.delay(1e3)}).then(function(){return t.tween({targets:t.missionContainer,alpha:0,duration:1e3})}).then(function(){return t.runTurn()})})])(this.state)},e.prototype.moveCameraTo=function(t,e){var n=this,r=this.getPos(t),i=r.x,o=r.y;i=-1*i+m.SCREEN_WIDTH/2,o=-1*o+m.SCREEN_HEIGHT/2;var a=function(){return i<n.bounds.x.min?n.bounds.x.min:i>n.bounds.x.max?n.bounds.x.max:i},u=function(){return o<n.bounds.y.min?n.bounds.y.min:o>n.bounds.y.max?n.bounds.y.max:o};return new Promise(function(t){return n.tweens.add({targets:n.mapContainer,x:a(),y:u(),duration:e,ease:"cubic.out",onComplete:function(){n.mapX=a(),n.mapY=u(),t()}})})},e.prototype.setWorldBounds=function(){var t=this.state.cells[0].length,e=this.state.cells.length;this.bounds={x:{min:-1*(100*t-m.SCREEN_WIDTH),max:0},y:{min:-1*(100*e-m.SCREEN_HEIGHT),max:0}}},e.prototype.label=function(t,e,n){var r=this.add.container(),i=this.add.text(t,e,n,{fontSize:"36px",color:"#000"});return i.setOrigin(.5),(0,l.default)(i.x-20-i.width/2,i.y-20-i.height/2,i.width+40,i.height+40,r,this),r.add(i),this.missionContainer.add(r),r},e.prototype.makeWorldDraggable=function(){var t=this;this.mapContainer.setSize(this.mapContainer.getBounds().width,this.mapContainer.getBounds().height),this.mapContainer.setInteractive(),this.input.setDraggable(this.mapContainer),this.input.on("drag",function(e,n,r,i){if(!t.dragDisabled){var o=n.x-r,a=n.y-i,u=t.mapX-o,s=t.mapY-a,c=t.bounds,f=c.x,l=c.y;if(u<f.max&&u>f.min&&s<l.max&&s>l.min)t.mapContainer.setPosition(t.mapX-o,t.mapY-a);else{var p=u>f.max?f.max:u<f.min?f.min:t.mapX-o,h=s>l.max?l.max:s<l.min?l.min:t.mapY-a;t.mapContainer.setPosition(p,h)}}}),this.input.on("dragend",function(){t.mapX=t.mapContainer.x,t.mapY=t.mapContainer.y})},e.prototype.getContainers=function(){return{container:this.mapContainer,uiContainer:this.uiContainer}},e.prototype.tileAt=function(t,e){var n=this.tiles.find(function(n){return n.x===t&&n.y===e});if(!n)throw new Error(c.INVALID_STATE);return n},e.prototype.cityAt=function(t,e){return v.default.find(function(n){return n.x===t&&n.y===e})(this.state.cities)},e.prototype.setValidMoves=function(){console.log("SET VALID MOVES");var t=(0,h.getPossibleMoves)(A(this.state)(this.currentForce));(0,h.unitsFromForce)(this.state)(this.currentForce).forEach(function(e){var n=v.default.chain(v.default.find(function(t){return t.id===e.id}))(t),r=v.default.map(function(t){return t.validSteps})(n),i=v.default.map(function(t){return t.enemiesInRange})(n);v.default.map(function(t){e.validSteps=t})(r),v.default.map(function(t){e.enemiesInRange=t})(i)})},e.prototype.getForce=function(t){var e,n=null===(e=this.state)||void 0===e?void 0:e.forces.find(function(e){return e.id===t});if(!n)throw new Error(c.INVALID_STATE);return n},e.prototype.getUnit=function(t){return(0,h.getUnit)(this.state)(t)},e.prototype.getDefeatedForces=function(){var t=this;return this.state.forces.map(function(t){return t.id}).reduce(function(e,n){return t.state.units.filter(function(t){return t.force===n}).every(function(t){return"defeated"===t.status})?e.concat([n]):e},[])},e.prototype.getCurrentForce=function(){return this.getForce(this.currentForce)},e.prototype.getPos=function(t){return{x:50+100*t.x,y:50+100*t.y}},e.prototype.renderStructures=function(){var t=this;this.state.cities.forEach(function(e){var n=t.getPos({x:e.x,y:e.y}),r=n.x,i=n.y,o=t.add.image(r,i,"tiles/"+e.type);o.setScale(.5),e.force,o.setInteractive(),o.on("pointerup",function(){t.cityClickDisabled||t.signal([{type:"CITY_CLICK",id:e.id}])}),t.mapContainer.add(o),o.name=e.id,t.citySprites.push(o)})},e.prototype.renderMap=function(){var t=this,e=this.getContainers().container;(0,d.translateTiles)(this.state.cells).forEach(function(n,r){return n.forEach(function(n,i){var o=t.getPos({x:i,y:r}),a=o.x,u=o.y,s=t.add.image(a,u,"tiles/"+d.tileMap[n]);s.setInteractive(),e.add(s),t.input.setDraggable(s),s.displayWidth=100,s.displayHeight=100,t.tiles.push({x:i,y:r,type:n,tile:s})})})},e.prototype.getSelectedUnit=function(){return this.selectedEntity&&"unit"===this.selectedEntity.type?this.getUnit(this.selectedEntity.id):v.default.Nothing},e.prototype.makeInteractive=function(t){var e=this;t.tile.on("pointerup",function(){e.cellClickDisabled||e.signal([{type:"CLICK_CELL",cell:t}])})},e.prototype.clearAllTileEvents=function(){this.tiles.forEach(function(t){return t.tile.removeAllListeners()})},e.prototype.clearAllTileTint=function(){this.tiles.forEach(function(t){return t.tile.clearTint()})},e.prototype.renderUnits=function(){var t=this;this.state.units.filter(function(t){return"alive"===t.status}).forEach(function(e){return t.renderUnit(e)})},e.prototype.getCellPositionOnScreen=function(t){var e=t.x,n=t.y,r=this.getPos({x:e,y:n});return b(b({},r),{y:r.y+-10})},e.prototype.renderUnit=function(t){var e=this,n=this.getContainers().container,r=(0,s.getSquadLeader)(t.id),i=this.getCellPositionOnScreen(t.pos),o=i.x,a=i.y,c=new u.Chara("unit-"+t.id,this,r,o,a,.45,!0);n.add(c.container),this.charas.push(c),this.movedUnits.includes(t.id)&&c.container.setAlpha(.5),c.onClick(function(n){e.signal([{type:"CLICK_UNIT",unit:t}])})},e.prototype.clickUnit=function(t){t.force===d.PLAYER_FORCE?this.handleClickOnOwnUnit(t):this.handleClickOnEnemyUnit(t)},e.prototype.showClickableCellsForUnit=function(t){var e=this;this.clearTiles();var n=this.state.units.find(function(e){return e.id===t.id});n&&(n.validSteps.forEach(function(t){return e.makeCellClickable(e.tileAt(t.target.x,t.target.y))}),n.enemiesInRange.forEach(function(t){var n=t.enemy;e.unitIO(function(t){e.tileAt(t.pos.x,t.pos.y).tile.setTint(16720418)})(n)}))},e.prototype.getChara=function(t){return v.default.find(function(e){return e.unit.id===t})(this.charas)},e.prototype.handleClickOnOwnUnit=function(t){this.movedUnits.includes(t.id)?this.signal([{type:"CLEAR_TILES"},{type:"SHOW_UNIT_PANEL",unit:t}]):this.signal([{type:"CLEAR_TILES"},{type:"SHOW_UNIT_PANEL",unit:t},{type:"SHOW_CLICKABLE_CELLS",unit:t}])},e.prototype.handleClickOnEnemyUnit=function(t){var e=this,n=this.getSelectedUnit();v.default.isNothing(n)?this.signal([{type:"SHOW_UNIT_PANEL",unit:t}]):v.default.map(function(n){v.default.map(function(r){var i=v.default.elem(t.id)(v.default.map(function(t){return t.enemy})(n.enemiesInRange));n.force===d.PLAYER_FORCE&&i&&!e.movedUnits.includes(n.id)?(e.showEnemyUnitMenu(t,r,n),e.signal([{type:"CLEAR_TILES"},{type:"SHOW_CLICKABLE_CELLS",unit:n}])):e.signal([{type:"CLEAR_TILES"},{type:"SHOW_UNIT_PANEL",unit:t}])})(e.getChara(t.id))})(n)},e.prototype.showUnitPanel=function(t){this.setSelectedUnit(t.id),this.renderUI()},e.prototype.setSelectedUnit=function(t){this.selectedEntity={type:"unit",id:t}},e.prototype.setSelectedCity=function(t){this.selectedEntity={type:"city",id:t}},e.prototype.showEnemyUnitMenu=function(t,e,n){var r=this;this.closeActionWindow(),this.actionWindow(e.container.x||0,e.container.y||0,[{title:"Attack",action:function(){r.moveToEnemyUnit(t,e,n)}},{title:"View",action:function(){r.moveCameraTo(t.pos,500),console.log(t)}},{title:"Cancel",action:function(){r.closeActionWindow()}}])},e.prototype.moveToEnemyUnit=function(t,e,n){var r=this,i=v.default.find(function(e){return e.enemy===t.id})(n.enemiesInRange);if(this.movedUnits.push(n.id),v.default.isJust(i)){var o=this.charas.find(function(t){return t.unit.id===n.id});if(!o)return;var a=function(){r.turnOff();var e=n.force===d.PLAYER_FORCE;r.scene.transition({target:"CombatScene",duration:0,moveBelow:!0,data:{top:e?t.id:n.id,bottom:e?n.id:t.id,onCombatFinish:function(t){r.signal([{type:"DESTROY_TEAM",target:t},{type:"END_UNIT_TURN"}])}}})};v.default.map(function(t){var e=t.steps;r.moveUnit(o,e,a),n.pos=e.reverse()[0]})(i)}else console.error("This should be impossible, check logic"),this.showUnitPanel(t)},e.prototype.turnOff=function(){var t=this;this.mapContainer.destroy(),this.uiContainer.destroy(),this.charas.forEach(function(e){e.container.destroy(),t.scene.remove(e)}),this.charas=[],this.tiles.forEach(function(t){t.tile.destroy()}),this.tiles=[]},e.prototype.makeCellClickable=function(t){t.tile.setTint(8956552),this.makeInteractive(t)},e.prototype.renderUI=function(){var t=this,e=this.getContainers(),n=e.container,r=e.uiContainer;if(r.removeAll(),r.add((0,l.default)(0,600,1280,120,r,this)),this.selectedEntity&&"unit"===this.selectedEntity.type){var i=(0,s.getSquad)(this.selectedEntity.id);this.unitIO(function(e){(0,p.default)(20,610,i.name,r,t),(0,p.default)(1e3,610,e.range+" cells",r,t),(0,f.default)(200,620,"Squad Details",t.uiContainer,t,function(){var e=t.add.container(0,0);(0,l.default)(50,50,1080,540,t.uiContainer,t),t.disableCellClick(),t.disableCityClick(),t.dragDisabled=!0;var n=new _.default(i,50,-50,.7);t.scene.add("board-squad-"+i.id,n,!0),n.onUnitClick(function(n){e.removeAll(),(0,p.default)(70,370,n.unit.name,e,t);["str","agi","dex","int","wis","vit"].forEach(function(r,i){(0,p.default)(70,400+25*i,r.toUpperCase(),e,t),(0,p.default)(130,400+25*i,n.unit[r],e,t)}),["Back Row","Middle Row","Front Row"].forEach(function(n,r){(0,p.default)(270,400+25*r,n,e,t),(0,p.default)(500,400+25*r,"11 x 2",e,t)})}),(0,f.default)(900,120,"Close",t.uiContainer,t,function(){n.destroy(t),e.destroy(),t.dragDisabled=!1,t.enableCellClick(),t.enableCityClick(),t.renderUI()})})})(this.selectedEntity.id)}else this.selectedEntity&&"city"===this.selectedEntity.type&&this.cityIO(function(e){(0,p.default)(20,610,e.name,r,t),e.force&&(0,p.default)(1e3,610,"Controlled by "+t.getForce(e.force).name,r,t)})(this.selectedEntity.id);(0,f.default)(900,50,"Return to Title",r,this,function(){n.removeAll(),r.removeAll(),t.charas.forEach(function(e){return t.scene.remove(e.scene.key)}),t.charas=[],t.tiles=[],t.scene.transition({target:"TitleScene",duration:0,moveBelow:!0})})},e.prototype.disableCellClick=function(){this.cellClickDisabled=!0},e.prototype.enableCellClick=function(){this.cellClickDisabled=!1},e.prototype.disableCityClick=function(){this.cityClickDisabled=!0},e.prototype.enableCityClick=function(){this.cityClickDisabled=!1},e.prototype.switchForce=function(){var t,e=this,n=null===(t=this.state)||void 0===t?void 0:t.forces.find(function(t){return t.id!==e.currentForce});if(!n)throw new Error(c.INVALID_STATE);this.currentForce=n.id},e.prototype.runTurn=function(){var t=this.getForce(this.currentForce);if(console.log(this.movedUnits),this.showTurnTitle(t),this.setValidMoves(),t.id===d.CPU_FORCE)this.dragDisabled=!0,this.runAiActions(t.id);else{this.dragDisabled=!1;var e=this.state.units.filter(function(t){return t.force===d.PLAYER_FORCE})[0];this.moveCameraTo(e.pos,500)}},e.prototype.getAliveUnitsFromForce=function(t){return(0,h.unitsFromForce)(this.state)(t).filter(function(t){return"alive"===t.status})},e.prototype.runAi=function(t){var e=this,n=this.getAliveUnitsFromForce(t).filter(function(t){return!e.movedUnits.includes(t.id)});if(!(n.length<1)){var r=n[0];if(!r)throw new Error(c.INVALID_STATE);this.moveCameraTo(r.pos,200),this.setSelectedUnit(r.id),this.renderUI();var i=v.default.head(r.enemiesInRange);if(v.default.isJust(i))v.default.map(function(t){e.unitIO(function(t){var n=e.getChara(t.id);v.default.map(function(n){e.moveToEnemyUnit(t,n,r)})(n)})(t.enemy)})(i);else{var o=(0,y.randomItem)(r.validSteps).target,a=o.x,u=o.y,s=this.getTileAt(a,u);this.moveToTile(r.id,s,function(){e.signal([{type:"END_UNIT_TURN"}]),e.setValidMoves()})}}},e.prototype.runAiActions=function(t){this.runAi(t)},e.prototype.checkTurnEnd=function(){var t=this.getCurrentForce();this.setValidMoves();var e=this.getAliveUnitsFromForce(t.id);this.movedUnits.length===e.length&&this.endTurn()},e.prototype.showTurnTitle=function(t){var e=this.add.text(-200,500,t.name+" Turn"),n=this.tweens.createTimeline();n.add({targets:e,x:700,ease:"Bounce",duration:500}),n.add({targets:e,x:800,duration:1500}),n.add({targets:e,x:1700,duration:500}),n.play()},e.prototype.tilesInRange=function(t,e,n){var r=this;return this.tiles.filter(function(i){return r.getDistance({x:t,y:e},i)<=n})},e.prototype.getDistance=function(t,e){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)},e.prototype.clearTiles=function(){this.clearAllTileTint(),this.clearAllTileEvents()},e.prototype.closeActionWindow=function(){var t;null===(t=this.actionWindowContainer)||void 0===t||t.destroy()},e.prototype.showCellMenu=function(t,e,n){var r=this,i=e.x,o=e.y;if(!this.movedUnits.includes(t.id)){this.dragDisabled=!0;var a=v.default.find(function(t){return t.x===i&&t.y===o})(this.tiles);v.default.map(function(e){var a=e.tile;r.signal([{type:"CLOSE_ACTION_PANEL"},{type:"SHOW_CLICKABLE_CELLS",unit:t},{type:"HIGHLIGHT_CELL",pos:{x:e.x,y:e.y}}]);r.actionWindow(a.x+r.mapX,a.y+r.mapY,function(){return t.validSteps.some(function(t){return v.default.equals(t.target)({x:i,y:o})})?[{title:"Move",action:function(){var i;r.moveToTile(t.id,e,function(){r.dragDisabled=!1,n()}),null===(i=r.actionWindowContainer)||void 0===i||i.destroy(),a.clearTint()}}]:[]}().concat(function(){var t=r.state.cities.find(function(t){return t.x===i&&t.y===o});return t?[{title:"Select City",action:function(){r.dragDisabled=!1,r.signal([{type:"SELECT_CITY",id:t.id}])}}]:[]}()).concat([{title:"Cancel",action:function(){r.dragDisabled=!1,r.signal([{type:"CLOSE_ACTION_PANEL"},{type:"SHOW_CLICKABLE_CELLS",unit:t}])}}]))})(a)}},e.prototype.showCityInfo=function(t){var e=(this.state.cities.find(function(e){return e.id===t}),this.add.sprite(m.SCREEN_WIDTH/2,350,"merano"));e.setOrigin(.5),e.setDisplaySize(250,250);this.label(m.SCREEN_WIDTH/2,520,"Merano Castle")},e.prototype.actionWindow=function(t,e,n){var r=this;this.actionWindowContainer&&this.actionWindowContainer.destroy(),this.actionWindowContainer=this.add.container(t,e);n.map(function(t,e){var n=t.title,i=t.action;if(!r.actionWindowContainer)throw new Error(c.INVALID_STATE);return(0,f.default)(20,50*e,n,r.actionWindowContainer,r,i)})},e.prototype.moveToTile=function(t,e,n){var r=this,i=e.x,o=e.y,a=this.charas.find(function(e){return e.unit.id===t}),u=this.getCurrentForce();if(!a||!u)throw new Error(c.INVALID_STATE);var s=this.state.units.find(function(t){var e;return t.id===(null===(e=a.unit.squad)||void 0===e?void 0:e.id)});if(!s)throw new Error(c.INVALID_STATE);this.tiles.forEach(function(t){return O.includes(t.type)?t.tile.clearTint():null}),this.movedUnits.push(t),this.unitIO(function(t){var e=v.default.find(function(t){return v.default.equals(t.target)({x:i,y:o})})(t.validSteps);v.default.map(function(e){r.moveUnit(a,e.steps,function(){v.default.map(function(e){e.force!==t.force&&r.signal([{type:"CAPTURE_CITY",id:e.id,force:s.force}])})(r.cityAt(i,o)),n()})})(e)})(t),this.signal([{type:"UPDATE_UNIT_POS",id:s.id,pos:{x:i,y:o}}]),this.renderUI()},e.prototype.endTurn=function(){this.movedUnits=[],this.charas.forEach(function(t){var e;return null===(e=t.container)||void 0===e?void 0:e.setAlpha(1)}),this.switchForce(),this.runTurn()},e.prototype.isEnemyInTile=function(t){return this.getEnemies().some(function(e){var n=e.pos,r=n.x,i=n.y;return r===t.x&&i===t.y})},e.prototype.getEnemies=function(){var t=this;return this.state.units.filter(function(e){return e.force!==t.currentForce})},e.prototype.getTileAt=function(t,e){var n=this.tiles.find(function(n){return n.x===t&&n.y===e});if(!n)throw new Error(c.INVALID_STATE);return n},e}(a.Scene);e.MapScene=S;var A=function(t){return function(e){return{units:t.units.filter(function(t){return"alive"===t.status}),forces:t.forces,width:14,height:6,walkableCells:[0],grid:t.cells.map(function(t){return t.map(function(t){return 0===t?0:1})}),currentForce:e}}}},1519:function(t,e,n){"use strict";function r(t){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return i=function(){return t},t}Object.defineProperty(e,"__esModule",{value:!0}),e.getPathTo=e.blockVectorsInGrid=e.getPossibleMoves=e.getMovesForUnit=e.getEntities=e.getForce=e.getUnit=e.unitsFromForce=e.getDistance=e.findById=void 0;var o=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==r(t)&&"function"!=typeof t)return{default:t};var e=i();if(e&&e.has(t))return e.get(t);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){var u=o?Object.getOwnPropertyDescriptor(t,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=t[a]}return n.default=t,e&&e.set(t,n),n}(n(1520)),a=function(t){return t&&t.__esModule?t:{default:t}}(n(135)),u=n(581),s=function(){return s=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},s.apply(this,arguments)},c=function(t){return function(e){return a.default.find(function(n){return a.default.equals(a.default.prop(t)(n))(e)})}},f=c("id"),l=function(t){return function(e){return c("id")(e)(t)}};e.findById=l;var p=(a.default.reduce(function(t){return function(e){return a.default.elem(e)(t)?t:t.concat([e])}})([]),function(t){return function(e){return{x:t,y:e}}}),h=function(t){return function(e){return Math.abs(t.x-e.x)+Math.abs(t.y-e.y)}};e.getDistance=h;var d=function(t){return function(e){return a.default.filter(function(t){return t.force===e})(t.units)}};e.unitsFromForce=d;var y=function(t){return function(e){return l(t.units)(e)}};e.getUnit=y;var v=function(t){return function(e){return l(t.forces)(e)}};e.getForce=v;var m=function(t){return function(e){return a.default.pipe([a.default.map(function(e){return l(t)(e)}),a.default.justs])(e)}};e.getEntities=m;var _=function(t){return function(t){}};e.getMovesForUnit=_;var g=function(t){var e=t.units,n=t.forces,r=t.currentForce,i=t.grid,o=t.walkableCells,c=i[0].length,l=i.length,d=f(r)(n),y=a.default.filter(function(t){return t.force!==r})(e),v=a.default.pipe([a.default.map(function(t){return f(t)(e)}),a.default.justs]),m=a.default.prop("pos"),_=a.default.map(m)(y),g=O(_),S=b(i)(g),A=function(t){var e=t.pos,n=e.x,r=e.y,a=t.range,s=(0,u.Range)(n-a-1,n+a+1).filter(function(t){return t>=0&&t<c}).toList(),f=(0,u.Range)(r-a-1,r+a+1).filter(function(t){return t>=0&&t<l}).toList(),p=function(t){var e=t.x,n=t.y;return o.includes(i[n][e])},d=w(S)({x:n,y:r}),y=function(t){return t.length<=a+1};return f.map(function(t){return s.map(function(e){return{x:e,y:t}})}).flatten(1).filter(function(t){return function(e){return h({x:n,y:r})(e)<=t}}(a)).filter(p).map(d).filter(function(t){return t.length>1}).filter(y).map(function(t){return t.map(function(t){return{x:t[0],y:t[1]}})}).map(function(t){return{target:t[t.length-1],steps:t}}).toJS()};return a.default.map(a.default.pipe([a.default.prop("units"),v,a.default.map(function(t){var n=A(t),r=a.default.map(function(t){return t.target})(n);return s(s({},t),{validSteps:n,enemiesInRange:a.default.pipe([a.default.filter(function(e){return t.force!==e.force}),a.default.filter(function(e){return a.default.any(function(n){return 1===h(n)(e.pos)&&w(i)(t.pos)(e.pos).length<=t.range})(r)}),a.default.map(function(e){return{enemy:e.id,steps:w(i)(t.pos)(e.pos).slice(0,-1).map(function(t){var e=t[0],n=t[1];return p(e)(n)})}})])(e)})})]))(d)};e.getPossibleMoves=g;var b=function(t){return function(e){return t.map(function(t,n){return t.map(function(t,r){return e.getIn([n,r],!1)?1:t})})}};e.blockVectorsInGrid=b;var w=function(t){return function(e){return function(n){var r=new o.Grid(t);return(new o.AStarFinder).findPath(e.x,e.y,n.x,n.y,r)}}};e.getPathTo=w;var O=function(t){return t.reduce(function(t,e){return t.setIn([e.y,e.x],!0)},(0,u.Map)())}},1520:function(t,e,n){t.exports=n(1521)},1521:function(t,e,n){t.exports={Heap:n(183),Node:n(292),Grid:n(1524),Util:n(92),DiagonalMovement:n(34),Heuristic:n(136),AStarFinder:n(293),BestFirstFinder:n(1525),BreadthFirstFinder:n(1526),DijkstraFinder:n(1527),BiAStarFinder:n(294),BiBestFirstFinder:n(1528),BiBreadthFirstFinder:n(1529),BiDijkstraFinder:n(1530),IDAStarFinder:n(1531),JumpPointFinder:n(1532)}},1522:function(t,e,n){(function(t){(function(){var e,n,r,i,o,a,u,s,c,f,l,p,h,d,y;r=Math.floor,f=Math.min,n=function(t,e){return t<e?-1:t>e?1:0},c=function(t,e,i,o,a){var u;if(null==i&&(i=0),null==a&&(a=n),i<0)throw new Error("lo must be non-negative");for(null==o&&(o=t.length);i<o;)u=r((i+o)/2),a(e,t[u])<0?o=u:i=u+1;return[].splice.apply(t,[i,i-i].concat(e)),e},a=function(t,e,r){return null==r&&(r=n),t.push(e),d(t,0,t.length-1,r)},o=function(t,e){var r,i;return null==e&&(e=n),r=t.pop(),t.length?(i=t[0],t[0]=r,y(t,0,e)):i=r,i},s=function(t,e,r){var i;return null==r&&(r=n),i=t[0],t[0]=e,y(t,0,r),i},u=function(t,e,r){var i;return null==r&&(r=n),t.length&&r(t[0],e)<0&&(i=[t[0],e],e=i[0],t[0]=i[1],y(t,0,r)),e},i=function(t,e){var i,o,a,u,s,c;for(null==e&&(e=n),u=function(){c=[];for(var e=0,n=r(t.length/2);0<=n?e<n:e>n;0<=n?e++:e--)c.push(e);return c}.apply(this).reverse(),s=[],o=0,a=u.length;o<a;o++)i=u[o],s.push(y(t,i,e));return s},h=function(t,e,r){var i;if(null==r&&(r=n),-1!==(i=t.indexOf(e)))return d(t,0,i,r),y(t,i,r)},l=function(t,e,r){var o,a,s,c,f;if(null==r&&(r=n),a=t.slice(0,e),!a.length)return a;for(i(a,r),f=t.slice(e),s=0,c=f.length;s<c;s++)o=f[s],u(a,o,r);return a.sort(r).reverse()},p=function(t,e,r){var a,u,s,l,p,h,d,y,v;if(null==r&&(r=n),10*e<=t.length){if(s=t.slice(0,e).sort(r),!s.length)return s;for(u=s[s.length-1],d=t.slice(e),l=0,h=d.length;l<h;l++)a=d[l],r(a,u)<0&&(c(s,a,0,null,r),s.pop(),u=s[s.length-1]);return s}for(i(t,r),v=[],p=0,y=f(e,t.length);0<=y?p<y:p>y;0<=y?++p:--p)v.push(o(t,r));return v},d=function(t,e,r,i){var o,a,u;for(null==i&&(i=n),o=t[r];r>e&&(u=r-1>>1,a=t[u],i(o,a)<0);)t[r]=a,r=u;return t[r]=o},y=function(t,e,r){var i,o,a,u,s;for(null==r&&(r=n),o=t.length,s=e,a=t[e],i=2*e+1;i<o;)u=i+1,u<o&&!(r(t[i],t[u])<0)&&(i=u),t[e]=t[i],e=i,i=2*e+1;return t[e]=a,d(t,s,e,r)},e=function(){function t(t){this.cmp=null!=t?t:n,this.nodes=[]}return t.push=a,t.pop=o,t.replace=s,t.pushpop=u,t.heapify=i,t.updateItem=h,t.nlargest=l,t.nsmallest=p,t.prototype.push=function(t){return a(this.nodes,t,this.cmp)},t.prototype.pop=function(){return o(this.nodes,this.cmp)},t.prototype.peek=function(){return this.nodes[0]},t.prototype.contains=function(t){return-1!==this.nodes.indexOf(t)},t.prototype.replace=function(t){return s(this.nodes,t,this.cmp)},t.prototype.pushpop=function(t){return u(this.nodes,t,this.cmp)},t.prototype.heapify=function(){return i(this.nodes,this.cmp)},t.prototype.updateItem=function(t){return h(this.nodes,t,this.cmp)},t.prototype.clear=function(){return this.nodes=[]},t.prototype.empty=function(){return 0===this.nodes.length},t.prototype.size=function(){return this.nodes.length},t.prototype.clone=function(){var e;return e=new t,e.nodes=this.nodes.slice(0),e},t.prototype.toArray=function(){return this.nodes.slice(0)},t.prototype.insert=t.prototype.push,t.prototype.top=t.prototype.peek,t.prototype.front=t.prototype.peek,t.prototype.has=t.prototype.contains,t.prototype.copy=t.prototype.clone,t}(),(void 0!==t&&null!==t?t.exports:void 0)?t.exports=e:window.Heap=e}).call(this)}).call(e,n(1523)(t))},1523:function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},1524:function(t,e,n){function r(t,e,n){var r;"object"!=typeof t?r=t:(e=t.length,r=t[0].length,n=t),this.width=r,this.height=e,this.nodes=this._buildNodes(r,e,n)}var i=n(292),o=n(34);r.prototype._buildNodes=function(t,e,n){var r,o,a=new Array(e);for(r=0;r<e;++r)for(a[r]=new Array(t),o=0;o<t;++o)a[r][o]=new i(o,r);if(void 0===n)return a;if(n.length!==e||n[0].length!==t)throw new Error("Matrix size does not fit");for(r=0;r<e;++r)for(o=0;o<t;++o)n[r][o]&&(a[r][o].walkable=!1);return a},r.prototype.getNodeAt=function(t,e){return this.nodes[e][t]},r.prototype.isWalkableAt=function(t,e){return this.isInside(t,e)&&this.nodes[e][t].walkable},r.prototype.isInside=function(t,e){return t>=0&&t<this.width&&e>=0&&e<this.height},r.prototype.setWalkableAt=function(t,e,n){this.nodes[e][t].walkable=n},r.prototype.getNeighbors=function(t,e){var n=t.x,r=t.y,i=[],a=!1,u=!1,s=!1,c=!1,f=!1,l=!1,p=!1,h=!1,d=this.nodes;if(this.isWalkableAt(n,r-1)&&(i.push(d[r-1][n]),a=!0),this.isWalkableAt(n+1,r)&&(i.push(d[r][n+1]),s=!0),this.isWalkableAt(n,r+1)&&(i.push(d[r+1][n]),f=!0),this.isWalkableAt(n-1,r)&&(i.push(d[r][n-1]),p=!0),e===o.Never)return i;if(e===o.OnlyWhenNoObstacles)u=p&&a,c=a&&s,l=s&&f,h=f&&p;else if(e===o.IfAtMostOneObstacle)u=p||a,c=a||s,l=s||f,h=f||p;else{if(e!==o.Always)throw new Error("Incorrect value of diagonalMovement");u=!0,c=!0,l=!0,h=!0}return u&&this.isWalkableAt(n-1,r-1)&&i.push(d[r-1][n-1]),c&&this.isWalkableAt(n+1,r-1)&&i.push(d[r-1][n+1]),l&&this.isWalkableAt(n+1,r+1)&&i.push(d[r+1][n+1]),h&&this.isWalkableAt(n-1,r+1)&&i.push(d[r+1][n-1]),i},r.prototype.clone=function(){var t,e,n=this.width,o=this.height,a=this.nodes,u=new r(n,o),s=new Array(o);for(t=0;t<o;++t)for(s[t]=new Array(n),e=0;e<n;++e)s[t][e]=new i(e,t,a[t][e].walkable);return u.nodes=s,u},t.exports=r},1525:function(t,e,n){function r(t){i.call(this,t);var e=this.heuristic;this.heuristic=function(t,n){return 1e6*e(t,n)}}var i=n(293);r.prototype=new i,r.prototype.constructor=r,t.exports=r},1526:function(t,e,n){function r(t){t=t||{},this.allowDiagonal=t.allowDiagonal,this.dontCrossCorners=t.dontCrossCorners,this.diagonalMovement=t.diagonalMovement,this.diagonalMovement||(this.allowDiagonal?this.dontCrossCorners?this.diagonalMovement=o.OnlyWhenNoObstacles:this.diagonalMovement=o.IfAtMostOneObstacle:this.diagonalMovement=o.Never)}var i=n(92),o=n(34);r.prototype.findPath=function(t,e,n,r,o){var a,u,s,c,f,l=[],p=this.diagonalMovement,h=o.getNodeAt(t,e),d=o.getNodeAt(n,r);for(l.push(h),h.opened=!0;l.length;){if(s=l.shift(),s.closed=!0,s===d)return i.backtrace(d);for(a=o.getNeighbors(s,p),c=0,f=a.length;c<f;++c)u=a[c],u.closed||u.opened||(l.push(u),u.opened=!0,u.parent=s)}return[]},t.exports=r},1527:function(t,e,n){function r(t){i.call(this,t),this.heuristic=function(t,e){return 0}}var i=n(293);r.prototype=new i,r.prototype.constructor=r,t.exports=r},1528:function(t,e,n){function r(t){i.call(this,t);var e=this.heuristic;this.heuristic=function(t,n){return 1e6*e(t,n)}}var i=n(294);r.prototype=new i,r.prototype.constructor=r,t.exports=r},1529:function(t,e,n){function r(t){t=t||{},this.allowDiagonal=t.allowDiagonal,this.dontCrossCorners=t.dontCrossCorners,this.diagonalMovement=t.diagonalMovement,this.diagonalMovement||(this.allowDiagonal?this.dontCrossCorners?this.diagonalMovement=o.OnlyWhenNoObstacles:this.diagonalMovement=o.IfAtMostOneObstacle:this.diagonalMovement=o.Never)}var i=n(92),o=n(34);r.prototype.findPath=function(t,e,n,r,o){var a,u,s,c,f,l=o.getNodeAt(t,e),p=o.getNodeAt(n,r),h=[],d=[],y=this.diagonalMovement;for(h.push(l),l.opened=!0,l.by=0,d.push(p),p.opened=!0,p.by=1;h.length&&d.length;){for(s=h.shift(),s.closed=!0,a=o.getNeighbors(s,y),c=0,f=a.length;c<f;++c)if(u=a[c],!u.closed)if(u.opened){if(1===u.by)return i.biBacktrace(s,u)}else h.push(u),u.parent=s,u.opened=!0,u.by=0;for(s=d.shift(),s.closed=!0,a=o.getNeighbors(s,y),c=0,f=a.length;c<f;++c)if(u=a[c],!u.closed)if(u.opened){if(0===u.by)return i.biBacktrace(u,s)}else d.push(u),u.parent=s,u.opened=!0,u.by=1}return[]},t.exports=r},1530:function(t,e,n){function r(t){i.call(this,t),this.heuristic=function(t,e){return 0}}var i=n(294);r.prototype=new i,r.prototype.constructor=r,t.exports=r},1531:function(t,e,n){function r(t){t=t||{},this.allowDiagonal=t.allowDiagonal,this.dontCrossCorners=t.dontCrossCorners,this.diagonalMovement=t.diagonalMovement,this.heuristic=t.heuristic||i.manhattan,this.weight=t.weight||1,this.trackRecursion=t.trackRecursion||!1,this.timeLimit=t.timeLimit||1/0,this.diagonalMovement||(this.allowDiagonal?this.dontCrossCorners?this.diagonalMovement=a.OnlyWhenNoObstacles:this.diagonalMovement=a.IfAtMostOneObstacle:this.diagonalMovement=a.Never),this.diagonalMovement===a.Never?this.heuristic=t.heuristic||i.manhattan:this.heuristic=t.heuristic||i.octile}var i=(n(92),n(136)),o=n(292),a=n(34);r.prototype.findPath=function(t,e,n,r,i){var a,u,s,c=0,f=(new Date).getTime(),l=function(t,e){return this.heuristic(Math.abs(e.x-t.x),Math.abs(e.y-t.y))}.bind(this),p=function(t,e){return t.x===e.x||t.y===e.y?1:Math.SQRT2},h=function(t,e,n,r,a){if(c++,this.timeLimit>0&&(new Date).getTime()-f>1e3*this.timeLimit)return 1/0;var u=e+l(t,y)*this.weight;if(u>n)return u;if(t==y)return r[a]=[t.x,t.y],t;var s,d,v,m,_=i.getNeighbors(t,this.diagonalMovement);for(v=0,s=1/0;m=_[v];++v){if(this.trackRecursion&&(m.retainCount=m.retainCount+1||1,!0!==m.tested&&(m.tested=!0)),(d=h(m,e+p(t,m),n,r,a+1))instanceof o)return r[a]=[t.x,t.y],d;this.trackRecursion&&0==--m.retainCount&&(m.tested=!1),d<s&&(s=d)}return s}.bind(this),d=i.getNodeAt(t,e),y=i.getNodeAt(n,r),v=l(d,y);for(a=0;!0;++a){if(u=[],(s=h(d,0,v,u,0))===1/0)return[];if(s instanceof o)return u;v=s}return[]},t.exports=r},1532:function(t,e,n){function r(t){return t=t||{},t.diagonalMovement===i.Never?new o(t):t.diagonalMovement===i.Always?new a(t):t.diagonalMovement===i.OnlyWhenNoObstacles?new u(t):new s(t)}var i=n(34),o=n(1533),a=n(1534),u=n(1535),s=n(1536);t.exports=r},1533:function(t,e,n){function r(t){i.call(this,t)}var i=n(184),o=n(34);r.prototype=new i,r.prototype.constructor=r,r.prototype._jump=function(t,e,n,r){var i=this.grid,o=t-n,a=e-r;if(!i.isWalkableAt(t,e))return null;if(!0===this.trackJumpRecursion&&(i.getNodeAt(t,e).tested=!0),i.getNodeAt(t,e)===this.endNode)return[t,e];if(0!==o){if(i.isWalkableAt(t,e-1)&&!i.isWalkableAt(t-o,e-1)||i.isWalkableAt(t,e+1)&&!i.isWalkableAt(t-o,e+1))return[t,e]}else{if(0===a)throw new Error("Only horizontal and vertical movements are allowed");if(i.isWalkableAt(t-1,e)&&!i.isWalkableAt(t-1,e-a)||i.isWalkableAt(t+1,e)&&!i.isWalkableAt(t+1,e-a))return[t,e];if(this._jump(t+1,e,t,e)||this._jump(t-1,e,t,e))return[t,e]}return this._jump(t+o,e+a,t,e)},r.prototype._findNeighbors=function(t){var e,n,r,i,a,u,s,c,f=t.parent,l=t.x,p=t.y,h=this.grid,d=[];if(f)e=f.x,n=f.y,r=(l-e)/Math.max(Math.abs(l-e),1),i=(p-n)/Math.max(Math.abs(p-n),1),0!==r?(h.isWalkableAt(l,p-1)&&d.push([l,p-1]),h.isWalkableAt(l,p+1)&&d.push([l,p+1]),h.isWalkableAt(l+r,p)&&d.push([l+r,p])):0!==i&&(h.isWalkableAt(l-1,p)&&d.push([l-1,p]),h.isWalkableAt(l+1,p)&&d.push([l+1,p]),h.isWalkableAt(l,p+i)&&d.push([l,p+i]));else for(a=h.getNeighbors(t,o.Never),s=0,c=a.length;s<c;++s)u=a[s],d.push([u.x,u.y]);return d},t.exports=r},1534:function(t,e,n){function r(t){i.call(this,t)}var i=n(184),o=n(34);r.prototype=new i,r.prototype.constructor=r,r.prototype._jump=function(t,e,n,r){var i=this.grid,o=t-n,a=e-r;if(!i.isWalkableAt(t,e))return null;if(!0===this.trackJumpRecursion&&(i.getNodeAt(t,e).tested=!0),i.getNodeAt(t,e)===this.endNode)return[t,e];if(0!==o&&0!==a){if(i.isWalkableAt(t-o,e+a)&&!i.isWalkableAt(t-o,e)||i.isWalkableAt(t+o,e-a)&&!i.isWalkableAt(t,e-a))return[t,e];if(this._jump(t+o,e,t,e)||this._jump(t,e+a,t,e))return[t,e]}else if(0!==o){if(i.isWalkableAt(t+o,e+1)&&!i.isWalkableAt(t,e+1)||i.isWalkableAt(t+o,e-1)&&!i.isWalkableAt(t,e-1))return[t,e]}else if(i.isWalkableAt(t+1,e+a)&&!i.isWalkableAt(t+1,e)||i.isWalkableAt(t-1,e+a)&&!i.isWalkableAt(t-1,e))return[t,e];return this._jump(t+o,e+a,t,e)},r.prototype._findNeighbors=function(t){var e,n,r,i,a,u,s,c,f=t.parent,l=t.x,p=t.y,h=this.grid,d=[];if(f)e=f.x,n=f.y,r=(l-e)/Math.max(Math.abs(l-e),1),i=(p-n)/Math.max(Math.abs(p-n),1),0!==r&&0!==i?(h.isWalkableAt(l,p+i)&&d.push([l,p+i]),h.isWalkableAt(l+r,p)&&d.push([l+r,p]),h.isWalkableAt(l+r,p+i)&&d.push([l+r,p+i]),h.isWalkableAt(l-r,p)||d.push([l-r,p+i]),h.isWalkableAt(l,p-i)||d.push([l+r,p-i])):0===r?(h.isWalkableAt(l,p+i)&&d.push([l,p+i]),h.isWalkableAt(l+1,p)||d.push([l+1,p+i]),h.isWalkableAt(l-1,p)||d.push([l-1,p+i])):(h.isWalkableAt(l+r,p)&&d.push([l+r,p]),h.isWalkableAt(l,p+1)||d.push([l+r,p+1]),h.isWalkableAt(l,p-1)||d.push([l+r,p-1]));else for(a=h.getNeighbors(t,o.Always),s=0,c=a.length;s<c;++s)u=a[s],d.push([u.x,u.y]);return d},t.exports=r},1535:function(t,e,n){function r(t){i.call(this,t)}var i=n(184),o=n(34);r.prototype=new i,r.prototype.constructor=r,r.prototype._jump=function(t,e,n,r){var i=this.grid,o=t-n,a=e-r;if(!i.isWalkableAt(t,e))return null;if(!0===this.trackJumpRecursion&&(i.getNodeAt(t,e).tested=!0),i.getNodeAt(t,e)===this.endNode)return[t,e];if(0!==o&&0!==a){if(this._jump(t+o,e,t,e)||this._jump(t,e+a,t,e))return[t,e]}else if(0!==o){if(i.isWalkableAt(t,e-1)&&!i.isWalkableAt(t-o,e-1)||i.isWalkableAt(t,e+1)&&!i.isWalkableAt(t-o,e+1))return[t,e]}else if(0!==a&&(i.isWalkableAt(t-1,e)&&!i.isWalkableAt(t-1,e-a)||i.isWalkableAt(t+1,e)&&!i.isWalkableAt(t+1,e-a)))return[t,e];return i.isWalkableAt(t+o,e)&&i.isWalkableAt(t,e+a)?this._jump(t+o,e+a,t,e):null},r.prototype._findNeighbors=function(t){var e,n,r,i,a,u,s,c,f=t.parent,l=t.x,p=t.y,h=this.grid,d=[];if(f)if(e=f.x,n=f.y,r=(l-e)/Math.max(Math.abs(l-e),1),i=(p-n)/Math.max(Math.abs(p-n),1),0!==r&&0!==i)h.isWalkableAt(l,p+i)&&d.push([l,p+i]),h.isWalkableAt(l+r,p)&&d.push([l+r,p]),h.isWalkableAt(l,p+i)&&h.isWalkableAt(l+r,p)&&d.push([l+r,p+i]);else{var y;if(0!==r){y=h.isWalkableAt(l+r,p);var v=h.isWalkableAt(l,p+1),m=h.isWalkableAt(l,p-1);y&&(d.push([l+r,p]),v&&d.push([l+r,p+1]),m&&d.push([l+r,p-1])),v&&d.push([l,p+1]),m&&d.push([l,p-1])}else if(0!==i){y=h.isWalkableAt(l,p+i);var _=h.isWalkableAt(l+1,p),g=h.isWalkableAt(l-1,p);y&&(d.push([l,p+i]),_&&d.push([l+1,p+i]),g&&d.push([l-1,p+i])),_&&d.push([l+1,p]),g&&d.push([l-1,p])}}else for(a=h.getNeighbors(t,o.OnlyWhenNoObstacles),s=0,c=a.length;s<c;++s)u=a[s],d.push([u.x,u.y]);return d},t.exports=r},1536:function(t,e,n){function r(t){i.call(this,t)}var i=n(184),o=n(34);r.prototype=new i,r.prototype.constructor=r,r.prototype._jump=function(t,e,n,r){var i=this.grid,o=t-n,a=e-r;if(!i.isWalkableAt(t,e))return null;if(!0===this.trackJumpRecursion&&(i.getNodeAt(t,e).tested=!0),i.getNodeAt(t,e)===this.endNode)return[t,e];if(0!==o&&0!==a){if(i.isWalkableAt(t-o,e+a)&&!i.isWalkableAt(t-o,e)||i.isWalkableAt(t+o,e-a)&&!i.isWalkableAt(t,e-a))return[t,e];if(this._jump(t+o,e,t,e)||this._jump(t,e+a,t,e))return[t,e]}else if(0!==o){if(i.isWalkableAt(t+o,e+1)&&!i.isWalkableAt(t,e+1)||i.isWalkableAt(t+o,e-1)&&!i.isWalkableAt(t,e-1))return[t,e]}else if(i.isWalkableAt(t+1,e+a)&&!i.isWalkableAt(t+1,e)||i.isWalkableAt(t-1,e+a)&&!i.isWalkableAt(t-1,e))return[t,e];return i.isWalkableAt(t+o,e)||i.isWalkableAt(t,e+a)?this._jump(t+o,e+a,t,e):null},r.prototype._findNeighbors=function(t){var e,n,r,i,a,u,s,c,f=t.parent,l=t.x,p=t.y,h=this.grid,d=[];if(f)e=f.x,n=f.y,r=(l-e)/Math.max(Math.abs(l-e),1),i=(p-n)/Math.max(Math.abs(p-n),1),0!==r&&0!==i?(h.isWalkableAt(l,p+i)&&d.push([l,p+i]),h.isWalkableAt(l+r,p)&&d.push([l+r,p]),(h.isWalkableAt(l,p+i)||h.isWalkableAt(l+r,p))&&d.push([l+r,p+i]),!h.isWalkableAt(l-r,p)&&h.isWalkableAt(l,p+i)&&d.push([l-r,p+i]),!h.isWalkableAt(l,p-i)&&h.isWalkableAt(l+r,p)&&d.push([l+r,p-i])):0===r?h.isWalkableAt(l,p+i)&&(d.push([l,p+i]),h.isWalkableAt(l+1,p)||d.push([l+1,p+i]),h.isWalkableAt(l-1,p)||d.push([l-1,p+i])):h.isWalkableAt(l+r,p)&&(d.push([l+r,p]),h.isWalkableAt(l,p+1)||d.push([l+r,p+1]),h.isWalkableAt(l,p-1)||d.push([l+r,p-1]));else for(a=h.getNeighbors(t,o.IfAtMostOneObstacle),s=0,c=a.length;s<c;++s)u=a[s],d.push([u.x,u.y]);return d},t.exports=r},1537:function(t,e,n){"use strict";function r(t){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return i=function(){return t},t}function o(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=o(n(25)),u=n(180),s=o(n(66)),c=o(n(1538)),f=n(587),l=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==r(t)&&"function"!=typeof t)return{default:t};var e=i();if(e&&e.has(t))return e.get(t);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){var u=o?Object.getOwnPropertyDescriptor(t,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=t[a]}return n.default=t,e&&e.set(t,n),n}(n(32)),p=n(133),h=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),d=function(){return d=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},d.apply(this,arguments)},y=function(t){function e(){var e=t.call(this,"MapListScene")||this;return e.preload=u.preload,e}return h(e,t),e.prototype.create=function(){var t=this,e=this.add.container(100,100);c.default.forEach(function(n,r){(0,s.default)(0,100*r,n.name,e,t,function(){var e,r;t.cameras.main.fadeOut(1e3,0,0,0);var i=[{type:"UPDATE_STATE",target:d(d({},n),{forces:[{id:f.PLAYER_FORCE,name:"Player",units:["1"],relations:(e={},e[f.CPU_FORCE]="hostile",e),initialPosition:{x:2,y:4}},{id:f.CPU_FORCE,name:"Computer",units:["10"],relations:(r={},r[f.PLAYER_FORCE]="hostile",r),initialPosition:{x:12,y:4}}],cities:n.cities.map(function(t){return"castle1"===t.id?d(d({},t),{force:f.PLAYER_FORCE}):"castle2"===t.id?d(d({},t),{force:f.CPU_FORCE}):t}),units:[(0,p.unitToMapUnit)(l.getUnit("1"),f.PLAYER_FORCE,2,4),(0,p.unitToMapUnit)(l.getUnit("10"),f.CPU_FORCE,12,4)]})}];t.scene.transition({target:"MapScene",duration:1e3,moveBelow:!0,remove:!0,data:i})})})},e}(a.default.Scene),v=y;e.default=v},1538:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=function(t){return t&&t.__esModule?t:{default:t}}(n(1539)),i=[r.default];e.default=i},1539:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=[[3,3,3,3,3,3,3,3,3,3,2,2,2,2,2,2,2,2,2,2],[3,3,3,3,3,3,0,0,0,0,0,0,1,0,0,0,0,0,0,0],[3,3,3,0,1,1,0,0,0,2,0,0,0,0,0,0,0,2,0,0],[3,3,3,0,2,2,0,0,0,2,0,0,0,0,0,0,0,1,0,0],[3,0,0,0,2,1,0,0,0,2,0,0,1,0,0,2,1,1,0,0],[3,0,0,0,1,1,0,0,0,0,0,0,0,0,0,1,1,0,0,1],[3,0,0,0,0,0,0,0,2,2,2,0,1,2,0,0,0,0,0,2],[3,3,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0,0],[3,3,3,3,3,0,0,2,2,2,0,0,2,2,0,0,2,2,0,0],[3,3,3,3,3,3,3,2,1,2,0,0,1,2,0,0,1,2,0,0]],i={id:"greenHarbor",name:"Green Harbor",author:"Leonardo Farroco",description:"The first map",cells:r,units:[],forces:[],cities:[{id:"castle1",name:"Izabel",x:3,y:5,force:null,type:"castle"},{id:"castle2",name:"Madamaxe",x:10,y:4,force:null,type:"castle"},{id:"c1",name:"Arabella",x:2,y:6,force:null,type:"town"},{id:"c2",name:"Marqueze",x:10,y:1,force:null,type:"town"},{id:"c3",name:"Bauhaus",x:9,y:5,force:null,type:"town"},{id:"c4",name:"Vila Rica",x:6,y:4,force:null,type:"town"}]},o=i;e.default=o},1540:function(t,e,n){"use strict";function r(t){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t){return t&&t.__esModule?t:{default:t}}function o(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return o=function(){return t},t}function a(t){if(t&&t.__esModule)return t;if(null===t||"object"!==r(t)&&"function"!=typeof t)return{default:t};var e=o();if(e&&e.has(t))return e.get(t);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){var u=i?Object.getOwnPropertyDescriptor(t,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=t[a]}return n.default=t,e&&e.set(t,n),n}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var u=a(n(25)),s=n(79),c=a(n(32)),f=n(289),l=n(65),p=n(1541),h=i(n(1542)),d=i(n(1545)),y=i(n(1546)),v=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),m=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var o=arguments[e],a=0,u=o.length;a<u;a++,i++)r[i]=o[a];return r},_=function(t){return 1===t?3:3===t?1:t},g=function(t){return function(e){if(!e.squad)throw new Error(l.INVALID_STATE);var n=c.getSquad(e.squad.id);if(!n)throw new Error(l.INVALID_STATE);var r=n.members[e.id],i=r.x,o=r.y;return{x:n.id===t?i:_(i),y:n.id===t?o:_(o)}}},b=function(t){function e(){var e=t.call(this,"CombatScene")||this;return e.charas=[],e.top="",e.bottom="",e.conflictId="",e.currentTurn=0,e.container=null,e.onCombatFinish=null,e}return v(e,t),e.prototype.updateUnit=function(t){this.charas=this.charas.map(function(e){return e.unit.id===t.id&&(e.unit=t),e})},e.prototype.create=function(t){var e=this;this.container&&this.container.destroy(),this.onCombatFinish=this.onCombatFinish,this.sound.stopAll(),this.sound.add("combat1").play(),this.container=this.add.container(0,0),(0,h.default)(this,this.container),this.top=t.top,this.bottom=t.bottom,this.conflictId=t.conflictId,[t.top,t.bottom].forEach(function(n){var r=c.getSquadMembers(n),i=n===t.top,o=g(t.top);r.sort(function(t,e){return o(t).y-o(e).y}).forEach(function(t){var n=o(t),r=(0,f.cartesianToIsometricBattle)(i,n.x,n.y),a=r.x,u=r.y,c=new s.Chara("combat-chara-"+t.id,e,t,a,u,1,i);e.charas.push(c)})}),setTimeout(function(){e.turn()},1e3)},e.prototype.turnOff=function(){var t;this.removeChildren(),null===(t=this.container)||void 0===t||t.destroy(),this.scene.stop()},e.prototype.removeChildren=function(){var t=this;this.charas.forEach(function(e){e.container.destroy(),t.scene.remove(e)}),this.charas=[]},e.prototype.turn=function(){var t=(0,p.runCombat)(this.charas.map(function(t){return t.unit}));this.execute(t)},e.prototype.execute=function(t){var e=this,n=t[0];console.log("Command:",n);var r=function(t){return t.filter(function(t,e){return e>0})},i=function(){var n=r(t);0===n.length?console.log("finish!"):e.execute(n)};if("MOVE"===n.type)this.moveUnit(n.source,n.target).then(i);else if("SLASH"===n.type)this.slash(n.source,n.target,n.damage,n.updatedTarget).then(i);else if("SHOOT"===n.type)this.bowAttack(n.source,n.target,n.damage,n.updatedTarget).then(i);else if("FIREBALL"===n.type)this.castFireball(n.source,n.target,n.damage,n.updatedTarget).then(i);else if("RETURN"===n.type)this.return(n.target).then(i);else if("END_TURN"===n.type)this.currentTurn=this.currentTurn+1,this.turn();else if("RESTART_TURNS"===n.type)this.currentTurn=0,this.turn();else if("END_COMBAT"===n.type)this.retreatUnits().then(function(t){var n=t.map(function(t){return{type:"UPDATE_UNIT",target:t}});e.scene.start("MapScene",m(n,[{type:"END_UNIT_TURN"}])),e.turnOff()});else if("VICTORY"===n.type){if(console.log("Winning Team:",n.target),this.onCombatFinish){var o=n.target===this.top?this.bottom:this.top;this.onCombatFinish(o)}this.turnOff()}else console.error("Unknown command:",n)},e.prototype.getChara=function(t){var e=this.charas.find(function(e){return e.unit.id===t});if(!e||!e.container)throw new Error(l.INVALID_STATE);return e},e.prototype.moveUnit=function(t,e){var n=this,r=this.getChara(t),i=this.getChara(e);if(r.clearAnimations(),r.run(),!i.unit.squad)throw new Error(l.INVALID_STATE);var o=this.top===i.unit.squad.id;if(!i.container)throw new Error(l.INVALID_STATE);var a=c.getSquadMember(i.unit.id),u=(0,f.cartesianToIsometricBattle)(o,o?a.x+1:_(a.x)-1,o?a.y:_(a.y)),s=u.x,p=u.y,h=function(t){return{targets:r.container,x:s,y:p,duration:500,onComplete:function(){t()}}},d={delay:500/60,callback:function(){n.charas.sort(function(t,e){return t.container&&e.container?t.container.y-e.container.y:0}).forEach(function(t){return n.scene.bringToTop(t.key)})},repeat:60};return new Promise(function(t){n.time.addEvent(d),n.tweens.add(h(t))})},e.prototype.retreatUnits=function(){var t=this;return this.charas.forEach(function(e){if(e.clearAnimations(),e.run(),!e.unit.squad)throw new Error(l.INVALID_STATE);var n=t.top===e.unit.squad.id,r=function(){if(!e.container)throw new Error(l.INVALID_STATE);return n?{x:e.container.x-200,y:e.container.y-200}:{x:e.container.x+200,y:e.container.y+200}}(),i=r.x,o=r.y,a={targets:e.container,x:i,y:o,duration:1e3};t.tweens.add(a)}),new Promise(function(e){var n={delay:1e3,callback:function(){return e(t.charas.map(function(t){return t.unit}))}};t.time.addEvent(n)})},e.prototype.slash=function(t,e,n,r){this.updateUnit(r);var i=this.getChara(t),o=this.getChara(e);return new Promise(function(t){i.slash(t),o.flinch(n,0===r.currentHp)})},e.prototype.bowAttack=function(t,e,n,r){var i,o,a=this;this.updateUnit(r);var u=this.getChara(t),s=this.getChara(e),c=this.add.image(null===(i=u.container)||void 0===i?void 0:i.x,null===(o=u.container)||void 0===o?void 0:o.y,"arrow");return c.rotation=.5,u.front||(c.scaleX=-1),new Promise(function(t){var e,i;u.performBowAttack(t),a.add.tween({targets:c,x:null===(e=s.container)||void 0===e?void 0:e.x,y:null===(i=s.container)||void 0===i?void 0:i.y,duration:250,onComplete:function(){c.destroy(),s.flinch(n,0===r.currentHp)}})})},e.prototype.castFireball=function(t,e,n,r){var i,o,a=this;this.updateUnit(r);var u=this.getChara(t),s=this.getChara(e),c=(0,d.default)(this,null===(i=u.container)||void 0===i?void 0:i.x,null===(o=u.container)||void 0===o?void 0:o.y);return c.rotation=1.9,u.front&&(c.rotation=-1),new Promise(function(t){var e,i;(0,y.default)(u,t),a.add.tween({targets:c,x:null===(e=s.container)||void 0===e?void 0:e.x,y:null===(i=s.container)||void 0===i?void 0:i.y,duration:700,onComplete:function(){c.destroy(),s.flinch(n,0===r.currentHp)}})})},e.prototype.return=function(t){var e=this,n=this.getChara(t);if(n.clearAnimations(),n.run(),!n.unit.squad)throw new Error(l.INVALID_STATE);var r=g(this.top)(n.unit),i=(0,f.cartesianToIsometricBattle)(this.top===n.unit.squad.id,r.x,r.y),o=i.x,a=i.y,u=function(t){return{targets:n.container,x:o,y:a,duration:500,onComplete:function(){n.stand(),t()}}};return new Promise(function(t){e.tweens.add(u(t))})},e}(u.Scene),w=b;e.default=w},1541:function(t,e,n){"use strict";function r(t,e,n){var r=s(t.unit,e);if(!r)throw new Error(h.INVALID_STATE);var i=(0,p.getUnitDamage)(t.unit),o=e.map(function(t){var e=t.unit.currentHp-i,n=e<1?0:e;return t.unit.id===r.id?{remainingAttacks:t.remainingAttacks,unit:d(d({},t.unit),{currentHp:n})}:t}).map(function(e){return e.unit.id===t.unit.id?{remainingAttacks:e.remainingAttacks-1,unit:d({},e.unit)}:e}),a=o.find(function(t){return t.unit.id===r.id}),u=o.find(function(e){return e.unit.id===t.unit.id});if(!a||!u)throw new Error(h.INVALID_STATE);var c=[{type:"MOVE",source:t.unit.id,target:r.id}],f=[{type:"SLASH",source:t.unit.id,target:r.id,damage:i,updatedTarget:a.unit,updatedSource:u.unit}],l=[{type:"RETURN",target:t.unit.id}];return{commands:n.concat(c).concat(f).concat(l),updatedUnits:o}}function i(t,e,n){var r=s(t.unit,e);if(!r)throw new Error(h.INVALID_STATE);var i=(0,p.getUnitDamage)(t.unit),o=e.map(function(t){var e=t.unit.currentHp-i,n=e<1?0:e;return t.unit.id===r.id?{remainingAttacks:t.remainingAttacks,unit:d(d({},t.unit),{currentHp:n})}:t}).map(function(e){return e.unit.id===t.unit.id?{remainingAttacks:e.remainingAttacks-1,unit:d({},e.unit)}:e}),a=o.find(function(t){return t.unit.id===r.id}),u=o.find(function(e){return e.unit.id===t.unit.id});if(!a||!u)throw new Error(h.INVALID_STATE);var c=[{type:"SHOOT",source:t.unit.id,target:r.id,damage:i,updatedTarget:a.unit,updatedSource:u.unit}];return{commands:n.concat(c),updatedUnits:o}}function o(t,e,n){var r=s(t.unit,e);if(!r)throw new Error(h.INVALID_STATE);var i=(0,p.getUnitDamage)(t.unit),o=e.map(function(t){var e=t.unit.currentHp-i,n=e<1?0:e;return t.unit.id===r.id?{remainingAttacks:t.remainingAttacks,unit:d(d({},t.unit),{currentHp:n})}:t}).map(function(e){return e.unit.id===t.unit.id?{remainingAttacks:e.remainingAttacks-1,unit:d({},e.unit)}:e}),a=o.find(function(t){return t.unit.id===r.id}),u=o.find(function(e){return e.unit.id===t.unit.id});if(!a||!u)throw new Error(h.INVALID_STATE);var c=[{type:"FIREBALL",source:t.unit.id,target:r.id,damage:i,updatedTarget:a.unit,updatedSource:u.unit}];return{commands:n.concat(c),updatedUnits:o}}function a(t,e){return l.default.pipe([l.default.map(l.default.prop("unit")),l.default.filter(f(t.unit)),l.default.all(function(t){return!c(t)})])(e)}function u(t){return t.filter(function(t){return c(t.unit)}).every(function(t){return t.remainingAttacks<1})}function s(t,e){return e.map(function(t){return t.unit}).filter(f(t)).filter(c).sort(function(t,e){return t.currentHp-e.currentHp})[0]}function c(t){return t.currentHp>0}function f(t){return function(e){var n,r;return(null===(n=t.squad)||void 0===n?void 0:n.id)!==(null===(r=e.squad)||void 0===r?void 0:r.id)}}Object.defineProperty(e,"__esModule",{value:!0}),e.getTarget=s,e.runTurn=e.runCombat=e.initiativeList=void 0;var l=function(t){return t&&t.__esModule?t:{default:t}}(n(135)),p=n(288),h=n(65),d=function(){return d=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},d.apply(this,arguments)},y=function(t){return 2*t.unit.dex},v=function(t){return t.sort(function(t,e){return y(e)-y(t)})};e.initiativeList=v;var m=function(t){var e=t.map(function(t){return{unit:t,remainingAttacks:(0,p.getUnitAttack)(t).times}}),n=v(e);return _(0,n,[])};e.runCombat=m;var _=function t(e,n,s){var c=n[e],f=n.length-1===e,l=f?0:e+1;if(!c.unit.squad)throw new Error(h.INVALID_STATE);var p=[],d=n;if(c.remainingAttacks>0&&c.unit.currentHp>0)if("archer"===c.unit.class){var y=i(c,n,s);p=y.commands,d=y.updatedUnits}else if("mage"===c.unit.class){var y=o(c,n,s);p=y.commands,d=y.updatedUnits}else{var y=r(c,n,s);p=y.commands,d=y.updatedUnits}else p=s;var v=c.unit.squad;return a(c,d)?p.concat([function(){return{type:"VICTORY",target:v.id}}()]):u(d)?p.concat([function(){return{type:"END_COMBAT"}}()]):t(l,d,p)};e.runTurn=_},1542:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=r(n(1543)),o=r(n(1544)),a=n(78),u=function(t,e){var n=t.add.image(0,0,"backgrounds/plain");e.add(n),n.setOrigin(0,0),n.displayWidth=a.SCREEN_WIDTH,n.displayHeight=a.SCREEN_HEIGHT,[{x:350,y:40},{x:320,y:60},{x:460,y:70},{x:420,y:80},{x:550,y:110},{x:590,y:120},{x:680,y:120},{x:1110,y:350},{x:1130,y:370}].map((0,i.default)(t)).forEach(function(t){return e.add(t)}),[{x:320,y:700},{x:390,y:710},{x:450,y:750},{x:1250,y:450},{x:50,y:410}].forEach(function(n){var r=n.x,i=n.y,o=t.add.image(r,i,"props/bush");e.add(o),o.setScale(1),o.setOrigin(.5,1),t.tweens.add({targets:o,scaleX:1.25,duration:2e3*Math.random()+1e4,repeat:-1,yoyo:!0,ease:"Linear"})});var r=t.add.image(870,130,"props/far_tree_1");e.add(r),r.setScale(.5),r.setOrigin(.5,1),t.tweens.add({targets:r,scaleX:.55,rotation:-.2,duration:1200*Math.random()+4e3,repeat:-1,yoyo:!0,ease:"Linear"});var u=(0,o.default)(t)(1e3,250,.4);e.add(u)};e.default=u},1543:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=function(t){return function(e){var n=e.x,r=e.y,i=t.add.image(n,r,"props/grass");return i.setScale(.4),i.setOrigin(.5,1),i.setRotation(-.2),t.tweens.add({targets:i,rotation:.2,scaleX:.5,duration:1e3*Math.random()+5e3,repeat:-1,yoyo:!0,ease:"Bounce"}),i}};e.default=r},1544:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n(580),i=function(t){return function(e,n,i){return[{x:e,y:n,scale:i},{x:e-30*i,y:n,scale:.8*i},{x:e+30*i,y:n+20,scale:.7*i},{x:e-60*i,y:n+20,scale:.4*i}].map(function(e){var n=t.add.image(e.x,e.y,"props/branch"),i=.3*e.scale,o=(0,r.random)(2,4)/10*-1;return n.setScale(i),n.setOrigin(.3,1),n.setRotation(o),t.tweens.add({targets:n,rotation:-1*o,duration:6e3,yoyo:!0,repeat:-1,scaleX:i+i/10,ease:"Bounce"}),n})}};e.default=i},1545:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=function(t,e,n){var r={key:"burn",frames:t.anims.generateFrameNumbers("fire",{frames:[0,1,2,3,5,6,7]}),frameRate:12,repeat:-1};t.anims.create(r);var i=t.add.sprite(e,n,"fire").play("burn");return i.setScale(2),i.setRotation(2),i};e.default=r},1546:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=function(t,e){var n,r,i,o;t.clearAnimations(),t.parent.tweens.add({targets:null===t||void 0===t?void 0:t.mainHandContainer,yoyo:!0,x:((null===(n=t.mainHandContainer)||void 0===n?void 0:n.x)||0)+(t.front?-30:30),y:((null===(r=t.mainHandContainer)||void 0===r?void 0:r.y)||0)-20,duration:500,ease:"ExpoOut",onComplete:function(){e()}}),t.parent.tweens.add({targets:null===t||void 0===t?void 0:t.offHandContainer,yoyo:!0,rotation:t.front?-1.2:.5,x:((null===(i=t.mainHandContainer)||void 0===i?void 0:i.y)||0)+20,Y:((null===(o=t.mainHandContainer)||void 0===o?void 0:o.y)||0)-5,duration:500,ease:"ExpoOut"}),t.sound.add("fireball").play()};e.default=r},1547:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=r(n(25)),o=n(32),a=n(180),u=r(n(66)),s=r(n(291)),c=r(n(106)),f=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),l=function(t){function e(){var e=t.call(this,"OptionsScene")||this;return e.preload=a.preload,e}return f(e,t),e.prototype.create=function(){var t=this,e=this.add.container(300,100);(0,u.default)(10,400,"Return",e,this,function(){e.destroy(),t.scene.transition({target:"TitleScene",duration:0,moveBelow:!0})}),(0,s.default)(0,0,400,300,e,this),(0,c.default)(10,10,"Sound Enabled",e,this),(0,u.default)(310,10,"Toggle",e,this,function(){return(0,o.setSoundEnabled)(!(0,o.getOptions)().soundEnabled)}),(0,c.default)(10,50,"Music Enabled",e,this),(0,u.default)(310,50,"Toggle",e,this,function(){return(0,o.setMusicEnabled)(!(0,o.getOptions)().musicEnabled)})},e}(i.default.Scene),p=l;e.default=p},1548:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=r(n(25)),o=n(180),a=r(n(66)),u=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),s=function(t){function e(){var e=t.call(this,"WorldScene")||this;return e.preload=o.preload,e}return u(e,t),e.prototype.create=function(){var t=this;this.cameras.main.setBackgroundColor("#000000");var e=this.add.container(300,100);(0,a.default)(10,400,"Battalion",e,this,function(){t.cameras.main.fadeOut(1e3,0,0,0),t.scene.transition({target:"TitleScene",duration:1e3,moveBelow:!0,remove:!0})}),(0,a.default)(210,400,"Items",e,this,function(){e.destroy(),t.scene.transition({target:"TitleScene",duration:0,moveBelow:!0})})},e}(i.default.Scene),c=s;e.default=c},1549:function(t,e,n){var r;!function(){function i(t,e,n){return t.call.apply(t.bind,arguments)}function o(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function a(t,e,n){return a=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?i:o,a.apply(null,arguments)}function u(t,e){this.a=t,this.o=e||t,this.c=this.o.document}function s(t,e,n,r){if(e=t.c.createElement(e),n)for(var i in n)n.hasOwnProperty(i)&&("style"==i?e.style.cssText=n[i]:e.setAttribute(i,n[i]));return r&&e.appendChild(t.c.createTextNode(r)),e}function c(t,e,n){t=t.c.getElementsByTagName(e)[0],t||(t=document.documentElement),t.insertBefore(n,t.lastChild)}function f(t){t.parentNode&&t.parentNode.removeChild(t)}function l(t,e,n){e=e||[],n=n||[];for(var r=t.className.split(/\s+/),i=0;i<e.length;i+=1){for(var o=!1,a=0;a<r.length;a+=1)if(e[i]===r[a]){o=!0;break}o||r.push(e[i])}for(e=[],i=0;i<r.length;i+=1){for(o=!1,a=0;a<n.length;a+=1)if(r[i]===n[a]){o=!0;break}o||e.push(r[i])}t.className=e.join(" ").replace(/\s+/g," ").replace(/^\s+|\s+$/,"")}function p(t,e){for(var n=t.className.split(/\s+/),r=0,i=n.length;r<i;r++)if(n[r]==e)return!0;return!1}function h(t){return t.o.location.hostname||t.a.location.hostname}function d(t,e,n){function r(){u&&i&&o&&(u(a),u=null)}e=s(t,"link",{rel:"stylesheet",href:e,media:"all"});var i=!1,o=!0,a=null,u=n||null;ot?(e.onload=function(){i=!0,r()},e.onerror=function(){i=!0,a=Error("Stylesheet failed to load"),r()}):setTimeout(function(){i=!0,r()},0),c(t,"head",e)}function y(t,e,n,r){var i=t.c.getElementsByTagName("head")[0];if(i){var o=s(t,"script",{src:e}),a=!1;return o.onload=o.onreadystatechange=function(){a||this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(a=!0,n&&n(null),o.onload=o.onreadystatechange=null,"HEAD"==o.parentNode.tagName&&i.removeChild(o))},i.appendChild(o),setTimeout(function(){a||(a=!0,n&&n(Error("Script load timeout")))},r||5e3),o}return null}function v(){this.a=0,this.c=null}function m(t){return t.a++,function(){t.a--,g(t)}}function _(t,e){t.c=e,g(t)}function g(t){0==t.a&&t.c&&(t.c(),t.c=null)}function b(t){this.a=t||"-"}function w(t,e){this.c=t,this.f=4,this.a="n";var n=(e||"n4").match(/^([nio])([1-9])$/i);n&&(this.a=n[1],this.f=parseInt(n[2],10))}function O(t){return E(t)+" "+t.f+"00 300px "+S(t.c)}function S(t){var e=[];t=t.split(/,\s*/);for(var n=0;n<t.length;n++){var r=t[n].replace(/['"]/g,"");-1!=r.indexOf(" ")||/^\d/.test(r)?e.push("'"+r+"'"):e.push(r)}return e.join(",")}function A(t){return t.a+t.f}function E(t){var e="normal";return"o"===t.a?e="oblique":"i"===t.a&&(e="italic"),e}function T(t){var e=4,n="n",r=null;return t&&((r=t.match(/(normal|oblique|italic)/i))&&r[1]&&(n=r[1].substr(0,1).toLowerCase()),(r=t.match(/([1-9]00|normal|bold)/i))&&r[1]&&(/bold/i.test(r[1])?e=7:/[1-9]00/.test(r[1])&&(e=parseInt(r[1].substr(0,1),10)))),n+e}function C(t,e){this.c=t,this.f=t.o.document.documentElement,this.h=e,this.a=new b("-"),this.j=!1!==e.events,this.g=!1!==e.classes}function I(t){t.g&&l(t.f,[t.a.c("wf","loading")]),x(t,"loading")}function k(t){if(t.g){var e=p(t.f,t.a.c("wf","active")),n=[],r=[t.a.c("wf","loading")];e||n.push(t.a.c("wf","inactive")),l(t.f,n,r)}x(t,"inactive")}function x(t,e,n){t.j&&t.h[e]&&(n?t.h[e](n.c,A(n)):t.h[e]())}function R(){this.c={}}function N(t,e,n){var r,i=[];for(r in e)if(e.hasOwnProperty(r)){var o=t.c[r];o&&i.push(o(e[r],n))}return i}function M(t,e){this.c=t,this.f=e,this.a=s(this.c,"span",{"aria-hidden":"true"},this.f)}function P(t){c(t.c,"body",t.a)}function j(t){return"display:block;position:absolute;top:-9999px;left:-9999px;font-size:300px;width:auto;height:auto;line-height:normal;margin:0;padding:0;font-variant:normal;white-space:nowrap;font-family:"+S(t.c)+";font-style:"+E(t)+";font-weight:"+t.f+"00;"}function D(t,e,n,r,i,o){this.g=t,this.j=e,this.a=r,this.c=n,this.f=i||3e3,this.h=o||void 0}function F(t,e,n,r,i,o,a){this.v=t,this.B=e,this.c=n,this.a=r,this.s=a||"BESbswy",this.f={},this.w=i||3e3,this.u=o||null,this.m=this.j=this.h=this.g=null,this.g=new M(this.c,this.s),this.h=new M(this.c,this.s),this.j=new M(this.c,this.s),this.m=new M(this.c,this.s),t=new w(this.a.c+",serif",A(this.a)),t=j(t),this.g.a.style.cssText=t,t=new w(this.a.c+",sans-serif",A(this.a)),t=j(t),this.h.a.style.cssText=t,t=new w("serif",A(this.a)),t=j(t),this.j.a.style.cssText=t,t=new w("sans-serif",A(this.a)),t=j(t),this.m.a.style.cssText=t,P(this.g),P(this.h),P(this.j),P(this.m)}function H(){if(null===ut){var t=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent);ut=!!t&&(536>parseInt(t[1],10)||536===parseInt(t[1],10)&&11>=parseInt(t[2],10))}return ut}function L(t,e,n){for(var r in at)if(at.hasOwnProperty(r)&&e===t.f[at[r]]&&n===t.f[at[r]])return!0;return!1}function U(t){var e,n=t.g.a.offsetWidth,r=t.h.a.offsetWidth;(e=n===t.f.serif&&r===t.f["sans-serif"])||(e=H()&&L(t,n,r)),e?it()-t.A>=t.w?H()&&L(t,n,r)&&(null===t.u||t.u.hasOwnProperty(t.a.c))?B(t,t.v):B(t,t.B):q(t):B(t,t.v)}function q(t){setTimeout(a(function(){U(this)},t),50)}function B(t,e){setTimeout(a(function(){f(this.g.a),f(this.h.a),f(this.j.a),f(this.m.a),e(this.a)},t),0)}function W(t,e,n){this.c=t,this.a=e,this.f=0,this.m=this.j=!1,this.s=n}function z(t){0==--t.f&&t.j&&(t.m?(t=t.a,t.g&&l(t.f,[t.a.c("wf","active")],[t.a.c("wf","loading"),t.a.c("wf","inactive")]),x(t,"active")):k(t.a))}function Y(t){this.j=t,this.a=new R,this.h=0,this.f=this.g=!0}function K(t,e,n,r,i){var o=0==--t.h;(t.f||t.g)&&setTimeout(function(){var t=i||null,u=r||null||{};if(0===n.length&&o)k(e.a);else{e.f+=n.length,o&&(e.j=o);var s,c=[];for(s=0;s<n.length;s++){var f=n[s],p=u[f.c],h=e.a,d=f;if(h.g&&l(h.f,[h.a.c("wf",d.c,A(d).toString(),"loading")]),x(h,"fontloading",d),h=null,null===st)if(window.FontFace){var d=/Gecko.*Firefox\/(\d+)/.exec(window.navigator.userAgent),y=/OS X.*Version\/10\..*Safari/.exec(window.navigator.userAgent)&&/Apple/.exec(window.navigator.vendor);st=d?42<parseInt(d[1],10):!y}else st=!1;h=st?new D(a(e.g,e),a(e.h,e),e.c,f,e.s,p):new F(a(e.g,e),a(e.h,e),e.c,f,e.s,t,p),c.push(h)}for(s=0;s<c.length;s++)c[s].start()}},0)}function V(t,e,n){var r=[],i=n.timeout;I(e);var r=N(t.a,n,t.c),o=new W(t.c,e,i);for(t.h=r.length,e=0,n=r.length;e<n;e++)r[e].load(function(e,n,r){K(t,o,e,n,r)})}function G(t,e){this.c=t,this.a=e}function X(t,e){this.c=t,this.a=e}function J(t,e){this.c=t||ct,this.a=[],this.f=[],this.g=e||""}function $(t,e){for(var n=e.length,r=0;r<n;r++){var i=e[r].split(":");3==i.length&&t.f.push(i.pop());var o="";2==i.length&&""!=i[1]&&(o=":"),t.a.push(i.join(o))}}function Z(t){if(0==t.a.length)throw Error("No fonts to load!");if(-1!=t.c.indexOf("kit="))return t.c;for(var e=t.a.length,n=[],r=0;r<e;r++)n.push(t.a[r].replace(/ /g,"+"));return e=t.c+"?family="+n.join("%7C"),0<t.f.length&&(e+="&subset="+t.f.join(",")),0<t.g.length&&(e+="&text="+encodeURIComponent(t.g)),e}function Q(t){this.f=t,this.a=[],this.c={}}function tt(t){for(var e=t.f.length,n=0;n<e;n++){var r=t.f[n].split(":"),i=r[0].replace(/\+/g," "),o=["n4"];if(2<=r.length){var a,u=r[1];if(a=[],u)for(var u=u.split(","),s=u.length,c=0;c<s;c++){var f;if(f=u[c],f.match(/^[\w-]+$/)){var l=ht.exec(f.toLowerCase());if(null==l)f="";else{if(f=l[2],f=null==f||""==f?"n":pt[f],null==(l=l[1])||""==l)l="4";else var p=lt[l],l=p||(isNaN(l)?"4":l.substr(0,1));f=[f,l].join("")}}else f="";f&&a.push(f)}0<a.length&&(o=a),3==r.length&&(r=r[2],a=[],r=r?r.split(","):a,0<r.length&&(r=ft[r[0]])&&(t.c[i]=r))}for(t.c[i]||(r=ft[i])&&(t.c[i]=r),r=0;r<o.length;r+=1)t.a.push(new w(i,o[r]))}}function et(t,e){this.c=t,this.a=e}function nt(t,e){this.c=t,this.a=e}function rt(t,e){this.c=t,this.f=e,this.a=[]}var it=Date.now||function(){return+new Date},ot=!!window.FontFace;b.prototype.c=function(t){for(var e=[],n=0;n<arguments.length;n++)e.push(arguments[n].replace(/[\W_]+/g,"").toLowerCase());return e.join(this.a)},D.prototype.start=function(){var t=this.c.o.document,e=this,n=it(),r=new Promise(function(r,i){function o(){it()-n>=e.f?i():t.fonts.load(O(e.a),e.h).then(function(t){1<=t.length?r():setTimeout(o,25)},function(){i()})}o()}),i=null,o=new Promise(function(t,n){i=setTimeout(n,e.f)});Promise.race([o,r]).then(function(){i&&(clearTimeout(i),i=null),e.g(e.a)},function(){e.j(e.a)})};var at={D:"serif",C:"sans-serif"},ut=null;F.prototype.start=function(){this.f.serif=this.j.a.offsetWidth,this.f["sans-serif"]=this.m.a.offsetWidth,this.A=it(),U(this)};var st=null;W.prototype.g=function(t){var e=this.a;e.g&&l(e.f,[e.a.c("wf",t.c,A(t).toString(),"active")],[e.a.c("wf",t.c,A(t).toString(),"loading"),e.a.c("wf",t.c,A(t).toString(),"inactive")]),x(e,"fontactive",t),this.m=!0,z(this)},W.prototype.h=function(t){var e=this.a;if(e.g){var n=p(e.f,e.a.c("wf",t.c,A(t).toString(),"active")),r=[],i=[e.a.c("wf",t.c,A(t).toString(),"loading")];n||r.push(e.a.c("wf",t.c,A(t).toString(),"inactive")),l(e.f,r,i)}x(e,"fontinactive",t),z(this)},Y.prototype.load=function(t){this.c=new u(this.j,t.context||this.j),this.g=!1!==t.events,this.f=!1!==t.classes,V(this,new C(this.c,t),t)},G.prototype.load=function(t){function e(){if(o["__mti_fntLst"+r]){var n,i=o["__mti_fntLst"+r](),a=[];if(i)for(var u=0;u<i.length;u++){var s=i[u].fontfamily;void 0!=i[u].fontStyle&&void 0!=i[u].fontWeight?(n=i[u].fontStyle+i[u].fontWeight,a.push(new w(s,n))):a.push(new w(s))}t(a)}else setTimeout(function(){e()},50)}var n=this,r=n.a.projectId,i=n.a.version;if(r){var o=n.c.o;y(this.c,(n.a.api||"https://fast.fonts.net/jsapi")+"/"+r+".js"+(i?"?v="+i:""),function(i){i?t([]):(o["__MonotypeConfiguration__"+r]=function(){return n.a},e())}).id="__MonotypeAPIScript__"+r}else t([])},X.prototype.load=function(t){var e,n,r=this.a.urls||[],i=this.a.families||[],o=this.a.testStrings||{},a=new v;for(e=0,n=r.length;e<n;e++)d(this.c,r[e],m(a));var u=[];for(e=0,n=i.length;e<n;e++)if(r=i[e].split(":"),r[1])for(var s=r[1].split(","),c=0;c<s.length;c+=1)u.push(new w(r[0],s[c]));else u.push(new w(r[0]));_(a,function(){t(u,o)})};var ct="https://fonts.googleapis.com/css",ft={latin:"BESbswy","latin-ext":"çöüğş",cyrillic:"йяЖ",greek:"αβΣ",khmer:"កខគ",Hanuman:"កខគ"},lt={thin:"1",extralight:"2","extra-light":"2",ultralight:"2","ultra-light":"2",light:"3",regular:"4",book:"4",medium:"5","semi-bold":"6",semibold:"6","demi-bold":"6",demibold:"6",bold:"7","extra-bold":"8",extrabold:"8","ultra-bold":"8",ultrabold:"8",black:"9",heavy:"9",l:"3",r:"4",b:"7"},pt={i:"i",italic:"i",n:"n",normal:"n"},ht=/^(thin|(?:(?:extra|ultra)-?)?light|regular|book|medium|(?:(?:semi|demi|extra|ultra)-?)?bold|black|heavy|l|r|b|[1-9]00)?(n|i|normal|italic)?$/,dt={Arimo:!0,Cousine:!0,Tinos:!0};et.prototype.load=function(t){var e=new v,n=this.c,r=new J(this.a.api,this.a.text),i=this.a.families;$(r,i);var o=new Q(i);tt(o),d(n,Z(r),m(e)),_(e,function(){t(o.a,o.c,dt)})},nt.prototype.load=function(t){var e=this.a.id,n=this.c.o;e?y(this.c,(this.a.api||"https://use.typekit.net")+"/"+e+".js",function(e){if(e)t([]);else if(n.Typekit&&n.Typekit.config&&n.Typekit.config.fn){e=n.Typekit.config.fn;for(var r=[],i=0;i<e.length;i+=2)for(var o=e[i],a=e[i+1],u=0;u<a.length;u++)r.push(new w(o,a[u]));try{n.Typekit.load({events:!1,classes:!1,async:!0})}catch(t){}t(r)}},2e3):t([])},rt.prototype.load=function(t){var e=this.f.id,n=this.c.o,r=this;e?(n.__webfontfontdeckmodule__||(n.__webfontfontdeckmodule__={}),n.__webfontfontdeckmodule__[e]=function(e,n){for(var i=0,o=n.fonts.length;i<o;++i){var a=n.fonts[i];r.a.push(new w(a.name,T("font-weight:"+a.weight+";font-style:"+a.style)))}t(r.a)},y(this.c,(this.f.api||"https://f.fontdeck.com/s/css/js/")+h(this.c)+"/"+e+".js",function(e){e&&t([])})):t([])};var yt=new Y(window);yt.a.c.custom=function(t,e){return new X(e,t)},yt.a.c.fontdeck=function(t,e){return new rt(e,t)},yt.a.c.monotype=function(t,e){return new G(e,t)},yt.a.c.typekit=function(t,e){return new nt(e,t)},yt.a.c.google=function(t,e){return new et(e,t)};var vt={load:a(yt.load,yt)};void 0!==(r=function(){return vt}.call(e,n,e,t))&&(t.exports=r)}()},180:function(t,e,n){"use strict";function r(){var t=this,e=["insignea","tile","hand","foot","head","arrow","backgrounds/plain","backgrounds/sunset","backgrounds/squad_edit"];this.load.spritesheet("fire",o+"/fire.svg",{frameWidth:50,frameHeight:117,endFrame:7}),e.forEach(function(e){return t.load.image(e,o+"/"+e+".svg")}),["dark1","long1","long2","split","split2"].forEach(function(e){t.load.image(e,o+"/hair/"+e+".svg"),t.load.image("back_"+e,o+"/hair/back_"+e+".svg")}),this.load.image("head",o+"/head.svg"),this.load.image("back_head",o+"/back_head.svg"),i.classes.forEach(function(e){t.load.image("trunk_"+e,o+"/trunk_"+e+".svg"),t.load.image("trunk_back_"+e,o+"/trunk_back_"+e+".svg")}),["arrow_right","panel"].forEach(function(e){t.load.image(e,o+"/ui/"+e+".svg")}),["amulet","iron_armor","iron_shield","iron_sword","steel_armor","steel_shield","steel_sword","baldar_armor","baldar_shield","baldar_sword","oaken_staff","iron_spear"].forEach(function(e){t.load.image(e,o+"/items/"+e+".png")}),["equips/iron_sword","equips/iron_spear","equips/steel_sword","equips/baldar_sword","equips/oaken_staff","equips/bow","equips/simple_helm","equips/iron_helm","equips/wiz_hat","equips/archer_hat","equips/back_simple_helm","equips/back_iron_helm","equips/back_wiz_hat","equips/back_archer_hat"].forEach(function(e){t.load.image(e,o+"/"+e+".svg")}),["props/grass","props/bush","props/far_tree_1","props/branch"].forEach(function(e){t.load.image(e,o+"/"+e+".svg")}),["tiles/grass","tiles/woods","tiles/mountain","tiles/castle","tiles/water","tiles/beach-r","tiles/beach-l","tiles/beach-t","tiles/beach-b","tiles/beach-tr","tiles/beach-tl","tiles/beach-br","tiles/beach-bl","tiles/beach-b-and-r","tiles/beach-t-and-r","tiles/beach-b-and-l","tiles/beach-t-and-l"].forEach(function(e){t.load.image(e,o+"/"+e+".svg")}),["tiles/town"].forEach(function(e){t.load.image(e,o+"/"+e+".png")}),["merano"].forEach(function(e){t.load.image(e,o+"/art/castles/"+e+".jpg")}),["title","combat1","map1","sword_hit","arrow_critical","fireball"].forEach(function(e){t.load.audio(e,o+"/music/"+e+".mp3")}),["click1"].forEach(function(e){t.load.audio(e,o+"/music/"+e+".ogg")})}Object.defineProperty(e,"__esModule",{value:!0}),e.preload=r;var i=n(132),o="assets"},181:function(t,e,n){(function(t){function r(t,n){var r={seen:[],stylize:o};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),d(n)?r.showHidden=n:n&&e._extend(r,n),b(r.showHidden)&&(r.showHidden=!1),b(r.depth)&&(r.depth=2),b(r.colors)&&(r.colors=!1),b(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=i),u(r,t,r.depth)}function i(t,e){var n=r.styles[e];return n?"["+r.colors[n][0]+"m"+t+"["+r.colors[n][1]+"m":t}function o(t,e){return t}function a(t){var e={};return t.forEach(function(t,n){e[t]=!0}),e}function u(t,n,r){if(t.customInspect&&n&&E(n.inspect)&&n.inspect!==e.inspect&&(!n.constructor||n.constructor.prototype!==n)){var i=n.inspect(r,t);return _(i)||(i=u(t,i,r)),i}var o=s(t,n);if(o)return o;var d=Object.keys(n),y=a(d);if(t.showHidden&&(d=Object.getOwnPropertyNames(n)),A(n)&&(d.indexOf("message")>=0||d.indexOf("description")>=0))return c(n);if(0===d.length){if(E(n)){var v=n.name?": "+n.name:"";return t.stylize("[Function"+v+"]","special")}if(w(n))return t.stylize(RegExp.prototype.toString.call(n),"regexp");if(S(n))return t.stylize(Date.prototype.toString.call(n),"date");if(A(n))return c(n)}var m="",g=!1,b=["{","}"];if(h(n)&&(g=!0,b=["[","]"]),E(n)){m=" [Function"+(n.name?": "+n.name:"")+"]"}if(w(n)&&(m=" "+RegExp.prototype.toString.call(n)),S(n)&&(m=" "+Date.prototype.toUTCString.call(n)),A(n)&&(m=" "+c(n)),0===d.length&&(!g||0==n.length))return b[0]+m+b[1];if(r<0)return w(n)?t.stylize(RegExp.prototype.toString.call(n),"regexp"):t.stylize("[Object]","special");t.seen.push(n);var O;return O=g?f(t,n,r,y,d):d.map(function(e){return l(t,n,r,y,e,g)}),t.seen.pop(),p(O,m,b)}function s(t,e){if(b(e))return t.stylize("undefined","undefined");if(_(e)){var n="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(n,"string")}return m(e)?t.stylize(""+e,"number"):d(e)?t.stylize(""+e,"boolean"):y(e)?t.stylize("null","null"):void 0}function c(t){return"["+Error.prototype.toString.call(t)+"]"}function f(t,e,n,r,i){for(var o=[],a=0,u=e.length;a<u;++a)x(e,String(a))?o.push(l(t,e,n,r,String(a),!0)):o.push("");return i.forEach(function(i){i.match(/^\d+$/)||o.push(l(t,e,n,r,i,!0))}),o}function l(t,e,n,r,i,o){var a,s,c;if(c=Object.getOwnPropertyDescriptor(e,i)||{value:e[i]},c.get?s=c.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):c.set&&(s=t.stylize("[Setter]","special")),x(r,i)||(a="["+i+"]"),s||(t.seen.indexOf(c.value)<0?(s=y(n)?u(t,c.value,null):u(t,c.value,n-1),s.indexOf("\n")>-1&&(s=o?s.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+s.split("\n").map(function(t){return"   "+t}).join("\n"))):s=t.stylize("[Circular]","special")),b(a)){if(o&&i.match(/^\d+$/))return s;a=JSON.stringify(""+i),a.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=t.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=t.stylize(a,"string"))}return a+": "+s}function p(t,e,n){var r=0;return t.reduce(function(t,e){return r++,e.indexOf("\n")>=0&&r++,t+e.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?n[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+n[1]:n[0]+e+" "+t.join(", ")+" "+n[1]}function h(t){return Array.isArray(t)}function d(t){return"boolean"==typeof t}function y(t){return null===t}function v(t){return null==t}function m(t){return"number"==typeof t}function _(t){return"string"==typeof t}function g(t){return"symbol"==typeof t}function b(t){return void 0===t}function w(t){return O(t)&&"[object RegExp]"===C(t)}function O(t){return"object"==typeof t&&null!==t}function S(t){return O(t)&&"[object Date]"===C(t)}function A(t){return O(t)&&("[object Error]"===C(t)||t instanceof Error)}function E(t){return"function"==typeof t}function T(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t}function C(t){return Object.prototype.toString.call(t)}function I(t){return t<10?"0"+t.toString(10):t.toString(10)}function k(){var t=new Date,e=[I(t.getHours()),I(t.getMinutes()),I(t.getSeconds())].join(":");return[t.getDate(),F[t.getMonth()],e].join(" ")}function x(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function R(t,e){if(!t){var n=new Error("Promise was rejected with a falsy value");n.reason=t,t=n}return e(t)}function N(e){function n(){for(var n=[],r=0;r<arguments.length;r++)n.push(arguments[r]);var i=n.pop();if("function"!=typeof i)throw new TypeError("The last argument must be of type Function");var o=this,a=function(){return i.apply(o,arguments)};e.apply(this,n).then(function(e){t.nextTick(a,null,e)},function(e){t.nextTick(R,e,a)})}if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');return Object.setPrototypeOf(n,Object.getPrototypeOf(e)),Object.defineProperties(n,M(e)),n}var M=Object.getOwnPropertyDescriptors||function(t){for(var e=Object.keys(t),n={},r=0;r<e.length;r++)n[e[r]]=Object.getOwnPropertyDescriptor(t,e[r]);return n},P=/%[sdj%]/g;e.format=function(t){if(!_(t)){for(var e=[],n=0;n<arguments.length;n++)e.push(r(arguments[n]));return e.join(" ")}for(var n=1,i=arguments,o=i.length,a=String(t).replace(P,function(t){if("%%"===t)return"%";if(n>=o)return t;switch(t){case"%s":return String(i[n++]);case"%d":return Number(i[n++]);case"%j":try{return JSON.stringify(i[n++])}catch(t){return"[Circular]"}default:return t}}),u=i[n];n<o;u=i[++n])y(u)||!O(u)?a+=" "+u:a+=" "+r(u);return a},e.deprecate=function(n,r){function i(){if(!o){if(t.throwDeprecation)throw new Error(r);t.traceDeprecation?console.trace(r):console.error(r),o=!0}return n.apply(this,arguments)}if(void 0!==t&&!0===t.noDeprecation)return n;if(void 0===t)return function(){return e.deprecate(n,r).apply(this,arguments)};var o=!1;return i};var j,D={};e.debuglog=function(n){if(b(j)&&(j=t.env.NODE_DEBUG||""),n=n.toUpperCase(),!D[n])if(new RegExp("\\b"+n+"\\b","i").test(j)){var r=t.pid;D[n]=function(){var t=e.format.apply(e,arguments);console.error("%s %d: %s",n,r,t)}}else D[n]=function(){};return D[n]},e.inspect=r,r.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},r.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},e.isArray=h,e.isBoolean=d,e.isNull=y,e.isNullOrUndefined=v,e.isNumber=m,e.isString=_,e.isSymbol=g,e.isUndefined=b,e.isRegExp=w,e.isObject=O,e.isDate=S,e.isError=A,e.isFunction=E,e.isPrimitive=T,e.isBuffer=n(1513);var F=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];e.log=function(){console.log("%s - %s",k(),e.format.apply(e,arguments))},e.inherits=n(1514),e._extend=function(t,e){if(!e||!O(e))return t;for(var n=Object.keys(e),r=n.length;r--;)t[n[r]]=e[n[r]];return t};var H="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;e.promisify=function(t){function e(){for(var e,n,r=new Promise(function(t,r){e=t,n=r}),i=[],o=0;o<arguments.length;o++)i.push(arguments[o]);i.push(function(t,r){t?n(t):e(r)});try{t.apply(this,i)}catch(t){n(t)}return r}if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');if(H&&t[H]){var e=t[H];if("function"!=typeof e)throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(e,H,{value:e,enumerable:!1,writable:!1,configurable:!0}),e}return Object.setPrototypeOf(e,Object.getPrototypeOf(t)),H&&Object.defineProperty(e,H,{value:e,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(e,M(t))},e.promisify.custom=H,e.callbackify=N}).call(e,n(145))},182:function(t,e,n){var r,i;!function(o){"use strict";var a={inspect:{}};"object"==typeof t&&"object"==typeof t.exports?t.exports=o(n(181),n(51),n(52)):null!=n(80)?(r=[n(51),n(52)],void 0!==(i=function(t,e){return o(a,t,e)}.apply(e,r))&&(t.exports=i)):self.sanctuaryEither=o(a,self.sanctuaryShow,self.sanctuaryTypeClasses)}(function(t,e,n){"use strict";function r(t){return{tag:r,value:t}}function i(t){return{tag:i,value:t}}function o(){return"Left ("+e(this.value)+")"}function a(){return"Right ("+e(this.value)+")"}function u(t){return t.isLeft&&n.equals(this.value,t.value)}function s(t){return t.isRight&&n.equals(this.value,t.value)}function c(t){return t.isRight||n.lte(this.value,t.value)}function f(t){return t.isRight&&n.lte(this.value,t.value)}function l(t){return t.isLeft?P(n.concat(this.value,t.value)):t}function p(t){return t.isRight?j(n.concat(this.value,t.value)):this}function h(t){return this}function d(t){return j(t(this.value))}function y(t,e){return P(t(this.value))}function v(t,e){return j(e(this.value))}function m(t){return t.isLeft?t:this}function _(t){return t.isLeft?t:j(t.value(this.value))}function g(t){return this}function b(t){return t(this.value)}function w(t){return t}function O(t){return this}function S(t,e){return e}function A(t,e){return t(e,this.value)}function E(t,e){return n.of(t,this)}function T(t,e){return n.map(j,e(this.value))}function C(t){return this}function I(t){return j(t(this))}if("undefined"!=typeof __doctest){var k=__doctest.require("sanctuary");__doctest.require("sanctuary-def"),__doctest.require("sanctuary-type-identifiers");k.bimap=k.unchecked.bimap,k.of=k.unchecked.of}var x={},R={constructor:x,isLeft:!0,isRight:!1,"@@type":"sanctuary-either/Either@1","@@show":o,"fantasy-land/map":h,"fantasy-land/bimap":y,"fantasy-land/ap":m,"fantasy-land/chain":g,"fantasy-land/alt":w,"fantasy-land/reduce":S,"fantasy-land/traverse":E,"fantasy-land/extend":C},N={constructor:x,isLeft:!1,isRight:!0,"@@type":"sanctuary-either/Either@1","@@show":a,"fantasy-land/map":d,"fantasy-land/bimap":v,"fantasy-land/ap":_,"fantasy-land/chain":b,"fantasy-land/alt":O,"fantasy-land/reduce":A,"fantasy-land/traverse":T,"fantasy-land/extend":I},M=t.inspect.custom;"symbol"==typeof M?(R[M]=o,N[M]=a):(R.inspect=o,N.inspect=a);var P=x.Left=function(t){var e=Object.create(R);return n.Setoid.test(t)&&(e["fantasy-land/equals"]=u,n.Ord.test(t)&&(e["fantasy-land/lte"]=c)),n.Semigroup.test(t)&&(e["fantasy-land/concat"]=l),e.value=t,e},j=x.Right=function(t){var e=Object.create(N);return n.Setoid.test(t)&&(e["fantasy-land/equals"]=s,n.Ord.test(t)&&(e["fantasy-land/lte"]=f)),n.Semigroup.test(t)&&(e["fantasy-land/concat"]=p),e.value=t,e};return x["fantasy-land/of"]=j,x["fantasy-land/chainRec"]=function(t,e){for(var n=r(e);n.tag===r;){var o=t(r,i,n.value);if(o.isLeft)return o;n=o.value}return j(n.value)},x})},183:function(t,e,n){t.exports=n(1522)},184:function(t,e,n){function r(t){t=t||{},this.heuristic=t.heuristic||a.manhattan,this.trackJumpRecursion=t.trackJumpRecursion||!1}var i=n(183),o=n(92),a=n(136);n(34);r.prototype.findPath=function(t,e,n,r,a){var u,s=this.openList=new i(function(t,e){return t.f-e.f}),c=this.startNode=a.getNodeAt(t,e),f=this.endNode=a.getNodeAt(n,r);for(this.grid=a,c.g=0,c.f=0,s.push(c),c.opened=!0;!s.empty();){if(u=s.pop(),u.closed=!0,u===f)return o.expandPath(o.backtrace(f));this._identifySuccessors(u)}return[]},r.prototype._identifySuccessors=function(t){var e,n,r,i,o,u,s,c,f,l,p=this.grid,h=this.heuristic,d=this.openList,y=this.endNode.x,v=this.endNode.y,m=t.x,_=t.y,g=Math.abs;Math.max;for(e=this._findNeighbors(t),i=0,o=e.length;i<o;++i)if(n=e[i],r=this._jump(n[0],n[1],m,_)){if(u=r[0],s=r[1],l=p.getNodeAt(u,s),l.closed)continue;c=a.octile(g(u-m),g(s-_)),f=t.g+c,(!l.opened||f<l.g)&&(l.g=f,l.h=l.h||h(g(u-y),g(s-v)),l.f=l.g+l.h,l.parent=t,l.opened?d.updateItem(l):(d.push(l),l.opened=!0))}},t.exports=r},287:function(t,e,n){"use strict";function r(t,e){return Math.floor(Math.random()*e+t)}function i(t,e){return Object.values(e).reduce(function(e,n){var r;return n.id===t?e:o(o({},e),(r={},r[n.id]=n,r))},{})}Object.defineProperty(e,"__esModule",{value:!0}),e.random=r,e.removeIdFromMap=i,e.maybeZero=e.indexById=void 0;var o=function(){return o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},o.apply(this,arguments)},a=function(t){return t.reduce(function(t,e){var n;return o(o({},t),(n={},n[e.id]=e,n))},{})};e.indexById=a;var u=function(t){return t||0};e.maybeZero=u},288:function(t,e,n){"use strict";function r(t){return c[t]}function i(t){return o(t).damage}function o(t){return t.attacks[function(){var e,n;return 0===(null===(e=t.squad)||void 0===e?void 0:e.y)?"back":1===(null===(n=t.squad)||void 0===n?void 0:n.y)?"middle":"front"}()](t)}Object.defineProperty(e,"__esModule",{value:!0}),e.getUnitAttacks=r,e.getUnitDamage=i,e.getUnitAttack=o,e.skills=void 0;var a=function(t){return function(e){return{name:"Slash",damage:2*e.str,elem:"neutral",times:t}}},u=function(t){return function(e){return{name:"Fireball",damage:2*e.int,elem:"fire",times:t}}},s=function(t){return function(e){return{name:"Shoot",damage:2*e.dex,elem:"neutral",times:t}}},c={fighter:{front:a(2),middle:a(1),back:a(1)},mage:{front:u(1),middle:u(1),back:u(2)},archer:{front:s(1),middle:s(1),back:s(2)}};e.skills=c},289:function(t,e,n){"use strict";function r(t,e){return{x:(t-e)*o.tileWidth+o.centerX,y:(t+e)*o.tileHeight+o.centerY-50}}function i(t,e,n){var r=(e-n)*o.tileWidth,i=(e+n)*o.tileHeight/2;return{x:r+(t?350:900),y:i+(t?50:350)}}Object.defineProperty(e,"__esModule",{value:!0}),e.cartesianToIsometric=r,e.cartesianToIsometricBattle=i;var o=n(78)},290:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n(78),i=function(t){var e=t.add.graphics();e.fillGradientStyle(8995397,1145994,1145994,0,1),e.fillRect(0,0,r.SCREEN_WIDTH,r.SCREEN_HEIGHT)};e.default=i},291:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=function(t,e,n,r,i,o){var a=new Phaser.Geom.Rectangle(t,e,n,r),u=o.add.graphics({fillStyle:{color:14592647},lineStyle:{width:2,color:0}});return u.strokeRectShape(a),u.fillRectShape(a),u.strokeRect(t,e,n,r),i.add(u),u};e.default=r},292:function(t,e){function n(t,e,n){this.x=t,this.y=e,this.walkable=void 0===n||n}t.exports=n},293:function(t,e,n){function r(t){t=t||{},this.allowDiagonal=t.allowDiagonal,this.dontCrossCorners=t.dontCrossCorners,this.heuristic=t.heuristic||a.manhattan,this.weight=t.weight||1,this.diagonalMovement=t.diagonalMovement,this.diagonalMovement||(this.allowDiagonal?this.dontCrossCorners?this.diagonalMovement=u.OnlyWhenNoObstacles:this.diagonalMovement=u.IfAtMostOneObstacle:this.diagonalMovement=u.Never),this.diagonalMovement===u.Never?this.heuristic=t.heuristic||a.manhattan:this.heuristic=t.heuristic||a.octile}var i=n(183),o=n(92),a=n(136),u=n(34);r.prototype.findPath=function(t,e,n,r,a){var u,s,c,f,l,p,h,d,y=new i(function(t,e){return t.f-e.f}),v=a.getNodeAt(t,e),m=a.getNodeAt(n,r),_=this.heuristic,g=this.diagonalMovement,b=this.weight,w=Math.abs,O=Math.SQRT2;for(v.g=0,v.f=0,y.push(v),v.opened=!0;!y.empty();){if(u=y.pop(),u.closed=!0,u===m)return o.backtrace(m);for(s=a.getNeighbors(u,g),f=0,l=s.length;f<l;++f)c=s[f],c.closed||(p=c.x,h=c.y,d=u.g+(p-u.x==0||h-u.y==0?1:O),(!c.opened||d<c.g)&&(c.g=d,c.h=c.h||b*_(w(p-n),w(h-r)),c.f=c.g+c.h,c.parent=u,c.opened?y.updateItem(c):(y.push(c),c.opened=!0)))}return[]},t.exports=r},294:function(t,e,n){function r(t){t=t||{},this.allowDiagonal=t.allowDiagonal,this.dontCrossCorners=t.dontCrossCorners,this.diagonalMovement=t.diagonalMovement,this.heuristic=t.heuristic||a.manhattan,this.weight=t.weight||1,this.diagonalMovement||(this.allowDiagonal?this.dontCrossCorners?this.diagonalMovement=u.OnlyWhenNoObstacles:this.diagonalMovement=u.IfAtMostOneObstacle:this.diagonalMovement=u.Never),this.diagonalMovement===u.Never?this.heuristic=t.heuristic||a.manhattan:this.heuristic=t.heuristic||a.octile}var i=n(183),o=n(92),a=n(136),u=n(34);r.prototype.findPath=function(t,e,n,r,a){var u,s,c,f,l,p,h,d,y=function(t,e){return t.f-e.f},v=new i(y),m=new i(y),_=a.getNodeAt(t,e),g=a.getNodeAt(n,r),b=this.heuristic,w=this.diagonalMovement,O=this.weight,S=Math.abs,A=Math.SQRT2;for(_.g=0,_.f=0,v.push(_),_.opened=1,g.g=0,g.f=0,m.push(g),g.opened=2;!v.empty()&&!m.empty();){for(u=v.pop(),u.closed=!0,s=a.getNeighbors(u,w),f=0,l=s.length;f<l;++f)if(c=s[f],!c.closed){if(2===c.opened)return o.biBacktrace(u,c);p=c.x,h=c.y,d=u.g+(p-u.x==0||h-u.y==0?1:A),(!c.opened||d<c.g)&&(c.g=d,c.h=c.h||O*b(S(p-n),S(h-r)),c.f=c.g+c.h,c.parent=u,c.opened?v.updateItem(c):(v.push(c),c.opened=1))}for(u=m.pop(),u.closed=!0,s=a.getNeighbors(u,w),f=0,l=s.length;f<l;++f)if(c=s[f],!c.closed){if(1===c.opened)return o.biBacktrace(c,u);p=c.x,h=c.y,d=u.g+(p-u.x==0||h-u.y==0?1:A),(!c.opened||d<c.g)&&(c.g=d,c.h=c.h||O*b(S(p-t),S(h-e)),c.f=c.g+c.h,c.parent=u,c.opened?m.updateItem(c):(m.push(c),c.opened=2))}}return[]},t.exports=r},32:function(t,e,n){"use strict";function r(t,e,n,r){var i,o,a={leader:n.leader,x:t,y:e,id:n.id},u=Object.values(r).find(function(n){return n.x===t&&n.y===e});if(u){var s=c(c({},u),{x:n.x,y:n.y});return{members:c(c({},r),(i={},i[n.id]=a,i[u.id]=s,i)),updatedUnits:[{id:n.id,x:t,y:e},{id:u.id,x:n.x,y:n.y}]}}return{members:c(c({},r),(o={},o[n.id]=a,o)),updatedUnits:[{id:n.id,x:t,y:e}]}}Object.defineProperty(e,"__esModule",{value:!0}),e.getMaps=e.setMusicEnabled=e.setSoundEnabled=e.getOptions=e.equipItem=e.createSquad=e.removeUnitFromSquad=e.changeSquadMemberPosition=e.addUnitToSquad=e.unitsWithoutSquad=e.disbandSquad=e.saveSquadUnit=e.saveUnit=e.saveSquad=e.saveItems=e.saveUnits=e.saveSquads=e.getUnit=e.getItemTypes=e.getItemList=e.getItem=e.getItems=e.getUnits=e.getSquadLeader=e.getSquadMember=e.getSquadMembers=e.getSquad=e.getSquads=void 0;var i=n(1492),o=n(579),a=n(287),u=n(65),s=n(288),c=function(){return c=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},c.apply(this,arguments)},f=function(t){return JSON.parse(localStorage.getItem(t)||"{}")},l=function(t,e){return localStorage.setItem(t,JSON.stringify(e))},p=function(){return f("squads")};e.getSquads=p;var h=function(t){var e=Object.values(p()).find(function(e){return e.id===t});if(!e)throw new Error(u.INVALID_STATE);return e};e.getSquad=h;var d=function(t){var e=h(t);return Object.values(e.members).map(function(t){return O(t.id)}).filter(function(t){return t})};e.getSquadMembers=d;var y=function(t){var e=O(t);if(!e||!e.squad)throw new Error(u.INVALID_STATE);var n=h(e.squad.id);return Object.values(n.members).find(function(e){return e.id===t})};e.getSquadMember=y;var v=function(t){var e=d(t),n=e.find(function(e){return e.id===t});if(!n)throw new Error(u.INVALID_STATE);return n};e.getSquadLeader=v;var m=function(){return f("units")};e.getUnits=m;var _=function(){return f("items")};e.getItems=_;var g=function(t){var e=_()[t];if(!e)throw new Error(u.INVALID_STATE);return e};e.getItem=g;var b=function(){return Object.values(_())};e.getItemList=b;var w=function(){return o.itemTypeSlots};e.getItemTypes=w;var O=function(t){var e=m()[t];if(e.attacks=(0,s.getUnitAttacks)(e.class),!e)throw new Error(u.INVALID_STATE);return e};e.getUnit=O;var S=function(t){return l("squads",t)};e.saveSquads=S;var A=function(t){var e={};for(var n in t)e[n]=c({},t[n]),delete e[n].attacks;l("units",e)};e.saveUnits=A;var E=function(t){return l("items",t)};e.saveItems=E;var T=function(t){var e,n=p();S(c(c({},n),(e={},e[t.id]=t,e)))};e.saveSquad=T;var C=function(t){var e,n=m();A(c(c({},n),(e={},e[t.id]=t,e)))};e.saveUnit=C;var I=function(t){var e,n,r,i=t.squadId,o=t.unitId,a=t.x,u=t.y;console.log("save squad unit",i,o,a,u);var s=p(),f=s[i];S(c(c({},s),(e={},e[i]=c(c({},f),{members:c(c({},f.members),(n={},n[o]={id:o,x:a,y:u,leader:!0===(null===(r=f.members[o])||void 0===r?void 0:r.leader)},n))}),e)))};e.saveSquadUnit=I;var k=function(t){var e=p(),n=e[t];Object.values(n.members).forEach(function(t){return M(t.id,n)});var r=(0,a.removeIdFromMap)(t,e);S(r)};e.disbandSquad=k;var x=function(){return(0,i.unitsWithoutSquadSelector)(m())};e.unitsWithoutSquad=x;var R=function(t,e,n,r){var i,o=e.members,a={leader:0===Object.keys(o).length,x:n,y:r,id:t.id};console.log("NEW ENTRY",a);var s=Object.values(o).find(function(t){return t.x===n&&t.y===r});if(s){console.log("REMOVE EXISTING");var f=Object.values(o).filter(function(t){return t.id!==s.id}),l=f.concat([a]).reduce(function(t,e){var n;return c(c({},t),(n={},n[e.id]=e,n))},{}),p=c(c({},e),{members:l}),h=O(s.id);if(!h)throw new Error(u.INVALID_STATE);return C(c(c({},h),{squad:null})),C(c(c({},t),{squad:{id:e.id,x:o[t.id].x,y:o[t.id].y}})),T(p),p}var l=c(c({},o),(i={},i[t.id]=a,i)),p=c(c({},e),{members:l,name:a.leader?t.name:e.name});return C(c(c({},t),{squad:{id:e.id,x:n,y:r}})),T(p),p};e.addUnitToSquad=R;var N=function(t,e,n,i){console.log("change position",t,e,n,i);var o=e.members,a=r(n,i,t,o);console.log("ujpdated board",a);var u=c(c({},e),{members:a.members});return console.log("will save updatedSquad",u),T(u),console.log("will return",a),a};e.changeSquadMemberPosition=N;var M=function(t,e){var n=O(t);if(!n)throw new Error("ERROR: tried to save unit with invalid ID");var r=c(c({},n),{squad:null}),i=e.members,o=(0,a.removeIdFromMap)(t,i),u=c(c({},e),{members:o});C(r),T(u)};e.removeUnitFromSquad=M;var P=function(t){var e,n,r=p(),i=r.length.toString(),o={id:i,name:t.name,emblem:"Emoji",members:(e={},e[t.id]={id:t.id,leader:!0,x:2,y:2},e)},a=c(c({},r),(n={},n[i]=o,n)),u=c(c({},t),{squad:{id:i,x:2,y:2}}),s=function(t){S(a),C(u);var e=m();console.log(e,a),t({units:e,squads:a})};return new Promise(s)};e.createSquad=P;var j=function(t,e){var n,r=O(e),i=g(t);if(!r)throw new Error("An invalid unit id was supplied to equipItem");if(!i)throw new Error("An invalid item id was supplied to equipItem");var o=w()[i.type],a=c(c({},r),{equips:c(c({},r.equips),(n={},n[o]=i.id,n))});C(a)};e.equipItem=j;var D=function(){return f("options")};e.getOptions=D;var F=function(t){return l("options",c(c({},D()),{soundEnabled:t}))};e.setSoundEnabled=F;var H=function(t){return l("options",c(c({},D()),{musicEnabled:t}))};e.setMusicEnabled=H;var L=function(){return f("maps")};e.getMaps=L},34:function(t,e){var n={Always:1,Never:2,IfAtMostOneObstacle:3,OnlyWhenNoObstacles:4};t.exports=n},51:function(t,e,n){var r,i,o;!function(a){"use strict";"object"==typeof t&&"object"==typeof t.exports?t.exports=a():null!=n(80)?(i=[],r=a,void 0!==(o="function"==typeof r?r.apply(e,i):r)&&(t.exports=o)):self.sanctuaryShow=a()}(function(){"use strict";function t(t){return function(e){return n(e)+": "+n(t[e])}}function e(t){return Object.keys(t).sort()}function n(o){if(i.indexOf(o)>=0)return"<Circular>";switch(Object.prototype.toString.call(o)){case"[object Boolean]":return"object"==typeof o?"new Boolean ("+n(o.valueOf())+")":o.toString();case"[object Number]":return"object"==typeof o?"new Number ("+n(o.valueOf())+")":1/o==-1/0?"-0":o.toString(10);case"[object String]":return"object"==typeof o?"new String ("+n(o.valueOf())+")":JSON.stringify(o);case"[object Date]":return"new Date ("+n(isNaN(o.valueOf())?NaN:o.toISOString())+")";case"[object Error]":return"new "+o.name+" ("+n(o.message)+")";case"[object Arguments]":return"function () { return arguments; } ("+Array.prototype.map.call(o,n).join(", ")+")";case"[object Array]":i.push(o);try{return"["+o.map(n).concat(e(o).filter(function(t){return!/^\d+$/.test(t)}).map(t(o))).join(", ")+"]"}finally{i.pop()}case"[object Object]":i.push(o);try{return r in o&&(null==o.constructor||o.constructor.prototype!==o)?o[r]():"{"+e(o).map(t(o)).join(", ")+"}"}finally{i.pop()}case"[object Set]":i.push(o);try{return"new Set ("+n(Array.from(o.values()))+")"}finally{i.pop()}case"[object Map]":i.push(o);try{return"new Map ("+n(Array.from(o.entries()))+")"}finally{i.pop()}default:return String(o)}}var r="@@show",i=[];return n})},52:function(t,e,n){var r,i,o;!function(a){"use strict";"object"==typeof t&&"object"==typeof t.exports?t.exports=a(n(107)):null!=n(80)?(i=[n(107)],r=a,void 0!==(o="function"==typeof r?r.apply(e,i):r)&&(t.exports=o)):self.sanctuaryTypeClasses=a(self.sanctuaryTypeIdentifiers)}(function(t){"use strict";function e(t){return function(e){return t.concat(e)}}function n(t){return function(e){return t}}function r(t,e){Object.keys(t).forEach(e,t)}function i(t,e){return Object.prototype.hasOwnProperty.call(e,t)}function o(t){return t}function a(t){return function(e){return[t,e]}}function u(e,n){return typeof e==typeof n&&t(e)===t(n)}function s(t){return Object.keys(t).sort()}function c(t){return function(e){return e(t)}}function f(t){return function(e){return t(e)}}function l(t){return{value:t,done:!1}}function p(t){return{value:t,done:!0}}function h(t,e,n,r){if(!(this instanceof h))return new h(t,e,n,r);this.name=t,this.url=e,this.test=function(t){return n.every(function(e){return e.test(t)})&&r(t)}}function d(t,e,n){for(var r=n,o=0;o<e.length;o+=1){var a=e[o];if(null==r||!t&&!i(a,r))return null;r=r[a]}return"function"==typeof r?r:null}function y(t,e){return d(!0,t,e)}function v(t){return d(!1,t,Be)}function m(e,n,r){function i(e){var n="fantasy-land/"+e;return r[e]===he?function(t){var e=y([n],t);return null==e&&"function"==typeof t?v([ye(t),n]):e}:function(e){var r=null!=e&&null!=e.constructor&&e.constructor.prototype===e,i=null;return r||(i=y([n],e)),null==i&&(i=v([t(e),"prototype",n])),i&&i.bind(e)}}var o=Object.keys(r),a=h("sanctuary-type-classes/"+e,"https://github.com/sanctuary-js/sanctuary-type-classes/tree/v12.1.0#"+e,n,function(t){return o.every(function(e){var n=r[e]===he?t.constructor:t;return null!=i(e)(n)})});return a.methods=o.reduce(function(t,e){return t[e]=i(e),t},{}),a}function _(t){return!0}function g(t){return!0}function b(t){return!0}function w(t){return!0}function O(t){return"object"==typeof this?We(this.valueOf(),t.valueOf()):this===t}function S(t){return"object"==typeof this?ze(this.valueOf(),t.valueOf()):!1===this||!0===t}function A(t){return"object"==typeof this?We(this.valueOf(),t.valueOf()):isNaN(this)&&isNaN(t)||this===t}function E(t){return"object"==typeof this?ze(this.valueOf(),t.valueOf()):isNaN(this)||this<=t}function T(t){return We(this.valueOf(),t.valueOf())}function C(t){return ze(this.valueOf(),t.valueOf())}function I(t){return t.source===this.source&&t.global===this.global&&t.ignoreCase===this.ignoreCase&&t.multiline===this.multiline&&t.sticky===this.sticky&&t.unicode===this.unicode}function k(){return""}function x(t){return"object"==typeof this?We(this.valueOf(),t.valueOf()):this===t}function R(t){return"object"==typeof this?ze(this.valueOf(),t.valueOf()):this<=t}function N(t){return this+t}function M(){return[]}function P(t){return[t]}function j(t,e){for(var n=[],r={},i={head:e,tail:r};i!==r;){for(var o=r,a=t(l,p,i.head),u=0;u<a.length;u+=1){var s=a[u];s.done?n.push(s.value):o={head:s.value,tail:o}}for(i=i.tail;o!==r;)i={head:o.head,tail:i},o=o.tail}return n}function D(){return[]}function F(t){if(t.length!==this.length)return!1;for(var e=0;e<this.length;e+=1)if(!We(this[e],t[e]))return!1;return!0}function H(t){for(var e=0;!0;e+=1){if(e===this.length)return!0;if(e===t.length)return!1;if(!We(this[e],t[e]))return ze(this[e],t[e])}}function L(t){return this.concat(t)}function U(t){return this.filter(function(e){return t(e)})}function q(t){return this.map(function(e){return t(e)})}function B(t){for(var e=[],n=0;n<t.length;n+=1)for(var r=0;r<this.length;r+=1)e.push(t[n](this[r]));return e}function W(t){for(var e=[],n=0;n<this.length;n+=1)for(var r=0,i=t(this[n]);r<i.length;r+=1)e.push(i[r]);return e}function z(t,e){for(var n=e,r=0;r<this.length;r+=1)n=t(n,this[r]);return n}function Y(t,n){function r(o,u){switch(u){case 0:return Ut(t,[]);case 2:return Dt(a,n(i[o]),n(i[o+1]));default:var s=2*Math.floor(u/4);return Dt(e,r(o,s),r(o+s,u-s))}}var i=this;return this.length%2==1?Dt(e,xt(P,n(this[0])),r(1,this.length-1)):r(0,this.length)}function K(t){return this.map(function(e,n,r){return t(r.slice(n))})}function V(t){return F.call(this,t)}function G(t){return H.call(this,t)}function X(t){return We(this.name,t.name)&&We(this.message,t.message)}function J(){return{}}function $(){return{}}function Z(t){var e=this,n=s(this);return We(n,s(t))&&n.every(function(n){return We(e[n],t[n])})}function Q(t){for(var e=s(this),n=s(t);;){if(0===e.length)return!0;if(0===n.length)return!1;var r=e.shift(),i=n.shift();if(r<i)return!0;if(r>i)return!1;if(!We(this[r],t[r]))return ze(this[r],t[r])}}function tt(t){function e(t){n[t]=this[t]}var n={};return r(this,e),r(t,e),n}function et(t){var e={};return r(this,function(n){t(this[n])&&(e[n]=this[n])}),e}function nt(t){var e={};return r(this,function(n){e[n]=t(this[n])}),e}function rt(t){var e={};return r(this,function(n){i(n,t)&&(e[n]=t[n](this[n]))}),e}function it(t,e){function n(e,n){return t(e,r[n])}var r=this;return s(this).reduce(n,e)}function ot(t,e){var n=this;return Object.keys(this).reduce(function(t,r){function i(t){return function(e){var n={};return n[r]=e,tt.call(t,n)}}return Dt(i,t,e(n[r]))},Ut(t,{}))}function at(){return o}function ut(t){return function(e){return t}}function st(t,e){return function(n){for(var r=l(e);!r.done;)r=t(l,p,r.value)(n);return r.value}}function ct(t){return t===this}function ft(t){var e=this;return function(n){return t(e(n))}}function lt(t){var e=this;return function(n){return t(e(n))}}function pt(t,e){var n=this;return function(r){return e(n(t(r)))}}function ht(t){var e=this;return function(n){return t(n)(e(n))}}function dt(t){var e=this;return function(n){return t(e(n))(n)}}function yt(t){var e=this;return function(n){return t(function(t){return e(Et(n,t))})}}function vt(t){var e=this;return function(n){return e(t(n))}}function mt(t,e){return u(t,e)&&!ze(e,t)}function _t(t,e){return mt(e,t)}function gt(t,e){return ze(e,t)}function bt(t,e){return ze(t,e)?t:e}function wt(t,e){return ze(t,e)?e:t}function Ot(t,e,n){return wt(t,bt(e,n))}function St(t,e){return _e.methods.compose(e)(t)}function At(t){return ge.methods.id(t)()}function Et(t,e){return be.methods.concat(t)(e)}function Tt(t){return we.methods.empty(t)()}function Ct(t){return Oe.methods.invert(t)()}function It(t,e){return Se.methods.filter(e)(t)}function kt(t,e){return It(function(e){return!t(e)},e)}function xt(t,e){return Ae.methods.map(e)(t)}function Rt(t,e){return Ae.methods.map(t)(c(e))}function Nt(t,e,n){return Ee.methods.bimap(n)(t,e)}function Mt(t,e){return Nt(t,o,e)}function Pt(t,e,n){return Te.methods.promap(n)(t,e)}function jt(t,e){return Ce.methods.ap(e)(t)}function Dt(t,e,n){return jt(xt(t,e),n)}function Ft(t,e,n,r){return jt(jt(xt(t,e),n),r)}function Ht(t,e){return Dt(n,t,e)}function Lt(t,e){return Dt(n(o),t,e)}function Ut(t,e){return Ie.methods.of(t)(e)}function qt(t,e){return Et(e,Ut(e.constructor,t))}function Bt(t,e){return Et(Ut(e.constructor,t),e)}function Wt(t,e){return ke.methods.chain(e)(t)}function zt(t){return Wt(o,t)}function Yt(t,e,n){return xe.methods.chainRec(t)(e,n)}function Kt(t,e){return Ne.methods.alt(t)(e)}function Vt(t){return Me.methods.zero(t)()}function Gt(t,e,n){return je.methods.reduce(n)(t,e)}function Xt(t){return Array.isArray(t)?t.length:Gt(function(t,e){return t+1},0,t)}function Jt(t,e){return Array.isArray(e)?e.every(f(t)):Gt(function(e,n){return e&&t(n)},!0,e)}function $t(t,e){return Array.isArray(e)?e.some(f(t)):Gt(function(e,n){return e||t(n)},!1,e)}function Zt(t,e){return!$t(t,e)}function Qt(t,e){return $t(function(e){return We(t,e)},e)}function te(t,e){return Gt(function(e,n){return{empty:!1,value:Et(e.value,e.empty?n:Et(t,n))}},{empty:!0,value:Tt(t.constructor)},e).value}function ee(t,e,n){return Gt(function(t,n){return Et(t,e(n))},Tt(t),n)}function ne(t){if(Array.isArray(t))return t.slice().reverse();var e=t.constructor;return Gt(function(t,n){return Et(Ut(e,n),t)},Tt(e),t)}function re(t){return ie(o,t)}function ie(t,e){var n=Gt(function(e,n){return e.push({idx:e.length,x:n,fx:t(n)}),e},[],e),r=function(t){switch(typeof(t&&t.fx)){case"number":return function(t,e){return t<=e||t!==t};case"string":return function(t,e){return t<=e};default:return ze}}(n[0]);if(n.sort(function(t,e){return r(t.fx,e.fx)?r(e.fx,t.fx)?t.idx-e.idx:-1:1}),Array.isArray(e)){for(var i=0;i<n.length;i+=1)n[i]=n[i].x;return n}var o=e.constructor,a=Tt(o);for(i=0;i<n.length;i+=1)a=Et(a,Ut(o,n[i].x));return a}function oe(t,e,n){return De.methods.traverse(n)(t,e)}function ae(t,e){return oe(t,o,e)}function ue(t,e){return Fe.methods.extend(e)(t)}function se(t){return ue(o,t)}function ce(t){return He.methods.extract(t)()}function fe(t,e){return Le.methods.contramap(e)(t)}if("undefined"!=typeof __doctest){var le=(__doctest.require("sanctuary-identity"),__doctest.require("./test/List")),pe=__doctest.require("sanctuary-maybe");__doctest.require("sanctuary-pair"),__doctest.require("./test/Sum"),le.Nil,le.Cons,pe.Nothing,pe.Just}h.prototype["@@type"]="sanctuary-type-classes/TypeClass@1";var he="Constructor",de="Value",ye=i("name",function(){})?function(t){return t.name}:function(t){var e=/function (\w*)/.exec(t);return null==e?"":e[1]},ve=m("Setoid",[],{equals:de}),me=m("Ord",[ve],{lte:de}),_e=m("Semigroupoid",[],{compose:de}),ge=m("Category",[_e],{id:he}),be=m("Semigroup",[],{concat:de}),we=m("Monoid",[be],{empty:he}),Oe=m("Group",[we],{invert:de}),Se=m("Filterable",[],{filter:de}),Ae=m("Functor",[],{map:de}),Ee=m("Bifunctor",[Ae],{bimap:de}),Te=m("Profunctor",[Ae],{promap:de}),Ce=m("Apply",[Ae],{ap:de}),Ie=m("Applicative",[Ce],{of:he}),ke=m("Chain",[Ce],{chain:de}),xe=m("ChainRec",[ke],{chainRec:he}),Re=m("Monad",[Ie,ke],{}),Ne=m("Alt",[Ae],{alt:de}),Me=m("Plus",[Ne],{zero:he}),Pe=m("Alternative",[Ie,Me],{}),je=m("Foldable",[],{reduce:de}),De=m("Traversable",[Ae,je],{traverse:de}),Fe=m("Extend",[Ae],{extend:de}),He=m("Comonad",[Fe],{extract:de}),Le=m("Contravariant",[],{contramap:de}),Ue=L,qe=tt,Be={Null:{prototype:{"fantasy-land/equals":_,"fantasy-land/lte":g}},Undefined:{prototype:{"fantasy-land/equals":b,"fantasy-land/lte":w}},Boolean:{prototype:{"fantasy-land/equals":O,"fantasy-land/lte":S}},Number:{prototype:{"fantasy-land/equals":A,"fantasy-land/lte":E}},Date:{prototype:{"fantasy-land/equals":T,"fantasy-land/lte":C}},RegExp:{prototype:{"fantasy-land/equals":I}},String:{"fantasy-land/empty":k,prototype:{"fantasy-land/equals":x,"fantasy-land/lte":R,"fantasy-land/concat":N}},Array:{"fantasy-land/empty":M,"fantasy-land/of":P,"fantasy-land/chainRec":j,"fantasy-land/zero":D,prototype:{"fantasy-land/equals":F,"fantasy-land/lte":H,"fantasy-land/concat":L,"fantasy-land/filter":U,"fantasy-land/map":q,"fantasy-land/ap":B,"fantasy-land/chain":W,"fantasy-land/alt":Ue,"fantasy-land/reduce":z,"fantasy-land/traverse":Y,"fantasy-land/extend":K}},Arguments:{prototype:{"fantasy-land/equals":V,"fantasy-land/lte":G}},Error:{prototype:{"fantasy-land/equals":X}},Object:{"fantasy-land/empty":J,"fantasy-land/zero":$,prototype:{"fantasy-land/equals":Z,"fantasy-land/lte":Q,"fantasy-land/concat":tt,"fantasy-land/filter":et,"fantasy-land/map":nt,"fantasy-land/ap":rt,"fantasy-land/alt":qe,"fantasy-land/reduce":it,"fantasy-land/traverse":ot}},Function:{"fantasy-land/id":at,"fantasy-land/of":ut,"fantasy-land/chainRec":st,prototype:{"fantasy-land/equals":ct,"fantasy-land/compose":ft,"fantasy-land/map":lt,"fantasy-land/promap":pt,"fantasy-land/ap":ht,"fantasy-land/chain":dt,"fantasy-land/extend":yt,"fantasy-land/contramap":vt}}},We=function(){var t=[];return function(e,n){if(!u(e,n))return!1;if(t.some(function(t){return t[0]===e&&t[1]===n}))return!0;t.push([e,n]);try{return ve.test(e)&&ve.test(n)&&ve.methods.equals(e)(n)}finally{t.pop()}}}(),ze=function(){var t=[];return function(e,n){if(!u(e,n))return!1;if(t.some(function(t){return t[0]===e&&t[1]===n}))return We(e,n);t.push([e,n]);try{return me.test(e)&&me.test(n)&&me.methods.lte(e)(n)}finally{t.pop()}}}();return{TypeClass:h,Setoid:ve,Ord:me,Semigroupoid:_e,Category:ge,Semigroup:be,Monoid:we,Group:Oe,Filterable:Se,Functor:Ae,Bifunctor:Ee,Profunctor:Te,Apply:Ce,Applicative:Ie,Chain:ke,ChainRec:xe,Monad:Re,Alt:Ne,Plus:Me,Alternative:Pe,Foldable:je,Traversable:De,Extend:Fe,Comonad:He,Contravariant:Le,equals:We,lt:mt,lte:ze,gt:_t,gte:gt,min:bt,max:wt,clamp:Ot,compose:St,id:At,concat:Et,empty:Tt,invert:Ct,filter:It,reject:kt,map:xt,flip:Rt,bimap:Nt,mapLeft:Mt,promap:Pt,ap:jt,lift2:Dt,lift3:Ft,apFirst:Ht,apSecond:Lt,of:Ut,append:qt,prepend:Bt,chain:Wt,join:zt,chainRec:Yt,alt:Kt,zero:Vt,reduce:Gt,size:Xt,all:Jt,any:$t,none:Zt,elem:Qt,intercalate:te,foldMap:ee,reverse:ne,sort:re,sortBy:ie,traverse:oe,sequence:ae,extend:ue,duplicate:se,extract:ce,contramap:fe}})},579:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.itemTypeSlots=e.modifiers=void 0;var r={str:0,agi:0,dex:0,vit:0,int:0,wis:0,atk:0,def:0,m_atk:0,m_def:0,res_fire:0,res_water:0,res_earth:0,res_wind:0,res_light:0,res_shadow:0};e.modifiers=r;var i={accessory:"ornament",sword:"mainHand",spear:"mainHand",axe:"mainHand",robe:"chest",light_armor:"chest",heavy_armor:"chest",shield:"offHand",staff:"mainHand",helm:"head",bow:"offHand"};e.itemTypeSlots=i},580:function(t,e,n){"use strict";function r(t,e){return t+e}Object.defineProperty(e,"__esModule",{value:!0}),e.sum=r,e.random=void 0;var i=function(t,e){return Math.floor(Math.random()*(e-t+1)+t)};e.random=i},581:function(t,e,n){"use strict";function r(){return{value:!1}}function i(t){t&&(t.value=!0)}function o(){}function a(t){return void 0===t.size&&(t.size=t.__iterate(s)),t.size}function u(t,e){if("number"!=typeof e){var n=e>>>0;if(""+n!==e||4294967295===n)return NaN;e=n}return e<0?a(t)+e:e}function s(){return!0}function c(t,e,n){return(0===t&&!h(t)||void 0!==n&&t<=-n)&&(void 0===e||void 0!==n&&e>=n)}function f(t,e){return p(t,e,0)}function l(t,e){return p(t,e,e)}function p(t,e,n){return void 0===t?n:h(t)?e===1/0?e:0|Math.max(0,e+t):void 0===e||e===t?t:0|Math.min(e,t)}function h(t){return t<0||0===t&&1/t==-1/0}function d(t){return Boolean(t&&t[hn])}function y(t){return Boolean(t&&t[dn])}function v(t){return Boolean(t&&t[yn])}function m(t){return y(t)||v(t)}function _(t){return Boolean(t&&t[bn])}function g(t){return Boolean(t&&t[wn])}function b(t){return d(t)||g(t)}function w(t){return Boolean(t&&t[On])}function O(t,e,n,r){var i=0===t?e:1===t?n:[e,n];return r?r.value=i:r={value:i,done:!1},r}function S(){return{value:void 0,done:!0}}function A(t){return!!C(t)}function E(t){return t&&"function"==typeof t.next}function T(t){var e=C(t);return e&&e.call(t)}function C(t){var e=t&&(Tn&&t[Tn]||t[Cn]);if("function"==typeof e)return e}function I(t){return!(!Array.isArray(t)&&"string"!=typeof t)||t&&"object"==typeof t&&Number.isInteger(t.length)&&t.length>=0&&(0===t.length?1===Object.keys(t).length:t.hasOwnProperty(t.length-1))}function k(){return Fn||(Fn=new jn([]))}function x(t){var e=Array.isArray(t)?new jn(t):A(t)?new Ln(t):void 0;if(e)return e.fromEntrySeq();if("object"==typeof t)return new Dn(t);throw new TypeError("Expected Array or collection object of [k, v] entries, or keyed object: "+t)}function R(t){var e=M(t);if(e)return e;throw new TypeError("Expected Array or collection object of values: "+t)}function N(t){var e=M(t);if(e)return e;if("object"==typeof t)return new Dn(t);throw new TypeError("Expected Array or collection object of values, or keyed object: "+t)}function M(t){return I(t)?new jn(t):A(t)?new Ln(t):void 0}function P(t){return Boolean(t&&t[Un])}function j(t){return P(t)&&w(t)}function D(t){return Boolean(t&&"function"==typeof t.equals&&"function"==typeof t.hashCode)}function F(t,e){if(t===e||t!==t&&e!==e)return!0;if(!t||!e)return!1;if("function"==typeof t.valueOf&&"function"==typeof e.valueOf){if(t=t.valueOf(),e=e.valueOf(),t===e||t!==t&&e!==e)return!0;if(!t||!e)return!1}return!!(D(t)&&D(e)&&t.equals(e))}function H(t){return t>>>1&1073741824|3221225471&t}function L(t){switch(typeof t){case"boolean":return t?1108378657:1108378656;case"number":return U(t);case"string":return t.length>Gn?q(t):B(t);case"object":case"function":return null===t?1108378658:"function"==typeof t.hashCode?H(t.hashCode(t)):(t.valueOf!==Bn&&"function"==typeof t.valueOf&&(t=t.valueOf(t)),W(t));case"undefined":return 1108378659;default:if("function"==typeof t.toString)return B(t.toString());throw new Error("Value type "+typeof t+" cannot be hashed.")}}function U(t){if(t!==t||t===1/0)return 0;var e=0|t;for(e!==t&&(e^=4294967295*t);t>4294967295;)t/=4294967295,e^=t;return H(e)}function q(t){var e=$n[t];return void 0===e&&(e=B(t),Jn===Xn&&(Jn=0,$n={}),Jn++,$n[t]=e),e}function B(t){for(var e=0,n=0;n<t.length;n++)e=31*e+t.charCodeAt(n)|0;return H(e)}function W(t){var e;if(Yn&&void 0!==(e=Hn.get(t)))return e;if(void 0!==(e=t[Vn]))return e;if(!zn){if(void 0!==(e=t.propertyIsEnumerable&&t.propertyIsEnumerable[Vn]))return e;if(void 0!==(e=z(t)))return e}if(e=++Kn,1073741824&Kn&&(Kn=0),Yn)Hn.set(t,e);else{if(void 0!==Wn&&!1===Wn(t))throw new Error("Non-extensible objects are not allowed as keys.");if(zn)Object.defineProperty(t,Vn,{enumerable:!1,configurable:!1,writable:!1,value:e});else if(void 0!==t.propertyIsEnumerable&&t.propertyIsEnumerable===t.constructor.prototype.propertyIsEnumerable)t.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},t.propertyIsEnumerable[Vn]=e;else{if(void 0===t.nodeType)throw new Error("Unable to set a non-enumerable property on object.");t[Vn]=e}}return e}function z(t){if(t&&t.nodeType>0)switch(t.nodeType){case 1:return t.uniqueID;case 9:return t.documentElement&&t.documentElement.uniqueID}}function Y(t){var e=lt(t);return e._iter=t,e.size=t.size,e.flip=function(){return t},e.reverse=function(){var e=t.reverse.apply(this);return e.flip=function(){return t.reverse()},e},e.has=function(e){return t.includes(e)},e.includes=function(e){return t.has(e)},e.cacheResult=pt,e.__iterateUncached=function(e,n){var r=this;return t.__iterate(function(t,n){return!1!==e(n,t,r)},n)},e.__iteratorUncached=function(e,n){if(e===En){var r=t.__iterator(e,n);return new kn(function(){var t=r.next();if(!t.done){var e=t.value[0];t.value[0]=t.value[1],t.value[1]=e}return t})}return t.__iterator(e===An?Sn:An,n)},e}function K(t,e,n){var r=lt(t);return r.size=t.size,r.has=function(e){return t.has(e)},r.get=function(r,i){var o=t.get(r,pn);return o===pn?i:e.call(n,o,r,t)},r.__iterateUncached=function(r,i){var o=this;return t.__iterate(function(t,i,a){return!1!==r(e.call(n,t,i,a),i,o)},i)},r.__iteratorUncached=function(r,i){var o=t.__iterator(En,i);return new kn(function(){var i=o.next();if(i.done)return i;var a=i.value,u=a[0];return O(r,u,e.call(n,a[1],u,t),i)})},r}function V(t,e){var n=this,r=lt(t);return r._iter=t,r.size=t.size,r.reverse=function(){return t},t.flip&&(r.flip=function(){var e=Y(t);return e.reverse=function(){return t.flip()},e}),r.get=function(n,r){return t.get(e?n:-1-n,r)},r.has=function(n){return t.has(e?n:-1-n)},r.includes=function(e){return t.includes(e)},r.cacheResult=pt,r.__iterate=function(n,r){var i=this,o=0;return r&&a(t),t.__iterate(function(t,a){return n(t,e?a:r?i.size-++o:o++,i)},!r)},r.__iterator=function(r,i){var o=0;i&&a(t);var u=t.__iterator(En,!i);return new kn(function(){var t=u.next();if(t.done)return t;var a=t.value;return O(r,e?a[0]:i?n.size-++o:o++,a[1],t)})},r}function G(t,e,n,r){var i=lt(t);return r&&(i.has=function(r){var i=t.get(r,pn);return i!==pn&&!!e.call(n,i,r,t)},i.get=function(r,i){var o=t.get(r,pn);return o!==pn&&e.call(n,o,r,t)?o:i}),i.__iterateUncached=function(i,o){var a=this,u=0;return t.__iterate(function(t,o,s){if(e.call(n,t,o,s))return u++,i(t,r?o:u-1,a)},o),u},i.__iteratorUncached=function(i,o){var a=t.__iterator(En,o),u=0;return new kn(function(){for(;;){var o=a.next();if(o.done)return o;var s=o.value,c=s[0],f=s[1];if(e.call(n,f,c,t))return O(i,r?c:u++,f,o)}})},i}function X(t,e,n){var r=nr().asMutable();return t.__iterate(function(i,o){r.update(e.call(n,i,o,t),0,function(t){return t+1})}),r.asImmutable()}function J(t,e,n){var r=y(t),i=(w(t)?br():nr()).asMutable();t.__iterate(function(o,a){i.update(e.call(n,o,a,t),function(t){return t=t||[],t.push(r?[a,o]:o),t})});var o=ft(t);return i.map(function(e){return st(t,o(e))}).asImmutable()}function $(t,e,n,r){var i=t.size;if(c(e,n,i))return t;var o=f(e,i),a=l(n,i);if(o!==o||a!==a)return $(t.toSeq().cacheResult(),e,n,r);var s,p=a-o;p===p&&(s=p<0?0:p);var h=lt(t);return h.size=0===s?s:t.size&&s||void 0,!r&&_(t)&&s>=0&&(h.get=function(e,n){return e=u(this,e),e>=0&&e<s?t.get(e+o,n):n}),h.__iterateUncached=function(e,n){var i=this;if(0===s)return 0;if(n)return this.cacheResult().__iterate(e,n);var a=0,u=!0,c=0;return t.__iterate(function(t,n){if(!u||!(u=a++<o))return c++,!1!==e(t,r?n:c-1,i)&&c!==s}),c},h.__iteratorUncached=function(e,n){if(0!==s&&n)return this.cacheResult().__iterator(e,n);if(0===s)return new kn(S);var i=t.__iterator(e,n),a=0,u=0;return new kn(function(){for(;a++<o;)i.next();if(++u>s)return S();var t=i.next();return r||e===An||t.done?t:e===Sn?O(e,u-1,void 0,t):O(e,u-1,t.value[1],t)})},h}function Z(t,e,n){var r=lt(t);return r.__iterateUncached=function(r,i){var o=this;if(i)return this.cacheResult().__iterate(r,i);var a=0;return t.__iterate(function(t,i,u){return e.call(n,t,i,u)&&++a&&r(t,i,o)}),a},r.__iteratorUncached=function(r,i){var o=this;if(i)return this.cacheResult().__iterator(r,i);var a=t.__iterator(En,i),u=!0;return new kn(function(){if(!u)return S();var t=a.next();if(t.done)return t;var i=t.value,s=i[0],c=i[1];return e.call(n,c,s,o)?r===En?t:O(r,s,c,t):(u=!1,S())})},r}function Q(t,e,n,r){var i=lt(t);return i.__iterateUncached=function(i,o){var a=this;if(o)return this.cacheResult().__iterate(i,o);var u=!0,s=0;return t.__iterate(function(t,o,c){if(!u||!(u=e.call(n,t,o,c)))return s++,i(t,r?o:s-1,a)}),s},i.__iteratorUncached=function(i,o){var a=this;if(o)return this.cacheResult().__iterator(i,o);var u=t.__iterator(En,o),s=!0,c=0;return new kn(function(){var t,o,f;do{if(t=u.next(),t.done)return r||i===An?t:i===Sn?O(i,c++,void 0,t):O(i,c++,t.value[1],t);var l=t.value;o=l[0],f=l[1],s&&(s=e.call(n,f,o,a))}while(s);return i===En?t:O(i,o,f,t)})},i}function tt(t,e){var n=y(t),r=[t].concat(e).map(function(t){return d(t)?n&&(t=mn(t)):t=n?x(t):R(Array.isArray(t)?t:[t]),t}).filter(function(t){return 0!==t.size});if(0===r.length)return t;if(1===r.length){var i=r[0];if(i===t||n&&y(i)||v(t)&&v(i))return i}var o=new jn(r);return n?o=o.toKeyedSeq():v(t)||(o=o.toSetSeq()),o=o.flatten(!0),o.size=r.reduce(function(t,e){if(void 0!==t){var n=e.size;if(void 0!==n)return t+n}},0),o}function et(t,e,n){var r=lt(t);return r.__iterateUncached=function(i,o){function a(t,c){t.__iterate(function(t,o){return(!e||c<e)&&d(t)?a(t,c+1):(u++,!1===i(t,n?o:u-1,r)&&(s=!0)),!s},o)}if(o)return this.cacheResult().__iterate(i,o);var u=0,s=!1;return a(t,0),u},r.__iteratorUncached=function(r,i){if(i)return this.cacheResult().__iterator(r,i);var o=t.__iterator(r,i),a=[],u=0;return new kn(function(){for(;o;){var t=o.next();if(!1===t.done){var s=t.value;if(r===En&&(s=s[1]),e&&!(a.length<e)||!d(s))return n?t:O(r,u++,s,t);a.push(o),o=s.__iterator(r,i)}else o=a.pop()}return S()})},r}function nt(t,e,n){var r=ft(t);return t.toSeq().map(function(i,o){return r(e.call(n,i,o,t))}).flatten(!0)}function rt(t,e){var n=lt(t);return n.size=t.size&&2*t.size-1,n.__iterateUncached=function(n,r){var i=this,o=0;return t.__iterate(function(t){return(!o||!1!==n(e,o++,i))&&!1!==n(t,o++,i)},r),o},n.__iteratorUncached=function(n,r){var i,o=t.__iterator(An,r),a=0;return new kn(function(){return(!i||a%2)&&(i=o.next(),i.done)?i:a%2?O(n,a++,e):O(n,a++,i.value,i)})},n}function it(t,e,n){e||(e=ht);var r=y(t),i=0,o=t.toSeq().map(function(e,r){return[r,e,i++,n?n(e,r,t):e]}).valueSeq().toArray();return o.sort(function(t,n){return e(t[3],n[3])||t[2]-n[2]}).forEach(r?function(t,e){o[e].length=2}:function(t,e){o[e]=t[1]}),r?Nn(o):v(t)?Mn(o):Pn(o)}function ot(t,e,n){if(e||(e=ht),n){var r=t.toSeq().map(function(e,r){return[e,n(e,r,t)]}).reduce(function(t,n){return at(e,t[1],n[1])?n:t});return r&&r[0]}return t.reduce(function(t,n){return at(e,t,n)?n:t})}function at(t,e,n){var r=t(n,e);return 0===r&&n!==e&&(void 0===n||null===n||n!==n)||r>0}function ut(t,e,n,r){var i=lt(t),o=new jn(n).map(function(t){return t.size});return i.size=r?o.max():o.min(),i.__iterate=function(t,e){for(var n,r=this.__iterator(An,e),i=0;!(n=r.next()).done&&!1!==t(n.value,i++,this););return i},i.__iteratorUncached=function(t,i){var o=n.map(function(t){return t=vn(t),T(i?t.reverse():t)}),a=0,u=!1;return new kn(function(){var n;return u||(n=o.map(function(t){return t.next()}),u=r?n.every(function(t){return t.done}):n.some(function(t){return t.done})),u?S():O(t,a++,e.apply(null,n.map(function(t){return t.value})))})},i}function st(t,e){return t===e?t:_(t)?e:t.constructor(e)}function ct(t){if(t!==Object(t))throw new TypeError("Expected [K, V] tuple: "+t)}function ft(t){return y(t)?mn:v(t)?_n:gn}function lt(t){return Object.create((y(t)?Nn:v(t)?Mn:Pn).prototype)}function pt(){return this._iter.cacheResult?(this._iter.cacheResult(),this.size=this._iter.size,this):Rn.prototype.cacheResult.call(this)}function ht(t,e){return void 0===t&&void 0===e?0:void 0===t?1:void 0===e?-1:t>e?1:t<e?-1:0}function dt(t,e){e=e||0;for(var n=Math.max(0,t.length-e),r=new Array(n),i=0;i<n;i++)r[i]=t[i+e];return r}function yt(t,e){if(!t)throw new Error(e)}function vt(t){yt(t!==1/0,"Cannot perform this action with an infinite size.")}function mt(t){if(I(t)&&"string"!=typeof t)return t;if(w(t))return t.toArray();throw new TypeError("Invalid keyPath: expected Ordered Collection or Array: "+t)}function _t(t){return t&&("function"!=typeof t.constructor||"Object"===t.constructor.name)}function gt(t){return"object"==typeof t&&(b(t)||Array.isArray(t)||_t(t))}function bt(t){try{return"string"==typeof t?JSON.stringify(t):String(t)}catch(e){return JSON.stringify(t)}}function wt(t,e){return b(t)?t.has(e):gt(t)&&xn.call(t,e)}function Ot(t,e,n){return b(t)?t.get(e,n):wt(t,e)?"function"==typeof t.get?t.get(e):t[e]:n}function St(t){if(Array.isArray(t))return dt(t);var e={};for(var n in t)xn.call(t,n)&&(e[n]=t[n]);return e}function At(t,e){if(!gt(t))throw new TypeError("Cannot update non-data-structure value: "+t);if(b(t)){if(!t.remove)throw new TypeError("Cannot update immutable value without .remove() method: "+t);return t.remove(e)}if(!xn.call(t,e))return t;var n=St(t);return Array.isArray(n)?n.splice(e,1):delete n[e],n}function Et(t,e,n){if(!gt(t))throw new TypeError("Cannot update non-data-structure value: "+t);if(b(t)){if(!t.set)throw new TypeError("Cannot update immutable value without .set() method: "+t);return t.set(e,n)}if(xn.call(t,e)&&n===t[e])return t;var r=St(t);return r[e]=n,r}function Tt(t,e,n,r){r||(r=n,n=void 0);var i=Ct(b(t),t,mt(e),0,n,r);return i===pn?n:i}function Ct(t,e,n,r,i,o){var a=e===pn;if(r===n.length){var u=a?i:e,s=o(u);return s===u?e:s}if(!a&&!gt(e))throw new TypeError("Cannot update within non-data-structure value in path ["+n.slice(0,r).map(bt)+"]: "+e);var c=n[r],f=a?pn:Ot(e,c,pn),l=Ct(f===pn?t:b(f),f,n,r+1,i,o);return l===f?e:l===pn?At(e,c):Et(a?t?ne():{}:e,c,l)}function It(t,e,n){return Tt(t,e,pn,function(){return n})}function kt(t,e){return It(this,t,e)}function xt(t,e){return Tt(t,e,function(){return pn})}function Rt(t){return xt(this,t)}function Nt(t,e,n,r){return Tt(t,[e],n,r)}function Mt(t,e,n){return 1===arguments.length?t(this):Nt(this,t,e,n)}function Pt(t,e,n){return Tt(this,t,e,n)}function jt(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return Ft(this,t)}function Dt(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];if("function"!=typeof t)throw new TypeError("Invalid merger function: "+t);return Ft(this,e,t)}function Ft(t,e,n){for(var r=[],i=0;i<e.length;i++){var o=mn(e[i]);0!==o.size&&r.push(o)}return 0===r.length?t:0!==t.toSeq().size||t.__ownerID||1!==r.length?t.withMutations(function(t){for(var e=n?function(e,r){Nt(t,r,pn,function(t){return t===pn?e:n(t,e,r)})}:function(e,n){t.set(n,e)},i=0;i<r.length;i++)r[i].forEach(e)}):t.constructor(r[0])}function Ht(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];return Wt(t,e)}function Lt(t,e){for(var n=[],r=arguments.length-2;r-- >0;)n[r]=arguments[r+2];return Wt(e,n,t)}function Ut(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];return Bt(t,e)}function qt(t,e){for(var n=[],r=arguments.length-2;r-- >0;)n[r]=arguments[r+2];return Bt(e,n,t)}function Bt(t,e,n){return Wt(t,e,zt(n))}function Wt(t,e,n){if(!gt(t))throw new TypeError("Cannot merge into non-data-structure value: "+t);if(b(t))return"function"==typeof n&&t.mergeWith?t.mergeWith.apply(t,[n].concat(e)):t.merge?t.merge.apply(t,e):t.concat.apply(t,e);for(var r=Array.isArray(t),i=t,o=r?_n:mn,a=r?function(e){i===t&&(i=St(i)),i.push(e)}:function(e,r){var o=xn.call(i,r),a=o&&n?n(i[r],e,r):e;o&&a===i[r]||(i===t&&(i=St(i)),i[r]=a)},u=0;u<e.length;u++)o(e[u]).forEach(a);return i}function zt(t){function e(n,r,i){return gt(n)&&gt(r)?Wt(n,[r],e):t?t(n,r,i):r}return e}function Yt(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return Bt(this,t)}function Kt(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];return Bt(this,e,t)}function Vt(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];return Tt(this,t,ne(),function(t){return Wt(t,e)})}function Gt(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];return Tt(this,t,ne(),function(t){return Bt(t,e)})}function Xt(t){var e=this.asMutable();return t(e),e.wasAltered()?e.__ensureOwner(this.__ownerID):this}function Jt(){return this.__ownerID?this:this.__ensureOwner(new o)}function $t(){return this.__ensureOwner()}function Zt(){return this.__altered}function Qt(t,e){return O(t,e[0],e[1])}function te(t,e){return{node:t,index:0,__prev:e}}function ee(t,e,n,r){var i=Object.create(rr);return i.size=t,i._root=e,i.__ownerID=n,i.__hash=r,i.__altered=!1,i}function ne(){return cr||(cr=ee(0))}function re(t,e,n){var i,o;if(t._root){var a=r(),u=r();if(i=ie(t._root,t.__ownerID,0,void 0,e,n,a,u),!u.value)return t;o=t.size+(a.value?n===pn?-1:1:0)}else{if(n===pn)return t;o=1,i=new ir(t.__ownerID,[[e,n]])}return t.__ownerID?(t.size=o,t._root=i,t.__hash=void 0,t.__altered=!0,t):i?ee(o,i):ne()}function ie(t,e,n,r,o,a,u,s){return t?t.update(e,n,r,o,a,u,s):a===pn?t:(i(s),i(u),new sr(e,r,[o,a]))}function oe(t){return t.constructor===sr||t.constructor===ur}function ae(t,e,n,r,i){if(t.keyHash===r)return new ur(e,r,[t.entry,i]);var o,a=(0===n?t.keyHash:t.keyHash>>>n)&ln,u=(0===n?r:r>>>n)&ln,s=a===u?[ae(t,e,n+cn,r,i)]:(o=new sr(e,r,i),a<u?[t,o]:[o,t]);return new or(e,1<<a|1<<u,s)}function ue(t,e,n,r){t||(t=new o);for(var i=new sr(t,L(n),[n,r]),a=0;a<e.length;a++){var u=e[a];i=i.update(t,0,void 0,u[0],u[1])}return i}function se(t,e,n,r){for(var i=0,o=0,a=new Array(n),u=0,s=1,c=e.length;u<c;u++,s<<=1){var f=e[u];void 0!==f&&u!==r&&(i|=s,a[o++]=f)}return new or(t,i,a)}function ce(t,e,n,r,i){for(var o=0,a=new Array(fn),u=0;0!==n;u++,n>>>=1)a[u]=1&n?e[o++]:void 0;return a[r]=i,new ar(t,o+1,a)}function fe(t){return t-=t>>1&1431655765,t=(858993459&t)+(t>>2&858993459),t=t+(t>>4)&252645135,t+=t>>8,127&(t+=t>>16)}function le(t,e,n,r){var i=r?t:dt(t);return i[e]=n,i}function pe(t,e,n,r){var i=t.length+1;if(r&&e+1===i)return t[e]=n,t;for(var o=new Array(i),a=0,u=0;u<i;u++)u===e?(o[u]=n,a=-1):o[u]=t[u+a];return o}function he(t,e,n){var r=t.length-1;if(n&&e===r)return t.pop(),t;for(var i=new Array(r),o=0,a=0;a<r;a++)a===e&&(o=1),i[a]=t[a+o];return i}function de(t){return Boolean(t&&t[dr])}function ye(t,e){function n(t,e,n){return 0===e?r(t,n):i(t,e,n)}function r(t,n){var r=n===u?s&&s.array:t&&t.array,i=n>o?0:o-n,c=a-n;return c>fn&&(c=fn),function(){if(i===c)return gr;var t=e?--c:i++;return r&&r[t]}}function i(t,r,i){var u,s=t&&t.array,c=i>o?0:o-i>>r,f=1+(a-i>>r);return f>fn&&(f=fn),function(){for(;;){if(u){var t=u();if(t!==gr)return t;u=null}if(c===f)return gr;var o=e?--f:c++;u=n(s&&s[o],r-cn,i+(o<<r))}}}var o=t._origin,a=t._capacity,u=Se(a),s=t._tail;return n(t._root,t._level,0)}function ve(t,e,n,r,i,o,a){var u=Object.create(vr);return u.size=e-t,u._origin=t,u._capacity=e,u._level=n,u._root=r,u._tail=i,u.__ownerID=o,u.__hash=a,u.__altered=!1,u}function me(){return _r||(_r=ve(0,0,cn))}function _e(t,e,n){if((e=u(t,e))!==e)return t;if(e>=t.size||e<0)return t.withMutations(function(t){e<0?Oe(t,e).set(0,n):Oe(t,0,e+1).set(e,n)});e+=t._origin;var i=t._tail,o=t._root,a=r();return e>=Se(t._capacity)?i=ge(i,t.__ownerID,0,e,n,a):o=ge(o,t.__ownerID,t._level,e,n,a),a.value?t.__ownerID?(t._root=o,t._tail=i,t.__hash=void 0,t.__altered=!0,t):ve(t._origin,t._capacity,t._level,o,i):t}function ge(t,e,n,r,o,a){var u=r>>>n&ln,s=t&&u<t.array.length;if(!s&&void 0===o)return t;var c;if(n>0){var f=t&&t.array[u],l=ge(f,e,n-cn,r,o,a);return l===f?t:(c=be(t,e),c.array[u]=l,c)}return s&&t.array[u]===o?t:(a&&i(a),c=be(t,e),void 0===o&&u===c.array.length-1?c.array.pop():c.array[u]=o,c)}function be(t,e){return e&&t&&e===t.ownerID?t:new mr(t?t.array.slice():[],e)}function we(t,e){if(e>=Se(t._capacity))return t._tail;if(e<1<<t._level+cn){for(var n=t._root,r=t._level;n&&r>0;)n=n.array[e>>>r&ln],r-=cn;return n}}function Oe(t,e,n){void 0!==e&&(e|=0),void 0!==n&&(n|=0);var r=t.__ownerID||new o,i=t._origin,a=t._capacity,u=i+e,s=void 0===n?a:n<0?a+n:i+n;if(u===i&&s===a)return t;if(u>=s)return t.clear();for(var c=t._level,f=t._root,l=0;u+l<0;)f=new mr(f&&f.array.length?[void 0,f]:[],r),c+=cn,l+=1<<c;l&&(u+=l,i+=l,s+=l,a+=l);for(var p=Se(a),h=Se(s);h>=1<<c+cn;)f=new mr(f&&f.array.length?[f]:[],r),c+=cn;var d=t._tail,y=h<p?we(t,s-1):h>p?new mr([],r):d;if(d&&h>p&&u<a&&d.array.length){f=be(f,r);for(var v=f,m=c;m>cn;m-=cn){var _=p>>>m&ln;v=v.array[_]=be(v.array[_],r)}v.array[p>>>cn&ln]=d}if(s<a&&(y=y&&y.removeAfter(r,0,s)),u>=h)u-=h,s-=h,c=cn,f=null,y=y&&y.removeBefore(r,0,u);else if(u>i||h<p){for(l=0;f;){var g=u>>>c&ln;if(g!==h>>>c&ln)break;g&&(l+=(1<<c)*g),c-=cn,f=f.array[g]}f&&u>i&&(f=f.removeBefore(r,c,u-l)),f&&h<p&&(f=f.removeAfter(r,c,h-l)),l&&(u-=l,s-=l)}return t.__ownerID?(t.size=s-u,t._origin=u,t._capacity=s,t._level=c,t._root=f,t._tail=y,t.__hash=void 0,t.__altered=!0,t):ve(u,s,c,f,y)}function Se(t){return t<fn?0:t-1>>>cn<<cn}function Ae(t,e,n,r){var i=Object.create(br.prototype);return i.size=t?t.size:0,i._map=t,i._list=e,i.__ownerID=n,i.__hash=r,i}function Ee(){return wr||(wr=Ae(ne(),me()))}function Te(t,e,n){var r,i,o=t._map,a=t._list,u=o.get(e),s=void 0!==u;if(n===pn){if(!s)return t;a.size>=fn&&a.size>=2*o.size?(i=a.filter(function(t,e){return void 0!==t&&u!==e}),r=i.toKeyedSeq().map(function(t){return t[0]}).flip().toMap(),t.__ownerID&&(r.__ownerID=i.__ownerID=t.__ownerID)):(r=o.remove(e),i=u===a.size-1?a.pop():a.set(u,void 0))}else if(s){if(n===a.get(u)[1])return t;r=o,i=a.set(u,[e,n])}else r=o.set(e,a.size),i=a.set(a.size,[e,n]);return t.__ownerID?(t.size=r.size,t._map=r,t._list=i,t.__hash=void 0,t):Ae(r,i)}function Ce(t){return Boolean(t&&t[Or])}function Ie(t,e,n,r){var i=Object.create(Ar);return i.size=t,i._head=e,i.__ownerID=n,i.__hash=r,i.__altered=!1,i}function ke(){return Er||(Er=Ie(0))}function xe(t){return Boolean(t&&t[Tr])}function Re(t){return xe(t)&&w(t)}function Ne(t,e){if(t===e)return!0;if(!d(e)||void 0!==t.size&&void 0!==e.size&&t.size!==e.size||void 0!==t.__hash&&void 0!==e.__hash&&t.__hash!==e.__hash||y(t)!==y(e)||v(t)!==v(e)||w(t)!==w(e))return!1;if(0===t.size&&0===e.size)return!0;var n=!m(t);if(w(t)){var r=t.entries();return e.every(function(t,e){var i=r.next().value;return i&&F(i[1],t)&&(n||F(i[0],e))})&&r.next().done}var i=!1;if(void 0===t.size)if(void 0===e.size)"function"==typeof t.cacheResult&&t.cacheResult();else{i=!0;var o=t;t=e,e=o}var a=!0,u=e.__iterate(function(e,r){if(n?!t.has(e):i?!F(e,t.get(r,pn)):!F(t.get(r,pn),e))return a=!1,!1});return a&&t.size===u}function Me(t,e){var n=function(n){t.prototype[n]=e[n]};return Object.keys(e).forEach(n),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(e).forEach(n),t}function Pe(t){if(!t||"object"!=typeof t)return t;if(!d(t)){if(!gt(t))return t;t=Rn(t)}if(y(t)){var e={};return t.__iterate(function(t,n){e[n]=Pe(t)}),e}var n=[];return t.__iterate(function(t){n.push(Pe(t))}),n}function je(t,e){return t.__ownerID?(t.size=e.size,t._map=e,t):e===t._map?t:0===e.size?t.__empty():t.__make(e)}function De(t,e){var n=Object.create(Ir);return n.size=t?t.size:0,n._map=t,n.__ownerID=e,n}function Fe(){return kr||(kr=De(ne()))}function He(t,e,n){for(var r=mt(e),i=0;i!==r.length;)if((t=Ot(t,r[i++],pn))===pn)return n;return t}function Le(t,e){return He(this,t,e)}function Ue(t,e){return He(t,e,pn)!==pn}function qe(t){return Ue(this,t)}function Be(){vt(this.size);var t={};return this.__iterate(function(e,n){t[n]=e}),t}function We(t,e,n,r,i,o){return vt(t.size),t.__iterate(function(t,o,a){i?(i=!1,n=t):n=e.call(r,n,t,o,a)},o),n}function ze(t,e){return e}function Ye(t,e){return[e,t]}function Ke(t){return function(){return!t.apply(this,arguments)}}function Ve(t){return function(){return-t.apply(this,arguments)}}function Ge(){return dt(arguments)}function Xe(t,e){return t<e?1:t>e?-1:0}function Je(t){if(t.size===1/0)return 0;var e=w(t),n=y(t),r=e?1:0;return $e(t.__iterate(n?e?function(t,e){r=31*r+Ze(L(t),L(e))|0}:function(t,e){r=r+Ze(L(t),L(e))|0}:e?function(t){r=31*r+L(t)|0}:function(t){r=r+L(t)|0}),r)}function $e(t,e){return e=qn(e,3432918353),e=qn(e<<15|e>>>-15,461845907),e=qn(e<<13|e>>>-13,5),e=(e+3864292196|0)^t,e=qn(e^e>>>16,2246822507),e=qn(e^e>>>13,3266489909),e=H(e^e>>>16)}function Ze(t,e){return t^e+2654435769+(t<<6)+(t>>2)|0}function Qe(t,e){var n=Object.create(Dr);return n.size=t?t.size:0,n._map=t,n.__ownerID=e,n}function tn(){return Fr||(Fr=Qe(Ee()))}function en(t,e,n){var r=Object.create(Object.getPrototypeOf(t));return r._values=e,r.__ownerID=n,r}function nn(t){return t.constructor.displayName||t.constructor.name||"Record"}function rn(t){return x(t._keys.map(function(e){return[e,t.get(e)]}))}function on(t,e){try{Object.defineProperty(t,e,{get:function(){return this.get(e)},set:function(t){yt(this.__ownerID,"Cannot set on an immutable record."),this.set(e,t)}})}catch(t){}}function an(t,e){return un([],e||sn,t,"",e&&e.length>2?[]:void 0,{"":t})}function un(t,e,n,r,i,o){var a=Array.isArray(n)?Mn:_t(n)?Nn:null;if(a){if(~t.indexOf(n))throw new TypeError("Cannot convert circular structure to Immutable");t.push(n),i&&""!==r&&i.push(r);var u=e.call(o,r,a(n).map(function(r,o){return un(t,e,r,o,i,n)}),i&&i.slice());return t.pop(),i&&i.pop(),u}return n}function sn(t,e){return y(e)?e.toMap():e.toList()}Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"version",function(){return Br}),n.d(e,"Collection",function(){return vn}),n.d(e,"Iterable",function(){return zr}),n.d(e,"Seq",function(){return Rn}),n.d(e,"Map",function(){return nr}),n.d(e,"OrderedMap",function(){return br}),n.d(e,"List",function(){return yr}),n.d(e,"Stack",function(){return Sr}),n.d(e,"Set",function(){return Cr}),n.d(e,"OrderedSet",function(){return jr}),n.d(e,"Record",function(){return Hr}),n.d(e,"Range",function(){return Rr}),n.d(e,"Repeat",function(){return qr}),n.d(e,"is",function(){return F}),n.d(e,"fromJS",function(){return an}),n.d(e,"hash",function(){return L}),n.d(e,"isImmutable",function(){return b}),n.d(e,"isCollection",function(){return d}),n.d(e,"isKeyed",function(){return y}),n.d(e,"isIndexed",function(){return v}),n.d(e,"isAssociative",function(){return m}),n.d(e,"isOrdered",function(){return w}),n.d(e,"isValueObject",function(){return D}),n.d(e,"get",function(){return Ot}),n.d(e,"getIn",function(){return He}),n.d(e,"has",function(){return wt}),n.d(e,"hasIn",function(){return Ue}),n.d(e,"merge",function(){return Ht}),n.d(e,"mergeDeep",function(){return Ut}),n.d(e,"mergeWith",function(){return Lt}),n.d(e,"mergeDeepWith",function(){return qt}),n.d(e,"remove",function(){return At}),n.d(e,"removeIn",function(){return xt}),n.d(e,"set",function(){return Et}),n.d(e,"setIn",function(){return It}),n.d(e,"update",function(){return Nt}),n.d(e,"updateIn",function(){return Tt});var cn=5,fn=1<<cn,ln=fn-1,pn={},hn="@@__IMMUTABLE_ITERABLE__@@",dn="@@__IMMUTABLE_KEYED__@@",yn="@@__IMMUTABLE_INDEXED__@@",vn=function(t){return d(t)?t:Rn(t)},mn=function(t){function e(t){return y(t)?t:Nn(t)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(vn),_n=function(t){function e(t){return v(t)?t:Mn(t)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(vn),gn=function(t){function e(t){return d(t)&&!m(t)?t:Pn(t)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(vn);vn.Keyed=mn,vn.Indexed=_n,vn.Set=gn;var bn="@@__IMMUTABLE_SEQ__@@",wn="@@__IMMUTABLE_RECORD__@@",On="@@__IMMUTABLE_ORDERED__@@",Sn=0,An=1,En=2,Tn="function"==typeof Symbol&&Symbol.iterator,Cn="@@iterator",In=Tn||Cn,kn=function(t){this.next=t};kn.prototype.toString=function(){return"[Iterator]"},kn.KEYS=Sn,kn.VALUES=An,kn.ENTRIES=En,kn.prototype.inspect=kn.prototype.toSource=function(){return this.toString()},kn.prototype[In]=function(){return this};var xn=Object.prototype.hasOwnProperty,Rn=function(t){function e(t){return null===t||void 0===t?k():b(t)?t.toSeq():N(t)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toSeq=function(){return this},e.prototype.toString=function(){return this.__toString("Seq {","}")},e.prototype.cacheResult=function(){return!this._cache&&this.__iterateUncached&&(this._cache=this.entrySeq().toArray(),this.size=this._cache.length),this},e.prototype.__iterate=function(t,e){var n=this._cache;if(n){for(var r=n.length,i=0;i!==r;){var o=n[e?r-++i:i++];if(!1===t(o[1],o[0],this))break}return i}return this.__iterateUncached(t,e)},e.prototype.__iterator=function(t,e){var n=this._cache;if(n){var r=n.length,i=0;return new kn(function(){if(i===r)return S();var o=n[e?r-++i:i++];return O(t,o[0],o[1])})}return this.__iteratorUncached(t,e)},e}(vn),Nn=function(t){function e(t){return null===t||void 0===t?k().toKeyedSeq():d(t)?y(t)?t.toSeq():t.fromEntrySeq():g(t)?t.toSeq():x(t)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toKeyedSeq=function(){return this},e}(Rn),Mn=function(t){function e(t){return null===t||void 0===t?k():d(t)?y(t)?t.entrySeq():t.toIndexedSeq():g(t)?t.toSeq().entrySeq():R(t)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return e(arguments)},e.prototype.toIndexedSeq=function(){return this},e.prototype.toString=function(){return this.__toString("Seq [","]")},e}(Rn),Pn=function(t){function e(t){return(d(t)&&!m(t)?t:Mn(t)).toSetSeq()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return e(arguments)},e.prototype.toSetSeq=function(){return this},e}(Rn);Rn.isSeq=_,Rn.Keyed=Nn,Rn.Set=Pn,Rn.Indexed=Mn,Rn.prototype[bn]=!0;var jn=function(t){function e(t){this._array=t,this.size=t.length}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t,e){return this.has(t)?this._array[u(this,t)]:e},e.prototype.__iterate=function(t,e){for(var n=this._array,r=n.length,i=0;i!==r;){var o=e?r-++i:i++;if(!1===t(n[o],o,this))break}return i},e.prototype.__iterator=function(t,e){var n=this._array,r=n.length,i=0;return new kn(function(){if(i===r)return S();var o=e?r-++i:i++;return O(t,o,n[o])})},e}(Mn),Dn=function(t){function e(t){var e=Object.keys(t);this._object=t,this._keys=e,this.size=e.length}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t,e){return void 0===e||this.has(t)?this._object[t]:e},e.prototype.has=function(t){return xn.call(this._object,t)},e.prototype.__iterate=function(t,e){for(var n=this._object,r=this._keys,i=r.length,o=0;o!==i;){var a=r[e?i-++o:o++];if(!1===t(n[a],a,this))break}return o},e.prototype.__iterator=function(t,e){var n=this._object,r=this._keys,i=r.length,o=0;return new kn(function(){if(o===i)return S();var a=r[e?i-++o:o++];return O(t,a,n[a])})},e}(Nn);Dn.prototype[On]=!0;var Fn,Hn,Ln=function(t){function e(t){this._collection=t,this.size=t.length||t.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.__iterateUncached=function(t,e){if(e)return this.cacheResult().__iterate(t,e);var n=this._collection,r=T(n),i=0;if(E(r))for(var o;!(o=r.next()).done&&!1!==t(o.value,i++,this););return i},e.prototype.__iteratorUncached=function(t,e){if(e)return this.cacheResult().__iterator(t,e);var n=this._collection,r=T(n);if(!E(r))return new kn(S);var i=0;return new kn(function(){var e=r.next();return e.done?e:O(t,i++,e.value)})},e}(Mn),Un="@@__IMMUTABLE_MAP__@@",qn="function"==typeof Math.imul&&-2===Math.imul(4294967295,2)?Math.imul:function(t,e){t|=0,e|=0;var n=65535&t,r=65535&e;return n*r+((t>>>16)*r+n*(e>>>16)<<16>>>0)|0},Bn=Object.prototype.valueOf,Wn=Object.isExtensible,zn=function(){try{return Object.defineProperty({},"@",{}),!0}catch(t){return!1}}(),Yn="function"==typeof WeakMap;Yn&&(Hn=new WeakMap);var Kn=0,Vn="__immutablehash__";"function"==typeof Symbol&&(Vn=Symbol(Vn));var Gn=16,Xn=255,Jn=0,$n={},Zn=function(t){function e(t,e){this._iter=t,this._useKeys=e,this.size=t.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t,e){return this._iter.get(t,e)},e.prototype.has=function(t){return this._iter.has(t)},e.prototype.valueSeq=function(){return this._iter.valueSeq()},e.prototype.reverse=function(){var t=this,e=V(this,!0);return this._useKeys||(e.valueSeq=function(){return t._iter.toSeq().reverse()}),e},e.prototype.map=function(t,e){var n=this,r=K(this,t,e);return this._useKeys||(r.valueSeq=function(){return n._iter.toSeq().map(t,e)}),r},e.prototype.__iterate=function(t,e){var n=this;return this._iter.__iterate(function(e,r){return t(e,r,n)},e)},e.prototype.__iterator=function(t,e){return this._iter.__iterator(t,e)},e}(Nn);Zn.prototype[On]=!0;var Qn=function(t){function e(t){this._iter=t,this.size=t.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.includes=function(t){return this._iter.includes(t)},e.prototype.__iterate=function(t,e){var n=this,r=0;return e&&a(this),this._iter.__iterate(function(i){return t(i,e?n.size-++r:r++,n)},e)},e.prototype.__iterator=function(t,e){var n=this,r=this._iter.__iterator(An,e),i=0;return e&&a(this),new kn(function(){var o=r.next();return o.done?o:O(t,e?n.size-++i:i++,o.value,o)})},e}(Mn),tr=function(t){function e(t){this._iter=t,this.size=t.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.has=function(t){return this._iter.includes(t)},e.prototype.__iterate=function(t,e){var n=this;return this._iter.__iterate(function(e){return t(e,e,n)},e)},e.prototype.__iterator=function(t,e){var n=this._iter.__iterator(An,e);return new kn(function(){var e=n.next();return e.done?e:O(t,e.value,e.value,e)})},e}(Pn),er=function(t){function e(t){this._iter=t,this.size=t.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.entrySeq=function(){return this._iter.toSeq()},e.prototype.__iterate=function(t,e){var n=this;return this._iter.__iterate(function(e){if(e){ct(e);var r=d(e);return t(r?e.get(1):e[1],r?e.get(0):e[0],n)}},e)},e.prototype.__iterator=function(t,e){var n=this._iter.__iterator(An,e);return new kn(function(){for(;;){var e=n.next();if(e.done)return e;var r=e.value;if(r){ct(r);var i=d(r);return O(t,i?r.get(0):r[0],i?r.get(1):r[1],e)}}})},e}(Nn);Qn.prototype.cacheResult=Zn.prototype.cacheResult=tr.prototype.cacheResult=er.prototype.cacheResult=pt;var nr=function(t){function e(e){return null===e||void 0===e?ne():P(e)&&!w(e)?e:ne().withMutations(function(n){var r=t(e);vt(r.size),r.forEach(function(t,e){return n.set(e,t)})})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return ne().withMutations(function(e){for(var n=0;n<t.length;n+=2){if(n+1>=t.length)throw new Error("Missing value for key: "+t[n]);e.set(t[n],t[n+1])}})},e.prototype.toString=function(){return this.__toString("Map {","}")},e.prototype.get=function(t,e){return this._root?this._root.get(0,void 0,t,e):e},e.prototype.set=function(t,e){return re(this,t,e)},e.prototype.remove=function(t){return re(this,t,pn)},e.prototype.deleteAll=function(t){var e=vn(t);return 0===e.size?this:this.withMutations(function(t){e.forEach(function(e){return t.remove(e)})})},e.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._root=null,this.__hash=void 0,this.__altered=!0,this):ne()},e.prototype.sort=function(t){return br(it(this,t))},e.prototype.sortBy=function(t,e){return br(it(this,e,t))},e.prototype.map=function(t,e){return this.withMutations(function(n){n.forEach(function(r,i){n.set(i,t.call(e,r,i,n))})})},e.prototype.__iterator=function(t,e){return new fr(this,t,e)},e.prototype.__iterate=function(t,e){var n=this,r=0;return this._root&&this._root.iterate(function(e){return r++,t(e[1],e[0],n)},e),r},e.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?ee(this.size,this._root,t,this.__hash):0===this.size?ne():(this.__ownerID=t,this.__altered=!1,this)},e}(mn);nr.isMap=P;var rr=nr.prototype;rr[Un]=!0,rr.delete=rr.remove,rr.removeAll=rr.deleteAll,rr.setIn=kt,rr.removeIn=rr.deleteIn=Rt,rr.update=Mt,rr.updateIn=Pt,rr.merge=rr.concat=jt,rr.mergeWith=Dt,rr.mergeDeep=Yt,rr.mergeDeepWith=Kt,rr.mergeIn=Vt,rr.mergeDeepIn=Gt,rr.withMutations=Xt,rr.wasAltered=Zt,rr.asImmutable=$t,rr["@@transducer/init"]=rr.asMutable=Jt,rr["@@transducer/step"]=function(t,e){return t.set(e[0],e[1])},rr["@@transducer/result"]=function(t){return t.asImmutable()};var ir=function(t,e){this.ownerID=t,this.entries=e};ir.prototype.get=function(t,e,n,r){for(var i=this.entries,o=0,a=i.length;o<a;o++)if(F(n,i[o][0]))return i[o][1];return r},ir.prototype.update=function(t,e,n,r,o,a,u){for(var s=o===pn,c=this.entries,f=0,l=c.length;f<l&&!F(r,c[f][0]);f++);var p=f<l;if(p?c[f][1]===o:s)return this;if(i(u),(s||!p)&&i(a),!s||1!==c.length){if(!p&&!s&&c.length>=lr)return ue(t,c,r,o);var h=t&&t===this.ownerID,d=h?c:dt(c);return p?s?f===l-1?d.pop():d[f]=d.pop():d[f]=[r,o]:d.push([r,o]),h?(this.entries=d,this):new ir(t,d)}};var or=function(t,e,n){this.ownerID=t,this.bitmap=e,this.nodes=n};or.prototype.get=function(t,e,n,r){void 0===e&&(e=L(n));var i=1<<((0===t?e:e>>>t)&ln),o=this.bitmap;return 0==(o&i)?r:this.nodes[fe(o&i-1)].get(t+cn,e,n,r)},or.prototype.update=function(t,e,n,r,i,o,a){void 0===n&&(n=L(r));var u=(0===e?n:n>>>e)&ln,s=1<<u,c=this.bitmap,f=0!=(c&s);if(!f&&i===pn)return this;var l=fe(c&s-1),p=this.nodes,h=f?p[l]:void 0,d=ie(h,t,e+cn,n,r,i,o,a);if(d===h)return this;if(!f&&d&&p.length>=pr)return ce(t,p,c,u,d);if(f&&!d&&2===p.length&&oe(p[1^l]))return p[1^l];if(f&&d&&1===p.length&&oe(d))return d;var y=t&&t===this.ownerID,v=f?d?c:c^s:c|s,m=f?d?le(p,l,d,y):he(p,l,y):pe(p,l,d,y);return y?(this.bitmap=v,this.nodes=m,this):new or(t,v,m)};var ar=function(t,e,n){this.ownerID=t,this.count=e,this.nodes=n};ar.prototype.get=function(t,e,n,r){void 0===e&&(e=L(n));var i=(0===t?e:e>>>t)&ln,o=this.nodes[i];return o?o.get(t+cn,e,n,r):r},ar.prototype.update=function(t,e,n,r,i,o,a){void 0===n&&(n=L(r));var u=(0===e?n:n>>>e)&ln,s=i===pn,c=this.nodes,f=c[u];if(s&&!f)return this;var l=ie(f,t,e+cn,n,r,i,o,a);if(l===f)return this;var p=this.count;if(f){if(!l&&--p<hr)return se(t,c,p,u)}else p++;var h=t&&t===this.ownerID,d=le(c,u,l,h);return h?(this.count=p,this.nodes=d,this):new ar(t,p,d)};var ur=function(t,e,n){this.ownerID=t,this.keyHash=e,this.entries=n};ur.prototype.get=function(t,e,n,r){for(var i=this.entries,o=0,a=i.length;o<a;o++)if(F(n,i[o][0]))return i[o][1];return r},ur.prototype.update=function(t,e,n,r,o,a,u){void 0===n&&(n=L(r));var s=o===pn;if(n!==this.keyHash)return s?this:(i(u),i(a),ae(this,t,e,n,[r,o]));for(var c=this.entries,f=0,l=c.length;f<l&&!F(r,c[f][0]);f++);var p=f<l;if(p?c[f][1]===o:s)return this;if(i(u),(s||!p)&&i(a),s&&2===l)return new sr(t,this.keyHash,c[1^f]);var h=t&&t===this.ownerID,d=h?c:dt(c);return p?s?f===l-1?d.pop():d[f]=d.pop():d[f]=[r,o]:d.push([r,o]),h?(this.entries=d,this):new ur(t,this.keyHash,d)};var sr=function(t,e,n){this.ownerID=t,this.keyHash=e,this.entry=n};sr.prototype.get=function(t,e,n,r){return F(n,this.entry[0])?this.entry[1]:r},sr.prototype.update=function(t,e,n,r,o,a,u){var s=o===pn,c=F(r,this.entry[0]);return(c?o===this.entry[1]:s)?this:(i(u),s?void i(a):c?t&&t===this.ownerID?(this.entry[1]=o,this):new sr(t,this.keyHash,[r,o]):(i(a),ae(this,t,e,L(r),[r,o])))},ir.prototype.iterate=ur.prototype.iterate=function(t,e){for(var n=this.entries,r=0,i=n.length-1;r<=i;r++)if(!1===t(n[e?i-r:r]))return!1},or.prototype.iterate=ar.prototype.iterate=function(t,e){for(var n=this.nodes,r=0,i=n.length-1;r<=i;r++){var o=n[e?i-r:r];if(o&&!1===o.iterate(t,e))return!1}},sr.prototype.iterate=function(t,e){return t(this.entry)};var cr,fr=function(t){function e(t,e,n){this._type=e,this._reverse=n,this._stack=t._root&&te(t._root)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){for(var t=this._type,e=this._stack;e;){var n=e.node,r=e.index++,i=void 0;if(n.entry){if(0===r)return Qt(t,n.entry)}else if(n.entries){if(i=n.entries.length-1,r<=i)return Qt(t,n.entries[this._reverse?i-r:r])}else if(i=n.nodes.length-1,r<=i){var o=n.nodes[this._reverse?i-r:r];if(o){if(o.entry)return Qt(t,o.entry);e=this._stack=te(o,e)}continue}e=this._stack=this._stack.__prev}return S()},e}(kn),lr=fn/4,pr=fn/2,hr=fn/4,dr="@@__IMMUTABLE_LIST__@@",yr=function(t){function e(e){var n=me();if(null===e||void 0===e)return n;if(de(e))return e;var r=t(e),i=r.size;return 0===i?n:(vt(i),i>0&&i<fn?ve(0,i,cn,null,new mr(r.toArray())):n.withMutations(function(t){t.setSize(i),r.forEach(function(e,n){return t.set(n,e)})}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.prototype.toString=function(){return this.__toString("List [","]")},e.prototype.get=function(t,e){if((t=u(this,t))>=0&&t<this.size){t+=this._origin;var n=we(this,t);return n&&n.array[t&ln]}return e},e.prototype.set=function(t,e){return _e(this,t,e)},e.prototype.remove=function(t){return this.has(t)?0===t?this.shift():t===this.size-1?this.pop():this.splice(t,1):this},e.prototype.insert=function(t,e){return this.splice(t,0,e)},e.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=this._origin=this._capacity=0,this._level=cn,this._root=this._tail=null,this.__hash=void 0,this.__altered=!0,this):me()},e.prototype.push=function(){var t=arguments,e=this.size;return this.withMutations(function(n){Oe(n,0,e+t.length);for(var r=0;r<t.length;r++)n.set(e+r,t[r])})},e.prototype.pop=function(){return Oe(this,0,-1)},e.prototype.unshift=function(){var t=arguments;return this.withMutations(function(e){Oe(e,-t.length);for(var n=0;n<t.length;n++)e.set(n,t[n])})},e.prototype.shift=function(){return Oe(this,1)},e.prototype.concat=function(){for(var e=arguments,n=[],r=0;r<arguments.length;r++){var i=e[r],o=t("string"!=typeof i&&A(i)?i:[i]);0!==o.size&&n.push(o)}return 0===n.length?this:0!==this.size||this.__ownerID||1!==n.length?this.withMutations(function(t){n.forEach(function(e){return e.forEach(function(e){return t.push(e)})})}):this.constructor(n[0])},e.prototype.setSize=function(t){return Oe(this,0,t)},e.prototype.map=function(t,e){var n=this;return this.withMutations(function(r){for(var i=0;i<n.size;i++)r.set(i,t.call(e,r.get(i),i,r))})},e.prototype.slice=function(t,e){var n=this.size;return c(t,e,n)?this:Oe(this,f(t,n),l(e,n))},e.prototype.__iterator=function(t,e){var n=e?this.size:0,r=ye(this,e);return new kn(function(){var i=r();return i===gr?S():O(t,e?--n:n++,i)})},e.prototype.__iterate=function(t,e){for(var n,r=e?this.size:0,i=ye(this,e);(n=i())!==gr&&!1!==t(n,e?--r:r++,this););return r},e.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?ve(this._origin,this._capacity,this._level,this._root,this._tail,t,this.__hash):0===this.size?me():(this.__ownerID=t,this.__altered=!1,this)},e}(_n);yr.isList=de;var vr=yr.prototype;vr[dr]=!0,vr.delete=vr.remove,vr.merge=vr.concat,vr.setIn=kt,vr.deleteIn=vr.removeIn=Rt,vr.update=Mt,vr.updateIn=Pt,vr.mergeIn=Vt,vr.mergeDeepIn=Gt,vr.withMutations=Xt,vr.wasAltered=Zt,vr.asImmutable=$t,vr["@@transducer/init"]=vr.asMutable=Jt,vr["@@transducer/step"]=function(t,e){return t.push(e)},vr["@@transducer/result"]=function(t){return t.asImmutable()};var mr=function(t,e){this.array=t,this.ownerID=e};mr.prototype.removeBefore=function(t,e,n){if(n===e?1<<e:0===this.array.length)return this;var r=n>>>e&ln;if(r>=this.array.length)return new mr([],t);var i,o=0===r;if(e>0){var a=this.array[r];if((i=a&&a.removeBefore(t,e-cn,n))===a&&o)return this}if(o&&!i)return this;var u=be(this,t);if(!o)for(var s=0;s<r;s++)u.array[s]=void 0;return i&&(u.array[r]=i),u},mr.prototype.removeAfter=function(t,e,n){if(n===(e?1<<e:0)||0===this.array.length)return this;var r=n-1>>>e&ln;if(r>=this.array.length)return this;var i;if(e>0){var o=this.array[r];if((i=o&&o.removeAfter(t,e-cn,n))===o&&r===this.array.length-1)return this}var a=be(this,t);return a.array.splice(r+1),i&&(a.array[r]=i),a};var _r,gr={},br=function(t){function e(t){return null===t||void 0===t?Ee():j(t)?t:Ee().withMutations(function(e){var n=mn(t);vt(n.size),n.forEach(function(t,n){return e.set(n,t)})})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.prototype.toString=function(){return this.__toString("OrderedMap {","}")},e.prototype.get=function(t,e){var n=this._map.get(t);return void 0!==n?this._list.get(n)[1]:e},e.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._map.clear(),this._list.clear(),this):Ee()},e.prototype.set=function(t,e){return Te(this,t,e)},e.prototype.remove=function(t){return Te(this,t,pn)},e.prototype.wasAltered=function(){return this._map.wasAltered()||this._list.wasAltered()},e.prototype.__iterate=function(t,e){var n=this;return this._list.__iterate(function(e){return e&&t(e[1],e[0],n)},e)},e.prototype.__iterator=function(t,e){return this._list.fromEntrySeq().__iterator(t,e)},e.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._map.__ensureOwner(t),n=this._list.__ensureOwner(t);return t?Ae(e,n,t,this.__hash):0===this.size?Ee():(this.__ownerID=t,this._map=e,this._list=n,this)},e}(nr);br.isOrderedMap=j,br.prototype[On]=!0,br.prototype.delete=br.prototype.remove;var wr,Or="@@__IMMUTABLE_STACK__@@",Sr=function(t){function e(t){return null===t||void 0===t?ke():Ce(t)?t:ke().pushAll(t)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.prototype.toString=function(){return this.__toString("Stack [","]")},e.prototype.get=function(t,e){var n=this._head;for(t=u(this,t);n&&t--;)n=n.next;return n?n.value:e},e.prototype.peek=function(){return this._head&&this._head.value},e.prototype.push=function(){var t=arguments;if(0===arguments.length)return this;for(var e=this.size+arguments.length,n=this._head,r=arguments.length-1;r>=0;r--)n={value:t[r],next:n};return this.__ownerID?(this.size=e,this._head=n,this.__hash=void 0,this.__altered=!0,this):Ie(e,n)},e.prototype.pushAll=function(e){if(e=t(e),0===e.size)return this;if(0===this.size&&Ce(e))return e;vt(e.size);var n=this.size,r=this._head;return e.__iterate(function(t){n++,r={value:t,next:r}},!0),this.__ownerID?(this.size=n,this._head=r,this.__hash=void 0,this.__altered=!0,this):Ie(n,r)},e.prototype.pop=function(){return this.slice(1)},e.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._head=void 0,this.__hash=void 0,this.__altered=!0,this):ke()},e.prototype.slice=function(e,n){if(c(e,n,this.size))return this;var r=f(e,this.size);if(l(n,this.size)!==this.size)return t.prototype.slice.call(this,e,n);for(var i=this.size-r,o=this._head;r--;)o=o.next;return this.__ownerID?(this.size=i,this._head=o,this.__hash=void 0,this.__altered=!0,this):Ie(i,o)},e.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?Ie(this.size,this._head,t,this.__hash):0===this.size?ke():(this.__ownerID=t,this.__altered=!1,this)},e.prototype.__iterate=function(t,e){var n=this;if(e)return new jn(this.toArray()).__iterate(function(e,r){return t(e,r,n)},e);for(var r=0,i=this._head;i&&!1!==t(i.value,r++,this);)i=i.next;return r},e.prototype.__iterator=function(t,e){if(e)return new jn(this.toArray()).__iterator(t,e);var n=0,r=this._head;return new kn(function(){if(r){var e=r.value;return r=r.next,O(t,n++,e)}return S()})},e}(_n);Sr.isStack=Ce;var Ar=Sr.prototype;Ar[Or]=!0,Ar.shift=Ar.pop,Ar.unshift=Ar.push,Ar.unshiftAll=Ar.pushAll,Ar.withMutations=Xt,Ar.wasAltered=Zt,Ar.asImmutable=$t,Ar["@@transducer/init"]=Ar.asMutable=Jt,Ar["@@transducer/step"]=function(t,e){return t.unshift(e)},Ar["@@transducer/result"]=function(t){return t.asImmutable()};var Er,Tr="@@__IMMUTABLE_SET__@@",Cr=function(t){function e(e){return null===e||void 0===e?Fe():xe(e)&&!w(e)?e:Fe().withMutations(function(n){var r=t(e);vt(r.size),r.forEach(function(t){return n.add(t)})})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.fromKeys=function(t){return this(mn(t).keySeq())},e.intersect=function(t){return t=vn(t).toArray(),t.length?Ir.intersect.apply(e(t.pop()),t):Fe()},e.union=function(t){return t=vn(t).toArray(),t.length?Ir.union.apply(e(t.pop()),t):Fe()},e.prototype.toString=function(){return this.__toString("Set {","}")},e.prototype.has=function(t){return this._map.has(t)},e.prototype.add=function(t){return je(this,this._map.set(t,t))},e.prototype.remove=function(t){return je(this,this._map.remove(t))},e.prototype.clear=function(){return je(this,this._map.clear())},e.prototype.map=function(t,e){var n=this,r=[],i=[];return this.forEach(function(o){var a=t.call(e,o,o,n);a!==o&&(r.push(o),i.push(a))}),this.withMutations(function(t){r.forEach(function(e){return t.remove(e)}),i.forEach(function(e){return t.add(e)})})},e.prototype.union=function(){for(var e=[],n=arguments.length;n--;)e[n]=arguments[n];return e=e.filter(function(t){return 0!==t.size}),0===e.length?this:0!==this.size||this.__ownerID||1!==e.length?this.withMutations(function(n){for(var r=0;r<e.length;r++)t(e[r]).forEach(function(t){return n.add(t)})}):this.constructor(e[0])},e.prototype.intersect=function(){for(var e=[],n=arguments.length;n--;)e[n]=arguments[n];if(0===e.length)return this;e=e.map(function(e){return t(e)});var r=[];return this.forEach(function(t){e.every(function(e){return e.includes(t)})||r.push(t)}),this.withMutations(function(t){r.forEach(function(e){t.remove(e)})})},e.prototype.subtract=function(){for(var e=[],n=arguments.length;n--;)e[n]=arguments[n];if(0===e.length)return this;e=e.map(function(e){return t(e)});var r=[];return this.forEach(function(t){e.some(function(e){return e.includes(t)})&&r.push(t)}),this.withMutations(function(t){r.forEach(function(e){t.remove(e)})})},e.prototype.sort=function(t){return jr(it(this,t))},e.prototype.sortBy=function(t,e){return jr(it(this,e,t))},e.prototype.wasAltered=function(){return this._map.wasAltered()},e.prototype.__iterate=function(t,e){var n=this;return this._map.__iterate(function(e){return t(e,e,n)},e)},e.prototype.__iterator=function(t,e){return this._map.__iterator(t,e)},e.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._map.__ensureOwner(t);return t?this.__make(e,t):0===this.size?this.__empty():(this.__ownerID=t,this._map=e,this)},e}(gn);Cr.isSet=xe;var Ir=Cr.prototype;Ir[Tr]=!0,Ir.delete=Ir.remove,Ir.merge=Ir.concat=Ir.union,Ir.withMutations=Xt,Ir.asImmutable=$t,Ir["@@transducer/init"]=Ir.asMutable=Jt,Ir["@@transducer/step"]=function(t,e){return t.add(e)},Ir["@@transducer/result"]=function(t){return t.asImmutable()},Ir.__empty=Fe,Ir.__make=De;var kr,xr,Rr=function(t){function e(t,n,r){if(!(this instanceof e))return new e(t,n,r);if(yt(0!==r,"Cannot step a Range by 0"),t=t||0,void 0===n&&(n=1/0),r=void 0===r?1:Math.abs(r),n<t&&(r=-r),this._start=t,this._end=n,this._step=r,this.size=Math.max(0,Math.ceil((n-t)/r-1)+1),0===this.size){if(xr)return xr;xr=this}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toString=function(){return 0===this.size?"Range []":"Range [ "+this._start+"..."+this._end+(1!==this._step?" by "+this._step:"")+" ]"},e.prototype.get=function(t,e){return this.has(t)?this._start+u(this,t)*this._step:e},e.prototype.includes=function(t){var e=(t-this._start)/this._step;return e>=0&&e<this.size&&e===Math.floor(e)},e.prototype.slice=function(t,n){return c(t,n,this.size)?this:(t=f(t,this.size),n=l(n,this.size),n<=t?new e(0,0):new e(this.get(t,this._end),this.get(n,this._end),this._step))},e.prototype.indexOf=function(t){var e=t-this._start;if(e%this._step==0){var n=e/this._step;if(n>=0&&n<this.size)return n}return-1},e.prototype.lastIndexOf=function(t){return this.indexOf(t)},e.prototype.__iterate=function(t,e){for(var n=this.size,r=this._step,i=e?this._start+(n-1)*r:this._start,o=0;o!==n&&!1!==t(i,e?n-++o:o++,this);)i+=e?-r:r;return o},e.prototype.__iterator=function(t,e){var n=this.size,r=this._step,i=e?this._start+(n-1)*r:this._start,o=0;return new kn(function(){if(o===n)return S();var a=i;return i+=e?-r:r,O(t,e?n-++o:o++,a)})},e.prototype.equals=function(t){return t instanceof e?this._start===t._start&&this._end===t._end&&this._step===t._step:Ne(this,t)},e}(Mn);vn.isIterable=d,vn.isKeyed=y,vn.isIndexed=v,vn.isAssociative=m,vn.isOrdered=w,vn.Iterator=kn,Me(vn,{toArray:function(){vt(this.size);var t=new Array(this.size||0),e=y(this),n=0;return this.__iterate(function(r,i){t[n++]=e?[i,r]:r}),t},toIndexedSeq:function(){return new Qn(this)},toJS:function(){return Pe(this)},toKeyedSeq:function(){return new Zn(this,!0)},toMap:function(){return nr(this.toKeyedSeq())},toObject:Be,toOrderedMap:function(){return br(this.toKeyedSeq())},toOrderedSet:function(){return jr(y(this)?this.valueSeq():this)},toSet:function(){return Cr(y(this)?this.valueSeq():this)},toSetSeq:function(){return new tr(this)},toSeq:function(){return v(this)?this.toIndexedSeq():y(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return Sr(y(this)?this.valueSeq():this)},toList:function(){return yr(y(this)?this.valueSeq():this)},toString:function(){return"[Collection]"},__toString:function(t,e){return 0===this.size?t+e:t+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+e},concat:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return st(this,tt(this,t))},includes:function(t){return this.some(function(e){return F(e,t)})},entries:function(){return this.__iterator(En)},every:function(t,e){vt(this.size);var n=!0;return this.__iterate(function(r,i,o){if(!t.call(e,r,i,o))return n=!1,!1}),n},filter:function(t,e){return st(this,G(this,t,e,!0))},find:function(t,e,n){var r=this.findEntry(t,e);return r?r[1]:n},forEach:function(t,e){return vt(this.size),this.__iterate(e?t.bind(e):t)},join:function(t){vt(this.size),t=void 0!==t?""+t:",";var e="",n=!0;return this.__iterate(function(r){n?n=!1:e+=t,e+=null!==r&&void 0!==r?r.toString():""}),e},keys:function(){return this.__iterator(Sn)},map:function(t,e){return st(this,K(this,t,e))},reduce:function(t,e,n){return We(this,t,e,n,arguments.length<2,!1)},reduceRight:function(t,e,n){return We(this,t,e,n,arguments.length<2,!0)},reverse:function(){return st(this,V(this,!0))},slice:function(t,e){return st(this,$(this,t,e,!0))},some:function(t,e){return!this.every(Ke(t),e)},sort:function(t){return st(this,it(this,t))},values:function(){return this.__iterator(An)},butLast:function(){return this.slice(0,-1)},isEmpty:function(){return void 0!==this.size?0===this.size:!this.some(function(){return!0})},count:function(t,e){return a(t?this.toSeq().filter(t,e):this)},countBy:function(t,e){return X(this,t,e)},equals:function(t){return Ne(this,t)},entrySeq:function(){var t=this;if(t._cache)return new jn(t._cache);var e=t.toSeq().map(Ye).toIndexedSeq();return e.fromEntrySeq=function(){return t.toSeq()},e},filterNot:function(t,e){return this.filter(Ke(t),e)},findEntry:function(t,e,n){var r=n;return this.__iterate(function(n,i,o){if(t.call(e,n,i,o))return r=[i,n],!1}),r},findKey:function(t,e){var n=this.findEntry(t,e);return n&&n[0]},findLast:function(t,e,n){return this.toKeyedSeq().reverse().find(t,e,n)},findLastEntry:function(t,e,n){return this.toKeyedSeq().reverse().findEntry(t,e,n)},findLastKey:function(t,e){return this.toKeyedSeq().reverse().findKey(t,e)},first:function(t){return this.find(s,null,t)},flatMap:function(t,e){return st(this,nt(this,t,e))},flatten:function(t){return st(this,et(this,t,!0))},fromEntrySeq:function(){return new er(this)},get:function(t,e){return this.find(function(e,n){return F(n,t)},void 0,e)},getIn:Le,groupBy:function(t,e){return J(this,t,e)},has:function(t){return this.get(t,pn)!==pn},hasIn:qe,isSubset:function(t){return t="function"==typeof t.includes?t:vn(t),this.every(function(e){return t.includes(e)})},isSuperset:function(t){return t="function"==typeof t.isSubset?t:vn(t),t.isSubset(this)},keyOf:function(t){return this.findKey(function(e){return F(e,t)})},keySeq:function(){return this.toSeq().map(ze).toIndexedSeq()},last:function(t){return this.toSeq().reverse().first(t)},lastKeyOf:function(t){return this.toKeyedSeq().reverse().keyOf(t)},max:function(t){return ot(this,t)},maxBy:function(t,e){return ot(this,e,t)},min:function(t){return ot(this,t?Ve(t):Xe)},minBy:function(t,e){return ot(this,e?Ve(e):Xe,t)},rest:function(){return this.slice(1)},skip:function(t){return 0===t?this:this.slice(Math.max(0,t))},skipLast:function(t){return 0===t?this:this.slice(0,-Math.max(0,t))},skipWhile:function(t,e){return st(this,Q(this,t,e,!0))},skipUntil:function(t,e){return this.skipWhile(Ke(t),e)},sortBy:function(t,e){return st(this,it(this,e,t))},take:function(t){return this.slice(0,Math.max(0,t))},takeLast:function(t){return this.slice(-Math.max(0,t))},takeWhile:function(t,e){return st(this,Z(this,t,e))},takeUntil:function(t,e){return this.takeWhile(Ke(t),e)},update:function(t){return t(this)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){return this.__hash||(this.__hash=Je(this))}});var Nr=vn.prototype;Nr[hn]=!0,Nr[In]=Nr.values,Nr.toJSON=Nr.toArray,Nr.__toStringMapper=bt,Nr.inspect=Nr.toSource=function(){return this.toString()},Nr.chain=Nr.flatMap,Nr.contains=Nr.includes,Me(mn,{flip:function(){return st(this,Y(this))},mapEntries:function(t,e){var n=this,r=0;return st(this,this.toSeq().map(function(i,o){return t.call(e,[o,i],r++,n)}).fromEntrySeq())},mapKeys:function(t,e){var n=this;return st(this,this.toSeq().flip().map(function(r,i){return t.call(e,r,i,n)}).flip())}});var Mr=mn.prototype;Mr[dn]=!0,Mr[In]=Nr.entries,Mr.toJSON=Be,Mr.__toStringMapper=function(t,e){return bt(e)+": "+bt(t)},Me(_n,{toKeyedSeq:function(){return new Zn(this,!1)},filter:function(t,e){return st(this,G(this,t,e,!1))},findIndex:function(t,e){var n=this.findEntry(t,e);return n?n[0]:-1},indexOf:function(t){var e=this.keyOf(t);return void 0===e?-1:e},lastIndexOf:function(t){var e=this.lastKeyOf(t);return void 0===e?-1:e},reverse:function(){return st(this,V(this,!1))},slice:function(t,e){return st(this,$(this,t,e,!1))},splice:function(t,e){var n=arguments.length;if(e=Math.max(e||0,0),0===n||2===n&&!e)return this;t=f(t,t<0?this.count():this.size);var r=this.slice(0,t);return st(this,1===n?r:r.concat(dt(arguments,2),this.slice(t+e)))},findLastIndex:function(t,e){var n=this.findLastEntry(t,e);return n?n[0]:-1},first:function(t){return this.get(0,t)},flatten:function(t){return st(this,et(this,t,!1))},get:function(t,e){return t=u(this,t),t<0||this.size===1/0||void 0!==this.size&&t>this.size?e:this.find(function(e,n){return n===t},void 0,e)},has:function(t){return(t=u(this,t))>=0&&(void 0!==this.size?this.size===1/0||t<this.size:-1!==this.indexOf(t))},interpose:function(t){return st(this,rt(this,t))},interleave:function(){var t=[this].concat(dt(arguments)),e=ut(this.toSeq(),Mn.of,t),n=e.flatten(!0);return e.size&&(n.size=e.size*t.length),st(this,n)},keySeq:function(){return Rr(0,this.size)},last:function(t){return this.get(-1,t)},skipWhile:function(t,e){return st(this,Q(this,t,e,!1))},zip:function(){return st(this,ut(this,Ge,[this].concat(dt(arguments))))},zipAll:function(){return st(this,ut(this,Ge,[this].concat(dt(arguments)),!0))},zipWith:function(t){var e=dt(arguments);return e[0]=this,st(this,ut(this,t,e))}});var Pr=_n.prototype;Pr[yn]=!0,Pr[On]=!0,Me(gn,{get:function(t,e){return this.has(t)?t:e},includes:function(t){return this.has(t)},keySeq:function(){return this.valueSeq()}}),gn.prototype.has=Nr.includes,gn.prototype.contains=gn.prototype.includes,Me(Nn,mn.prototype),Me(Mn,_n.prototype),Me(Pn,gn.prototype);var jr=function(t){function e(t){return null===t||void 0===t?tn():Re(t)?t:tn().withMutations(function(e){var n=gn(t);vt(n.size),n.forEach(function(t){return e.add(t)})})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.fromKeys=function(t){return this(mn(t).keySeq())},e.prototype.toString=function(){return this.__toString("OrderedSet {","}")},e}(Cr);jr.isOrderedSet=Re;var Dr=jr.prototype;Dr[On]=!0,Dr.zip=Pr.zip,Dr.zipWith=Pr.zipWith,Dr.__empty=tn,Dr.__make=Qe;var Fr,Hr=function(t,e){var n,r=function(o){var a=this;if(o instanceof r)return o;if(!(this instanceof r))return new r(o);if(!n){n=!0;var u=Object.keys(t),s=i._indices={};i._name=e,i._keys=u,i._defaultValues=t;for(var c=0;c<u.length;c++){var f=u[c];s[f]=c,i[f]?"object"==typeof console&&console.warn&&console.warn("Cannot define "+nn(this)+' with property "'+f+'" since that property name is part of the Record API.'):on(i,f)}}this.__ownerID=void 0,this._values=yr().withMutations(function(t){t.setSize(a._keys.length),mn(o).forEach(function(e,n){t.set(a._indices[n],e===a._defaultValues[n]?void 0:e)})})},i=r.prototype=Object.create(Lr);return i.constructor=r,e&&(r.displayName=e),r};Hr.prototype.toString=function(){for(var t,e=nn(this)+" { ",n=this._keys,r=0,i=n.length;r!==i;r++)t=n[r],e+=(r?", ":"")+t+": "+bt(this.get(t));return e+" }"},Hr.prototype.equals=function(t){return this===t||t&&this._keys===t._keys&&rn(this).equals(rn(t))},Hr.prototype.hashCode=function(){return rn(this).hashCode()},Hr.prototype.has=function(t){return this._indices.hasOwnProperty(t)},Hr.prototype.get=function(t,e){if(!this.has(t))return e;var n=this._indices[t],r=this._values.get(n);return void 0===r?this._defaultValues[t]:r},Hr.prototype.set=function(t,e){if(this.has(t)){var n=this._values.set(this._indices[t],e===this._defaultValues[t]?void 0:e);if(n!==this._values&&!this.__ownerID)return en(this,n)}return this},Hr.prototype.remove=function(t){return this.set(t)},Hr.prototype.clear=function(){var t=this._values.clear().setSize(this._keys.length);return this.__ownerID?this:en(this,t)},Hr.prototype.wasAltered=function(){return this._values.wasAltered()},Hr.prototype.toSeq=function(){return rn(this)},Hr.prototype.toJS=function(){return Pe(this)},Hr.prototype.entries=function(){return this.__iterator(En)},Hr.prototype.__iterator=function(t,e){return rn(this).__iterator(t,e)},Hr.prototype.__iterate=function(t,e){return rn(this).__iterate(t,e)},Hr.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._values.__ensureOwner(t);return t?en(this,e,t):(this.__ownerID=t,this._values=e,this)},Hr.isRecord=g,Hr.getDescriptiveName=nn;var Lr=Hr.prototype;Lr[wn]=!0,Lr.delete=Lr.remove,Lr.deleteIn=Lr.removeIn=Rt,Lr.getIn=Le,Lr.hasIn=Nr.hasIn,Lr.merge=jt,Lr.mergeWith=Dt,Lr.mergeIn=Vt,Lr.mergeDeep=Yt,Lr.mergeDeepWith=Kt,Lr.mergeDeepIn=Gt,Lr.setIn=kt,Lr.update=Mt,Lr.updateIn=Pt,Lr.withMutations=Xt,Lr.asMutable=Jt,Lr.asImmutable=$t,Lr[In]=Lr.entries,Lr.toJSON=Lr.toObject=Nr.toObject,Lr.inspect=Lr.toSource=function(){return this.toString()};var Ur,qr=function(t){function e(t,n){if(!(this instanceof e))return new e(t,n);if(this._value=t,this.size=void 0===n?1/0:Math.max(0,n),0===this.size){if(Ur)return Ur;Ur=this}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toString=function(){return 0===this.size?"Repeat []":"Repeat [ "+this._value+" "+this.size+" times ]"},e.prototype.get=function(t,e){return this.has(t)?this._value:e},e.prototype.includes=function(t){return F(this._value,t)},e.prototype.slice=function(t,n){var r=this.size;return c(t,n,r)?this:new e(this._value,l(n,r)-f(t,r))},e.prototype.reverse=function(){return this},e.prototype.indexOf=function(t){return F(this._value,t)?0:-1},e.prototype.lastIndexOf=function(t){return F(this._value,t)?this.size:-1},e.prototype.__iterate=function(t,e){for(var n=this.size,r=0;r!==n&&!1!==t(this._value,e?n-++r:r++,this););return r},e.prototype.__iterator=function(t,e){var n=this,r=this.size,i=0;return new kn(function(){return i===r?S():O(t,e?r-++i:i++,n._value)})},e.prototype.equals=function(t){return t instanceof e?F(this._value,t._value):Ne(t)},e}(Mn),Br="4.0.0-rc.11",Wr={version:Br,Collection:vn,Iterable:vn,Seq:Rn,Map:nr,OrderedMap:br,List:yr,Stack:Sr,Set:Cr,OrderedSet:jr,Record:Hr,Range:Rr,Repeat:qr,is:F,fromJS:an,hash:L,isImmutable:b,isCollection:d,isKeyed:y,isIndexed:v,isAssociative:m,isOrdered:w,isValueObject:D,isSeq:_,isList:de,isMap:P,isOrderedMap:j,isStack:Ce,isSet:xe,isOrderedSet:Re,isRecord:g,get:Ot,getIn:He,has:wt,hasIn:Ue,merge:Ht,mergeDeep:Ut,mergeWith:Lt,mergeDeepWith:qt,remove:At,removeIn:xt,set:Et,setIn:It,update:Nt,updateIn:Tt},zr=vn;e.default=Wr},582:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=function(t){return function(e,n,r){return t.tweens.add({targets:e,y:e?e.y+n:0,yoyo:!0,duration:r,repeat:-1})}};e.default=r},583:function(t,e,n){"use strict";function r(t){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return i=function(){return t},t}function o(t){return"static-squad-"+t.id}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==r(t)&&"function"!=typeof t)return{default:t};var e=i();if(e&&e.has(t))return e.get(t);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){var u=o?Object.getOwnPropertyDescriptor(t,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=t[a]}return n.default=t,e&&e.set(t,n),n}(n(25)),u=n(79),s=n(289),c=n(32),f=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),l=function(t){function e(e,n,r,i){var a=t.call(this,o(e))||this;return a.squad=e,a.x=n,a.y=r,a.scaleSizing=i,a.tiles=[],a.unitList=[],a.overlay=null,a.isSelected=!1,a}return f(e,t),e.prototype.select=function(){this.isSelected=!0,this.tiles.forEach(function(t){return t.sprite.setTint(5605529)})},e.prototype.deselect=function(){this.isSelected=!1,this.tiles.forEach(function(t){return t.sprite.clearTint()})},e.prototype.create=function(){this.tiles=this.placeTiles({mapWidth:3,mapHeight:3}),this.placeUnits()},e.prototype.destroy=function(t){var e=this;console.log("lets remove a board",this),this.tiles.forEach(function(t){return t.sprite.destroy()}),this.unitList.forEach(function(n){var r=e.makeUnitKey(n.unit);t.scene.remove(r)}),console.log("removing board scene",this.scene.key),t.scene.remove(o(this.squad))},e.prototype.makeOverlay=function(){var t=new a.Geom.Rectangle(this.x+60,this.y+40,250,150),e=this.add.graphics({fillStyle:{color:255}});e.alpha=.2,e.fillRectShape(t),this.overlay=e},e.prototype.onClick=function(t){var e=this,n=this.add.zone(this.x+60,this.y+40,250,150);n.setInteractive(),n.setOrigin(0),n.on("pointerup",function(){t(e.squad)})},e.prototype.placeTiles=function(t){for(var e=this,n=t.mapWidth,r=t.mapHeight,i=[[]],o=[],a=0;a<n;a++){i[a]=[];for(var u=0;u<r;u++)i[a][u]=null}return i.forEach(function(t,n){t.forEach(function(t,r){var i=(0,s.cartesianToIsometric)(r,n),a=i.x,u=i.y;a=a*e.scaleSizing+e.x,u=u*e.scaleSizing+e.y;var c=e.add.image(a,u,"tile");c.scale=e.scaleSizing,c.depth=u,o.push({sprite:c,x:a,y:u,boardX:r+1,boardY:n+1})})}),o},e.prototype.addUnitToBoard=function(t){var e=this.getUnitPositionInScreen(t),n=e.x,r=e.y;n=n*this.scaleSizing+this.x,r=r*this.scaleSizing+this.y;var i=(0,c.getUnit)(t.id);if(!i)throw new Error("Invalid member supplied");var o=this.makeUnitKey(i);return new u.Chara(o,this,i,n,r,this.scaleSizing,!0,!1)},e.prototype.placeUnits=function(){var t=this,e=this.squad;Object.values(e.members).forEach(function(e){return t.placeUnit(e)})},e.prototype.placeUnit=function(t){var e=this.addUnitToBoard(t);this.unitList=this.unitList.concat([e]),this.sortUnitsByDepth()},e.prototype.makeUnitKey=function(t){return"board-unit-"+t.id},e.prototype.sortUnitsByDepth=function(){this.unitList.forEach(function(t){var e;return t.container.setDepth(null===(e=t.container)||void 0===e?void 0:e.y)}),this.unitList.sort(function(t,e){var n,r;return((null===(n=t.container)||void 0===n?void 0:n.depth)||0)-((null===(r=e.container)||void 0===r?void 0:r.depth)||0)}).forEach(function(t){return t.scene.bringToTop()})},e.prototype.getUnitPositionInScreen=function(t){var e=(0,s.cartesianToIsometric)(t.x,t.y);return{x:e.x,y:e.y-230}},e.prototype.onUnitClick=function(t){this.unitList.forEach(function(e){return e.onClick(t)})},e}(a.Scene),p=l;e.default=p},584:function(t,e,n){(function(r,i){var o,a;!function(r){"use strict";var i={inspect:{}};"object"==typeof t&&"object"==typeof t.exports?t.exports=r(n(181),n(182),n(51),n(52),n(107)):null!=n(80)?(o=[n(182),n(51),n(52),n(107)],void 0!==(a=function(t,e,n,o){return r(i,t,e,n,o)}.apply(e,o))&&(t.exports=a)):self.sanctuaryDef=r(i,self.sanctuaryEither,self.sanctuaryShow,self.sanctuaryTypeClasses,self.sanctuaryTypeIdentifiers)}(function(t,e,n,o,a){"use strict";function u(t){return function(e){return function(n){return t(e(n))}}}function s(t){return t}function c(t){return function(e){return t}}function f(t){return function(){return t}}function l(t){return function(e,n){return t}}function p(t){return function(e){return!t(e)}}function h(t){return function(e){return o.filter(t,e)}}function d(t){return t.slice(0,-1)}function y(t){return 0===o.size(t)}function v(t){return function(e){if(t.length>e.length)return!1;for(var n=0;n<t.length;n+=1)if(t[n]!==e[n])return!1;return!0}}function m(t,e){return e.join(t)}function _(t){return t[t.length-1]}function g(t){return function(e){return t.some(function(t){return o.equals(t,e)})}}function b(t,e){return y(t)?e:t}function w(t){return function(e){return e[t]}}function O(t){return function(e){return o.size(e)===t}}function S(t,e){return m(t,Array(e+1))}function A(t){return function(e){return S(t,e.length)}}function E(t){return Object.keys(t).sort()}function T(t){return Array.isArray(t)?t:o.reduce(function(t,e){return t.push(e),t},[],t)}function C(t,e,n,r){return y(r)?t:o.reduce(function(t,e){return t+"  - "+n(e)+"\n"},e,r)}function I(t){return t.replace(/[ ]+$/gm,"")}function k(t){return function(e){return function(n){return t?e(n):n}}}function x(t){return function(e){return function(n){return t+n+e}}}function R(t){return x(t("("))(t(")"))}function N(t){return t.name.slice(t.name.indexOf("/")+1)}function M(t){return function(e){return function n(r){return r.supertypes.every(n)&&r._test(t)(e)}}}function P(t,e,r,i,a,s,c,f){var l=Object.create(Vt);return l._test=c,l._extractors=f.reduce(function(t,e){return t[e[0]]=e[1],t},{}),l.arity=i,l.extractors=o.map(u(T),l._extractors),l.format=a||function(t,r){return o.reduce(function(e,i){return e+t(" ")+k(i[2].arity>0)(R(t))(r(i[0])(n(i[2])))},t(e),f)},l.keys=f.map(function(t){return t[0]}),l.name=e,l.supertypes=s,l.type=t,l.types=f.reduce(function(t,e){return t[e[0]]=e[2],t},{}),l.url=r,l}function j(t){return function(e){return e.arity>=t}}function D(t){return function(e){return a(e)===t}}function F(t){return function(e){return typeof e===t}}function H(t){return"https://github.com/sanctuary-js/sanctuary-def/tree/v0.22.0#"+t}function L(t){return function(e){return U([t,e])}}function U(t){function e(t,e){return k(2!==r.length)(R(t))(m(t(", "),o.map(function(r){return k(r[2].type===Xt)(R(t))(e(r[0])(n(r[2])))},d(r))))+t(" -> ")+e(_(r)[0])(n(_(r)[2]))}var r=o.reduce(function(t,e){return t.push(["$"+n(t.length+1),c([]),e]),t},[],t);return P(Xt,"","",t.length,e,[le],c(c(!0)),r)}function q(t){return 0!==t}function B(t){return t>=0}function W(t){return t>0}function z(t){return t<0}function Y(t){return nt(t)("")([])(c(!0))}function K(t){return(t<sn.length?sn[t]:n(t))+" "+(1===t?"argument":"arguments")}function V(t){return function(e){return function(n){return function(r){return function(i){return i.type===ee?G(t,e,r(n)):[i]}}}}}function G(t,e,n){function r(n,r){var a;if("object"==typeof r&&null!=r||"function"==typeof r){if(e.indexOf(r)>=0)return[];a=o.concat(e,[r])}else a=e;var u=i(a)(r);return o.chain(function(e){return e.validate(t)(r).isLeft?[]:e.type===te?o.map(it(e),u(e.extractors.$1)(e.types.$1)):e.type===Gt?o.lift2(at(e),u(e.extractors.$1)(e.types.$1),u(e.extractors.$2)(e.types.$2)):[e]},n)}var i=V(t);return y(n)?[se]:b(o.reduce(r,t,n),[re])}function X(t){return t.type===te?X(t.types.$1):t.type===Gt?X(t.types.$1)&&X(t.types.$2):t.type!==Jt}function J(t,e){return o.filter(X,G(t,[],e))}function $(t,e){return o.reject(function(t){return t.type===Jt},G(t,[],e))}function Z(t,e,n,r,i,a){var s={};for(var c in e){var f=e[c],l={types:f.types.slice(),valuesByPath:{}};for(var p in f.valuesByPath)l.valuesByPath[p]=f.valuesByPath[p].slice();s[c]=l}Ut.call(s,n.name)||(s[n.name]={types:o.filter(j(n.arity),t),valuesByPath:{}});var d=JSON.stringify(o.concat([r],i));Ut.call(s[n.name].valuesByPath,d)||(s[n.name].valuesByPath[d]=[]);var y=et(t),v=u(u(u(h(X))))(V(t)([]));return a.forEach(function(t){var e=v(t);s[n.name].valuesByPath[d].push(t),s[n.name].types=o.chain(function(r){return y(r)(t)?0===n.arity&&r.type===te?o.map(it(r),e(r.extractors.$1)(r.types.$1)):0===n.arity&&r.type===Gt?o.lift2(at(r),e(r.extractors.$1)(r.types.$1),e(r.extractors.$2)(r.types.$2)):[r]:[]},s[n.name].types)}),s}function Q(t,e){var n=o.map(JSON.parse,E(e));return At(t,c(c(Yt)),function(t){return function(r){return function(i){return function(i){var a=o.concat([t],i);return function(t){if(n.some(v(a))){var i=JSON.stringify(a);if(!Ut.call(e,i))return t;if(!y(e[i]))return r(t)}return Yt(t)}}}}})}function tt(t,e,n,r,i,a,u){for(var s=tt,c=0;c<u.length;c+=1){var f=r.validate(t)(u[c]);if(f.isLeft)return Wt(function(){return xt(t,e,i,o.concat(a,f.value.propPath),f.value.value)})}switch(r.type){case ne:var l=r.name,p=e.constraints;if(Ut.call(p,l)){var h=p[l];for(c=0;c<u.length;c+=1)for(var d=0;d<h.length;d+=1)if(!h[d].test(u[c]))return Wt(function(){return It(t,e,h[d],i,a,u[c],n)})}var v=Z(t,n,r,i,a,u),m=v[l].types;return y(m)?Wt(function(){return kt(t,e,i,a,v[l].valuesByPath)}):o.reduce(function(n,c){return o.chain(function(n){var f=c.arity-r.arity;return r.keys.reduce(function(n,l,p){var h=c.extractors[c.keys[f+p]];return o.reduce(function(n,u){return o.chain(function(n){return s(t,e,n.typeVarMap,r.types[l],i,o.concat(a,[l]),[u])},n)},n,o.chain(h,u))},zt(n))},n)},zt({typeVarMap:v,types:m}),m);case te:return o.map(function(t){return{typeVarMap:t.typeVarMap,types:o.map(it(r),b(t.types,[r.types.$1]))}},s(t,e,n,r.types.$1,i,o.concat(a,["$1"]),o.chain(r.extractors.$1,u)));case Gt:return o.chain(function(n){var c=n.types;return o.map(function(t){var e=t.types;return{typeVarMap:t.typeVarMap,types:o.lift2(at(r),b(c,[r.types.$1]),b(e,[r.types.$2]))}},s(t,e,n.typeVarMap,r.types.$2,i,o.concat(a,["$2"]),o.chain(r.extractors.$2,u)))},s(t,e,n,r.types.$1,i,o.concat(a,["$1"]),o.chain(r.extractors.$1,u)));case Qt:return o.reduce(function(n,c){return o.chain(function(n){return s(t,e,n.typeVarMap,r.types[c],i,o.concat(a,[c]),o.chain(r.extractors[c],u))},n)},zt({typeVarMap:n,types:[r]}),r.keys);default:return zt({typeVarMap:n,types:[r]})}}function et(t){return function(e){return function(n){return tt(t,{name:"name",constraints:{},types:[e]},{},e,0,[],[n]).isRight}}}function nt(t){return function(e){return function(n){return function(r){return P(Zt,t,e,0,null,n,c(r),[])}}}}function rt(t){return function(e){return function(n){return function(r){return function(i){return function(o){return P(te,t,e,1,null,n,c(r),[["$1",i,o]])}}}}}}function it(t){return rt(t.name)(t.url)(t.supertypes)(t._test([]))(t._extractors.$1)}function ot(t){return function(e){return function(n){return function(r){return function(i){return function(o){return function(a){return function(u){return P(Gt,t,e,2,null,n,c(r),[["$1",i,a],["$2",o,u]])}}}}}}}}function at(t){return ot(t.name)(t.url)(t.supertypes)(t._test([]))(t._extractors.$1)(t._extractors.$2)}function ut(t){return function(e){return u(nt(t)(e)([]))(g)}}function st(t){function e(e,r){if(y(i))return e("{}");var a=o.map(function(i){var o=t[i];return e(" ")+e(/^(?!\d)[$\w]+$/.test(i)?i:n(i))+e(" :: ")+r(i)(n(o))},i);return x(e("{"))(e(" }"))(m(e(","),a))}function r(t){return function(t){if(null==t)return!1;var e={};i.forEach(function(t){e[t]=t});for(var n in t)delete e[n];return y(e)}}var i=E(t),a=i.map(function(e){return[e,function(t){return[t[e]]},t[e]]});return P(Qt,"","",0,e,[],r,a)}function ct(t){return function(e){return function(n){return function(r){function i(e,n){return e(t)}function o(t){var e=M(t);return function(t){if(null==t)return!1;var n={};a.forEach(function(t){n[t]=t});for(var i in t)delete n[i];return y(n)&&a.every(function(n){return e(t[n])(r[n])})}}var a=E(r),u=a.map(function(t){return[t,function(e){return[e[t]]},r[t]]});return P(Qt,t,e,0,i,n,o,u)}}}}function ft(t){var e=j(t);return function(t){var n=M(t);return function(r){var i=n(r);return t.some(function(t){return e(t)&&i(t)})}}}function lt(t){var e=[],n=ft(e.length);return P(ne,t,"",0,l(t),[],n,e)}function pt(t){return function(e){var n=[["$1",c([]),e]],r=ft(n.length);return P(ne,t,"",1,null,[],r,n)}}function ht(t){return function(e){return function(n){var r=[["$1",c([]),e],["$2",c([]),n]],i=ft(r.length);return P(ne,t,"",2,null,[],i,r)}}}function dt(t){return U([t])}function yt(t){return L(t)(me)}function vt(t,e,r,i){return new TypeError(I(Kt(t.name)+" applied to the wrong number of arguments\n\n"+At(t,c(c(Yt)),function(t){return function(n){return c(c(t===e?n:Yt))}})+"\nExpected "+K(r)+" but received "+K(i.length)+C(".\n",":\n\n",n,i)))}function mt(t,e,n){var r=[];return E(t).forEach(function(e){var i=n(e);t[e].forEach(function(t){r.push(i(t)(N(t)+" "+e))})}),k(r.length>0)(x("")(e(" => ")))(k(r.length>1)(R(e))(m(e(", "),r)))}function _t(t){return function(e){var n=e.length-t.length;return S(" ",Math.floor(n/2))+t+S(" ",Math.ceil(n/2))}}function gt(t){return o.concat(t.type===ne?[t.name]:[],o.chain(function(e){return gt(t.types[e])},t.keys))}function bt(t){var e=o.chain(gt,t);return function(t){var r="a".charCodeAt(0);return k(t.type===Xt)(R(s))(n(t).replace(/\bUnknown\b/g,function(){do{var t=String.fromCharCode(r++)}while(e.indexOf(t)>=0);return t}))}}function wt(t,e,r,i){var a=bt(e.types);return n(i)+")  "+m("\n    ",o.map(function(e){return n(e)+" :: "+m(", ",b(o.map(a,$(t,[e])),["(no types)"]))},r))}function Ot(t){return t.name+" :: "+mt(t.constraints,s,c(c(s)))+m(" -> ",o.map(bt(t.types),t.types))}function St(t,e,n){return n(t)(e)(t.format(Yt,function(r){return c(St(t.types[r],o.concat(e,[r]),n))}))}function At(t,e,r){var i=t.types.reduce(function(t,e,i){var o=u(k(e.type===Xt)(R(Yt)))(u(function(t){return St(e,[],t)})(r(i)));return t.carets.push(o(A("^"))),t.numbers.push(o(function(e){return _t(n(t.counter+=1))(e)})),t},{carets:[],numbers:[],counter:0});return Ot(t)+"\n"+Yt(t.name+" :: ")+mt(t.constraints,Yt,e)+m(Yt(" -> "),i.carets)+"\n"+Yt(t.name+" :: ")+mt(t.constraints,Yt,c(c(Yt)))+m(Yt(" -> "),i.numbers)+"\n"}function Et(t,e){return o.reduce(function(t,e){return t.types[e]},t,e)}function Tt(t){return function(e){return function(n){return function(r){return function(r){var i=o.concat([e],r),a=v(i)(t),u=v(t)(i);return a&&u?n:a?s:Yt}}}}}function Ct(t,e){return null==e.url||""===e.url?"":"\nSee "+e.url+" for information about the "+e.name+" "+t+".\n"}function It(t,e,n,r,i,a,u){var s=Et(e.types[r],i);return new TypeError(I("Type-class constraint violation\n\n"+At(e,function(t){return function(e){return t===s.name&&e.name===n.name?A("^"):Yt}},Tt(o.concat([r],i)))+"\n"+wt(t,e,[a],1)+"\n\n"+Kt(e.name)+" requires "+Kt(s.name)+" to satisfy the "+N(n)+" type-class constraint; the value at position 1 does not.\n"+Ct("type class",n)))}function kt(t,e,n,r,i){var a=JSON.stringify(o.concat([n],r)),u=i[a],s=o.filter(function(e){var n=i[e];return e===a||y(J(t,o.concat(u,n)))},E(i)),c=Q(e,o.reduce(function(t,e){return t[e]=i[e],t},{},s));return new TypeError(I("Type-variable constraint violation\n\n"+c+"\n"+o.reduce(function(n,r){var o=i[r];return y(o)?n:{idx:n.idx+1,s:n.s+wt(t,e,o,n.idx+1)+"\n\n"}},{idx:0,s:""},s).s+"Since there is no type of which all the above values are members, the type-variable constraint has been violated.\n"))}function xt(t,e,r,i,a){var u=Et(e.types[r],i),s=At(e,c(c(Yt)),Tt(o.concat([r],i)));return new TypeError(I(u.type===ne&&y($(t,[a]))?"Unrecognized value\n\n"+s+"\n"+wt(t,e,[a],1)+"\n\n"+C("The environment is empty! Polymorphic functions require a non-empty environment.\n","The value at position 1 is not a member of any type in the environment.\n\nThe environment contains the following types:\n\n",bt(e.types),t):"Invalid value\n\n"+s+"\n"+wt(t,e,[a],1)+"\n\nThe value at position 1 is not a member of "+Kt(n(u))+".\n"+Ct(j(1)(u)?"type constructor":"type",u)))}function Rt(t,e,r,i){return new TypeError(I(Kt(t.name)+" applied "+Kt(n(t.types[e]))+" to the wrong number of arguments\n\n"+At(t,c(c(Yt)),function(t){return function(n){return function(r){return function(i){return function(i){return t===e?r.format(Yt,function(t){return"$1"===t?n:Yt}):Yt(i)}}}}})+"\nExpected "+K(r)+" but received "+K(i.length)+C(".\n",":\n\n",n,i)))}function Nt(t){if(t.isLeft)throw t.value();return t.value}function Mt(t,e,n){function r(n,r,i){function a(n,r,i,a){var s=[i],c=u.types[i];return c.type===ne?o.chain(function(n){return y(n[c.name].types)?Wt(function(){return kt(t,e,r,s,n[c.name].valuesByPath)}):zt(n)},zt(Z(t,n,c,r,s,[a]))):o.map(function(t){return t.typeVarMap},tt(t,e,n,c,r,s,[a]))}var u=e.types[r];if(u.type!==Xt)return i;var s=n;return function(t){if(arguments.length!==u.arity-1)throw Rt(e,r,u.arity-1,Lt.call(arguments));var n=arguments;s=Nt(d(u.keys).reduce(function(t,e,i){var u=n[i];return o.chain(function(t){return a(t,r,e,u)},t)},zt(s)));var c=i.apply(this,arguments),f=_(u.keys);return s=Nt(a(s,r,f,c)),c}}function i(u,s,c){return function(f){var l=Lt.call(arguments);if(1!==l.length)throw vt(e,c,1,l);var p=Nt(tt(t,e,u,e.types[c],c,[],l)).typeVarMap,h=o.concat(s,l);if(c+1===a){var d=h.reduce(function(t,e,n){return t(r(p,n,e))},n);return p=Nt(tt(t,e,p,e.types[a],a,[],[d])).typeVarMap,r(p,a,d)}return i(p,h,c+1)}}var a=e.types.length-1,u=e.types[0].type===$t?function(){if(0!==arguments.length)throw vt(e,0,0,Lt.call(arguments));var i=n();return r(Nt(tt(t,e,{},e.types[a],a,[],[i])).typeVarMap,a,i)}:i({},[],0);return u[Bt]=u.toString=f(Ot(e)),u}function Pt(t){function e(e){return function(n){return function(r){return function(i){return t.checkTypes?Mt(t.env,{name:e,constraints:n,types:1===r.length?o.concat([ie],r):r},i):i}}}}return e(e.name)({})(cn)(e)}function jt(t){var e=t(se);return fn(e.name)({})([nn,nn])(it(e))}function Dt(t){var e=t(se)(se);return fn(e.name)({})([nn,nn,nn])(at(e))}var Ft=Math.pow(2,53)-1,Ht=-Ft,Lt=Array.prototype.slice,Ut=Object.prototype.hasOwnProperty,qt=Object.prototype.toString,Bt="symbol"==typeof t.inspect.custom?t.inspect.custom:"inspect",Wt=e.Left,zt=e.Right,Yt=A(" "),Kt=x("‘")("’"),Vt={"@@type":"sanctuary-def/Type@1","@@show":function(){return this.format(s,c(s))},validate:function(t){var e=M(t),n=this;return function(r){if(!e(r)(n))return Wt({value:r,propPath:[]});for(var i=0;i<n.keys.length;i+=1)for(var a=n.keys[i],u=n.types[a],s=n.extractors[a](r),c=0;c<s.length;c+=1){var f=u.validate(t)(s[c]);if(f.isLeft)return Wt({value:f.value.value,propPath:o.concat([a],f.value.propPath)})}return zt(r)}},"fantasy-land/equals":function(t){return o.equals(this.type,t.type)&&o.equals(this.name,t.name)&&o.equals(this.url,t.url)&&o.equals(this.supertypes,t.supertypes)&&o.equals(this.keys,t.keys)&&o.equals(this.types,t.types)}},Gt="BINARY",Xt="FUNCTION",Jt="INCONSISTENT",$t="NO_ARGUMENTS",Zt="NULLARY",Qt="RECORD",te="UNARY",ee="UNKNOWN",ne="VARIABLE",re=P(Jt,"","",0,l("???"),[],c(c(!1)),[]),ie=P($t,"","",0,l("()"),[],c(c(!0)),[]),oe=o.ap(nt,H),ae=o.ap(rt,H),ue=o.ap(ot,H),se=P(ee,"","",0,l("Unknown"),[],c(c(!0)),[]),ce=oe("Void")([])(c(!1)),fe=oe("Any")([])(c(!0)),le=oe("Function")([])(F("function")),pe=oe("Arguments")([])(D("Arguments")),he=ae("Array")([])(D("Array"))(s),de=oe("Array0")([he(se)])(O(0)),ye=ae("Array1")([he(se)])(O(1))(s),ve=ue("Array2")([he(se)])(O(2))(function(t){return[t[0]]})(function(t){return[t[1]]}),me=oe("Boolean")([])(F("boolean")),_e=oe("Buffer")([])(function(t){return void 0!==r&&r.isBuffer(t)}),ge=oe("Date")([])(D("Date")),be=oe("ValidDate")([ge])(u(p(isNaN))(Number)),we=ae("Descending")([])(D("sanctuary-descending/Descending@1"))(s),Oe=ue("Either")([])(D("sanctuary-either/Either@1"))(function(t){return t.isLeft?[t.value]:[]})(function(t){return t.isLeft?[]:[t.value]}),Se=oe("Error")([])(D("Error")),Ae=oe("HtmlElement")([])(function(t){return/^\[object HTML.+Element\]$/.test(qt.call(t))}),Ee=ae("Identity")([])(D("sanctuary-identity/Identity@1"))(s),Te=ue("JsMap")([])(function(t){return"[object Map]"===qt.call(t)})(function(t){return Array.from(t.keys())})(function(t){return Array.from(t.values())}),Ce=ae("JsSet")([])(function(t){return"[object Set]"===qt.call(t)})(function(t){return Array.from(t.values())}),Ie=ae("Maybe")([])(D("sanctuary-maybe/Maybe@1"))(s),ke=oe("Module")([])(function(t){return"[object Module]"===qt.call(t)}),xe=ae("NonEmpty")([])(function(t){return o.Monoid.test(t)&&o.Setoid.test(t)&&!o.equals(t,o.empty(t.constructor))})(function(t){return[t]}),Re=oe("Null")([])(D("Null")),Ne=ae("Nullable")([])(c(!0))(function(t){return null===t?[]:[t]}),Me=oe("Number")([])(F("number")),Pe=oe("PositiveNumber")([Me])(W),je=oe("NegativeNumber")([Me])(z),De=oe("ValidNumber")([Me])(p(isNaN)),Fe=oe("NonZeroValidNumber")([De])(q),He=oe("FiniteNumber")([De])(isFinite),Le=oe("NonZeroFiniteNumber")([He])(q),Ue=oe("PositiveFiniteNumber")([He])(W),qe=oe("NegativeFiniteNumber")([He])(z),Be=oe("Integer")([De])(function(t){return Math.floor(t)===t&&t>=Ht&&t<=Ft}),We=oe("NonZeroInteger")([Be])(q),ze=oe("NonNegativeInteger")([Be])(B),Ye=oe("PositiveInteger")([Be])(W),Ke=oe("NegativeInteger")([Be])(z),Ve=oe("Object")([])(D("Object")),Ge=ue("Pair")([])(D("sanctuary-pair/Pair@1"))(function(t){return[t.fst]})(function(t){return[t.snd]}),Xe=oe("RegExp")([])(D("RegExp")),Je=oe("GlobalRegExp")([Xe])(w("global")),$e=oe("NonGlobalRegExp")([Xe])(p(w("global"))),Ze=ae("StrMap")([Ve])(c(!0))(s),Qe=oe("String")([])(F("string")),tn=oe("RegexFlags")([Qe])(function(t){return/^g?i?m?$/.test(t)}),en=oe("Symbol")([])(F("symbol")),nn=oe("Type")([])(D("sanctuary-def/Type@1")),rn=oe("TypeClass")([])(D("sanctuary-type-classes/TypeClass@1")),on=oe("Undefined")([])(D("Undefined")),an=[le,pe,he(se),ve(se)(se),me,_e,ge,we(se),Oe(se)(se),Se,L(se)(se),Ae,Ee(se),Te(se)(se),Ce(se),Ie(se),ke,Re,Me,Ve,Ge(se)(se),Xe,Ze(se),Qe,en,nn,rn,on],un=void 0!==i&&null!=i&&null!=i.env&&!0,sn=["zero","one","two","three","four","five","six","seven","eight","nine"],cn=[Qe,Ze(he(rn)),xe(he(nn)),le,le],fn=Pt({checkTypes:!un,env:an});return{Any:fe,AnyFunction:le,Arguments:pe,Array:jt(he),Array0:de,Array1:jt(ye),Array2:Dt(ve),Boolean:me,Buffer:_e,Date:ge,ValidDate:be,Descending:jt(we),Either:Dt(Oe),Error:Se,Fn:fn("Fn")({})([nn,nn,nn])(L),Function:fn("Function")({})([xe(he(nn)),nn])(U),HtmlElement:Ae,Identity:jt(Ee),JsMap:Dt(Te),JsSet:jt(Ce),Maybe:jt(Ie),Module:ke,NonEmpty:xe,Null:Re,Nullable:jt(Ne),Number:Me,PositiveNumber:Pe,NegativeNumber:je,ValidNumber:De,NonZeroValidNumber:Fe,FiniteNumber:He,NonZeroFiniteNumber:Le,PositiveFiniteNumber:Ue,NegativeFiniteNumber:qe,Integer:Be,NonZeroInteger:We,NonNegativeInteger:ze,PositiveInteger:Ye,NegativeInteger:Ke,Object:Ve,Pair:Dt(Ge),RegExp:Xe,GlobalRegExp:Je,NonGlobalRegExp:$e,RegexFlags:tn,StrMap:jt(Ze),String:Qe,Symbol:en,Type:nn,TypeClass:rn,Undefined:on,Unknown:se,Void:ce,env:an,create:fn("create")({})([st({checkTypes:me,env:he(nn)}),Y(m(" -> ",o.map(n,cn)))])(Pt),test:fn("test")({})([he(nn),nn,fe,me])(et),NullaryType:fn("NullaryType")({})([Qe,Qe,he(nn),Y("(Any -> Boolean)"),nn])(nt),UnaryType:fn("UnaryType")({f:[o.Foldable]})([Qe,Qe,he(nn),Y("(Any -> Boolean)"),Y("(t a -> f a)"),Y("Type -> Type")])(function(t){return u(u(u(u(fn(t)({})([nn,nn])))))(rt(t))}),BinaryType:fn("BinaryType")({f:[o.Foldable]})([Qe,Qe,he(nn),Y("(Any -> Boolean)"),Y("(t a b -> f a)"),Y("(t a b -> f b)"),Y("Type -> Type -> Type")])(function(t){return u(u(u(u(u(fn(t)({})([nn,nn,nn]))))))(ot(t))}),EnumType:fn("EnumType")({})([Qe,Qe,he(fe),nn])(ut),RecordType:fn("RecordType")({})([Ze(nn),nn])(st),NamedRecordType:fn("NamedRecordType")({})([xe(Qe),Qe,he(nn),Ze(nn),nn])(ct),TypeVariable:fn("TypeVariable")({})([Qe,nn])(lt),UnaryTypeVariable:fn("UnaryTypeVariable")({})([Qe,Y("Type -> Type")])(function(t){return fn(t)({})([nn,nn])(pt(t))}),BinaryTypeVariable:fn("BinaryTypeVariable")({})([Qe,Y("Type -> Type -> Type")])(function(t){return fn(t)({})([nn,nn,nn])(ht(t))}),Thunk:fn("Thunk")({})([nn,nn])(dt),Predicate:fn("Predicate")({})([nn,nn])(yt)}})}).call(e,n(1509).Buffer,n(145))},585:function(t,e,n){var r,i;!function(o){"use strict";var a={inspect:{}};"object"==typeof t&&"object"==typeof t.exports?t.exports=o(n(181),n(51),n(52)):null!=n(80)?(r=[n(51),n(52)],void 0!==(i=function(t,e){return o(a,t,e)}.apply(e,r))&&(t.exports=i)):self.sanctuaryMaybe=o(a,self.sanctuaryShow,self.sanctuaryTypeClasses)}(function(t,e,n){"use strict";function r(t){return{tag:r,value:t}}function i(t){return{tag:i,value:t}}function o(){return"Nothing"}function a(){return"Just ("+e(this.value)+")"}function u(t){return t.isNothing}function s(t){return t.isJust&&n.equals(this.value,t.value)}function c(t){return!0}function f(t){return t.isJust&&n.lte(this.value,t.value)}function l(t){return t}function p(t){return t.isJust?j(n.concat(this.value,t.value)):this}function h(t){return this}function d(t){return t(this.value)?this:P}function y(t){return this}function v(t){return j(t(this.value))}function m(t){return this}function _(t){return t.isJust?j(t.value(this.value)):t}function g(t){return this}function b(t){return t(this.value)}function w(t){return t}function O(t){return this}function S(t,e){return e}function A(t,e){return t(e,this.value)}function E(t,e){return n.of(t,this)}function T(t,e){return n.map(j,e(this.value))}function C(t){return this}function I(t){return j(t(this))}if("undefined"!=typeof __doctest){var k=__doctest.require("sanctuary");__doctest.require("sanctuary-def"),__doctest.require("sanctuary-type-identifiers");k.empty=k.unchecked.empty,k.of=k.unchecked.of,k.zero=k.unchecked.zero}var x={},R={constructor:x,isNothing:!0,isJust:!1,"@@type":"sanctuary-maybe/Maybe@1","@@show":o,"fantasy-land/equals":u,"fantasy-land/lte":c,"fantasy-land/concat":l,"fantasy-land/filter":h,"fantasy-land/map":y,"fantasy-land/ap":m,"fantasy-land/chain":g,"fantasy-land/alt":w,"fantasy-land/reduce":S,"fantasy-land/traverse":E,"fantasy-land/extend":C},N={constructor:x,isNothing:!1,isJust:!0,"@@type":"sanctuary-maybe/Maybe@1","@@show":a,"fantasy-land/filter":d,"fantasy-land/map":v,"fantasy-land/ap":_,"fantasy-land/chain":b,"fantasy-land/alt":O,"fantasy-land/reduce":A,"fantasy-land/traverse":T,"fantasy-land/extend":I},M=t.inspect.custom;"symbol"==typeof M?(R[M]=o,N[M]=a):(R.inspect=o,N.inspect=a);var P=x.Nothing=Object.create(R),j=x.Just=function(t){var e=Object.create(N);return n.Setoid.test(t)&&(e["fantasy-land/equals"]=s,n.Ord.test(t)&&(e["fantasy-land/lte"]=f)),n.Semigroup.test(t)&&(e["fantasy-land/concat"]=p),e.value=t,e};return x["fantasy-land/empty"]=function(){return P},x["fantasy-land/of"]=j,x["fantasy-land/chainRec"]=function(t,e){for(var n=r(e);n.tag===r;){var o=t(r,i,n.value);if(o.isNothing)return o;n=o.value}return j(n.value)},x["fantasy-land/zero"]=function(){return P},x})},586:function(t,e,n){var r,i;!function(o){"use strict";var a={inspect:{}};"object"==typeof t&&"object"==typeof t.exports?t.exports=o(n(181),n(51),n(52)):null!=n(80)?(r=[n(51),n(52)],void 0!==(i=function(t,e){return o(a,t,e)}.apply(e,r))&&(t.exports=i)):self.sanctuaryPair=o(a,self.sanctuaryShow,self.sanctuaryTypeClasses)}(function(t,e,n){"use strict";function r(t){return function(e){var r=Object.create(_);return n.Setoid.test(t)&&n.Setoid.test(e)&&(r["fantasy-land/equals"]=o,n.Ord.test(t)&&n.Ord.test(e)&&(r["fantasy-land/lte"]=a)),n.Semigroup.test(t)&&(n.Semigroup.test(e)&&(r["fantasy-land/concat"]=s),r["fantasy-land/ap"]=l,r["fantasy-land/chain"]=p),r.fst=t,r.snd=e,r}}function i(){return"Pair ("+e(this.fst)+") ("+e(this.snd)+")"}function o(t){return n.equals(this.fst,t.fst)&&n.equals(this.snd,t.snd)}function a(t){return n.equals(this.fst,t.fst)?n.lte(this.snd,t.snd):n.lte(this.fst,t.fst)}function u(t){return r(this.fst)(t.snd)}function s(t){return r(n.concat(this.fst,t.fst))(n.concat(this.snd,t.snd))}function c(t){return r(this.fst)(t(this.snd))}function f(t,e){return r(t(this.fst))(e(this.snd))}function l(t){return r(n.concat(t.fst,this.fst))(t.snd(this.snd))}function p(t){var e=t(this.snd);return r(n.concat(this.fst,e.fst))(e.snd)}function h(t,e){return t(e,this.snd)}function d(t,e){return n.map(r(this.fst),e(this.snd))}function y(t){return r(this.fst)(t(this))}function v(){return this.snd}if("undefined"!=typeof __doctest){var m=__doctest.require("sanctuary");__doctest.require("sanctuary-def"),__doctest.require("sanctuary-type-identifiers");m.bimap=m.unchecked.bimap,m.compose=m.unchecked.compose}var _={constructor:r,"@@type":"sanctuary-pair/Pair@1","@@show":i,"fantasy-land/compose":u,"fantasy-land/map":c,"fantasy-land/bimap":f,"fantasy-land/reduce":h,"fantasy-land/traverse":d,"fantasy-land/extend":y,"fantasy-land/extract":v},g=t.inspect.custom;return"symbol"==typeof g?_[g]=i:_.inspect=i,"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator&&(_[Symbol.iterator]=function(){return[this.fst,this.snd][Symbol.iterator]()}),r.fst=function(t){return t.fst},r.snd=function(t){return t.snd},r.swap=function(t){return r(t.snd)(t.fst)},r})},587:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.translateTiles=e.tileMap=e.CPU_FORCE=e.PLAYER_FORCE=void 0;e.PLAYER_FORCE="PLAYER_FORCE";e.CPU_FORCE="CPU_FORCE";var r={0:"grass",1:"woods",2:"mountain",3:"water",4:"beach-r",5:"beach-l",6:"beach-t",7:"beach-b",8:"beach-tr",9:"beach-tl",10:"beach-br",11:"beach-bl",12:"beach-b-and-r",13:"beach-t-and-r",14:"beach-b-and-l",15:"beach-t-and-l"};e.tileMap=r;var i=function(t){return t.map(function(e,n){return e.map(function(e,r){if(3===e){var i=t[n]&&![3,void 0].includes(t[n][r+1]),o=t[n]&&![3,void 0].includes(t[n][r-1]),a=t[n-1]&&![3,void 0].includes(t[n-1][r]),u=t[n+1]&&![3,void 0].includes(t[n+1][r]),s=t[n+1]&&![3,void 0].includes(t[n+1][r-1]),c=t[n-1]&&![3,void 0].includes(t[n-1][r-1]),f=t[n+1]&&![3,void 0].includes(t[n+1][r+1]),l=t[n-1]&&![3,void 0].includes(t[n-1][r+1]),p=!(a||o||i||u);if(u&&!o&&!a&&!i)return 6;if(a&&!o&&!u&&!i)return 7;if(!a&&i&&!u&&!o)return 5;if(!a&&!i&&!u&&o)return 4;if(p&&l)return 11;if(p&&c)return 10;if(p&&f)return 9;if(p&&s)return 8;if(a&&!i&&!u&&o)return 12;if(!a&&!i&&o&&u)return 13;if(a&&i&&!u&&!o)return 14;if(!a&&i&&u&&!o)return 15}return e})})};e.translateTiles=i},588:function(t,e,n){t.exports=n(589)},589:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}n(25);var i=n(78),o=r(n(1491)),a=n(1504),u=n(1508),s=n(1515),c=n(1518),f=r(n(1537)),l=r(n(1540)),p=r(n(1547)),h=r(n(1548)),d=r(n(132)),y=r(n(1549)),v={type:Phaser.AUTO,backgroundColor:"#125555",width:i.SCREEN_WIDTH,height:i.SCREEN_HEIGHT,scale:{mode:Phaser.Scale.FIT,autoCenter:Phaser.Scale.CENTER_BOTH},scene:[o.default,a.EditSquadScene,u.ListSquadsScene,s.ListUnitsScene,c.MapScene,f.default,l.default,p.default,h.default]};setTimeout(function(){y.default.load({google:{families:["Alata"]},fontactive:function(){new Phaser.Game(v).scale.lockOrientation(Phaser.Scale.PORTRAIT)}})},function(){return null===localStorage.getItem("player")?((0,d.default)(!0),50):0}())},65:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.error=e.INVALID_STATE=e.NOT_IMPLEMENTED=void 0;e.NOT_IMPLEMENTED="NOT_IMPLEMENTED";e.INVALID_STATE="INVALID_STATE";var r=function(t){throw new Error(t)};e.error=r},66:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=function(t){return t&&t.__esModule?t:{default:t}}(n(106)),i=function(t,e,n,i,o,a){var u=(0,r.default)(t,e,n,i,o);u.setShadow(2,2,"#000"),u.setColor("#fff");var s=t-15,c=e-10,f=u.width+30,l=u.height+20,p=o.add.graphics(),h=function(){return p.fillRect(s,c,f,l)},d=function(){return p.fillGradientStyle(8995397,5646118,3150354,2887440,1)};p.lineStyle(2,13484215,1),d(),p.strokeRect(s,c,f,l),h();var y=o.add.zone(s,c,f,l);return y.setInteractive(),y.setOrigin(0),i.add(p),i.bringToTop(u),i.add(y),y.on("pointerdown",function(){p.fillStyle(2887440),h(),u.setColor("#ffffff")}),y.on("pointerup",function(){d(),h(),u.setColor("#000000"),o.sound.add("click1").play(),a()}),y.on("pointerover",function(){p.fillStyle(2887440),h(),u.setColor("#ffffff")}),y.on("pointerout",function(){d(),h(),u.setColor("#ffffff")}),p};e.default=i},78:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.tileHeight=e.tileWidth=e.centerY=e.centerX=e.SCREEN_HEIGHT=e.SCREEN_WIDTH=void 0;e.SCREEN_WIDTH=1280;e.SCREEN_HEIGHT=720;e.centerX=640;e.centerY=260;e.tileWidth=128;e.tileHeight=64},79:function(t,e,n){"use strict";function r(t){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t){return t&&t.__esModule?t:{default:t}}function o(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return o=function(){return t},t}Object.defineProperty(e,"__esModule",{value:!0}),e.Chara=void 0;var a=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==r(t)&&"function"!=typeof t)return{default:t};var e=o();if(e&&e.has(t))return e.get(t);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){var u=i?Object.getOwnPropertyDescriptor(t,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=t[a]}return n.default=t,e&&e.set(t,n),n}(n(25)),u=i(n(1497)),s=i(n(1498)),c=i(n(1499)),f=i(n(1500)),l=i(n(1501)),p=i(n(1502)),h=i(n(1503)),d=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),y=function(t){function e(e,n,r,i,o,a,u,s,c){void 0===u&&(u=!0),void 0===s&&(s=!0),void 0===c&&(c=!1);var f=t.call(this,e)||this;return f.key=e,f.parent=n,f.unit=r,f.cx=i,f.cy=o,f.scaleSizing=a,f.front=u,f.animated=s,f.headOnly=c,f.container={},f.charaWrapper={},f.hair=null,f.head=null,f.trunk=null,f.leftHand=null,f.rightHand=null,f.leftFoot=null,f.rightFoot=null,f.mainHandContainer=null,f.offHandContainer=null,f.rightHandEquip=null,f.leftHandEquip=null,f.hat=null,n.scene.add(e,f,!0),f}return d(e,t),e.prototype.create=function(){this.charaWrapper=this.add.container(),this.container=this.add.container(this.cx,this.cy),this.charaWrapper.add(this.container),this.container.setDepth(this.cy),(0,h.default)(this,this.headOnly),this.animated&&this.stand(),this.maybeRenderInsignea();this.container.setSize(100,170),this.container.scale=this.scaleSizing,this.container.name=this.unit.id},e.prototype.maybeRenderInsignea=function(){if(this.unit.leader){var t=this.add.image(50,0,"insignea");this.container.add(t)}},e.prototype.onClick=function(t){var e=this;this.container.setInteractive(),this.container.on("pointerdown",function(n){t(e)})},e.prototype.enableDrag=function(t,e){var n=this;this.container.setInteractive(),this.input.setDraggable(this.container),this.input.on("drag",function(e,r,i,o){n.container.setDepth(1/0),r.x=i,r.y=o,t(n.unit,i,o,n)}),this.container.on("dragend",function(t,r,i){n.container.setDepth(i),e(n.unit,n.container.x||0,n.container.y||0,n)})},e.prototype.handleClick=function(t){var e=this;this.container.on("pointerdown",function(n){t(e,n)})},e.prototype.clearAnimations=function(){(0,s.default)(this)},e.prototype.stand=function(){(0,c.default)(this)},e.prototype.performBowAttack=function(t){(0,p.default)(this,t)},e.prototype.slash=function(t){(0,l.default)(this,t)},e.prototype.flinch=function(t,e){(0,f.default)(this,t,e)},e.prototype.die=function(){console.log("die!!"),this.tweens.add({targets:this.container,alpha:0,duration:1e3})},e.prototype.run=function(){(0,u.default)(this)},e.prototype.fadeOut=function(t){var e=this;this.container.iterate(function(n){e.tweens.addCounter({from:255,to:0,duration:500,onComplete:function(){e.tweens.add({targets:e.container,alpha:0,duration:500,onComplete:t})},onUpdate:function(t){var e=Math.floor(t.getValue());"Container"===n.type?n.iterate(function(t){t.setTint(a.Display.Color.GetColor(e,e,e))}):n.setTint(a.Display.Color.GetColor(e,e,e))}})})},e}(a.Scene);e.Chara=y},80:function(t,e){(function(e){t.exports=e}).call(e,{})},92:function(t,e){function n(t){for(var e=[[t.x,t.y]];t.parent;)t=t.parent,e.push([t.x,t.y]);return e.reverse()}function r(t,e){var r=n(t),i=n(e);return r.concat(i.reverse())}function i(t){var e,n,r,i,o,a=0;for(e=1;e<t.length;++e)n=t[e-1],r=t[e],i=n[0]-r[0],o=n[1]-r[1],a+=Math.sqrt(i*i+o*o);return a}function o(t,e,n,r){var i,o,a,u,s,c,f=Math.abs,l=[];for(a=f(n-t),u=f(r-e),i=t<n?1:-1,o=e<r?1:-1,s=a-u;;){if(l.push([t,e]),t===n&&e===r)break;c=2*s,c>-u&&(s-=u,t+=i),c<a&&(s+=a,e+=o)}return l}function a(t){var e,n,r,i,a,u,s=[],c=t.length;if(c<2)return s;for(a=0;a<c-1;++a)for(e=t[a],n=t[a+1],r=o(e[0],e[1],n[0],n[1]),i=r.length,u=0;u<i-1;++u)s.push(r[u]);return s.push(t[c-1]),s}function u(t,e){var n,r,i,a,u,s,c,f,l,p,h,d=e.length,y=e[0][0],v=e[0][1],m=e[d-1][0],_=e[d-1][1];for(n=y,r=v,u=[[n,r]],s=2;s<d;++s){for(f=e[s],i=f[0],a=f[1],l=o(n,r,i,a),h=!1,c=1;c<l.length;++c)if(p=l[c],!t.isWalkableAt(p[0],p[1])){h=!0;break}h&&(lastValidCoord=e[s-1],u.push(lastValidCoord),n=lastValidCoord[0],r=lastValidCoord[1])}return u.push([m,_]),u}function s(t){if(t.length<3)return t;var e,n,r,i,o,a,u=[],s=t[0][0],c=t[0][1],f=t[1][0],l=t[1][1],p=f-s,h=l-c;for(o=Math.sqrt(p*p+h*h),p/=o,h/=o,u.push([s,c]),a=2;a<t.length;a++)e=f,n=l,r=p,i=h,f=t[a][0],l=t[a][1],p=f-e,h=l-n,o=Math.sqrt(p*p+h*h),p/=o,h/=o,p===r&&h===i||u.push([e,n]);return u.push([f,l]),u}e.backtrace=n,e.biBacktrace=r,e.pathLength=i,e.interpolate=o,e.expandPath=a,e.smoothenPath=u,e.compressPath=s}},[588]);