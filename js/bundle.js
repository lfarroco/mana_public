webpackJsonp([0],{103:function(t,e,n){"use strict";function r(t){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t){return t&&t.__esModule?t:{default:t}}function o(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return o=function(){return t},t}Object.defineProperty(e,"__esModule",{value:!0}),e.Chara=void 0;var a=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==r(t)&&"function"!=typeof t)return{default:t};var e=o();if(e&&e.has(t))return e.get(t);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){var u=i?Object.getOwnPropertyDescriptor(t,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=t[a]}return n.default=t,e&&e.set(t,n),n}(n(31)),u=i(n(1493)),s=i(n(1494)),c=i(n(1495)),l=i(n(1496)),f=i(n(1497)),p=i(n(1498)),d=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),h=function(t){function e(e,n,r,i,o,a,u,s){void 0===s&&(s=!0);var c=t.call(this,e)||this;return c.key=e,c.parent=n,c.unit=r,c.cx=i,c.cy=o,c.scaleSizing=a,c.front=u,c.animated=s,c.container=null,c.charaWrapper=null,c.head=null,c.trunk=null,c.leftHand=null,c.rightHand=null,c.leftFoot=null,c.rightFoot=null,c.mainHandContainer=null,c.mainHand=null,n.scene.add(e,c,!0),c}return d(e,t),e.prototype.create=function(){this.charaWrapper=this.add.container(0,0),this.container=this.add.container(this.cx,this.cy),this.charaWrapper.add(this.container),this.container.setDepth(this.cy),(0,p.default)(this),this.animated&&this.stand(),this.maybeRenderInsignea();this.container.setSize(100,170),this.container.scale=this.scaleSizing,this.container.name=this.unit.id;var t=this.add.text(0,100,this.unit.name,{color:"#000"});this.container.add(t)},e.prototype.maybeRenderInsignea=function(){if(this.unit.leader&&this.container){var t=this.add.image(50,0,"insignea");this.container.add(t)}},e.prototype.onClick=function(t){var e=this;this.container&&(this.container.setInteractive(),this.container.on("pointerdown",function(n){t(e)}))},e.prototype.enableDrag=function(t,e){var n=this;this.container&&(this.container.setInteractive(),this.input.setDraggable(this.container),this.input.on("drag",function(e,r,i,o){n.container&&n.container.setDepth(1/0),r.x=i,r.y=o,t(n.unit,i,o,n)}),this.container.on("dragend",function(t,r,i){var o,a;n.container&&n.container.setDepth(i),e(n.unit,(null===(o=n.container)||void 0===o?void 0:o.x)||0,(null===(a=n.container)||void 0===a?void 0:a.y)||0,n)}))},e.prototype.handleClick=function(t){var e,n=this;null===(e=this.container)||void 0===e||e.on("pointerdown",function(e){t(n,e)})},e.prototype.clearAnimations=function(){(0,s.default)(this)},e.prototype.stand=function(){(0,c.default)(this)},e.prototype.attack=function(t){(0,f.default)(this,t)},e.prototype.flinch=function(t,e){(0,l.default)(this,t,e)},e.prototype.die=function(){console.log("die!!"),this.tweens.add({targets:this.container,alpha:0,duration:1e3})},e.prototype.run=function(){(0,u.default)(this)},e}(a.Scene);e.Chara=h},104:function(t,e,n){var r,i,o;!function(a){"use strict";"object"==typeof t&&"object"==typeof t.exports?t.exports=a():null!=n(77)?(i=[],r=a,void 0!==(o="function"==typeof r?r.apply(e,i):r)&&(t.exports=o)):self.sanctuaryTypeIdentifiers=a()}(function(){"use strict";function t(t){return null!=t&&null!=t.constructor&&t.constructor.prototype!==t&&"string"==typeof t[e]?t[e]:Object.prototype.toString.call(t).slice("[object ".length,-"]".length)}var e="@@type",n=new RegExp("^([\\s\\S]+)/([\\s\\S]+?)(?:@([0-9]+))?$");return t.parse=function(t){var e=null,r=t,i=0,o=n.exec(t);return null!=o&&(e=o[1],r=o[2],null!=o[3]&&(i=Number(o[3]))),{namespace:e,name:r,version:i}},t})},129:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=function(t,e,n,r,i,o){var a=i.add.text(t,e,n,{color:"#000"}),u=i.add.image(t-15,e-10,"panel");return u.setOrigin(0,0),r.add(u),r.add(a),u.setInteractive(),u.displayWidth=a.width+30,u.displayHeight=a.height+20,u.on("pointerdown",function(){o()}),u};e.default=r},130:function(t,e){t.exports={manhattan:function(t,e){return t+e},euclidean:function(t,e){return Math.sqrt(t*t+e*e)},octile:function(t,e){var n=Math.SQRT2-1;return t<e?n*t+e:n*e+t},chebyshev:function(t,e){return Math.max(t,e)}}},1483:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=r(n(31)),o=n(40),a=r(n(176)),u=n(1489),s=r(n(129)),c=n(573),l=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),f=function(t){function e(){var e=t.call(this,"TitleScene")||this;return e.preload=u.preload,e}return l(e,t),e.prototype.create=function(){var t=this,e=this.add.container(0,0);(0,s.default)(20,50,"List Units",e,this,function(){t.scene.transition({target:"ListUnitsScene",duration:0,moveBelow:!0})}),(0,s.default)(20,100,"Edit Squad 0",e,this,function(){t.scene.transition({target:"EditSquadScene",duration:0,moveBelow:!0,data:{squad:(0,o.getSquads)()[0]}})}),(0,s.default)(20,150,"List Squads",e,this,function(){t.scene.start("ListSquadsScene")}),(0,s.default)(20,200,"Map",e,this,function(){t.scene.start("MapScene",[{type:"UPDATE_STATE",target:c.initialMapState}])}),(0,s.default)(20,250,"Combat",e,this,function(){t.scene.start("CombatScene",{top:"0",bottom:"1"})}),(0,s.default)(20,600,"Erase Data",e,this,function(){(0,a.default)(!0),alert("Data erased!")}),(0,s.default)(220,600,"Go Fullscreen",e,this,function(){window.document.body.requestFullscreen()})},e}(i.default.Scene),p=f;e.default=p},1484:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.unitsWithoutSquadSelector=void 0;var r=function(t){return Object.entries(t).filter(function(t){t[0];return null===t[1].squad}).map(function(t){t[0];return t[1]})};e.unitsWithoutSquadSelector=r},1485:function(t,e){t.exports=[{name:"Iron Sword",type:"sword",description:"A short sword",atk:"3",m_atk:"0",def:"0",m_def:"0",str:"0",int:"0",agi:"0",dex:"0",vit:"0",wis:"0",res_fire:"0",res_wind:"0",res_earth:"0",res_water:"0",res_light:"0",res_shadow:"0",atk_fire:"0",atk_wind:"0",atk_earth:"0",atk_water:"0",atk_light:"0",atk_hadow:"0"},{name:"Iron Armor",type:"light_armor",description:"A simple metal armor",atk:"0",m_atk:"0",def:"3",m_def:"0",str:"0",int:"0",agi:"0",dex:"0",vit:"0",wis:"0",res_fire:"0",res_wind:"0",res_earth:"0",res_water:"0",res_light:"0",res_shadow:"0",atk_fire:"0",atk_wind:"0",atk_earth:"0",atk_water:"0",atk_light:"0",atk_hadow:"0"},{name:"Iron Shield",type:"shield",description:"A simple metal shield",atk:"0",m_atk:"0",def:"4",m_def:"0",str:"0",int:"0",agi:"0",dex:"0",vit:"0",wis:"0",res_fire:"0",res_wind:"0",res_earth:"0",res_water:"0",res_light:"0",res_shadow:"0",atk_fire:"0",atk_wind:"0",atk_earth:"0",atk_water:"0",atk_light:"0",atk_hadow:"0"},{name:"Amulet",type:"accessory",description:"An amulet used in encantations",atk:"0",m_atk:"2",def:"0",m_def:"2",str:"0",int:"2",agi:"0",dex:"0",vit:"0",wis:"0",res_fire:"0",res_wind:"0",res_earth:"0",res_water:"0",res_light:"0",res_shadow:"0",atk_fire:"0",atk_wind:"0",atk_earth:"0",atk_water:"0",atk_light:"0",atk_hadow:"0"},{name:"Steel Sword",type:"sword",description:"A high quality sword",atk:"5",m_atk:"0",def:"0",m_def:"0",str:"0",int:"0",agi:"0",dex:"0",vit:"0",wis:"0",res_fire:"0",res_wind:"0",res_earth:"0",res_water:"0",res_light:"0",res_shadow:"0",atk_fire:"0",atk_wind:"0",atk_earth:"0",atk_water:"0",atk_light:"0",atk_hadow:"0"},{name:"Steel Armor",type:"light_armor",description:"A very resistant armor",atk:"0",m_atk:"0",def:"5",m_def:"0",str:"0",int:"0",agi:"0",dex:"0",vit:"0",wis:"0",res_fire:"0",res_wind:"0",res_earth:"0",res_water:"0",res_light:"0",res_shadow:"0",atk_fire:"0",atk_wind:"0",atk_earth:"0",atk_water:"0",atk_light:"0",atk_hadow:"0"},{name:"Steel Shield",type:"shield",description:"You can trust in this shield",atk:"0",m_atk:"0",def:"6",m_def:"0",str:"0",int:"0",agi:"0",dex:"0",vit:"0",wis:"0",res_fire:"0",res_wind:"0",res_earth:"0",res_water:"0",res_light:"0",res_shadow:"0",atk_fire:"0",atk_wind:"0",atk_earth:"0",atk_water:"0",atk_light:"0",atk_hadow:"0"},{name:"Baldar Sword",type:"sword",description:"One of the best swords that you can find",atk:"7",m_atk:"0",def:"0",m_def:"0",str:"2",int:"0",agi:"0",dex:"0",vit:"0",wis:"0",res_fire:"0",res_wind:"0",res_earth:"0",res_water:"0",res_light:"0",res_shadow:"0",atk_fire:"0",atk_wind:"0",atk_earth:"0",atk_water:"0",atk_light:"0",atk_hadow:"0"},{name:"Baldar Armor",type:"light_armor",description:"This armor can keep you safe",atk:"0",m_atk:"0",def:"8",m_def:"0",str:"2",int:"0",agi:"0",dex:"0",vit:"0",wis:"0",res_fire:"0",res_wind:"0",res_earth:"0",res_water:"0",res_light:"0",res_shadow:"0",atk_fire:"0",atk_wind:"0",atk_earth:"0",atk_water:"0",atk_light:"0",atk_hadow:"0"},{name:"Baldar Shield",type:"shield",description:"An unbreakable shield",atk:"0",m_atk:"0",def:"9",m_def:"0",str:"2",int:"0",agi:"0",dex:"0",vit:"0",wis:"0",res_fire:"0",res_wind:"0",res_earth:"0",res_water:"0",res_light:"0",res_shadow:"0",atk_fire:"0",atk_wind:"0",atk_earth:"0",atk_water:"0",atk_light:"0",atk_hadow:"0"},{name:"Oaken Staff",type:"staff",description:"A staff given to apprentice wizards",atk:"0",m_atk:"11",def:"0",m_def:"0",str:"0",int:"0",agi:"0",dex:"0",vit:"0",wis:"0",res_fire:"0",res_wind:"0",res_earth:"0",res_water:"0",res_light:"0",res_shadow:"0",atk_fire:"0",atk_wind:"0",atk_earth:"0",atk_water:"0",atk_light:"0",atk_hadow:"0"}]},1486:function(t,e,n){"use strict";function r(t){return t.toLowerCase().split(" ").join("_")}Object.defineProperty(e,"__esModule",{value:!0}),e.idfy=r},1487:function(t,e,n){"use strict";function r(t){return{id:t.toString(),name:(0,a.randomItem)(o.maleNames),class:(0,a.randomItem)(a.classes),movement:"mountain",elem:"neutral",equips:{ornament:"amulet",chest:"iron_armor",mainHand:"iron_sword",offHand:"iron_shield"},squad:null,lvl:11,hp:100,currentHp:100,exp:99,str:(0,u.random)(10,200),agi:(0,u.random)(10,200),dex:(0,u.random)(10,200),vit:(0,u.random)(10,200),int:(0,u.random)(10,200),wis:(0,u.random)(10,200),style:{head:(0,a.randomItem)([1,2,3]),trunk:(0,a.randomItem)([1,2,3,4])}}}function i(t){throw new Error("Not implemented.")}Object.defineProperty(e,"__esModule",{value:!0}),e.fromJSON=r,e.toJSON=i;var o=n(1488),a=n(176),u=n(175)},1488:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.maleNames=void 0;var r=["Lydan","Syrin","Ptorik","Joz","Varog","Gethrod","Hezra","Feron","Ophni","Colborn","Fintis","Gatlin","Jinto","Hagalbar","Krinn","Lenox","Revvyn","Hodus","Dimian","Paskel","Kontas","Weston","Azamarr","Jather","Tekren","Jareth","Adon","Zaden","Eune","Graff","Tez","Jessop","Gunnar","Pike","Domnhar","Baske","Jerrick","Mavrek","Riordan","Wulfe","Straus","Tyvrik","Henndar","Favroe","Whit","Jaris","Renham","Kagran","Lassrin","Vadim","Arlo","Quintis","Vale","Caelan","Yorjan","Khron","Ishmael","Jakrin","Fangar","Roux","Baxar","Hawke","Gatlen","Barak","Nazim","Kadric","Paquin","Kent","Moki","Rankar","Lothe","Ryven","Clawsen","Pakker","Embre","Cassian","Verssek","Dagfinn","Ebraheim","Nesso","Eldermar","Rivik","Rourke","Barton","Hemm","Sarkin","Blaiz","Talon","Agro","Zagaroth","Turrek","Esdel","Lustros","Zenner","Baashar","Dagrod","Gentar","Feston","Khastan","Prishnak"];e.maleNames=r},1489:function(t,e,n){"use strict";function r(){var t=this;["insignea","tile","hand","foot","head","backgrounds/plain","backgrounds/squad_edit"].forEach(function(e){return t.load.image(e,i+"/"+e+".svg")}),[1,2,3,4].forEach(function(e){t.load.image("head"+e.toString(),i+"/head.svg"),t.load.image("back_head"+e.toString(),i+"/back_head.svg")}),["fighter","knight","wizard"].forEach(function(e){t.load.image("trunk_"+e,i+"/trunk_"+e+".svg"),t.load.image("trunk_back_"+e,i+"/trunk_back_"+e+".svg")}),["arrow_right","panel"].forEach(function(e){t.load.image(e,i+"/ui/"+e+".svg")}),["amulet","iron_armor","iron_shield","iron_sword","steel_armor","steel_shield","steel_sword","baldar_armor","baldar_shield","baldar_sword","oaken_staff"].forEach(function(e){t.load.image(e,i+"/items/"+e+".png")}),["equips/iron_sword","equips/steel_sword","equips/baldar_sword","equips/oaken_staff"].forEach(function(e){t.load.image(e,i+"/"+e+".svg")}),["props/grass","props/bush","props/far_tree_1","props/branch"].forEach(function(e){t.load.image(e,i+"/"+e+".svg")}),["tiles/grass","tiles/woods","tiles/mountain"].forEach(function(e){t.load.image(e,i+"/"+e+".svg")})}Object.defineProperty(e,"__esModule",{value:!0}),e.preload=r;var i="assets"},1490:function(t,e,n){"use strict";function r(t){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t){return t&&t.__esModule?t:{default:t}}function o(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return o=function(){return t},t}function a(t){if(t&&t.__esModule)return t;if(null===t||"object"!==r(t)&&"function"!=typeof t)return{default:t};var e=o();if(e&&e.has(t))return e.get(t);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){var u=i?Object.getOwnPropertyDescriptor(t,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=t[a]}return n.default=t,e&&e.set(t,n),n}Object.defineProperty(e,"__esModule",{value:!0}),e.EditSquadScene=void 0;var u=a(n(31)),s=n(40),c=i(n(1491)),l=a(n(1499)),f=i(n(129)),p=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),d=function(t){function e(){var e=t.call(this,"EditSquadScene")||this;return e.unitListScene=null,e.boardScene=null,console.log("EditSquadScene constructor. this:",e),e}return p(e,t),e.prototype.create=function(t){var e=t.squad;this.add.image(0,0,"backgrounds/squad_edit"),this.renderBoard(e),this.renderUnitList(),this.renderReturnBtn()},e.prototype.renderBoard=function(t){this.boardScene=new l.default(t),this.scene.add(l.BOARD_SCENE_KEY,this.boardScene,!0)},e.prototype.renderUnitList=function(){var t=this;this.unitListScene=new c.default(50,40),this.unitListScene.onDrag=function(e,n,r){return t.onDragFromList(e,n,r)},this.unitListScene.onDragEnd=function(e,n,r,i){return t.onDragEndFromList(e,n,r,i)},this.scene.add("UnitListScene",this.unitListScene,!0)},e.prototype.onDragEndFromList=function(t,e,n,r){var i,o,a,u,c,l,f=null===(i=this.boardScene)||void 0===i?void 0:i.findTileByXY(e,n);console.log("dropped on ",f);var p=this.boardScene;if(p){if(f){var d=(0,s.addUnitToSquad)(t,p.squad,f.boardX,f.boardY),h=Object.values(p.squad.members).find(function(t){return t.x===f.boardX&&t.y===f.boardY});if(p.squad=d,null===(o=this.unitListScene)||void 0===o||o.removeUnit(t),p.placeUnit({member:d.members[t.id],fromOutside:!0}),h){var y=p.unitList.find(function(t){return t.unit.id===h.id});this.tweens.add({targets:null===y||void 0===y?void 0:y.container,y:((null===(a=null===y||void 0===y?void 0:y.container)||void 0===a?void 0:a.y)||0)-200,alpha:0,ease:"Cubic",duration:400,repeat:0,paused:!1,yoyo:!1})}}else console.log("lets return",t,null===(u=this.unitListScene)||void 0===u?void 0:u.rows),null===(c=this.unitListScene)||void 0===c||c.returnToOriginalPosition(t),null===(l=this.unitListScene)||void 0===l||l.scaleDown(r);p.tiles.forEach(function(t){return t.sprite.clearTint()})}},e.prototype.onDragFromList=function(t,e,n){var r=this.boardScene;if(r){r.tiles.forEach(function(t){return t.sprite.clearTint()});var i=r.findTileByXY(e,n);i&&i.sprite.setTint(3407752)}},e.prototype.renderReturnBtn=function(){var t=this;console.log("rendering return btn"),(0,f.default)(1100,100,"Return to title",this.add.container(0,0),this,function(){t.scene.transition({target:"TitleScene",duration:0,moveBelow:!0}),t.destroyChildren()}),(0,f.default)(1100,200,"Return to List",this.add.container(0,0),this,function(){t.destroyChildren(),t.scene.transition({target:"ListSquadsScene",duration:0,moveBelow:!0})}),console.log("done")},e.prototype.destroyChildren=function(){var t,e;null===(t=this.boardScene)||void 0===t||t.destroy(),null===(e=this.unitListScene)||void 0===e||e.destroy()},e}(u.Scene);e.EditSquadScene=d},1491:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=function(t){return t&&t.__esModule?t:{default:t}}(n(31)),i=n(1492),o=n(40),a=n(103),u=n(76),s=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),c=function(t){function e(e,n){var r=t.call(this,"UnitListScene")||this;return r.x=e,r.y=n,r.controls=[],r.onUnitClick=null,r.onDrag=null,r.onDragEnd=null,r.rows=[],r.page=0,r.itemsPerPage=6,r}return s(e,t),e.prototype.create=function(){this.render(),this.renderControls()},e.prototype.makeBackground=function(){var t=new r.default.Geom.Rectangle(-50,-30,200,90),e=this.add.graphics({fillStyle:{color:255}});return e.alpha=.2,e.fillRectShape(t),e},e.prototype.destroy=function(){var t=this;this.rows.forEach(function(e){return t.scene.remove(t.makeUnitKey(e.chara.unit))}),this.scene.remove()},e.prototype.renderControls=function(){var t=this;this.controls.forEach(function(t){return t.destroy()});var e=(0,i.getUnitsWithoutSquad)((0,o.getUnits)()),n=Object.keys(e).length,r=this.add.image(this.x+100,this.y+630,"arrow_right");n<this.itemsPerPage||this.itemsPerPage*(this.page+1)>=n?r.setAlpha(.5):(r.setInteractive(),r.on("pointerdown",function(e){t.nextPage()}));var a=this.add.image(this.x,this.y+630,"arrow_right");a.setScale(-1,1),0===this.page?a.setAlpha(.5):(a.setInteractive(),a.on("pointerdown",function(e){t.prevPage()})),this.controls=[r,a]},e.prototype.nextPage=function(){this.page=this.page+1,this.clearUnitList(),this.render(),this.renderControls()},e.prototype.prevPage=function(){this.page=this.page-1,this.clearUnitList(),this.render(),this.renderControls()},e.prototype.clearUnitList=function(){var t=this;this.rows.forEach(function(e){t.scene.remove(e.chara.key),t.children.remove(e.container)}),this.rows=[]},e.prototype.getUnitsToRender=function(){var t=(0,i.getUnitsWithoutSquad)((0,o.getUnits)());return Object.values(t).slice(this.page*this.itemsPerPage,this.page*this.itemsPerPage+this.itemsPerPage)},e.prototype.render=function(){var t=this,e=this.getUnitsToRender();console.log("....",e),e.forEach(function(e,n){t.renderUnitListItem(e,n)})},e.prototype.handleUnitClick=function(t){this.onUnitClick&&(console.log("An event to handle unit click has been defined",t),this.onUnitClick(t))},e.prototype.handleUnitDrag=function(t,e,n,r){if(this.scaleUp(r),this.scene.bringToTop(r.key),this.onDrag)return this.onDrag(t,e,n)},e.prototype.handleUnitDragEnd=function(t,e,n,r){this.renderControls(),this.onDragEnd&&this.onDragEnd(t,e,n,r)},e.prototype.renderUnitListItem=function(t,e){var n=this.getRowPosition(e),i=n.charaX,o=n.charaY,u=this.makeUnitKey(t),s=this.add.container(i,o),c=this.onUnitClick?this.handleUnitClick.bind(this):void 0,l=this.onDrag?this.handleUnitDrag.bind(this):void 0,f=this.onDragEnd?this.handleUnitDragEnd.bind(this):void 0,p=new r.default.Geom.Rectangle(-50,-30,200,90),d=this.makeBackground();d.setInteractive(p,r.default.Geom.Rectangle.Contains),s.add(d),c&&d.on("pointerdown",function(){c(t)});var h=new a.Chara(u,this,t,i,o,.5,!0);l&&f&&h.enableDrag(l.bind(this),f.bind(this));var y=this.add.text(40,30,t.name);return s.add(y),this.rows.push({chara:h,text:y,container:s}),h},e.prototype.getRowPosition=function(t){return{charaX:this.x,charaY:this.y+100*t}},e.prototype.getUnitIndex=function(t){return this.rows.findIndex(function(e){return e.chara.unit.id===t.id})},e.prototype.returnToOriginalPosition=function(t){var e=this,n=this.getUnitIndex(t),r=this.rows.find(function(n){return n.chara.key===e.makeUnitKey(t)});if(!r)return(0,u.error)(u.INVALID_STATE);this.reposition(r,n)},e.prototype.scaleUp=function(t){this.tweens.add({targets:t.container,scale:1,duration:400,ease:"Cubic",repeat:0,paused:!1,yoyo:!1})},e.prototype.scaleDown=function(t){this.tweens.add({targets:t.container,scale:.5,duration:400,ease:"Cubic",repeat:0,paused:!1,yoyo:!1})},e.prototype.makeUnitKey=function(t){return"unit-list-"+t.id},e.prototype.reposition=function(t,e){var n=t.chara,r=t.container,i=this.getRowPosition(e),o=i.charaX,a=i.charaY;this.tweens.add({targets:n.container,x:o,y:a,duration:600,ease:"Cubic",repeat:0,paused:!1,yoyo:!1}),this.tweens.add({targets:r,x:o,y:a,duration:600,ease:"Cubic",repeat:0,paused:!1,yoyo:!1})},e.prototype.removeUnit=function(t){var e=this,n=function(e){return e.chara.unit.id===t.id};this.rows.filter(n).forEach(function(t){e.scene.remove(t.chara),e.children.remove(t.container)}),this.rows=this.rows.filter(function(t){return!n(t)}),this.rows.forEach(function(t,n){return e.reposition(t,n)});var r=this.getUnitsToRender();if(!(r.length<1)){var i=r[r.length-1];if(!this.rows.some(function(t){return t.chara.unit.id===i.id})){var o=this.renderUnitListItem(i,this.itemsPerPage-1);o.container&&o.container.setPosition(o.container.x,o.container.y+300);var a=this.rows[this.rows.length-1];a&&this.reposition(a,this.itemsPerPage-1)}}},e}(r.default.Scene),l=c;e.default=l},1492:function(t,e,n){"use strict";function r(t){var e=t.unit,n=t.stat,r=t.items,i=t.slot,o=e.equips[i],a=r[o];if(!a)throw new Error("Invalid State: Item should be in index");var u=a.modifiers[n];return u||0}function i(t,e,n){return n[t]+c.map(function(i){return r({unit:n,stat:t,items:e,slot:i})}).reduce(a.sum,0)}function o(t){return Object.values(t).reduce(function(t,e){var n;return e.squad?t:u(u({},t),(n={},n[e.id]=e,n))},{})}Object.defineProperty(e,"__esModule",{value:!0}),e.getActualStat=i,e.getUnitsWithoutSquad=o,e.makeAnimatedUnit=void 0;var a=n(574),u=function(){return u=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},u.apply(this,arguments)},s=function(t,e){return u(u({},e),{container:t.add.container(0,0),tweens:[]})};e.makeAnimatedUnit=s;var c=["mainHand","offHand","chest","ornament"]},1493:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n(177),i=n(175),o=function(t){return t&&t.__esModule?t:{default:t}}(n(575)),a=function(t){t.clearAnimations(),t.add.tween({targets:t.leftFoot,x:r.LEFT_FOOT_FRONT_X-20,yoyo:!0,rotation:-.2,repeat:-1,duration:500}),t.add.tween({targets:t.rightFoot,x:r.RIGHT_FOOT_FRONT_X+10,yoyo:!0,rotation:-.2,repeat:-1,duration:500}),t.add.tween({targets:t.leftHand,x:r.LEFT_HAND_FRONT_X+10,yoyo:!0,rotation:-.2,repeat:-1,duration:500}),t.add.tween({targets:t.mainHandContainer,x:r.RIGHT_HAND_FRONT_X-10,yoyo:!0,rotation:-.2,repeat:-1,duration:500}),t.add.tween({targets:t.charaWrapper,y:r.CHARA_WRAPPER_Y-20,yoyo:!0,repeat:-1,duration:100})},u=function(t){var e,n,r,a;t.clearAnimations(),(0,o.default)(t)(t.charaWrapper,-12,100),t.add.tween({targets:t.leftFoot,x:(0,i.maybeZero)(null===(e=t.leftFoot)||void 0===e?void 0:e.x)-20,yoyo:!0,rotation:-.2,repeat:-1,duration:500}),t.add.tween({targets:t.rightFoot,x:(0,i.maybeZero)(null===(n=t.rightFoot)||void 0===n?void 0:n.x)+10,yoyo:!0,rotation:-.2,repeat:-1,duration:500}),t.add.tween({targets:t.leftHand,x:(0,i.maybeZero)(null===(r=t.leftHand)||void 0===r?void 0:r.x)+10,yoyo:!0,rotation:-.2,repeat:-1,duration:500}),t.add.tween({targets:t.mainHandContainer,x:(0,i.maybeZero)(null===(a=t.mainHandContainer)||void 0===a?void 0:a.x)-10,yoyo:!0,rotation:-.2,repeat:-1,duration:500})},s=function(t){t.front?a(t):u(t)};e.default=s},1494:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n(76),i=n(177),o=function(t){if(t.tweens.killAll(),!(t.head&&t.trunk&&t.leftHand&&t.mainHandContainer&&t.leftFoot&&t.rightFoot&&t.charaWrapper))throw new Error(r.INVALID_STATE);t.head.rotation=0,t.leftFoot.rotation=0,t.leftHand.rotation=0,t.rightFoot.rotation=0,t.mainHandContainer.rotation=0,t.trunk.rotation=0,t.front?(t.charaWrapper.x=i.CHARA_WRAPPER_X,t.charaWrapper.y=i.CHARA_WRAPPER_Y,t.head.x=i.HEAD_FRONT_X,t.head.y=i.HEAD_FRONT_Y,t.leftFoot.x=i.LEFT_FOOT_FRONT_X,t.leftFoot.y=i.LEFT_FOOT_FRONT_Y,t.rightFoot.x=i.RIGHT_FOOT_FRONT_X,t.rightFoot.y=i.RIGHT_FOOT_FRONT_Y,t.leftHand.x=i.LEFT_HAND_FRONT_X,t.leftHand.y=i.LEFT_HAND_FRONT_Y,t.mainHandContainer.x=i.RIGHT_HAND_FRONT_X,t.mainHandContainer.y=i.RIGHT_HAND_FRONT_Y):(t.charaWrapper.x=i.CHARA_WRAPPER_X,t.charaWrapper.y=i.CHARA_WRAPPER_Y,t.head.x=i.HEAD_BACK_X,t.head.y=i.HEAD_BACK_Y,t.leftFoot.x=i.LEFT_FOOT_BACK_X,t.leftFoot.y=i.LEFT_FOOT_BACK_Y,t.rightFoot.x=i.RIGHT_FOOT_BACK_X,t.rightFoot.y=i.RIGHT_FOOT_BACK_Y,t.leftHand.x=i.LEFT_HAND_BACK_X,t.leftHand.y=i.LEFT_HAND_BACK_Y,t.mainHandContainer.x=i.RIGHT_HAND_BACK_X,t.mainHandContainer.y=i.RIGHT_HAND_BACK_Y)};e.default=o},1495:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n(177),i=function(t){return t&&t.__esModule?t:{default:t}}(n(575)),o=function(t){t.clearAnimations(),t.tweens.add({targets:t.head,y:r.HEAD_FRONT_Y-2,duration:1600,yoyo:!0,repeat:-1}),t.tweens.add({targets:t.trunk,y:r.TRUNK_FRONT_Y+2,duration:1600,yoyo:!0,repeat:-1}),t.tweens.add({targets:t.leftHand,y:r.LEFT_HAND_FRONT_Y+8,duration:1600,yoyo:!0,repeat:-1}),t.tweens.add({targets:t.mainHandContainer,y:r.RIGHT_HAND_FRONT_Y-4,duration:1600,yoyo:!0,repeat:-1})},a=function(t){t.clearAnimations();var e=(0,i.default)(t);e(t.head,-2,1600),e(t.trunk,2,1600),e(t.leftHand,4,1600),e(t.mainHandContainer,-4,1600)},u=function(t){t.front?o(t):a(t)};e.default=u},1496:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=function(t,e,n){var r;n&&t.die(),t.parent.tweens.add({targets:null===t||void 0===t?void 0:t.container,rotation:.15,yoyo:!0,duration:500});var i=t.parent.add.text(-25,0,e.toString(),{fontSize:48});i.setStroke("#000000",2),null===(r=t.container)||void 0===r||r.add(i),t.parent.tweens.add({targets:i,y:-200,alpha:0,duration:3e3,ease:"Expo",onComplete:function(){i.destroy()}})};e.default=r},1497:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=function(t,e){var n,r;t.clearAnimations(),t.parent.tweens.add({targets:null===t||void 0===t?void 0:t.mainHandContainer,rotation:t.front?1.9:-1.9,yoyo:!0,x:((null===(n=t.mainHandContainer)||void 0===n?void 0:n.x)||0)+(t.front?30:-60),Y:((null===(r=t.mainHandContainer)||void 0===r?void 0:r.y)||0)-20,duration:250,ease:"Expo",onComplete:function(){e()}})};e.default=r},1498:function(t,e,n){"use strict";function r(t){var e,n=function(e,n){var r,i=t.add.image(e,n,"foot");return null===(r=t.container)||void 0===r||r.add(i),i},r=function(e,n,r){var i,o=t.add.image(e,n,"hand");return o.scaleX=r,null===(i=t.container)||void 0===i||i.add(o),o};t.leftFoot=n(o.LEFT_FOOT_FRONT_X,o.LEFT_FOOT_FRONT_Y),t.rightFoot=n(o.RIGHT_FOOT_FRONT_X,o.RIGHT_FOOT_FRONT_Y),t.leftHand=r(o.LEFT_HAND_FRONT_X,o.LEFT_HAND_FRONT_Y,-1),t.trunk=function(e,n,r){var i,o=t.add.image(n,r,"trunk_"+e);return null===(i=t.container)||void 0===i||i.add(o),o}(t.unit.class,o.TRUNK_FRONT_X,o.TRUNK_FRONT_Y),t.head=function(e,n){var r,i=t.add.image(e,n,"head"+t.unit.style.head.toString());return null===(r=t.container)||void 0===r||r.add(i),i}(o.HEAD_FRONT_X,o.HEAD_FRONT_Y),t.mainHandContainer=t.add.container(o.RIGHT_HAND_FRONT_X,o.RIGHT_HAND_FRONT_Y),console.log(t.unit.equips.mainHand),t.mainHand=t.add.image(10,10,"equips/"+t.unit.equips.mainHand),t.mainHandContainer.add(t.mainHand),"oaken_staff"===t.unit.equips.mainHand?(t.mainHand.setScale(.3),t.mainHand.setOrigin(.45,.7),t.mainHand.setRotation(-.2)):(t.mainHand.setScale(.2),t.mainHand.setOrigin(1,1)),t.rightHand=r(-2,0,1),t.rightHand.rotation=-2.2,null===(e=t.container)||void 0===e||e.add(t.mainHandContainer),t.mainHandContainer.add(t.rightHand)}function i(t){function e(e,n){var r,i=t.add.image(e,n,"foot");return i.scaleX=-1,i.rotation=.6,null===(r=t.container)||void 0===r||r.add(i),i}function n(e,n){var r,i=t.add.image(e,n,"hand");return null===(r=t.container)||void 0===r||r.add(i),i}var r;t.mainHandContainer=t.add.container(o.RIGHT_HAND_BACK_X,o.RIGHT_HAND_BACK_Y),null===(r=t.container)||void 0===r||r.add(t.mainHandContainer),t.mainHand=t.add.image(-10,20,"equips/"+t.unit.equips.mainHand),t.mainHandContainer.add(t.mainHand),t.mainHand.setScale(-.2,.2),t.mainHand.setOrigin(1,1),t.rightHand=n(0,0),t.mainHandContainer.add(t.rightHand),t.rightFoot=e(o.RIGHT_FOOT_BACK_X,o.RIGHT_FOOT_BACK_Y),t.rightFoot.scaleY=-1,t.leftFoot=e(o.LEFT_FOOT_BACK_X,o.LEFT_FOOT_BACK_Y),t.leftFoot.scaleY=-1,t.trunk=function(e,n,r){var i,o=t.add.image(n,r,"trunk_back_"+e);return null===(i=t.container)||void 0===i||i.add(o),o}(t.unit.class,o.TRUNK_BACK_X,o.TRUNK_BACK_Y),t.head=function(e,n){var r,i=t.add.image(e,n,"back_head"+t.unit.style.head.toString());return null===(r=t.container)||void 0===r||r.add(i),i}(o.HEAD_BACK_X,o.HEAD_BACK_Y),t.leftHand=n(o.LEFT_HAND_BACK_X,o.LEFT_HAND_BACK_Y)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=n(177),a=function(t){t.front?r(t):i(t)};e.default=a},1499:function(t,e,n){"use strict";function r(t){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return i=function(){return t},t}function o(t){var e=(0,c.cartesianToIsometric)(t.x,t.y);return{x:e.x,y:e.y-230}}function a(t){return function(e){var n=Math.abs(e.sprite.x-t.x),r=Math.abs(e.sprite.y-t.y);return n/f.tileWidth+r/f.tileHeight<1}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.BOARD_SCENE_KEY=void 0;var u=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==r(t)&&"function"!=typeof t)return{default:t};var e=i();if(e&&e.has(t))return e.get(t);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){var u=o?Object.getOwnPropertyDescriptor(t,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=t[a]}return n.default=t,e&&e.set(t,n),n}(n(31)),s=n(103),c=n(285),l=n(40),f=n(174),p=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),d="BoardScene";e.BOARD_SCENE_KEY=d;var h=function(t){function e(e){var n=t.call(this,d)||this;return n.squad=e,n.tiles=[],n.unitList=[],n.onUnitDragEnd=function(t,e,r){var i,a,u,s=n.squad;console.log("the squad",s),console.log(n.tiles,e,r);var c=n.findTileByXY(e,r),l=s.members[t.id];if(!l)throw new Error("Invalid state. Unit should be in board object.");if(c&&function(t){return l.x!==t.boardX||l.y!==t.boardY}(c))n.changeUnitPositionInBoard({unit:t,x:c.boardX,y:c.boardY});else{var f=o(l),p=f.x,d=f.y;console.log("TWEEN: return to original"),n.tweens.add({targets:null===(i=n.getChara(t))||void 0===i?void 0:i.container,x:p,y:d,ease:"Cubic",duration:400,repeat:0,paused:!1,yoyo:!1})}n.tiles.map(function(t){return t.sprite.clearTint()}),(null===(u=null===(a=n.getChara(t))||void 0===a?void 0:a.container)||void 0===u?void 0:u.list).map(function(t){return t.clearTint()})},n.onUnitDrag=function(t,e,r){var i=n.findTileByXY(e,r);n.tiles.map(function(t){return t.sprite.clearTint()}),i&&i.sprite.setTint(52224),n.scene.bringToTop(n.makeUnitKey(t))},console.log("boardScene constructor"),n}return p(e,t),e.prototype.create=function(){this.tiles=this.placeTiles({mapWidth:3,mapHeight:3}),this.placeUnits()},e.prototype.findTileByXY=function(t,e){return this.tiles.find(a({x:t,y:e+100}))},e.prototype.changeUnitPositionInBoard=function(t){var e=this,n=t.unit,r=t.x,i=t.y,o=(0,l.changeSquadMemberPosition)(this.squad.members[n.id],this.squad,r,i);this.squad.members=o.members,console.log("the received updatedBoard",o),o.updatedUnits.forEach(function(t){e.moveUnitToBoardTile(t.id,t.x,t.y)})},e.prototype.moveUnitToBoardTile=function(t,e,n){var r=this,i=this.unitList.find(function(e){return e.unit.id===t});if(i){var a=i.unit,u=o(this.squad.members[a.id]);this.tweens.add({targets:null===i||void 0===i?void 0:i.container,x:u.x,y:u.y,ease:"Cubic",duration:400,repeat:0,paused:!1,yoyo:!1}).on("complete",function(){r.sortUnitsByDepth()})}},e.prototype.getChara=function(t){var e=this;return this.unitList.find(function(n){return n.key===e.makeUnitKey(t)})},e.prototype.placeTiles=function(t){for(var e=this,n=t.mapWidth,r=t.mapHeight,i=[[]],o=[],u=0;u<n;u++){i[u]=[];for(var s=0;s<r;s++)i[u][s]=null}return i.forEach(function(t,n){t.forEach(function(t,r){var i=(0,c.cartesianToIsometric)(r,n),a=i.x,u=i.y,s=e.add.image(a,u,"tile");s.depth=u,s.setInteractive(),o.push({sprite:s,x:a,y:u,boardX:r+1,boardY:n+1})})}),this.input.on("pointerdown",function(t){e.tiles.filter(a(t)).forEach(function(t){console.log("clicked>>",t.x,t.y)})}),o},e.prototype.addUnitToBoard=function(t){var e=o(t),n=e.x,r=e.y,i=(0,l.getUnit)(t.id);if(!i)throw new Error("Invalid member supplied.");var a=this.makeUnitKey(i),u=new s.Chara(a,this,i,n,r,1,!0);return u.enableDrag(this.onUnitDrag.bind(this),this.onUnitDragEnd.bind(this)),u},e.prototype.placeUnits=function(){var t=this,e=this.squad;console.log("...",e.members),Object.values(e.members).forEach(function(e){return t.placeUnit({member:e,fromOutside:!1})})},e.prototype.placeUnit=function(t){var e=t.member,n=t.fromOutside,r=this.addUnitToBoard(e);this.unitList=this.unitList.concat([r]),this.sortUnitsByDepth(),n&&(this.squad.members[e.id]=e)},e.prototype.makeUnitKey=function(t){return"board-"+t.id},e.prototype.sortUnitsByDepth=function(){this.unitList.forEach(function(t){var e,n;return null===(e=t.container)||void 0===e?void 0:e.setDepth(null===(n=t.container)||void 0===n?void 0:n.y)}),this.unitList.sort(function(t,e){var n,r;return((null===(n=t.container)||void 0===n?void 0:n.depth)||0)-((null===(r=e.container)||void 0===r?void 0:r.depth)||0)}).forEach(function(t){return t.scene.bringToTop()})},e.prototype.destroy=function(){var t=this;this.tiles.forEach(function(t){return t.sprite.destroy()}),this.unitList.forEach(function(e){return t.scene.remove(t.makeUnitKey(e.unit))}),this.scene.remove()},e}(u.Scene),y=h;e.default=y},1500:function(t,e,n){"use strict";function r(t){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t){return t&&t.__esModule?t:{default:t}}function o(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return o=function(){return t},t}function a(t){if(t&&t.__esModule)return t;if(null===t||"object"!==r(t)&&"function"!=typeof t)return{default:t};var e=o();if(e&&e.has(t))return e.get(t);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){var u=i?Object.getOwnPropertyDescriptor(t,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=t[a]}return n.default=t,e&&e.set(t,n),n}Object.defineProperty(e,"__esModule",{value:!0}),e.ListSquadsScene=void 0;var u=a(n(31)),s=a(n(40)),c=i(n(1501)),l=i(n(129)),f=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),p=function(t){function e(){var e=t.call(this,"ListSquadsScene")||this;return e.boardScenes=[],e.controls=[],e.selectedSquadInfo=null,e.page=0,e.itemsPerPage=9,e}return f(e,t),e.prototype.create=function(){this.renderSquadList(),this.renderControls()},e.prototype.renderSquadList=function(){var t=this,e=Object.values(s.getSquads()).slice(this.page*this.itemsPerPage,this.page*this.itemsPerPage+this.itemsPerPage);this.formatList(e,[]).forEach(function(e,n){return e.forEach(function(e,r){return t.renderBoard(e,r,n)})})},e.prototype.formatList=function(t,e){if(t.length<=3)return e.concat([t]);var n=t.slice(0,3);return this.formatList(t.slice(3,t.length),e.concat([n]))},e.prototype.renderSelectSquadInfo=function(t){var e,n=this;this.selectedSquadInfo&&this.selectedSquadInfo.destroy(),null===(e=this.selectedSquadInfo)||void 0===e||e.destroy(),this.selectedSquadInfo=this.add.container(0,0),this.selectedSquadInfo.name=t.id;var r=this.add.text(10,680,t.name);this.selectedSquadInfo.add(r),(0,l.default)(1100,350,"Edit",this.selectedSquadInfo,this,function(){n.editSquad(t)}),(0,l.default)(1100,400,"Disband Squad",this.selectedSquadInfo,this,function(){n.selectedSquadInfo&&(s.disbandSquad(n.selectedSquadInfo.name),n.refresh())})},e.prototype.renderBoard=function(t,e,n){var r=this,i=new c.default(t,320*e,170*n,.3);this.scene.add("board-squad-"+t.id,i,!0),i.onClick(function(t){return r.renderSelectSquadInfo(t)}),this.boardScenes.push(i)},e.prototype.renderControls=function(){var t=this;(0,l.default)(1100,10,"Return to Title",this.add.container(0,0),this,function(){t.removeChildren(),t.scene.transition({target:"TitleScene",duration:0,moveBelow:!0})}),(0,l.default)(1100,600,"Create Squad",this.add.container(0,0),this,function(){t.removeChildren();var e=Object.keys(s.getSquads());t.scene.transition({target:"EditSquadScene",duration:0,moveBelow:!0,data:{squad:{id:(e.length+1).toString(),name:"",emblem:"",members:{}}}})}),this.renderNavigation()},e.prototype.renderNavigation=function(){var t=this,e=s.getSquads(),n=Object.keys(e).length,r=this.add.image(400,630,"arrow_right");r.setScale(-1,1),0===this.page?r.setAlpha(.5):(r.setInteractive(),r.on("pointerdown",function(e){t.prevPage()})),this.controls.push(r);var i=this.add.image(500,630,"arrow_right");n<this.itemsPerPage||this.itemsPerPage*(this.page+1)>=n?i.setAlpha(.5):(i.setInteractive(),i.on("pointerdown",function(){t.nextPage()})),this.controls.push(i)},e.prototype.refresh=function(){this.removeChildren(),this.renderSquadList(),this.renderControls()},e.prototype.nextPage=function(){this.page=this.page+1,this.refresh()},e.prototype.prevPage=function(){this.page=this.page-1,this.refresh()},e.prototype.removeChildren=function(){var t=this;this.boardScenes.forEach(function(e){e.destroy(t)}),this.boardScenes=[],this.controls.forEach(function(t){return t.destroy()}),this.controls=[]},e.prototype.editSquad=function(t){this.removeChildren(),this.scene.transition({target:"EditSquadScene",duration:0,moveBelow:!0,data:{squad:t}})},e}(u.Scene);e.ListSquadsScene=p},1501:function(t,e,n){"use strict";function r(t){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return i=function(){return t},t}function o(t){return"static-squad-"+t.id}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==r(t)&&"function"!=typeof t)return{default:t};var e=i();if(e&&e.has(t))return e.get(t);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){var u=o?Object.getOwnPropertyDescriptor(t,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=t[a]}return n.default=t,e&&e.set(t,n),n}(n(31)),u=n(103),s=n(285),c=n(40),l=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),f=function(t){function e(e,n,r,i){var a=t.call(this,o(e))||this;return a.squad=e,a.x=n,a.y=r,a.scaleSizing=i,a.tiles=[],a.unitList=[],a.overlay=null,a}return l(e,t),e.prototype.create=function(){this.tiles=this.placeTiles({mapWidth:3,mapHeight:3}),this.placeUnits(),this.makeOverlay()},e.prototype.destroy=function(t){var e=this;console.log("lets remove a board",this),this.tiles.forEach(function(t){return t.sprite.destroy()}),this.unitList.forEach(function(n){var r=e.makeUnitKey(n.unit);t.scene.remove(r)}),console.log("removing board scene",this.scene.key),t.scene.remove(o(this.squad))},e.prototype.makeOverlay=function(){var t=new a.Geom.Rectangle(this.x+60,this.y+40,250,150),e=this.add.graphics({});e.alpha=.2,e.fillRectShape(t),this.overlay=e},e.prototype.onClick=function(t){var e,n,r=this,i=new a.Geom.Rectangle(this.x+60,this.y+40,250,150);null===(e=this.overlay)||void 0===e||e.setInteractive(i,a.Geom.Rectangle.Contains),null===(n=this.overlay)||void 0===n||n.on("pointerdown",function(){t(r.squad)})},e.prototype.placeTiles=function(t){for(var e=this,n=t.mapWidth,r=t.mapHeight,i=[[]],o=[],a=0;a<n;a++){i[a]=[];for(var u=0;u<r;u++)i[a][u]=null}return i.forEach(function(t,n){t.forEach(function(t,r){var i=(0,s.cartesianToIsometric)(r,n),a=i.x,u=i.y;a=a*e.scaleSizing+e.x,u=u*e.scaleSizing+e.y;var c=e.add.image(a,u,"tile");c.scale=e.scaleSizing,c.depth=u,o.push({sprite:c,x:a,y:u,boardX:r+1,boardY:n+1})})}),o},e.prototype.addUnitToBoard=function(t){var e=this.getUnitPositionInScreen(t),n=e.x,r=e.y;n=n*this.scaleSizing+this.x,r=r*this.scaleSizing+this.y;var i=(0,c.getUnit)(t.id);if(!i)throw new Error("Invalid member supplied");var o=this.makeUnitKey(i);return new u.Chara(o,this,i,n,r,this.scaleSizing,!0)},e.prototype.placeUnits=function(){var t=this,e=this.squad;Object.values(e.members).forEach(function(e){return t.placeUnit(e)})},e.prototype.placeUnit=function(t){var e=this.addUnitToBoard(t);this.unitList=this.unitList.concat([e]),this.sortUnitsByDepth()},e.prototype.makeUnitKey=function(t){return"board-unit-"+t.id},e.prototype.sortUnitsByDepth=function(){this.unitList.forEach(function(t){var e,n;return null===(e=t.container)||void 0===e?void 0:e.setDepth(null===(n=t.container)||void 0===n?void 0:n.y)}),this.unitList.sort(function(t,e){var n,r;return((null===(n=t.container)||void 0===n?void 0:n.depth)||0)-((null===(r=e.container)||void 0===r?void 0:r.depth)||0)}).forEach(function(t){return t.scene.bringToTop()})},e.prototype.getUnitPositionInScreen=function(t){var e=(0,s.cartesianToIsometric)(t.x,t.y);return{x:e.x,y:e.y-230}},e}(a.Scene),p=f;e.default=p},1502:function(t,e,n){"use strict";function r(t){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return i=function(){return t},t}function o(t){if(t&&t.__esModule)return t;if(null===t||"object"!==r(t)&&"function"!=typeof t)return{default:t};var e=i();if(e&&e.has(t))return e.get(t);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){var u=o?Object.getOwnPropertyDescriptor(t,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=t[a]}return n.default=t,e&&e.set(t,n),n}Object.defineProperty(e,"__esModule",{value:!0}),e.ListUnitsScene=void 0;var a=o(n(31)),u=o(n(40)),s=n(103),c=n(1503),l=function(t){return t&&t.__esModule?t:{default:t}}(n(129)),f=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),p=function(t){function e(){var e=t.call(this,"ListUnitsScene")||this;return e.units=[],e.page=0,e.itemsPerPage=40,e.unitDetails=[],e.detailsBar=null,e}return f(e,t),e.prototype.create=function(){var t=this;this.detailsBar=new c.UnitDetailsBarScene,this.renderUnitsList(),this.scene.add("details-bar",this.detailsBar,!0),(0,l.default)(1120,20,"Back to Title",this.add.container(0,0),this,function(){t.removeChildren(),t.scene.remove("UnitDetailsBarScene"),t.scene.transition({target:"TitleScene",duration:0,moveBelow:!0})})},e.prototype.renderUnitsList=function(){var t=this,e=Object.values(u.getUnits()).slice(this.page*this.itemsPerPage,this.page*this.itemsPerPage+this.itemsPerPage);this.formatList(e,[]).forEach(function(e,n){return e.forEach(function(e,r){return t.renderUnit(e,r,n)})})},e.prototype.formatList=function(t,e){if(t.length<=10)return e.concat([t]);var n=t.slice(0,10);return this.formatList(t.slice(10,t.length),e.concat([n]))},e.prototype.renderUnit=function(t,e,n){var r=this,i="list-chara-"+t.id,o=new s.Chara(i,this,t,100+120*e,100+110*n,.6,!0,!1);o.onClick(function(t){r.renderUnitDetails(t)}),this.units.push(o)},e.prototype.renderUnitDetails=function(t){var e;null===(e=this.detailsBar)||void 0===e||e.render(t.unit.id)},e.prototype.renderNavigation=function(){},e.prototype.refresh=function(){this.removeChildren(),this.renderUnitsList()},e.prototype.nextPage=function(){this.page=this.page+1,this.refresh()},e.prototype.prevPage=function(){this.page=this.page-1,this.refresh()},e.prototype.removeChildren=function(){var t,e=this;this.units.forEach(function(t){e.scene.remove("list-chara-"+t.unit.id)}),this.units=[],null===(t=this.detailsBar)||void 0===t||t.destroy(this)},e}(a.Scene);e.ListUnitsScene=p},1503:function(t,e,n){"use strict";function r(t){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return i=function(){return t},t}function o(t){if(t&&t.__esModule)return t;if(null===t||"object"!==r(t)&&"function"!=typeof t)return{default:t};var e=i();if(e&&e.has(t))return e.get(t);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){var u=o?Object.getOwnPropertyDescriptor(t,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=t[a]}return n.default=t,e&&e.set(t,n),n}Object.defineProperty(e,"__esModule",{value:!0}),e.UnitDetailsBarScene=void 0;var a=o(n(31)),u=o(n(40)),s=n(76),c=n(1504),l=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),f=function(t){function e(){var e=t.call(this,"UnitDetailsBarScene")||this;return e.colWidth=100,e.rowHeight=30,e.chara=null,e.container=null,e.itemDetail=null,e.write=function(t,n,r){var i;return null===(i=e.container)||void 0===i?void 0:i.add(e.add.text(t,n,"number"==typeof r?r.toString():r,{color:"#000"}))},e.col=function(t,n,r){return r.forEach(function(r,i){return e.write(t,n+e.rowHeight*i,r)})},e}return l(e,t),e.prototype.create=function(){this.itemDetail=new c.ItemDetailWindowScene,this.scene.add("item-detail",this.itemDetail,!0)},e.prototype.destroy=function(t){var e;null===(e=this.container)||void 0===e||e.destroy(),t.scene.remove("ItemDetailWindowScene"),t.scene.remove("UnitDetailsBarScene")},e.prototype.clearChildren=function(){var t;null===(t=this.container)||void 0===t||t.destroy(),this.container=this.add.container(10,520)},e.prototype.renderBgLayer=function(){},e.prototype.render=function(t){var e;this.clearChildren();var n=this.add.image(0,0,"panel");null===(e=this.container)||void 0===e||e.add(n),n.setOrigin(0,0),n.displayWidth=1260,n.displayHeight=180;var r=u.getUnit(t);if(!r)throw new Error(s.INVALID_STATE);this.unitStats(r),this.unitItems(r)},e.prototype.unitStats=function(t){var e=t.str,n=t.agi,r=t.int,i=t.wis,o=t.vit,a=t.dex;this.write(10,10,t.name),this.col(10+this.colWidth,10,["STR","AGI","INT"]),this.col(10+2*this.colWidth,10,[e,n,r]),this.col(10+3*this.colWidth,10,["WIS","VIT","DEX"]),this.col(10+4*this.colWidth,10,[i,o,a])},e.prototype.unitItems=function(t){var e=this,n=function(n,r,i){var o,a,c,l=u.getItem(t.equips[i]);if(!l)throw new Error(s.INVALID_STATE);var f=e.add.image(n,r,"panel");f.displayWidth=74,f.displayHeight=74,null===(o=e.container)||void 0===o||o.add(f);var p=e.add.image(n,r,l.id);p.displayWidth=64,p.displayHeight=64,p.setInteractive(),p.on("pointerdown",function(){var n;console.log("clicked1!!",i),null===(n=e.itemDetail)||void 0===n||n.render(l.id,t.id,function(){return e.render(t.id)})});var d=e.add.text(n+32+5+10,r,l.name);null===(a=e.container)||void 0===a||a.add(d),null===(c=e.container)||void 0===c||c.add(p)};n(600,50,"mainHand"),n(600,129,"offHand"),n(879,50,"chest"),n(879,129,"ornament")},e}(a.Scene);e.UnitDetailsBarScene=f},1504:function(t,e,n){"use strict";function r(t){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return i=function(){return t},t}function o(t){if(t&&t.__esModule)return t;if(null===t||"object"!==r(t)&&"function"!=typeof t)return{default:t};var e=i();if(e&&e.has(t))return e.get(t);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){var u=o?Object.getOwnPropertyDescriptor(t,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=t[a]}return n.default=t,e&&e.set(t,n),n}Object.defineProperty(e,"__esModule",{value:!0}),e.ItemDetailWindowScene=void 0;var a=o(n(31)),u=o(n(40)),s=n(76),c=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),l=function(t){function e(){var e=t.call(this,"ItemDetailWindowScene")||this;return e.x=100,e.y=100,e.colWidth=100,e.rowHeight=30,e.container=null,e.selectecItemDetailsContainer=null,e.write=function(t,n,r,i){var o,a=e.add.text(t,n,"number"==typeof r?r.toString():r,{color:"#000"});i?i.add(a):null===(o=e.container)||void 0===o||o.add(a)},e.col=function(t,n,r){return r.forEach(function(r,i){return e.write(t,n+e.rowHeight*i,r,null)})},e}return c(e,t),e.prototype.create=function(){},e.prototype.clearChildren=function(){var t;null===(t=this.container)||void 0===t||t.destroy()},e.prototype.render=function(t,e,n){var r=this;this.clearChildren(),this.container=this.add.container(this.x,this.y),this.renderBgLayer(this.container),this.renderPanel(0,0,300,300,this.container);var i=u.getItem(t);if(!i)throw new Error(s.INVALID_STATE);this.itemIcon(100,50,i,60,this.container),this.write(100,10,i.name,this.container),this.itemStats(i,10,120,this.container),this.btn(150,250,"Replace",function(){return r.replaceItemList(i,e,n)})},e.prototype.renderBgLayer=function(t){var e=this,n=new a.Geom.Rectangle(-1*this.x,-1*this.y,1280,520),r=this.add.graphics({fillStyle:{color:0}});r.alpha=.3,r.fillRectShape(n),t.add(r),r.setInteractive(n,a.Geom.Rectangle.Contains),r.on("pointerdown",function(){e.clearChildren(),r.destroy()})},e.prototype.renderPanel=function(t,e,n,r,i){var o,u=new a.Geom.Rectangle(t,e,n,r),s=this.add.graphics({fillStyle:{color:14592647},lineStyle:{width:2,color:0}});s.strokeRectShape(u),s.fillRectShape(u),s.strokeRect(t,e,n,r),i?i.add(s):null===(o=this.container)||void 0===o||o.add(s)},e.prototype.replaceItemList=function(t,e,n){var r=this,i=u.getItemList().filter(function(e){return e.slot===t.slot&&e.id!==t.id});this.renderPanel(350,0,300,400,this.container),i.forEach(function(t,i){if(!r.container)throw new Error(s.INVALID_STATE);var o=100*i+10,u=r.makeBackground(350,0);u.x=360,u.y=o;var c=new a.Geom.Rectangle(0,0,300,80);u.setInteractive(c,a.Geom.Rectangle.Contains),u.on("pointerdown",function(){r.selectedItemDetails(t,e,350,0,n)}),r.container.add(u),r.itemIcon(360,o,t,50,r.container),r.write(450,50+o,t.name,r.container)})},e.prototype.itemIcon=function(t,e,n,r,i){this.renderPanel(t,e,r+20,r+20,i);var o=this.add.image(t+r/2+10,e+r/2+10,n.id);o.displayWidth=r,o.displayHeight=r,null===i||void 0===i||i.add(o)},e.prototype.selectedItemDetails=function(t,e,n,r,i){var o,a,s=this;null===(o=this.selectecItemDetailsContainer)||void 0===o||o.destroy(),this.selectecItemDetailsContainer=this.add.container(0,0),null===(a=this.container)||void 0===a||a.add(this.selectecItemDetailsContainer),this.renderPanel(n+350,r,300,300,this.selectecItemDetailsContainer),this.write(n+370,r+20,t.name,this.selectecItemDetailsContainer),this.itemIcon(n+450,r+50,t,60,this.selectecItemDetailsContainer),this.itemStats(t,n+370,r+130,this.selectecItemDetailsContainer),this.btn(n+400,r+250,"Equip",function(){console.log(t),u.equipItem(t.id,e),s.clearChildren(),i()})},e.prototype.makeBackground=function(t,e){var n=new a.Geom.Rectangle(-10,e+-10,300,80),r=this.add.graphics({fillStyle:{color:255}});return r.alpha=.2,r.fillRectShape(n),r},e.prototype.btn=function(t,e,n,r){var i,o,a=this.add.text(t,e,n,{color:"#000"}),u=this.add.image(t-15,e-10,"panel");u.setOrigin(0,0),null===(i=this.container)||void 0===i||i.add(u),null===(o=this.container)||void 0===o||o.add(a),u.setInteractive(),u.displayWidth=a.width+30,u.displayHeight=a.height+20,u.on("pointerdown",function(){r()})},e.prototype.itemStats=function(t,e,n,r){var i=this;Object.keys(t.modifiers).filter(function(e){var n=t.modifiers[e];return n&&0!==n}).forEach(function(o,a){var u=t.modifiers[o];i.write(e,n+i.rowHeight*a,o,r),i.write(e+200,n+i.rowHeight*a,u.toString(),r)})},e}(a.Scene);e.ItemDetailWindowScene=l},1505:function(t,e,n){"use strict";function r(t){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t){return t&&t.__esModule?t:{default:t}}function o(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return o=function(){return t},t}Object.defineProperty(e,"__esModule",{value:!0}),e.MapScene=void 0;var a=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==r(t)&&"function"!=typeof t)return{default:t};var e=o();if(e&&e.has(t))return e.get(t);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){var u=i?Object.getOwnPropertyDescriptor(t,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=t[a]}return n.default=t,e&&e.set(t,n),n}(n(31)),u=n(103),s=n(40),c=n(76),l=i(n(129)),f=i(n(1506)),p=i(n(1507)),d=n(1508),h=n(176),y=i(n(180)),m=n(573),v=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),g=function(){return g=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},g.apply(this,arguments)},b=500,_=[0],w=function(t){function e(){var e=t.call(this,"MapScene")||this;return e.charas=[],e.tiles=[],e.mapContainer=null,e.uiContainer=null,e.state=null,e.selectedUnit=null,e.currentForce=m.PLAYER_FORCE,e.movedUnits=[],e.moveUnit=function(t,n,r){var i=function(){n.forEach(function(t){return e.getTileAt(t.x,t.y).tile.clearTint()}),r()},o=n.filter(function(t,e){return e>0}).map(function(n){var r=e.getCellPositionOnScreen(n);return{targets:t.container,x:r.x,y:r.y,duration:b,ease:"Cubic"}}).concat([{targets:t.container,duration:200,alpha:.2,onComplete:i.bind(e)}]);return e.tweens.timeline({tweens:o})},e}return v(e,t),e.prototype.updateState=function(t){this.state=t},e.prototype.create=function(t){var e=this;t.forEach(function(t){if("DESTROY_TEAM"===t.type){var n=e.getUnit(t.target);y.default.map(function(t){t.status="defeated"})(n)}else"UPDATE_STATE"===t.type&&e.updateState(t.target)}),console.log("CREATE",t),this.mapContainer=this.add.container(0,0),this.uiContainer=this.add.container(0,0),this.renderMap(),this.renderUnits(),this.renderUI(),this.runTurn()},e.prototype.getContainers=function(){if(!this.mapContainer||!this.uiContainer)throw new Error(c.INVALID_STATE);return{container:this.mapContainer,uiContainer:this.uiContainer}},e.prototype.tileAt=function(t,e){var n=this.tiles.find(function(n){return n.x===t&&n.y===e});if(!n)throw new Error(c.INVALID_STATE);return n},e.prototype.setValidMoves=function(){if(!this.state)throw new Error(c.INVALID_STATE);var t=(0,d.getPossibleMoves)(O(this.state)(this.currentForce));(0,d.unitsFromForce)(this.state)(this.currentForce).forEach(function(e){var n=y.default.chain(y.default.find(function(t){return t.id===e.id}))(t),r=y.default.map(y.default.prop("validSteps"))(n),i=y.default.map(y.default.prop("enemiesInRange"))(n);e.validSteps=y.default.fromMaybe([])(r),e.enemiesInRange=y.default.fromMaybe([])(i)})},e.prototype.getForce=function(t){var e,n=null===(e=this.state)||void 0===e?void 0:e.forces.find(function(e){return e.id===t});if(!n)throw new Error(c.INVALID_STATE);return n},e.prototype.getUnit=function(t){if(!this.state)throw new Error(c.INVALID_STATE);return(0,d.getUnit)(this.state)(t)},e.prototype.getDefeatedForces=function(){var t=this;if(!this.state)throw new Error(c.INVALID_STATE);return this.state.forces.map(function(t){return t.id}).reduce(function(e,n){if(!t.state)throw new Error(c.INVALID_STATE);return t.state.units.filter(function(t){return t.force===n}).every(function(t){return"defeated"===t.status})?e.concat([n]):e},[])},e.prototype.getCurrentForce=function(){return this.getForce(this.currentForce)},e.prototype.getPos=function(t){return{x:50+100*t.x,y:50+100*t.y}},e.prototype.renderMap=function(){var t,e=this,n=this.getContainers().container;null===(t=this.state)||void 0===t||t.cells.forEach(function(t,r){return t.forEach(function(t,i){var o=e.getPos({x:i,y:r}),a=o.x,u=o.y,s=function(){return e.add.image(a,u,"tiles/"+m.tileMap[t])}();s.setInteractive(),n.add(s),s.displayWidth=100,s.displayHeight=100,e.tiles.push({x:i,y:r,type:t,tile:s})})})},e.prototype.makeInteractive=function(t){var e=this;t.tile.on("pointerdown",function(){e.selectedUnit&&(e.selectTile(e.selectedUnit,t,function(){return e.checkTurnEnd()}),e.clearAllTileEvents())})},e.prototype.clearAllTileEvents=function(){this.tiles.forEach(function(t){return t.tile.removeAllListeners()})},e.prototype.clearAllTileTint=function(){this.tiles.forEach(function(t){return t.tile.clearTint()})},e.prototype.renderUnits=function(){var t,e=this;null===(t=this.state)||void 0===t||t.units.filter(function(t){return"alive"===t.status}).forEach(function(t){return e.renderUnit(t)})},e.prototype.getCellPositionOnScreen=function(t){var e=t.x,n=t.y,r=this.getPos({x:e,y:n});return g(g({},r),{y:r.y+-10})},e.prototype.renderUnit=function(t){var e=this,n=this.getContainers().container,r=(0,s.getSquadLeader)(t.id),i=this.getCellPositionOnScreen(t.pos),o=i.x,a=i.y,c=new u.Chara("unit-"+t.id,this,r,o,a,.5,!0);c.container&&n.add(c.container),this.charas.push(c),c.onClick(function(n){e.clearAllTileEvents(),e.clearAllTileTint(),t.force===m.PLAYER_FORCE?e.handleClickOnOwnUnit(t):e.handleClickOnEnemyUnit(t,n)})},e.prototype.handleClickOnOwnUnit=function(t){var e=this;this.selectedUnit=t.id,t.validSteps.forEach(function(t){return e.makeCellClickable(e.tileAt(t.target.x,t.target.y))}),t.enemiesInRange.forEach(function(t){var n=t.enemy,r=e.getUnit(n);y.default.map(function(t){e.tileAt(t.pos.x,t.pos.y).tile.setTint(16711680)})(r)}),this.renderUI()},e.prototype.handleClickOnEnemyUnit=function(t,e){var n=this;if(this.selectedUnit){var r=this.getUnit(this.selectedUnit);y.default.map(function(i){var o=y.default.find(function(e){return e.enemy===t.id})(i.enemiesInRange);if(y.default.equals(o)(y.default.Nothing))n.selectedUnit=t.id,n.renderUI();else{var a=n.charas.find(function(t){return t.unit.id===i.id});if(!a)return;var u=function(){n.turnOff(),n.scene.transition({target:"CombatScene",duration:0,moveBelow:!0,data:{top:e.unit.squad,bottom:n.selectedUnit}})};y.default.map(function(t){var e=t.steps;n.moveUnit(a,e,u),y.default.map(function(t){t.pos=e.reverse()[0]})(r)})(o)}})(r)}},e.prototype.turnOff=function(){var t,e,n=this;null===(t=this.mapContainer)||void 0===t||t.destroy(),null===(e=this.uiContainer)||void 0===e||e.destroy(),this.charas.forEach(function(t){var e;null===(e=t.container)||void 0===e||e.destroy(),n.scene.remove(t)}),this.charas=[],this.tiles.forEach(function(t){t.tile.destroy()}),this.tiles=[]},e.prototype.makeCellClickable=function(t){t.tile.setTint(871979),this.makeInteractive(t)},e.prototype.renderUI=function(){var t=this,e=this.getContainers(),n=e.container,r=e.uiContainer;if(r.removeAll(),r.add((0,f.default)(0,600,1280,120,r,this)),this.selectedUnit){var i=(0,s.getSquad)(this.selectedUnit),o=this.getUnit(this.selectedUnit);y.default.map(function(e){(0,p.default)(20,610,i.name,r,t),(0,p.default)(1e3,610,e.range+" cells",r,t)})(o)}(0,l.default)(1100,50,"Return to Title",r,this,function(){n.removeAll(),r.removeAll(),t.charas.forEach(function(e){return t.scene.remove(e.scene.key)}),t.charas=[],t.tiles=[],t.scene.transition({target:"TitleScene",duration:0,moveBelow:!0})})},e.prototype.switchForce=function(){var t,e=this,n=null===(t=this.state)||void 0===t?void 0:t.forces.find(function(t){return t.id!==e.currentForce});if(!n)throw new Error(c.INVALID_STATE);this.currentForce=n.id},e.prototype.runTurn=function(){var t=this.getDefeatedForces();t.includes(m.PLAYER_FORCE)&&console.log("player loses!"),t.includes(m.CPU_FORCE)&&console.log("player wins!");var e=this.getForce(this.currentForce);this.showTurnTitle(e),this.setValidMoves(),e.id===m.CPU_FORCE&&this.runAiActions(e.id)},e.prototype.runAiActions=function(t){var e=this;if(!this.state)throw new Error(c.INVALID_STATE);var n=(0,d.unitsFromForce)(this.state)(t),r=n.filter(function(t){return"alive"===t.status});!function t(n){var i=r[n];if(!i)throw new Error(c.INVALID_STATE);e.selectedUnit=i.id,e.renderUI();var o=(0,h.randomItem)(i.validSteps).target,a=o.x,u=o.y,s=e.getTileAt(a,u);e.selectTile(i.id,s,function(){n===r.length-1?e.endTurn():t(n+1)})}(0)},e.prototype.checkTurnEnd=function(){var t=this.getCurrentForce();this.movedUnits.length===t.units.length&&this.endTurn()},e.prototype.showTurnTitle=function(t){var e=this.add.text(-200,500,t.name+" Turn"),n=this.tweens.createTimeline();n.add({targets:e,x:700,ease:"Bounce",duration:500}),n.add({targets:e,x:800,duration:1500}),n.add({targets:e,x:1700,duration:500}),n.play()},e.prototype.tilesInRange=function(t,e,n){var r=this;return this.tiles.filter(function(i){return r.getDistance({x:t,y:e},i)<=n})},e.prototype.getDistance=function(t,e){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)},e.prototype.selectTile=function(t,e,n){var r,i=this,o=e.x,a=e.y,u=this.charas.find(function(e){return e.unit.id===t}),s=this.getCurrentForce();if(!u||!s)throw new Error(c.INVALID_STATE);var l=null===(r=this.state)||void 0===r?void 0:r.units.find(function(t){return t.id===u.unit.squad});if(!l)throw new Error(c.INVALID_STATE);this.tiles.forEach(function(t){return _.includes(t.type)?t.tile.clearTint():null}),this.movedUnits.push(t);var f=this.getUnit(t);y.default.map(function(t){var e=y.default.find(function(t){return y.default.equals(t.target)({x:o,y:a})})(t.validSteps);y.default.map(function(t){i.moveUnit(u,t.steps,n)})(e)})(f),l.pos.x=o,l.pos.y=a,this.renderUI()},e.prototype.endTurn=function(){this.movedUnits=[],this.charas.forEach(function(t){var e;return null===(e=t.container)||void 0===e?void 0:e.setAlpha(1)}),this.switchForce(),this.runTurn()},e.prototype.isEnemyInTile=function(t){return this.getEnemies().some(function(e){var n=e.pos,r=n.x,i=n.y;return r===t.x&&i===t.y})},e.prototype.getEnemies=function(){var t,e=this;if(!this.state)throw new Error(c.INVALID_STATE);return null===(t=this.state)||void 0===t?void 0:t.units.filter(function(t){return t.force!==e.currentForce})},e.prototype.getTileAt=function(t,e){var n=this.tiles.find(function(n){return n.x===t&&n.y===e});if(!n)throw new Error(c.INVALID_STATE);return n},e}(a.Scene);e.MapScene=w;var O=function(t){return function(e){return{units:t.units.filter(function(t){return"alive"===t.status}),forces:t.forces,width:14,height:6,walkableCells:[0],grid:t.cells.map(function(t){return t.map(function(t){return 0===t?0:1})}),currentForce:e}}}},1506:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=function(t,e,n,r,i,o){var a=new Phaser.Geom.Rectangle(t,e,n,r),u=o.add.graphics({fillStyle:{color:14592647},lineStyle:{width:2,color:0}});return u.strokeRectShape(a),u.fillRectShape(a),u.strokeRect(t,e,n,r),i.add(u),u};e.default=r},1507:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=function(t,e,n,r,i){var o=i.add.text(t,e,"number"==typeof n?n.toString():n,{color:"#000"});r.add(o)};e.default=r},1508:function(t,e,n){"use strict";function r(t){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return i=function(){return t},t}Object.defineProperty(e,"__esModule",{value:!0}),e.getPathTo=e.blockVectorsInGrid=e.getPossibleMoves=e.getEntities=e.getForce=e.getUnit=e.unitsFromForce=e.findById=void 0;var o=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==r(t)&&"function"!=typeof t)return{default:t};var e=i();if(e&&e.has(t))return e.get(t);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){var u=o?Object.getOwnPropertyDescriptor(t,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=t[a]}return n.default=t,e&&e.set(t,n),n}(n(1509)),a=function(t){return t&&t.__esModule?t:{default:t}}(n(180)),u=function(){return u=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},u.apply(this,arguments)},s=function(t){return function(e){return a.default.find(function(n){return a.default.equals(a.default.prop(t)(n))(e)})}},c=s("id"),l=function(t){return function(e){return s("id")(e)(t)}};e.findById=l;var f=a.default.reduce(function(t){return function(e){return a.default.elem(e)(t)?t:t.concat([e])}})([]),p=function(t){return function(e){return{x:t,y:e}}},d=function(t){return function(e){return Math.abs(t.x-e.x)+Math.abs(t.y-e.y)}},h=function(t){return function(e){return a.default.filter(function(t){return t.force===e})(t.units)}};e.unitsFromForce=h;var y=function(t){return function(e){return l(t.units)(e)}};e.getUnit=y;var m=function(t){return function(e){return l(t.forces)(e)}};e.getForce=m;var v=function(t){return function(e){return a.default.pipe([a.default.map(function(e){return l(t)(e)}),a.default.justs])(e)}};e.getEntities=v;var g=function(t){var e=t.units,n=t.forces,r=t.currentForce,i=t.grid,o=t.walkableCells,s=t.width,l=t.height,h=c(r)(n),y=a.default.filter(function(t){return t.force!==r})(e),m=a.default.pipe([a.default.map(function(t){return c(t)(e)}),a.default.justs]),v=a.default.prop("pos"),g=a.default.map(v)(y),w=function(t){return a.default.elem(t)(g)},O=b(i)(g),A=function(t){var e=t.pos,n=e.x,r=e.y,u=t.range,c=a.default.range(n-u)(n+u+1),h=a.default.range(r-u)(r+u+1),y=function(t){return t.x>=0&&t.x<s&&t.y>=0&&t.y<l},m=function(t){var e=t.x,n=t.y;return o.includes(i[n][e])},v=function(t){return{x:t[0],y:t[1]}},g=_(O)({x:n,y:r}),b=function(t){return t.length<=u+1},A=function(t){return a.default.equals(w(t))(!0)};return a.default.pipe([function(t){var e=t.xs,n=t.ys;return a.default.lift2(p)(e)(n)},a.default.filter(y),a.default.filter(function(t){return function(e){return d({x:n,y:r})(e)<=t}}(u)),a.default.filter(m),a.default.map(g),a.default.filter(b),a.default.chain(a.default.map(v)),f,a.default.reject(A),a.default.reject(a.default.equals({x:n,y:r})),a.default.map(function(t){return{target:t,steps:a.default.map(function(t){var e=t[0],n=t[1];return p(e)(n)})(_(O)({x:n,y:r})(t))}})])({xs:c,ys:h})};return a.default.map(a.default.pipe([a.default.prop("units"),m,a.default.map(function(t){var n=A(t),r=a.default.map(function(t){return t.target})(n);return u(u({},t),{validSteps:n,enemiesInRange:a.default.pipe([a.default.filter(function(e){return t.force!==e.force}),a.default.filter(function(e){return a.default.any(function(n){return 1===d(n)(e.pos)&&_(i)(t.pos)(e.pos).length<=t.range})(r)}),a.default.map(function(e){return{enemy:e.id,steps:_(i)(t.pos)(e.pos).slice(0,-1).map(function(t){var e=t[0],n=t[1];return p(e)(n)})}})])(e)})})]))(h)};e.getPossibleMoves=g;var b=function(t){return function(e){var n=function(t){return a.default.pipe([a.default.prop("length"),a.default.range(0),a.default.zip(t)])(t)},r=n(t);return a.default.map(function(t){var r=a.default.fst(t),i=a.default.snd(t),o=n(r);return a.default.map(function(t){var n=a.default.fst(t),r=a.default.snd(t);return a.default.elem({x:r,y:i})(e)?1:n})(o)})(r)}};e.blockVectorsInGrid=b;var _=function(t){return function(e){return function(n){var r=new o.Grid(t);return(new o.AStarFinder).findPath(e.x,e.y,n.x,n.y,r)}}};e.getPathTo=_},1509:function(t,e,n){t.exports=n(1510)},1510:function(t,e,n){t.exports={Heap:n(178),Node:n(286),Grid:n(1513),Util:n(89),DiagonalMovement:n(33),Heuristic:n(130),AStarFinder:n(287),BestFirstFinder:n(1514),BreadthFirstFinder:n(1515),DijkstraFinder:n(1516),BiAStarFinder:n(288),BiBestFirstFinder:n(1517),BiBreadthFirstFinder:n(1518),BiDijkstraFinder:n(1519),IDAStarFinder:n(1520),JumpPointFinder:n(1521)}},1511:function(t,e,n){(function(t){(function(){var e,n,r,i,o,a,u,s,c,l,f,p,d,h,y;r=Math.floor,l=Math.min,n=function(t,e){return t<e?-1:t>e?1:0},c=function(t,e,i,o,a){var u;if(null==i&&(i=0),null==a&&(a=n),i<0)throw new Error("lo must be non-negative");for(null==o&&(o=t.length);i<o;)u=r((i+o)/2),a(e,t[u])<0?o=u:i=u+1;return[].splice.apply(t,[i,i-i].concat(e)),e},a=function(t,e,r){return null==r&&(r=n),t.push(e),h(t,0,t.length-1,r)},o=function(t,e){var r,i;return null==e&&(e=n),r=t.pop(),t.length?(i=t[0],t[0]=r,y(t,0,e)):i=r,i},s=function(t,e,r){var i;return null==r&&(r=n),i=t[0],t[0]=e,y(t,0,r),i},u=function(t,e,r){var i;return null==r&&(r=n),t.length&&r(t[0],e)<0&&(i=[t[0],e],e=i[0],t[0]=i[1],y(t,0,r)),e},i=function(t,e){var i,o,a,u,s,c;for(null==e&&(e=n),u=function(){c=[];for(var e=0,n=r(t.length/2);0<=n?e<n:e>n;0<=n?e++:e--)c.push(e);return c}.apply(this).reverse(),s=[],o=0,a=u.length;o<a;o++)i=u[o],s.push(y(t,i,e));return s},d=function(t,e,r){var i;if(null==r&&(r=n),-1!==(i=t.indexOf(e)))return h(t,0,i,r),y(t,i,r)},f=function(t,e,r){var o,a,s,c,l;if(null==r&&(r=n),a=t.slice(0,e),!a.length)return a;for(i(a,r),l=t.slice(e),s=0,c=l.length;s<c;s++)o=l[s],u(a,o,r);return a.sort(r).reverse()},p=function(t,e,r){var a,u,s,f,p,d,h,y,m;if(null==r&&(r=n),10*e<=t.length){if(s=t.slice(0,e).sort(r),!s.length)return s;for(u=s[s.length-1],h=t.slice(e),f=0,d=h.length;f<d;f++)a=h[f],r(a,u)<0&&(c(s,a,0,null,r),s.pop(),u=s[s.length-1]);return s}for(i(t,r),m=[],p=0,y=l(e,t.length);0<=y?p<y:p>y;0<=y?++p:--p)m.push(o(t,r));return m},h=function(t,e,r,i){var o,a,u;for(null==i&&(i=n),o=t[r];r>e&&(u=r-1>>1,a=t[u],i(o,a)<0);)t[r]=a,r=u;return t[r]=o},y=function(t,e,r){var i,o,a,u,s;for(null==r&&(r=n),o=t.length,s=e,a=t[e],i=2*e+1;i<o;)u=i+1,u<o&&!(r(t[i],t[u])<0)&&(i=u),t[e]=t[i],e=i,i=2*e+1;return t[e]=a,h(t,s,e,r)},e=function(){function t(t){this.cmp=null!=t?t:n,this.nodes=[]}return t.push=a,t.pop=o,t.replace=s,t.pushpop=u,t.heapify=i,t.updateItem=d,t.nlargest=f,t.nsmallest=p,t.prototype.push=function(t){return a(this.nodes,t,this.cmp)},t.prototype.pop=function(){return o(this.nodes,this.cmp)},t.prototype.peek=function(){return this.nodes[0]},t.prototype.contains=function(t){return-1!==this.nodes.indexOf(t)},t.prototype.replace=function(t){return s(this.nodes,t,this.cmp)},t.prototype.pushpop=function(t){return u(this.nodes,t,this.cmp)},t.prototype.heapify=function(){return i(this.nodes,this.cmp)},t.prototype.updateItem=function(t){return d(this.nodes,t,this.cmp)},t.prototype.clear=function(){return this.nodes=[]},t.prototype.empty=function(){return 0===this.nodes.length},t.prototype.size=function(){return this.nodes.length},t.prototype.clone=function(){var e;return e=new t,e.nodes=this.nodes.slice(0),e},t.prototype.toArray=function(){return this.nodes.slice(0)},t.prototype.insert=t.prototype.push,t.prototype.top=t.prototype.peek,t.prototype.front=t.prototype.peek,t.prototype.has=t.prototype.contains,t.prototype.copy=t.prototype.clone,t}(),(void 0!==t&&null!==t?t.exports:void 0)?t.exports=e:window.Heap=e}).call(this)}).call(e,n(1512)(t))},1512:function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},1513:function(t,e,n){function r(t,e,n){var r;"object"!=typeof t?r=t:(e=t.length,r=t[0].length,n=t),this.width=r,this.height=e,this.nodes=this._buildNodes(r,e,n)}var i=n(286),o=n(33);r.prototype._buildNodes=function(t,e,n){var r,o,a=new Array(e);for(r=0;r<e;++r)for(a[r]=new Array(t),o=0;o<t;++o)a[r][o]=new i(o,r);if(void 0===n)return a;if(n.length!==e||n[0].length!==t)throw new Error("Matrix size does not fit");for(r=0;r<e;++r)for(o=0;o<t;++o)n[r][o]&&(a[r][o].walkable=!1);return a},r.prototype.getNodeAt=function(t,e){return this.nodes[e][t]},r.prototype.isWalkableAt=function(t,e){return this.isInside(t,e)&&this.nodes[e][t].walkable},r.prototype.isInside=function(t,e){return t>=0&&t<this.width&&e>=0&&e<this.height},r.prototype.setWalkableAt=function(t,e,n){this.nodes[e][t].walkable=n},r.prototype.getNeighbors=function(t,e){var n=t.x,r=t.y,i=[],a=!1,u=!1,s=!1,c=!1,l=!1,f=!1,p=!1,d=!1,h=this.nodes;if(this.isWalkableAt(n,r-1)&&(i.push(h[r-1][n]),a=!0),this.isWalkableAt(n+1,r)&&(i.push(h[r][n+1]),s=!0),this.isWalkableAt(n,r+1)&&(i.push(h[r+1][n]),l=!0),this.isWalkableAt(n-1,r)&&(i.push(h[r][n-1]),p=!0),e===o.Never)return i;if(e===o.OnlyWhenNoObstacles)u=p&&a,c=a&&s,f=s&&l,d=l&&p;else if(e===o.IfAtMostOneObstacle)u=p||a,c=a||s,f=s||l,d=l||p;else{if(e!==o.Always)throw new Error("Incorrect value of diagonalMovement");u=!0,c=!0,f=!0,d=!0}return u&&this.isWalkableAt(n-1,r-1)&&i.push(h[r-1][n-1]),c&&this.isWalkableAt(n+1,r-1)&&i.push(h[r-1][n+1]),f&&this.isWalkableAt(n+1,r+1)&&i.push(h[r+1][n+1]),d&&this.isWalkableAt(n-1,r+1)&&i.push(h[r+1][n-1]),i},r.prototype.clone=function(){var t,e,n=this.width,o=this.height,a=this.nodes,u=new r(n,o),s=new Array(o);for(t=0;t<o;++t)for(s[t]=new Array(n),e=0;e<n;++e)s[t][e]=new i(e,t,a[t][e].walkable);return u.nodes=s,u},t.exports=r},1514:function(t,e,n){function r(t){i.call(this,t);var e=this.heuristic;this.heuristic=function(t,n){return 1e6*e(t,n)}}var i=n(287);r.prototype=new i,r.prototype.constructor=r,t.exports=r},1515:function(t,e,n){function r(t){t=t||{},this.allowDiagonal=t.allowDiagonal,this.dontCrossCorners=t.dontCrossCorners,this.diagonalMovement=t.diagonalMovement,this.diagonalMovement||(this.allowDiagonal?this.dontCrossCorners?this.diagonalMovement=o.OnlyWhenNoObstacles:this.diagonalMovement=o.IfAtMostOneObstacle:this.diagonalMovement=o.Never)}var i=n(89),o=n(33);r.prototype.findPath=function(t,e,n,r,o){var a,u,s,c,l,f=[],p=this.diagonalMovement,d=o.getNodeAt(t,e),h=o.getNodeAt(n,r);for(f.push(d),d.opened=!0;f.length;){if(s=f.shift(),s.closed=!0,s===h)return i.backtrace(h);for(a=o.getNeighbors(s,p),c=0,l=a.length;c<l;++c)u=a[c],u.closed||u.opened||(f.push(u),u.opened=!0,u.parent=s)}return[]},t.exports=r},1516:function(t,e,n){function r(t){i.call(this,t),this.heuristic=function(t,e){return 0}}var i=n(287);r.prototype=new i,r.prototype.constructor=r,t.exports=r},1517:function(t,e,n){function r(t){i.call(this,t);var e=this.heuristic;this.heuristic=function(t,n){return 1e6*e(t,n)}}var i=n(288);r.prototype=new i,r.prototype.constructor=r,t.exports=r},1518:function(t,e,n){function r(t){t=t||{},this.allowDiagonal=t.allowDiagonal,this.dontCrossCorners=t.dontCrossCorners,this.diagonalMovement=t.diagonalMovement,this.diagonalMovement||(this.allowDiagonal?this.dontCrossCorners?this.diagonalMovement=o.OnlyWhenNoObstacles:this.diagonalMovement=o.IfAtMostOneObstacle:this.diagonalMovement=o.Never)}var i=n(89),o=n(33);r.prototype.findPath=function(t,e,n,r,o){var a,u,s,c,l,f=o.getNodeAt(t,e),p=o.getNodeAt(n,r),d=[],h=[],y=this.diagonalMovement;for(d.push(f),f.opened=!0,f.by=0,h.push(p),p.opened=!0,p.by=1;d.length&&h.length;){for(s=d.shift(),s.closed=!0,a=o.getNeighbors(s,y),c=0,l=a.length;c<l;++c)if(u=a[c],!u.closed)if(u.opened){if(1===u.by)return i.biBacktrace(s,u)}else d.push(u),u.parent=s,u.opened=!0,u.by=0;for(s=h.shift(),s.closed=!0,a=o.getNeighbors(s,y),c=0,l=a.length;c<l;++c)if(u=a[c],!u.closed)if(u.opened){if(0===u.by)return i.biBacktrace(u,s)}else h.push(u),u.parent=s,u.opened=!0,u.by=1}return[]},t.exports=r},1519:function(t,e,n){function r(t){i.call(this,t),this.heuristic=function(t,e){return 0}}var i=n(288);r.prototype=new i,r.prototype.constructor=r,t.exports=r},1520:function(t,e,n){function r(t){t=t||{},this.allowDiagonal=t.allowDiagonal,this.dontCrossCorners=t.dontCrossCorners,this.diagonalMovement=t.diagonalMovement,this.heuristic=t.heuristic||i.manhattan,this.weight=t.weight||1,this.trackRecursion=t.trackRecursion||!1,this.timeLimit=t.timeLimit||1/0,this.diagonalMovement||(this.allowDiagonal?this.dontCrossCorners?this.diagonalMovement=a.OnlyWhenNoObstacles:this.diagonalMovement=a.IfAtMostOneObstacle:this.diagonalMovement=a.Never),this.diagonalMovement===a.Never?this.heuristic=t.heuristic||i.manhattan:this.heuristic=t.heuristic||i.octile}var i=(n(89),n(130)),o=n(286),a=n(33);r.prototype.findPath=function(t,e,n,r,i){var a,u,s,c=0,l=(new Date).getTime(),f=function(t,e){return this.heuristic(Math.abs(e.x-t.x),Math.abs(e.y-t.y))}.bind(this),p=function(t,e){return t.x===e.x||t.y===e.y?1:Math.SQRT2},d=function(t,e,n,r,a){if(c++,this.timeLimit>0&&(new Date).getTime()-l>1e3*this.timeLimit)return 1/0;var u=e+f(t,y)*this.weight;if(u>n)return u;if(t==y)return r[a]=[t.x,t.y],t;var s,h,m,v,g=i.getNeighbors(t,this.diagonalMovement);for(m=0,s=1/0;v=g[m];++m){if(this.trackRecursion&&(v.retainCount=v.retainCount+1||1,!0!==v.tested&&(v.tested=!0)),(h=d(v,e+p(t,v),n,r,a+1))instanceof o)return r[a]=[t.x,t.y],h;this.trackRecursion&&0==--v.retainCount&&(v.tested=!1),h<s&&(s=h)}return s}.bind(this),h=i.getNodeAt(t,e),y=i.getNodeAt(n,r),m=f(h,y);for(a=0;!0;++a){if(u=[],(s=d(h,0,m,u,0))===1/0)return[];if(s instanceof o)return u;m=s}return[]},t.exports=r},1521:function(t,e,n){function r(t){return t=t||{},t.diagonalMovement===i.Never?new o(t):t.diagonalMovement===i.Always?new a(t):t.diagonalMovement===i.OnlyWhenNoObstacles?new u(t):new s(t)}var i=n(33),o=n(1522),a=n(1523),u=n(1524),s=n(1525);t.exports=r},1522:function(t,e,n){function r(t){i.call(this,t)}var i=n(179),o=n(33);r.prototype=new i,r.prototype.constructor=r,r.prototype._jump=function(t,e,n,r){var i=this.grid,o=t-n,a=e-r;if(!i.isWalkableAt(t,e))return null;if(!0===this.trackJumpRecursion&&(i.getNodeAt(t,e).tested=!0),i.getNodeAt(t,e)===this.endNode)return[t,e];if(0!==o){if(i.isWalkableAt(t,e-1)&&!i.isWalkableAt(t-o,e-1)||i.isWalkableAt(t,e+1)&&!i.isWalkableAt(t-o,e+1))return[t,e]}else{if(0===a)throw new Error("Only horizontal and vertical movements are allowed");if(i.isWalkableAt(t-1,e)&&!i.isWalkableAt(t-1,e-a)||i.isWalkableAt(t+1,e)&&!i.isWalkableAt(t+1,e-a))return[t,e];if(this._jump(t+1,e,t,e)||this._jump(t-1,e,t,e))return[t,e]}return this._jump(t+o,e+a,t,e)},r.prototype._findNeighbors=function(t){var e,n,r,i,a,u,s,c,l=t.parent,f=t.x,p=t.y,d=this.grid,h=[];if(l)e=l.x,n=l.y,r=(f-e)/Math.max(Math.abs(f-e),1),i=(p-n)/Math.max(Math.abs(p-n),1),0!==r?(d.isWalkableAt(f,p-1)&&h.push([f,p-1]),d.isWalkableAt(f,p+1)&&h.push([f,p+1]),d.isWalkableAt(f+r,p)&&h.push([f+r,p])):0!==i&&(d.isWalkableAt(f-1,p)&&h.push([f-1,p]),d.isWalkableAt(f+1,p)&&h.push([f+1,p]),d.isWalkableAt(f,p+i)&&h.push([f,p+i]));else for(a=d.getNeighbors(t,o.Never),s=0,c=a.length;s<c;++s)u=a[s],h.push([u.x,u.y]);return h},t.exports=r},1523:function(t,e,n){function r(t){i.call(this,t)}var i=n(179),o=n(33);r.prototype=new i,r.prototype.constructor=r,r.prototype._jump=function(t,e,n,r){var i=this.grid,o=t-n,a=e-r;if(!i.isWalkableAt(t,e))return null;if(!0===this.trackJumpRecursion&&(i.getNodeAt(t,e).tested=!0),i.getNodeAt(t,e)===this.endNode)return[t,e];if(0!==o&&0!==a){if(i.isWalkableAt(t-o,e+a)&&!i.isWalkableAt(t-o,e)||i.isWalkableAt(t+o,e-a)&&!i.isWalkableAt(t,e-a))return[t,e];if(this._jump(t+o,e,t,e)||this._jump(t,e+a,t,e))return[t,e]}else if(0!==o){if(i.isWalkableAt(t+o,e+1)&&!i.isWalkableAt(t,e+1)||i.isWalkableAt(t+o,e-1)&&!i.isWalkableAt(t,e-1))return[t,e]}else if(i.isWalkableAt(t+1,e+a)&&!i.isWalkableAt(t+1,e)||i.isWalkableAt(t-1,e+a)&&!i.isWalkableAt(t-1,e))return[t,e];return this._jump(t+o,e+a,t,e)},r.prototype._findNeighbors=function(t){var e,n,r,i,a,u,s,c,l=t.parent,f=t.x,p=t.y,d=this.grid,h=[];if(l)e=l.x,n=l.y,r=(f-e)/Math.max(Math.abs(f-e),1),i=(p-n)/Math.max(Math.abs(p-n),1),0!==r&&0!==i?(d.isWalkableAt(f,p+i)&&h.push([f,p+i]),d.isWalkableAt(f+r,p)&&h.push([f+r,p]),d.isWalkableAt(f+r,p+i)&&h.push([f+r,p+i]),d.isWalkableAt(f-r,p)||h.push([f-r,p+i]),d.isWalkableAt(f,p-i)||h.push([f+r,p-i])):0===r?(d.isWalkableAt(f,p+i)&&h.push([f,p+i]),d.isWalkableAt(f+1,p)||h.push([f+1,p+i]),d.isWalkableAt(f-1,p)||h.push([f-1,p+i])):(d.isWalkableAt(f+r,p)&&h.push([f+r,p]),d.isWalkableAt(f,p+1)||h.push([f+r,p+1]),d.isWalkableAt(f,p-1)||h.push([f+r,p-1]));else for(a=d.getNeighbors(t,o.Always),s=0,c=a.length;s<c;++s)u=a[s],h.push([u.x,u.y]);return h},t.exports=r},1524:function(t,e,n){function r(t){i.call(this,t)}var i=n(179),o=n(33);r.prototype=new i,r.prototype.constructor=r,r.prototype._jump=function(t,e,n,r){var i=this.grid,o=t-n,a=e-r;if(!i.isWalkableAt(t,e))return null;if(!0===this.trackJumpRecursion&&(i.getNodeAt(t,e).tested=!0),i.getNodeAt(t,e)===this.endNode)return[t,e];if(0!==o&&0!==a){if(this._jump(t+o,e,t,e)||this._jump(t,e+a,t,e))return[t,e]}else if(0!==o){if(i.isWalkableAt(t,e-1)&&!i.isWalkableAt(t-o,e-1)||i.isWalkableAt(t,e+1)&&!i.isWalkableAt(t-o,e+1))return[t,e]}else if(0!==a&&(i.isWalkableAt(t-1,e)&&!i.isWalkableAt(t-1,e-a)||i.isWalkableAt(t+1,e)&&!i.isWalkableAt(t+1,e-a)))return[t,e];return i.isWalkableAt(t+o,e)&&i.isWalkableAt(t,e+a)?this._jump(t+o,e+a,t,e):null},r.prototype._findNeighbors=function(t){var e,n,r,i,a,u,s,c,l=t.parent,f=t.x,p=t.y,d=this.grid,h=[];if(l)if(e=l.x,n=l.y,r=(f-e)/Math.max(Math.abs(f-e),1),i=(p-n)/Math.max(Math.abs(p-n),1),0!==r&&0!==i)d.isWalkableAt(f,p+i)&&h.push([f,p+i]),d.isWalkableAt(f+r,p)&&h.push([f+r,p]),d.isWalkableAt(f,p+i)&&d.isWalkableAt(f+r,p)&&h.push([f+r,p+i]);else{var y;if(0!==r){y=d.isWalkableAt(f+r,p);var m=d.isWalkableAt(f,p+1),v=d.isWalkableAt(f,p-1);y&&(h.push([f+r,p]),m&&h.push([f+r,p+1]),v&&h.push([f+r,p-1])),m&&h.push([f,p+1]),v&&h.push([f,p-1])}else if(0!==i){y=d.isWalkableAt(f,p+i);var g=d.isWalkableAt(f+1,p),b=d.isWalkableAt(f-1,p);y&&(h.push([f,p+i]),g&&h.push([f+1,p+i]),b&&h.push([f-1,p+i])),g&&h.push([f+1,p]),b&&h.push([f-1,p])}}else for(a=d.getNeighbors(t,o.OnlyWhenNoObstacles),s=0,c=a.length;s<c;++s)u=a[s],h.push([u.x,u.y]);return h},t.exports=r},1525:function(t,e,n){function r(t){i.call(this,t)}var i=n(179),o=n(33);r.prototype=new i,r.prototype.constructor=r,r.prototype._jump=function(t,e,n,r){var i=this.grid,o=t-n,a=e-r;if(!i.isWalkableAt(t,e))return null;if(!0===this.trackJumpRecursion&&(i.getNodeAt(t,e).tested=!0),i.getNodeAt(t,e)===this.endNode)return[t,e];if(0!==o&&0!==a){if(i.isWalkableAt(t-o,e+a)&&!i.isWalkableAt(t-o,e)||i.isWalkableAt(t+o,e-a)&&!i.isWalkableAt(t,e-a))return[t,e];if(this._jump(t+o,e,t,e)||this._jump(t,e+a,t,e))return[t,e]}else if(0!==o){if(i.isWalkableAt(t+o,e+1)&&!i.isWalkableAt(t,e+1)||i.isWalkableAt(t+o,e-1)&&!i.isWalkableAt(t,e-1))return[t,e]}else if(i.isWalkableAt(t+1,e+a)&&!i.isWalkableAt(t+1,e)||i.isWalkableAt(t-1,e+a)&&!i.isWalkableAt(t-1,e))return[t,e];return i.isWalkableAt(t+o,e)||i.isWalkableAt(t,e+a)?this._jump(t+o,e+a,t,e):null},r.prototype._findNeighbors=function(t){var e,n,r,i,a,u,s,c,l=t.parent,f=t.x,p=t.y,d=this.grid,h=[];if(l)e=l.x,n=l.y,r=(f-e)/Math.max(Math.abs(f-e),1),i=(p-n)/Math.max(Math.abs(p-n),1),0!==r&&0!==i?(d.isWalkableAt(f,p+i)&&h.push([f,p+i]),d.isWalkableAt(f+r,p)&&h.push([f+r,p]),(d.isWalkableAt(f,p+i)||d.isWalkableAt(f+r,p))&&h.push([f+r,p+i]),!d.isWalkableAt(f-r,p)&&d.isWalkableAt(f,p+i)&&h.push([f-r,p+i]),!d.isWalkableAt(f,p-i)&&d.isWalkableAt(f+r,p)&&h.push([f+r,p-i])):0===r?d.isWalkableAt(f,p+i)&&(h.push([f,p+i]),d.isWalkableAt(f+1,p)||h.push([f+1,p+i]),d.isWalkableAt(f-1,p)||h.push([f-1,p+i])):d.isWalkableAt(f+r,p)&&(h.push([f+r,p]),d.isWalkableAt(f,p+1)||h.push([f+r,p+1]),d.isWalkableAt(f,p-1)||h.push([f+r,p-1]));else for(a=d.getNeighbors(t,o.IfAtMostOneObstacle),s=0,c=a.length;s<c;++s)u=a[s],h.push([u.x,u.y]);return h},t.exports=r},1526:function(t,e){t.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},1527:function(t,e){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},1528:function(t,e,n){"use strict";function r(t){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return i=function(){return t},t}function o(t){if(t&&t.__esModule)return t;if(null===t||"object"!==r(t)&&"function"!=typeof t)return{default:t};var e=i();if(e&&e.has(t))return e.get(t);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){var u=o?Object.getOwnPropertyDescriptor(t,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=t[a]}return n.default=t,e&&e.set(t,n),n}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=o(n(31)),u=n(103),s=o(n(40)),c=n(285),l=n(76),f=n(1529),p=function(t){return t&&t.__esModule?t:{default:t}}(n(1530)),d=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),h=function(t){return 1===t?3:3===t?1:t},y=function(t){return function(e){if(!e.squad)throw new Error(l.INVALID_STATE);var n=s.getSquad(e.squad);if(!n)throw new Error(l.INVALID_STATE);var r=n.members[e.id],i=r.x,o=r.y;return{x:n.id===t?i:h(i),y:n.id===t?o:h(o)}}},m=function(t){function e(){var e=t.call(this,"CombatScene")||this;return e.charas=[],e.top="",e.bottom="",e.conflictId="",e.currentTurn=0,e.container=null,e}return d(e,t),e.prototype.updateUnit=function(t){this.charas=this.charas.map(function(e){return e.unit.id===t.id&&(e.unit=t),e})},e.prototype.create=function(t){var e=this;this.container&&this.container.destroy(),this.container=this.add.container(0,0),(0,p.default)(this,this.container),this.top=t.top,this.bottom=t.bottom,this.conflictId=t.conflictId,[t.top,t.bottom].forEach(function(n){var r=s.getSquadMembers(n),i=n===t.top,o=y(t.top);r.sort(function(t,e){return o(t).y-o(e).y}).forEach(function(t){var n=o(t),r=(0,c.cartesianToIsometricBattle)(i,n.x,n.y),a=r.x,s=r.y,l=new u.Chara("combat-chara-"+t.id,e,t,a,s,1,i);e.charas.push(l)})}),setTimeout(function(){e.turn()},1e3)},e.prototype.turnOff=function(){var t;this.removeChildren(),null===(t=this.container)||void 0===t||t.destroy(),this.scene.stop()},e.prototype.removeChildren=function(){var t=this;this.charas.forEach(function(e){var n;null===(n=e.container)||void 0===n||n.destroy(),t.scene.remove(e)}),this.charas=[]},e.prototype.turn=function(){var t=(0,f.runCombat)(this.charas.map(function(t){return t.unit}));this.execute(t)},e.prototype.execute=function(t){var e=this,n=t[0];console.log("Command:",n);var r=function(t){return t.filter(function(t,e){return e>0})},i=function(){var n=r(t);0===n.length?console.log("finish!"):e.execute(n)};"MOVE"===n.type?this.moveUnit(n.source,n.target).then(i):"ATTACK"===n.type?this.attack(n.source,n.target,n.damage,n.updatedTarget).then(i):"RETURN"===n.type?this.return(n.target).then(i):"END_TURN"===n.type?(this.currentTurn=this.currentTurn+1,this.turn()):"RESTART_TURNS"===n.type?(this.currentTurn=0,this.turn()):"END_COMBAT"===n.type?this.retreatUnits().then(function(t){e.scene.start("MapScene",t.map(function(t){return{type:"UPDATE_UNIT",target:t}})),e.turnOff()}):"VICTORY"===n.type?(console.log("Winning Team:",n.target),this.scene.start("MapScene",[{type:"DESTROY_TEAM",target:n.target===this.top?this.bottom:this.top}]),this.turnOff()):console.error("Unknown command:",n)},e.prototype.getChara=function(t){var e=this.charas.find(function(e){return e.unit.id===t});if(!e||!e.container)throw new Error(l.INVALID_STATE);return e},e.prototype.moveUnit=function(t,e){var n=this,r=this.getChara(t),i=this.getChara(e);r.clearAnimations(),r.run();var o=this.top===i.unit.squad;if(!i.container)throw new Error(l.INVALID_STATE);var a=s.getSquadMember(i.unit.id),u=(0,c.cartesianToIsometricBattle)(o,o?a.x+1:h(a.x)-1,o?a.y:h(a.y)),f=u.x,p=u.y,d=function(t){return{targets:r.container,x:f,y:p,duration:500,onComplete:function(){t()}}},y={delay:500/60,callback:function(){n.charas.sort(function(t,e){return t.container&&e.container?t.container.y-e.container.y:0}).forEach(function(t){return n.scene.bringToTop(t.key)})},repeat:60};return new Promise(function(t){n.time.addEvent(y),n.tweens.add(d(t))})},e.prototype.retreatUnits=function(){var t=this;return this.charas.forEach(function(e){e.clearAnimations(),e.run();var n=t.top===e.unit.squad,r=function(){if(!e.container)throw new Error(l.INVALID_STATE);return n?{x:e.container.x-200,y:e.container.y-200}:{x:e.container.x+200,y:e.container.y+200}}(),i=r.x,o=r.y,a={targets:e.container,x:i,y:o,duration:1e3};t.tweens.add(a)}),new Promise(function(e){var n={delay:1e3,callback:function(){return e(t.charas.map(function(t){return t.unit}))}};t.time.addEvent(n)})},e.prototype.attack=function(t,e,n,r){this.updateUnit(r);var i=this.getChara(t),o=this.getChara(e);return new Promise(function(t){i.attack(t),o.flinch(n,0===r.currentHp)})},e.prototype.return=function(t){var e=this,n=this.getChara(t);n.clearAnimations(),n.run();var r=y(this.top)(n.unit),i=(0,c.cartesianToIsometricBattle)(this.top===n.unit.squad,r.x,r.y),o=i.x,a=i.y,u=function(t){return{targets:n.container,x:o,y:a,duration:500,onComplete:function(){console.log("stand!!"),n.stand(),t()}}};return new Promise(function(t){e.tweens.add(u(t))})},e}(a.Scene),v=m;e.default=v},1529:function(t,e,n){"use strict";function r(t,e){return s.default.pipe([s.default.map(s.default.prop("unit")),s.default.filter(u(t.unit)),s.default.all(function(t){return!a(t)})])(e)}function i(t){return s.default.all(function(t){return t.remainingAttacks<1})(t)}function o(t,e){return e.map(function(t){return t.unit}).filter(u(t)).filter(a).sort(function(t,e){return t.currentHp-e.currentHp})[0]}function a(t){return t.currentHp>0}function u(t){return function(e){return t.squad!==e.squad}}Object.defineProperty(e,"__esModule",{value:!0}),e.getTarget=o,e.runTurn=e.runCombat=e.initiativeList=void 0;var s=function(t){return t&&t.__esModule?t:{default:t}}(n(180)),c=n(76),l=function(){return l=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},l.apply(this,arguments)},f=function(t){return t.unit.agi+t.unit.dex},p=function(t){return t.sort(function(t,e){return f(e)-f(t)})};e.initiativeList=p;var d=function(t){var e=t.map(function(t){return{unit:t,remainingAttacks:2}}),n=p(e);return h(0,n,[])};e.runCombat=d;var h=function t(e,n,a){var u=n[e],s=n.length-1===e,f=s?0:e+1;if(u.unit.currentHp<1)return t(f,n,a);if(!u.unit.squad)throw new Error(c.INVALID_STATE);var p=o(u.unit,n);if(!p)throw new Error(c.INVALID_STATE);var d=n.map(function(t){var e=t.unit.currentHp-22,n=e<1?0:e;return t.unit.id===p.id?{remainingAttacks:t.remainingAttacks,unit:l(l({},t.unit),{currentHp:n})}:t}).map(function(t){return t.unit.id===u.unit.id?{remainingAttacks:t.remainingAttacks-1,unit:l({},t.unit)}:t}),h=d.find(function(t){return t.unit.id===p.id}),y=d.find(function(t){return t.unit.id===u.unit.id});if(!h||!y)throw new Error(c.INVALID_STATE);var m=[{type:"MOVE",source:u.unit.id,target:p.id}],v=[{type:"ATTACK",source:u.unit.id,target:p.id,damage:22,updatedTarget:h.unit,updatedSource:y.unit}],g=[{type:"RETURN",target:u.unit.id}],b=a.concat(m).concat(v).concat(g),_=u.unit.squad;return r(u,d)?b.concat([function(){return{type:"VICTORY",target:_}}()]):i(d)?b.concat([function(){return{type:"END_COMBAT"}}()]):t(f,d,b)};e.runTurn=h},1530:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=r(n(1531)),o=r(n(1532)),a=n(174),u=function(t,e){var n=t.add.image(0,0,"backgrounds/plain");e.add(n),n.setOrigin(0,0),n.displayWidth=a.SCREEN_WIDTH,n.displayHeight=a.SCREEN_HEIGHT,[{x:350,y:40},{x:320,y:60},{x:460,y:70},{x:420,y:80},{x:550,y:110},{x:590,y:120},{x:680,y:120},{x:1110,y:350},{x:1130,y:370}].map((0,i.default)(t)).forEach(function(t){return e.add(t)}),[{x:320,y:700},{x:390,y:710},{x:450,y:750},{x:1250,y:450},{x:50,y:410}].forEach(function(n){var r=n.x,i=n.y,o=t.add.image(r,i,"props/bush");e.add(o),o.setScale(1),o.setOrigin(.5,1),t.tweens.add({targets:o,scaleX:1.25,duration:2e3*Math.random()+1e4,repeat:-1,yoyo:!0,ease:"Linear"})});var r=t.add.image(870,130,"props/far_tree_1");e.add(r),r.setScale(.5),r.setOrigin(.5,1),t.tweens.add({targets:r,scaleX:.55,rotation:-.2,duration:1200*Math.random()+4e3,repeat:-1,yoyo:!0,ease:"Linear"});var u=(0,o.default)(t)(1e3,250,.4);e.add(u)};e.default=u},1531:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=function(t){return function(e){var n=e.x,r=e.y,i=t.add.image(n,r,"props/grass");return i.setScale(.4),i.setOrigin(.5,1),i.setRotation(-.2),t.tweens.add({targets:i,rotation:.2,scaleX:.5,duration:1e3*Math.random()+5e3,repeat:-1,yoyo:!0,ease:"Bounce"}),i}};e.default=r},1532:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n(574),i=function(t){return function(e,n,i){return[{x:e,y:n,scale:i},{x:e-30*i,y:n,scale:.8*i},{x:e+30*i,y:n+20,scale:.7*i},{x:e-60*i,y:n+20,scale:.4*i}].map(function(e){var n=t.add.image(e.x,e.y,"props/branch"),i=.3*e.scale,o=(0,r.random)(2,4)/10*-1;return n.setScale(i),n.setOrigin(.3,1),n.setRotation(o),t.tweens.add({targets:n,rotation:-1*o,duration:6e3,yoyo:!0,repeat:-1,scaleX:i+i/10,ease:"Bounce"}),n})}};e.default=i},174:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.tileHeight=e.tileWidth=e.centerY=e.centerX=e.SCREEN_HEIGHT=e.SCREEN_WIDTH=void 0;e.SCREEN_WIDTH=1280;e.SCREEN_HEIGHT=720;e.centerX=640;e.centerY=260;e.tileWidth=128;e.tileHeight=64},175:function(t,e,n){"use strict";function r(t,e){return Math.floor(Math.random()*e+t)}function i(t,e){return Object.values(e).reduce(function(e,n){var r;return n.id===t?e:o(o({},e),(r={},r[n.id]=n,r))},{})}Object.defineProperty(e,"__esModule",{value:!0}),e.random=r,e.removeIdFromMap=i,e.maybeZero=e.sceneLinkButton=e.indexById=void 0;var o=function(){return o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},o.apply(this,arguments)},a=function(t){return t.reduce(function(t,e){var n;return o(o({},t),(n={},n[e.id]=e,n))},{})};e.indexById=a;var u=function(t,e,n,r,i,o){var a=t.add.text(n,r,e);return a.setInteractive(),a.on("pointerdown",function(){i(),t.scene.transition({target:o,duration:0,moveBelow:!0})}),a};e.sceneLinkButton=u;var s=function(t){return t||0};e.maybeZero=s},176:function(t,e,n){"use strict";function r(t){return t[Math.floor(Math.random()*t.length)]}function i(t,e){var n=e.type,r=e.name,i=Object.keys(o.modifiers),a=function(t,e){var n,r=e[0],o=e[1];return i.includes(r)?l(l({},t),(n={},n[r]=parseInt(o),n)):t},s=Object.entries(e).filter(function(t){return!["name","type","description"].includes(t[0])}),c=s.reduce(a,o.modifiers),f=o.itemTypeSlots[n];return o.itemTypeSlots[n]?t.concat([{id:(0,u.idfy)(e.name),name:r,type:n,slot:f,description:e.description,modifiers:c}]):t}Object.defineProperty(e,"__esModule",{value:!0}),e.randomItem=r,e.default=e.clearDB=e.player=e.items=e.squads=e.units=e.classes=void 0;var o=n(572),a=function(t){return t&&t.__esModule?t:{default:t}}(n(1485)),u=n(1486),s=n(1487),c=n(175),l=function(){return l=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},l.apply(this,arguments)},f=["fighter","knight","wizard"];e.classes=f;var p=(0,c.indexById)(Array.from({length:70},function(t,e){return e}).map(function(t){return(0,s.fromJSON)(t)}));e.units=p;var d={};e.squads=d;for(var h=0;h<15;h++)d[h.toString()]=function(t,e){var n;return e.squad=t.toString(),{id:t.toString(),name:e.name,emblem:"Emoji",members:(n={},n[e.id]={id:e.id,leader:!0,x:2,y:2},n)}}(h,p[h]);var y=(0,c.indexById)(a.default.reduce(i,[]));e.items=y;var m={id:"player_1",name:"Player Derp",gold:100,iventory:{iron_sword:2,steel_sword:1}};e.player=m;var v=[["units",p],["squads",d],["items",y],["itemTypes",o.itemTypeSlots],["player",m]],g=function(){b(!0),alert("Data Cleared!")};e.clearDB=g;var b=function(t){v.forEach(function(e){var n=e[0],r=e[1];(null===localStorage.getItem(n)||t)&&localStorage.setItem(n,JSON.stringify(r))})},_=b;e.default=_},177:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TRUNK_BACK_Y=e.TRUNK_BACK_X=e.RIGHT_FOOT_BACK_Y=e.RIGHT_FOOT_BACK_X=e.LEFT_FOOT_BACK_Y=e.LEFT_FOOT_BACK_X=e.LEFT_HAND_BACK_Y=e.LEFT_HAND_BACK_X=e.RIGHT_HAND_BACK_Y=e.RIGHT_HAND_BACK_X=e.HEAD_BACK_Y=e.HEAD_BACK_X=e.RIGHT_HAND_FRONT_Y=e.RIGHT_HAND_FRONT_X=e.LEFT_HAND_FRONT_Y=e.LEFT_HAND_FRONT_X=e.TRUNK_FRONT_Y=e.TRUNK_FRONT_X=e.RIGHT_FOOT_FRONT_Y=e.RIGHT_FOOT_FRONT_X=e.LEFT_FOOT_FRONT_Y=e.LEFT_FOOT_FRONT_X=e.HEAD_FRONT_Y=e.HEAD_FRONT_X=e.CHARA_WRAPPER_Y=e.CHARA_WRAPPER_X=void 0;e.CHARA_WRAPPER_X=0;e.CHARA_WRAPPER_Y=0;e.HEAD_FRONT_X=0;e.HEAD_FRONT_Y=0;e.LEFT_FOOT_FRONT_X=20;e.LEFT_FOOT_FRONT_Y=90;e.RIGHT_FOOT_FRONT_X=-10;e.RIGHT_FOOT_FRONT_Y=97;e.TRUNK_FRONT_X=0;e.TRUNK_FRONT_Y=55;e.LEFT_HAND_FRONT_X=35;e.LEFT_HAND_FRONT_Y=50;e.RIGHT_HAND_FRONT_X=-25;e.RIGHT_HAND_FRONT_Y=65;e.HEAD_BACK_X=0;e.HEAD_BACK_Y=0;e.RIGHT_HAND_BACK_X=20;e.RIGHT_HAND_BACK_Y=50;e.LEFT_HAND_BACK_X=-30;e.LEFT_HAND_BACK_Y=50;e.LEFT_FOOT_BACK_X=20;e.LEFT_FOOT_BACK_Y=80;e.RIGHT_FOOT_BACK_X=-10;e.RIGHT_FOOT_BACK_Y=87;e.TRUNK_BACK_X=0;e.TRUNK_BACK_Y=55},178:function(t,e,n){t.exports=n(1511)},179:function(t,e,n){function r(t){t=t||{},this.heuristic=t.heuristic||a.manhattan,this.trackJumpRecursion=t.trackJumpRecursion||!1}var i=n(178),o=n(89),a=n(130);n(33);r.prototype.findPath=function(t,e,n,r,a){var u,s=this.openList=new i(function(t,e){return t.f-e.f}),c=this.startNode=a.getNodeAt(t,e),l=this.endNode=a.getNodeAt(n,r);for(this.grid=a,c.g=0,c.f=0,s.push(c),c.opened=!0;!s.empty();){if(u=s.pop(),u.closed=!0,u===l)return o.expandPath(o.backtrace(l));this._identifySuccessors(u)}return[]},r.prototype._identifySuccessors=function(t){var e,n,r,i,o,u,s,c,l,f,p=this.grid,d=this.heuristic,h=this.openList,y=this.endNode.x,m=this.endNode.y,v=t.x,g=t.y,b=Math.abs;Math.max;for(e=this._findNeighbors(t),i=0,o=e.length;i<o;++i)if(n=e[i],r=this._jump(n[0],n[1],v,g)){if(u=r[0],s=r[1],f=p.getNodeAt(u,s),f.closed)continue;c=a.octile(b(u-v),b(s-g)),l=t.g+c,(!f.opened||l<f.g)&&(f.g=l,f.h=f.h||d(b(u-y),b(s-m)),f.f=f.g+f.h,f.parent=t,f.opened?h.updateItem(f):(h.push(f),f.opened=!0))}},t.exports=r},180:function(t,e,n){(function(r){var i,o,a;!function(r){"use strict";"object"==typeof t&&"object"==typeof t.exports?t.exports=r(n(576),n(182),n(577),n(578),n(51),n(52),n(104)):null!=n(77)?(o=[n(576),n(182),n(577),n(578),n(51),n(52),n(104)],i=r,void 0!==(a="function"==typeof i?i.apply(e,o):i)&&(t.exports=a)):self.sanctuary=r(self.sanctuaryDef,self.sanctuaryEither,self.sanctuaryMaybe,self.sanctuaryPair,self.sanctuaryShow,self.sanctuaryTypeClasses,self.sanctuaryTypeIdentifiers)}(function(t,e,i,o,a,u,s){"use strict";function c(t){return function(e){return function(n){return t(e(n))}}}function l(t){return function(e){return function(n){return t(n)(e)}}}function f(t){return c(function(e){return t in e?fe(e[t]):le})(h)}function p(t){return function(e){return e[t]()}}function d(t){return function(e){return function(n){return n[t](e)}}}function h(t){return null==t?Object.create(null):Object(t)}function y(n){var r=t.create(n),o={env:n.env,is:r("is")({})([t.Type,t.Any,t.Boolean])(t.test(n.env)),Maybe:i,Nothing:le,Either:e};return Object.keys(ke).forEach(function(t){o[t]=r(t)(ke[t].consts)(ke[t].types)(ke[t].impl)}),o.unchecked=n.checkTypes?y({checkTypes:!1,env:n.env}):o,o}function m(t){var e=s.parse(s(t));return e.namespace=u.reject(v(null),fe(e.namespace)),e}function v(t){return function(e){return u.equals(t,e)}}function g(t){return function(e){return u.lt(e,t)}}function b(t){return function(e){return u.lte(e,t)}}function _(t){return function(e){return u.gt(e,t)}}function w(t){return function(e){return u.gte(e,t)}}function O(t){return function(e){return u.filter(t,e)}}function A(t){return function(e){return u.reject(t,e)}}function S(t){return function(e){return u.map(t,e)}}function T(t){return function(e){return u.alt(e,t)}}function E(t){return function(e){return function(n){return u.reduce(function(e,n){return t(e)(n)},e,n)}}}function k(t){return function(e){return u.of(t,e)}}function x(t){return function(e){function n(t,n,r){return u.map(J(t)(n),e(r))}return function(e){return u.chainRec(t,n,e)}}}function N(t){return t}function F(t){return function(e){return t}}function P(t){return function(e){return e(t)}}function M(t){return function(e){return function(n){return t(e,n)}}}function I(t){return function(e){return function(n){return function(r){return t(e,n,r)}}}}function C(t){return function(e){return function(n){return function(r){return function(i){return t(e,n,r,i)}}}}}function R(t){return function(e){return function(n){return function(r){return function(i){return function(o){return t(e,n,r,i,o)}}}}}}function j(t){return function(e){return E(P)(e)(t)}}function D(t){return function(e){return u.reduce(function(t,e){return u.chain(e,t)},e,t)}}function U(t){return function(e){return function(n){return function(r){return t(e(n))(e(r))}}}}function q(t){return function(e){return t(e.fst)(e.snd)}}function H(t){return t.isNothing}function L(t){return t.isJust}function B(t){return t.isJust?t.value:null}function W(t){return function(e){return function(n){return n.isJust?e(n.value):t}}}function V(t){return function(e){return function(n){return n.isJust?e(n.value):t()}}}function Y(t){return S(At("value"))(O(L)(t))}function K(t){return W(se(t))(ce)}function G(t){return t.isLeft}function X(t){return t.isRight}function z(t){return J(F(t))(N)}function J(t){return function(e){return function(n){return(n.isLeft?t:e)(n.value)}}}function $(t){return it(t)(ce)(se)}function Z(t){return function(e){try{return ce(t(e))}catch(t){return se(t)}}}function Q(t){return t.isLeft?le:fe(t.value)}function tt(t){return function(e){return t&&e}}function et(t){return function(e){return t||e}}function nt(t){return!t}function rt(t){return function(e){return function(n){return n?e:t}}}function it(t){return function(e){return function(n){return function(r){return(t(r)?e:n)(r)}}}}function ot(t){return l(it(t))(N)}function at(t){return it(t)(N)}function ut(t){return function(e){return function(n){return 0===n.length?t:e(n[0])(n.slice(1))}}}function st(t){return Array.isArray(t)?t.length>0?fe(t[0]):le:u.reduce(function(t,e){return t.isJust?t:fe(e)},le,t)}function ct(t){return Array.isArray(t)?t.length>0?fe(t[t.length-1]):le:u.reduce(function(t,e){return fe(e)},le,t)}function lt(t){if(Array.isArray(t))return t.length>0?fe(t.slice(1)):le;var e=u.empty(t.constructor);return u.reduce(function(t,n){return fe(W(e)(vt(n))(t))},le,t)}function ft(t){if(Array.isArray(t))return t.length>0?fe(t.slice(0,-1)):le;var e=u.empty(t.constructor);return u.map(o.snd,u.reduce(function(t,n){return fe(o(n)(W(e)(q(vt))(t)))},le,t))}function pt(t,e){return function(n){return function(r){if(n<0)return le;if(Array.isArray(r))return n<=r.length?fe(t(n,r)):le;var i=u.reduce(function(t,n){return u.map(function(t){var r=t.fst,i=t.snd;return o(r-1)(e(r,i,n))},t)},fe(o(n)(u.empty(r.constructor))),r);return u.map(o.snd,u.reject(c(_(0))(o.fst),i))}}}function dt(t){return function(e){return u.map(u.reverse,xe(t)(u.reverse(e)))}}function ht(t){return function(e){return u.map(u.reverse,Ne(t)(u.reverse(e)))}}function yt(t){return function(e){for(var n=0;n<e.length&&t(e[n]);)n+=1;return e.slice(0,n)}}function mt(t){return function(e){for(var n=0;n<e.length&&t(e[n]);)n+=1;return e.slice(n)}}function vt(t){return function(e){return u.append(t,e)}}function gt(t){return function(e){return u.reduce(function(e,n){return e.isJust?e:t(n)?fe(n):le},le,e)}}function bt(t){return function(e){for(var n=[],r=t(e);r.isJust;r=t(r.value.snd))n.push(r.value.fst);return n}}function _t(t){return function(e){for(var n=[],r=t;r<e;r+=1)n.push(r);return n}}function wt(t){return function(e){if(0===e.length)return[];for(var n=e[0],r=[n],i=[r],o=1;o<e.length;o+=1){var a=e[o];t(n)(a)?r.push(a):i.push(r=[n=a])}return i}}function Ot(t){return function(e){return function(n){for(var r=[],i=Math.min(e.length,n.length),o=0;o<i;o+=1)r.push(t(e[o])(n[o]));return r}}}function At(t){return function(e){var n=h(e);if(t in n)return n[t];throw new TypeError("‘prop’ expected object to have a property named ‘"+t+"’; "+a(e)+" does not")}}function St(t){return function(e){return t.reduce(function(e,n){var r=h(e);if(n in r)return r[n];throw new TypeError("‘props’ expected object to have a property at "+a(t)+"; "+a(e)+" does not")},e)}}function Tt(t){return c(c(O(t)))(f)}function Et(t){return function(e){return function(n){return u.filter(t,e.reduce(function(t,e){return u.chain(f(e),t)},fe(n)))}}}function kt(t){return function(e){return Object.prototype.propertyIsEnumerable.call(e,t)?fe(e[t]):le}}function xt(t){return function(e){var n={};return n[t]=e,n}}function Nt(t){return function(e){return function(n){return u.concat(n,xt(t)(e))}}}function Ft(t){return function(e){var n=u.concat(e,{});return delete n[t],n}}function Pt(t){return u.map(function(e){return t[e]},Object.keys(t))}function Mt(t){return u.map(function(e){return o(e)(t[e])},Object.keys(t))}function It(t){return u.reduce(function(t,e){return t[e.fst]=e.snd,t},{},t)}function Ct(t){return-t}function Rt(t){return function(e){return t+e}}function jt(t){return function(e){return e-t}}function Dt(t){return function(e){return t*e}}function Ut(t){return function(e){return e/t}}function qt(t){return function(e){return Math.pow(e,t)}}function Ht(t){var e=u.reduce(function(t,e){return t.total+=e,t.count+=1,t},{total:0,count:0},t);return e.count>0?fe(e.total/e.count):le}function Lt(t){return t%2==0}function Bt(t){return t%2!=0}function Wt(t){var e=new Date(t);return isNaN(e.valueOf())?le:fe(e)}function Vt(t){return"(?:"+t.join("|")+")"}function Yt(t){return Fe.test(t)?fe(parseFloat(t)):le}function Kt(e){return function(n){var r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ".slice(0,e),i=new RegExp("^["+r+"]+$","i"),o=n.replace(/^[+-]/,"");if(i.test(16===e?o.replace(/^0x/i,""):o)){var a=parseInt(n,e);if(t.test([])(t.Integer)(a))return fe(a)}return le}}function Gt(t){return c(O(t))(c(Q)(Z(JSON.parse)))}function Xt(t){return{match:t[0],groups:u.map(c(A(v(void 0)))(fe),t.slice(1))}}function zt(t,e){var n=t.lastIndex,r=e();return t.lastIndex=n,r}function Jt(t){return function(e){return new RegExp(e,t)}}function $t(t){return t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}function Zt(t){return function(e){return zt(t,function(){return t.test(e)})}}function Qt(t){return function(e){return u.map(Xt,u.reject(v(null),fe(e.match(t))))}}function te(t){return function(e){return zt(t,function(){return bt(function(n){return u.map(function(t){return o(Xt(t))(null)},u.reject(v(null),fe(t.exec(e))))})([])})}}function ee(t){return function(e){var n=t.length;return e.slice(0,n)===t?fe(e.slice(n)):le}}function ne(t){return function(e){var n=e.length-t.length;return e.slice(n)===t?fe(e.slice(0,n)):le}}function re(t){var e=t.split(/\s+/),n=e.length;return e.slice(""===e[0]?1:0,""===e[n-1]?n-1:n)}function ie(t){return""===t?[]:t.replace(/\r\n?/g,"\n").match(/^(?=[\s\S]).*/gm)}function oe(t){return t.reduce(function(t,e){return t+e+"\n"},"")}function ae(t){return function(e){return zt(t,function(){for(var n,r=[],i=0;null!=(n=t.exec(e));)if(t.lastIndex===i&&""===n[0]){if(t.lastIndex===e.length)return r;t.lastIndex+=1}else r.push(e.slice(i,n.index)),i=n.index+n[0].length;return r.push(e.slice(i)),r})}}if("undefined"!=typeof __doctest){var ue=(__doctest.require("sanctuary-descending"),__doctest.require("./test/internal/List").Nil,__doctest.require("./test/internal/List").Cons,__doctest.require("./test/internal/Sum"));(function(e){var n=e.create({checkTypes:!0,env:e.env.concat([__doctest.require("./test/internal/List").Type(t.Unknown),ue.Type])});n.env=e.env})(n(180))}var se=e.Left,ce=e.Right,le=i.Nothing,fe=i.Just,pe=t.TypeVariable("a"),de=t.TypeVariable("b"),he=t.TypeVariable("c"),ye=t.TypeVariable("d"),me=t.TypeVariable("e"),ve=t.TypeVariable("g"),ge=t.TypeVariable("r"),be=t.UnaryTypeVariable("f"),_e=t.UnaryTypeVariable("m"),we=t.UnaryTypeVariable("t"),Oe=t.UnaryTypeVariable("w"),Ae=t.BinaryTypeVariable("p"),Se=t.BinaryTypeVariable("s"),Te=t.UnaryType("TypeRep")("https://github.com/fantasyland/fantasy-land#type-representatives")([])(F(!0))(F([])),Ee=t.RecordType({checkTypes:t.Boolean,env:t.Array(t.Any)}),ke={};ke.create={consts:{},types:[Ee,t.Object],impl:y},ke.type={consts:{},types:[t.Any,t.RecordType({namespace:t.Maybe(t.String),name:t.String,version:t.NonNegativeInteger})],impl:m},ke.show={consts:{},types:[t.Any,t.String],impl:a},ke.equals={consts:{a:[u.Setoid]},types:[pe,pe,t.Boolean],impl:v},ke.lt={consts:{a:[u.Ord]},types:[pe,pe,t.Boolean],impl:g},ke.lte={consts:{a:[u.Ord]},types:[pe,pe,t.Boolean],impl:b},ke.gt={consts:{a:[u.Ord]},types:[pe,pe,t.Boolean],impl:_},ke.gte={consts:{a:[u.Ord]},types:[pe,pe,t.Boolean],impl:w},ke.min={consts:{a:[u.Ord]},types:[pe,pe,pe],impl:M(u.min)},ke.max={consts:{a:[u.Ord]},types:[pe,pe,pe],impl:M(u.max)},ke.clamp={consts:{a:[u.Ord]},types:[pe,pe,pe,pe],impl:I(u.clamp)},ke.id={consts:{c:[u.Category]},types:[Te(he),he],impl:u.id},ke.concat={consts:{a:[u.Semigroup]},types:[pe,pe,pe],impl:M(u.concat)},ke.empty={consts:{a:[u.Monoid]},types:[Te(pe),pe],impl:u.empty},ke.invert={consts:{g:[u.Group]},types:[ve,ve],impl:u.invert},ke.filter={consts:{f:[u.Filterable]},types:[t.Predicate(pe),be(pe),be(pe)],impl:O},ke.reject={consts:{f:[u.Filterable]},types:[t.Predicate(pe),be(pe),be(pe)],impl:A},ke.map={consts:{f:[u.Functor]},types:[t.Fn(pe)(de),be(pe),be(de)],impl:S},ke.flip={consts:{f:[u.Functor]},types:[be(t.Fn(pe)(de)),pe,be(de)],impl:M(u.flip)},ke.bimap={consts:{p:[u.Bifunctor]},types:[t.Fn(pe)(de),t.Fn(he)(ye),Ae(pe)(he),Ae(de)(ye)],impl:I(u.bimap)},ke.mapLeft={consts:{p:[u.Bifunctor]},types:[t.Fn(pe)(de),Ae(pe)(he),Ae(de)(he)],impl:M(u.mapLeft)},ke.promap={consts:{p:[u.Profunctor]},types:[t.Fn(pe)(de),t.Fn(he)(ye),Ae(de)(he),Ae(pe)(ye)],impl:I(u.promap)},ke.alt={consts:{f:[u.Alt]},types:[be(pe),be(pe),be(pe)],impl:T},ke.zero={consts:{f:[u.Plus]},types:[Te(be(pe)),be(pe)],impl:u.zero},ke.reduce={consts:{f:[u.Foldable]},types:[t.Fn(pe)(t.Fn(de)(pe)),pe,be(de),pe],impl:E},ke.traverse={consts:{f:[u.Applicative],t:[u.Traversable]},types:[Te(be(de)),t.Fn(pe)(be(de)),we(pe),be(we(de))],impl:I(u.traverse)},ke.sequence={consts:{f:[u.Applicative],t:[u.Traversable]},types:[Te(be(pe)),we(be(pe)),be(we(pe))],impl:M(u.sequence)},ke.ap={consts:{f:[u.Apply]},types:[be(t.Fn(pe)(de)),be(pe),be(de)],impl:M(u.ap)},ke.lift2={consts:{f:[u.Apply]},types:[t.Fn(pe)(t.Fn(de)(he)),be(pe),be(de),be(he)],impl:I(u.lift2)},ke.lift3={consts:{f:[u.Apply]},types:[t.Fn(pe)(t.Fn(de)(t.Fn(he)(ye))),be(pe),be(de),be(he),be(ye)],impl:C(u.lift3)},ke.apFirst={consts:{f:[u.Apply]},types:[be(pe),be(de),be(pe)],impl:M(u.apFirst)},ke.apSecond={consts:{f:[u.Apply]},types:[be(pe),be(de),be(de)],impl:M(u.apSecond)},ke.of={consts:{f:[u.Applicative]},types:[Te(be(pe)),pe,be(pe)],impl:k},ke.chain={consts:{m:[u.Chain]},types:[t.Fn(pe)(_e(de)),_e(pe),_e(de)],impl:M(u.chain)},ke.join={consts:{m:[u.Chain]},types:[_e(_e(pe)),_e(pe)],impl:u.join},ke.chainRec={consts:{m:[u.ChainRec]},types:[Te(_e(de)),t.Fn(pe)(_e(t.Either(pe)(de))),pe,_e(de)],impl:x},ke.extend={consts:{w:[u.Extend]},types:[t.Fn(Oe(pe))(de),Oe(pe),Oe(de)],impl:M(u.extend)},ke.duplicate={consts:{w:[u.Extend]},types:[Oe(pe),Oe(Oe(pe))],impl:u.duplicate},ke.extract={consts:{w:[u.Comonad]},types:[Oe(pe),pe],impl:u.extract},ke.contramap={consts:{f:[u.Contravariant]},types:[t.Fn(de)(pe),be(pe),be(de)],impl:M(u.contramap)},ke.I={consts:{},types:[pe,pe],impl:N},ke.K={consts:{},types:[pe,de,pe],impl:F},ke.T={consts:{},types:[pe,t.Fn(pe)(de),de],impl:P},ke.curry2={consts:{},types:[t.Function([pe,de,he]),pe,de,he],impl:M},ke.curry3={consts:{},types:[t.Function([pe,de,he,ye]),pe,de,he,ye],impl:I},ke.curry4={consts:{},types:[t.Function([pe,de,he,ye,me]),pe,de,he,ye,me],impl:C},ke.curry5={consts:{},types:[t.Function([pe,de,he,ye,me,ge]),pe,de,he,ye,me,ge],impl:R},ke.compose={consts:{s:[u.Semigroupoid]},types:[Se(de)(he),Se(pe)(de),Se(pe)(he)],impl:M(u.compose)},ke.pipe={consts:{f:[u.Foldable]},types:[be(t.Fn(t.Any)(t.Any)),pe,de],impl:j},ke.pipeK={consts:{f:[u.Foldable],m:[u.Chain]},types:[be(t.Fn(t.Any)(_e(t.Any))),_e(pe),_e(de)],impl:D},ke.on={consts:{},types:[t.Fn(de)(t.Fn(de)(he)),t.Fn(pe)(de),pe,pe,he],impl:U},ke.Pair={consts:{},types:[pe,de,t.Pair(pe)(de)],impl:o},ke.pair={consts:{},types:[t.Fn(pe)(t.Fn(de)(he)),t.Pair(pe)(de),he],impl:q},ke.fst={consts:{},types:[t.Pair(pe)(de),pe],impl:q(F)},ke.snd={consts:{},types:[t.Pair(pe)(de),de],impl:q(l(F))},ke.swap={consts:{},types:[t.Pair(pe)(de),t.Pair(de)(pe)],impl:q(l(o))},ke.Just={consts:{},types:[pe,t.Maybe(pe)],impl:fe},ke.isNothing={consts:{},types:[t.Maybe(pe),t.Boolean],impl:H},ke.isJust={consts:{},types:[t.Maybe(pe),t.Boolean],impl:L},ke.fromMaybe={consts:{},types:[pe,t.Maybe(pe),pe],impl:l(W)(N)},ke.fromMaybe_={consts:{},types:[t.Thunk(pe),t.Maybe(pe),pe],impl:l(V)(N)},ke.maybeToNullable={consts:{},types:[t.Maybe(pe),t.Nullable(pe)],impl:B},ke.maybe={consts:{},types:[de,t.Fn(pe)(de),t.Maybe(pe),de],impl:W},ke.maybe_={consts:{},types:[t.Thunk(de),t.Fn(pe)(de),t.Maybe(pe),de],impl:V},ke.justs={consts:{f:[u.Filterable,u.Functor]},types:[be(t.Maybe(pe)),be(pe)],impl:Y},ke.mapMaybe={consts:{f:[u.Filterable,u.Functor]},types:[t.Fn(pe)(t.Maybe(de)),be(pe),be(de)],impl:c(c(Y))(S)},ke.maybeToEither={consts:{},types:[pe,t.Maybe(de),t.Either(pe)(de)],impl:K},ke.Left={consts:{},types:[pe,t.Either(pe)(de)],impl:se},ke.Right={consts:{},types:[de,t.Either(pe)(de)],impl:ce},ke.isLeft={consts:{},types:[t.Either(pe)(de),t.Boolean],impl:G},ke.isRight={consts:{},types:[t.Either(pe)(de),t.Boolean],impl:X},ke.fromEither={consts:{},types:[de,t.Either(pe)(de),de],impl:z},ke.either={consts:{},types:[t.Fn(pe)(he),t.Fn(de)(he),t.Either(pe)(de),he],impl:J},ke.lefts={consts:{f:[u.Filterable,u.Functor]},types:[be(t.Either(pe)(de)),be(pe)],impl:c(S(At("value")))(O(G))},ke.rights={consts:{f:[u.Filterable,u.Functor]},types:[be(t.Either(pe)(de)),be(de)],impl:c(S(At("value")))(O(X))},ke.tagBy={consts:{},types:[t.Predicate(pe),pe,t.Either(pe)(pe)],impl:$},ke.encase={consts:{},types:[function(e){return function(n){return function(r){var i=t.Fn(n)(r);return i.format=function(t,i){return t("Throwing "+a(e))+t(" ")+i("$1")(a(n))+t(" ")+i("$2")(a(r))},i}}}(me)(pe)(de),pe,t.Either(me)(de)],impl:Z},ke.eitherToMaybe={consts:{},types:[t.Either(pe)(de),t.Maybe(de)],impl:Q},ke.and={consts:{},types:[t.Boolean,t.Boolean,t.Boolean],impl:tt},ke.or={consts:{},types:[t.Boolean,t.Boolean,t.Boolean],impl:et},ke.not={consts:{},types:[t.Boolean,t.Boolean],impl:nt},ke.complement={consts:{},types:[t.Predicate(pe),pe,t.Boolean],impl:c(nt)},ke.boolean={consts:{},types:[pe,pe,t.Boolean,pe],impl:rt},ke.ifElse={consts:{},types:[t.Predicate(pe),t.Fn(pe)(de),t.Fn(pe)(de),pe,de],impl:it},ke.when={consts:{},types:[t.Predicate(pe),t.Fn(pe)(pe),pe,pe],impl:ot},ke.unless={consts:{},types:[t.Predicate(pe),t.Fn(pe)(pe),pe,pe],impl:at},ke.array={consts:{},types:[de,t.Fn(pe)(t.Fn(t.Array(pe))(de)),t.Array(pe),de],impl:ut},ke.head={consts:{f:[u.Foldable]},types:[be(pe),t.Maybe(pe)],impl:st},ke.last={consts:{f:[u.Foldable]},types:[be(pe),t.Maybe(pe)],impl:ct},ke.tail={consts:{f:[u.Applicative,u.Foldable,u.Monoid]},types:[be(pe),t.Maybe(be(pe))],impl:lt},ke.init={consts:{f:[u.Applicative,u.Foldable,u.Monoid]},types:[be(pe),t.Maybe(be(pe))],impl:ft};var xe=pt(function(t,e){return e.slice(0,t)},function(t,e,n){return t>0?u.append(n,e):e});ke.take={consts:{f:[u.Applicative,u.Foldable,u.Monoid]},types:[t.Integer,be(pe),t.Maybe(be(pe))],impl:xe};var Ne=pt(function(t,e){return e.slice(t)},function(t,e,n){return t>0?e:u.append(n,e)});ke.drop={consts:{f:[u.Applicative,u.Foldable,u.Monoid]},types:[t.Integer,be(pe),t.Maybe(be(pe))],impl:Ne},ke.takeLast={consts:{f:[u.Applicative,u.Foldable,u.Monoid]},types:[t.Integer,be(pe),t.Maybe(be(pe))],impl:dt},ke.dropLast={consts:{f:[u.Applicative,u.Foldable,u.Monoid]},types:[t.Integer,be(pe),t.Maybe(be(pe))],impl:ht},ke.takeWhile={consts:{},types:[t.Predicate(pe),t.Array(pe),t.Array(pe)],impl:yt},ke.dropWhile={consts:{},types:[t.Predicate(pe),t.Array(pe),t.Array(pe)],impl:mt},ke.size={consts:{f:[u.Foldable]},types:[be(pe),t.NonNegativeInteger],impl:u.size},ke.all={consts:{f:[u.Foldable]},types:[t.Predicate(pe),be(pe),t.Boolean],impl:M(u.all)},ke.any={consts:{f:[u.Foldable]},types:[t.Predicate(pe),be(pe),t.Boolean],impl:M(u.any)},ke.none={consts:{f:[u.Foldable]},types:[t.Predicate(pe),be(pe),t.Boolean],impl:M(u.none)},ke.append={consts:{f:[u.Applicative,u.Semigroup]},types:[pe,be(pe),be(pe)],impl:vt},ke.prepend={consts:{f:[u.Applicative,u.Semigroup]},types:[pe,be(pe),be(pe)],impl:M(u.prepend)},ke.joinWith={consts:{},types:[t.String,t.Array(t.String),t.String],impl:d("join")},ke.elem={consts:{a:[u.Setoid],f:[u.Foldable]},types:[pe,be(pe),t.Boolean],impl:M(u.elem)},ke.find={consts:{f:[u.Foldable]},types:[t.Predicate(pe),be(pe),t.Maybe(pe)],impl:gt},ke.intercalate={consts:{a:[u.Monoid],f:[u.Foldable]},types:[pe,be(pe),pe],impl:M(u.intercalate)},ke.foldMap={consts:{b:[u.Monoid],f:[u.Foldable]},types:[Te(de),t.Fn(pe)(de),be(pe),de],impl:I(u.foldMap)},ke.unfoldr={consts:{},types:[t.Fn(de)(t.Maybe(t.Pair(pe)(de))),de,t.Array(pe)],impl:bt},ke.range={consts:{},types:[t.Integer,t.Integer,t.Array(t.Integer)],impl:_t},ke.groupBy={consts:{},types:[t.Fn(pe)(t.Predicate(pe)),t.Array(pe),t.Array(t.Array(pe))],impl:wt},ke.reverse={consts:{f:[u.Applicative,u.Foldable,u.Monoid]},types:[be(pe),be(pe)],impl:u.reverse},ke.sort={consts:{a:[u.Ord],m:[u.Applicative,u.Foldable,u.Monoid]},types:[_e(pe),_e(pe)],impl:u.sort},ke.sortBy={consts:{b:[u.Ord],m:[u.Applicative,u.Foldable,u.Monoid]},types:[t.Fn(pe)(de),_e(pe),_e(pe)],impl:M(u.sortBy)},ke.zip={consts:{},types:[t.Array(pe),t.Array(de),t.Array(t.Pair(pe)(de))],impl:Ot(o)},ke.zipWith={consts:{},types:[t.Fn(pe)(t.Fn(de)(he)),t.Array(pe),t.Array(de),t.Array(he)],impl:Ot},ke.prop={consts:{},types:[t.String,pe,de],impl:At},ke.props={consts:{},types:[t.Array(t.String),pe,de],impl:St},ke.get={consts:{},types:[t.Predicate(t.Any),t.String,pe,t.Maybe(de)],impl:Tt},ke.gets={consts:{},types:[t.Predicate(t.Any),t.Array(t.String),pe,t.Maybe(de)],impl:Et},ke.value={consts:{},types:[t.String,t.StrMap(pe),t.Maybe(pe)],impl:kt},ke.singleton={consts:{},types:[t.String,pe,t.StrMap(pe)],impl:xt},ke.insert={consts:{},types:[t.String,pe,t.StrMap(pe),t.StrMap(pe)],impl:Nt},ke.remove={consts:{},types:[t.String,t.StrMap(pe),t.StrMap(pe)],impl:Ft},ke.keys={consts:{},types:[t.StrMap(pe),t.Array(t.String)],impl:Object.keys},ke.values={consts:{},types:[t.StrMap(pe),t.Array(pe)],impl:Pt},ke.pairs={consts:{},types:[t.StrMap(pe),t.Array(t.Pair(t.String)(pe))],impl:Mt},ke.fromPairs={consts:{f:[u.Foldable]},types:[be(t.Pair(t.String)(pe)),t.StrMap(pe)],impl:It},ke.negate={consts:{},types:[t.ValidNumber,t.ValidNumber],impl:Ct},ke.add={consts:{},types:[t.FiniteNumber,t.FiniteNumber,t.FiniteNumber],impl:Rt},ke.sum={consts:{f:[u.Foldable]},types:[be(t.FiniteNumber),t.FiniteNumber],impl:E(Rt)(0)},ke.sub={consts:{},types:[t.FiniteNumber,t.FiniteNumber,t.FiniteNumber],impl:jt},ke.mult={consts:{},types:[t.FiniteNumber,t.FiniteNumber,t.FiniteNumber],impl:Dt},ke.product={consts:{f:[u.Foldable]},types:[be(t.FiniteNumber),t.FiniteNumber],impl:E(Dt)(1)},ke.div={consts:{},types:[t.NonZeroFiniteNumber,t.FiniteNumber,t.FiniteNumber],impl:Ut},ke.pow={consts:{},types:[t.FiniteNumber,t.FiniteNumber,t.FiniteNumber],impl:qt},ke.mean={consts:{f:[u.Foldable]},types:[be(t.FiniteNumber),t.Maybe(t.FiniteNumber)],impl:Ht},ke.even={consts:{},types:[t.Integer,t.Boolean],impl:Lt},ke.odd={consts:{},types:[t.Integer,t.Boolean],impl:Bt},ke.parseDate={consts:{},types:[t.String,t.Maybe(t.ValidDate)],impl:Wt};var Fe=new RegExp("^\\s*[+-]?"+Vt(["Infinity","NaN",Vt(["[0-9]+","[0-9]+[.][0-9]+","[0-9]+[.]","[.][0-9]+"])+function(t){return Vt(t)+"?"}(["[Ee][+-]?[0-9]+"])])+"\\s*$");ke.parseFloat={consts:{},types:[t.String,t.Maybe(t.Number)],impl:Yt};var Pe=t.NullaryType("Radix")("")([t.Integer])(function(t){return t>=2&&t<=36});ke.parseInt={consts:{},types:[Pe,t.String,t.Maybe(t.Integer)],impl:Kt},ke.parseJson={consts:{},types:[t.Predicate(t.Any),t.String,t.Maybe(pe)],impl:Gt};var Me=t.RecordType({match:t.String,groups:t.Array(t.Maybe(t.String))});return ke.regex={consts:{},types:[t.RegexFlags,t.String,t.RegExp],impl:Jt},ke.regexEscape={consts:{},types:[t.String,t.String],impl:$t},ke.test={consts:{},types:[t.RegExp,t.String,t.Boolean],impl:Zt},ke.match={consts:{},types:[t.NonGlobalRegExp,t.String,t.Maybe(Me)],impl:Qt},ke.matchAll={consts:{},types:[t.GlobalRegExp,t.String,t.Array(Me)],impl:te},ke.toUpper={consts:{},types:[t.String,t.String],impl:p("toUpperCase")},ke.toLower={consts:{},types:[t.String,t.String],impl:p("toLowerCase")},ke.trim={consts:{},types:[t.String,t.String],impl:p("trim")},ke.stripPrefix={consts:{},types:[t.String,t.String,t.Maybe(t.String)],impl:ee},ke.stripSuffix={consts:{},types:[t.String,t.String,t.Maybe(t.String)],impl:ne},ke.words={consts:{},types:[t.String,t.Array(t.String)],impl:re},ke.unwords={consts:{},types:[t.Array(t.String),t.String],impl:d("join")(" ")},ke.lines={consts:{},types:[t.String,t.Array(t.String)],impl:ie},ke.unlines={consts:{},types:[t.Array(t.String),t.String],impl:oe},ke.splitOn={consts:{},types:[t.String,t.String,t.Array(t.String)],impl:d("split")},ke.splitOnRegex={consts:{},types:[t.GlobalRegExp,t.String,t.Array(t.String)],impl:ae},y({checkTypes:void 0===r||null==r||null==r.env||"production"!==r.env.NODE_ENV,env:t.env})})}).call(e,n(139))},181:function(t,e,n){(function(t){function r(t,n){var r={seen:[],stylize:o};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),h(n)?r.showHidden=n:n&&e._extend(r,n),_(r.showHidden)&&(r.showHidden=!1),_(r.depth)&&(r.depth=2),_(r.colors)&&(r.colors=!1),_(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=i),u(r,t,r.depth)}function i(t,e){var n=r.styles[e];return n?"["+r.colors[n][0]+"m"+t+"["+r.colors[n][1]+"m":t}function o(t,e){return t}function a(t){var e={};return t.forEach(function(t,n){e[t]=!0}),e}function u(t,n,r){if(t.customInspect&&n&&T(n.inspect)&&n.inspect!==e.inspect&&(!n.constructor||n.constructor.prototype!==n)){var i=n.inspect(r,t);return g(i)||(i=u(t,i,r)),i}var o=s(t,n);if(o)return o;var h=Object.keys(n),y=a(h);if(t.showHidden&&(h=Object.getOwnPropertyNames(n)),S(n)&&(h.indexOf("message")>=0||h.indexOf("description")>=0))return c(n);if(0===h.length){if(T(n)){var m=n.name?": "+n.name:"";return t.stylize("[Function"+m+"]","special")}if(w(n))return t.stylize(RegExp.prototype.toString.call(n),"regexp");if(A(n))return t.stylize(Date.prototype.toString.call(n),"date");if(S(n))return c(n)}var v="",b=!1,_=["{","}"];if(d(n)&&(b=!0,_=["[","]"]),T(n)){v=" [Function"+(n.name?": "+n.name:"")+"]"}if(w(n)&&(v=" "+RegExp.prototype.toString.call(n)),A(n)&&(v=" "+Date.prototype.toUTCString.call(n)),S(n)&&(v=" "+c(n)),0===h.length&&(!b||0==n.length))return _[0]+v+_[1];if(r<0)return w(n)?t.stylize(RegExp.prototype.toString.call(n),"regexp"):t.stylize("[Object]","special");t.seen.push(n);var O;return O=b?l(t,n,r,y,h):h.map(function(e){return f(t,n,r,y,e,b)}),t.seen.pop(),p(O,v,_)}function s(t,e){if(_(e))return t.stylize("undefined","undefined");if(g(e)){var n="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(n,"string")}return v(e)?t.stylize(""+e,"number"):h(e)?t.stylize(""+e,"boolean"):y(e)?t.stylize("null","null"):void 0}function c(t){return"["+Error.prototype.toString.call(t)+"]"}function l(t,e,n,r,i){for(var o=[],a=0,u=e.length;a<u;++a)F(e,String(a))?o.push(f(t,e,n,r,String(a),!0)):o.push("");return i.forEach(function(i){i.match(/^\d+$/)||o.push(f(t,e,n,r,i,!0))}),o}function f(t,e,n,r,i,o){var a,s,c;if(c=Object.getOwnPropertyDescriptor(e,i)||{value:e[i]},c.get?s=c.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):c.set&&(s=t.stylize("[Setter]","special")),F(r,i)||(a="["+i+"]"),s||(t.seen.indexOf(c.value)<0?(s=y(n)?u(t,c.value,null):u(t,c.value,n-1),s.indexOf("\n")>-1&&(s=o?s.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+s.split("\n").map(function(t){return"   "+t}).join("\n"))):s=t.stylize("[Circular]","special")),_(a)){if(o&&i.match(/^\d+$/))return s;a=JSON.stringify(""+i),a.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=t.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=t.stylize(a,"string"))}return a+": "+s}function p(t,e,n){var r=0;return t.reduce(function(t,e){return r++,e.indexOf("\n")>=0&&r++,t+e.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?n[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+n[1]:n[0]+e+" "+t.join(", ")+" "+n[1]}function d(t){return Array.isArray(t)}function h(t){return"boolean"==typeof t}function y(t){return null===t}function m(t){return null==t}function v(t){return"number"==typeof t}function g(t){return"string"==typeof t}function b(t){return"symbol"==typeof t}function _(t){return void 0===t}function w(t){return O(t)&&"[object RegExp]"===k(t)}function O(t){return"object"==typeof t&&null!==t}function A(t){return O(t)&&"[object Date]"===k(t)}function S(t){return O(t)&&("[object Error]"===k(t)||t instanceof Error)}function T(t){return"function"==typeof t}function E(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t}function k(t){return Object.prototype.toString.call(t)}function x(t){return t<10?"0"+t.toString(10):t.toString(10)}function N(){var t=new Date,e=[x(t.getHours()),x(t.getMinutes()),x(t.getSeconds())].join(":");return[t.getDate(),D[t.getMonth()],e].join(" ")}function F(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function P(t,e){if(!t){var n=new Error("Promise was rejected with a falsy value");n.reason=t,t=n}return e(t)}function M(e){function n(){for(var n=[],r=0;r<arguments.length;r++)n.push(arguments[r]);var i=n.pop();if("function"!=typeof i)throw new TypeError("The last argument must be of type Function");var o=this,a=function(){return i.apply(o,arguments)};e.apply(this,n).then(function(e){t.nextTick(a,null,e)},function(e){t.nextTick(P,e,a)})}if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');return Object.setPrototypeOf(n,Object.getPrototypeOf(e)),Object.defineProperties(n,I(e)),n}var I=Object.getOwnPropertyDescriptors||function(t){for(var e=Object.keys(t),n={},r=0;r<e.length;r++)n[e[r]]=Object.getOwnPropertyDescriptor(t,e[r]);return n},C=/%[sdj%]/g;e.format=function(t){if(!g(t)){for(var e=[],n=0;n<arguments.length;n++)e.push(r(arguments[n]));return e.join(" ")}for(var n=1,i=arguments,o=i.length,a=String(t).replace(C,function(t){if("%%"===t)return"%";if(n>=o)return t;switch(t){case"%s":return String(i[n++]);case"%d":return Number(i[n++]);case"%j":try{return JSON.stringify(i[n++])}catch(t){return"[Circular]"}default:return t}}),u=i[n];n<o;u=i[++n])y(u)||!O(u)?a+=" "+u:a+=" "+r(u);return a},e.deprecate=function(n,r){function i(){if(!o){if(t.throwDeprecation)throw new Error(r);t.traceDeprecation?console.trace(r):console.error(r),o=!0}return n.apply(this,arguments)}if(void 0!==t&&!0===t.noDeprecation)return n;if(void 0===t)return function(){return e.deprecate(n,r).apply(this,arguments)};var o=!1;return i};var R,j={};e.debuglog=function(n){if(_(R)&&(R=t.env.NODE_DEBUG||""),n=n.toUpperCase(),!j[n])if(new RegExp("\\b"+n+"\\b","i").test(R)){var r=t.pid;j[n]=function(){var t=e.format.apply(e,arguments);console.error("%s %d: %s",n,r,t)}}else j[n]=function(){};return j[n]},e.inspect=r,r.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},r.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},e.isArray=d,e.isBoolean=h,e.isNull=y,e.isNullOrUndefined=m,e.isNumber=v,e.isString=g,e.isSymbol=b,e.isUndefined=_,e.isRegExp=w,e.isObject=O,e.isDate=A,e.isError=S,e.isFunction=T,e.isPrimitive=E,e.isBuffer=n(1526);var D=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];e.log=function(){console.log("%s - %s",N(),e.format.apply(e,arguments))},e.inherits=n(1527),e._extend=function(t,e){if(!e||!O(e))return t;for(var n=Object.keys(e),r=n.length;r--;)t[n[r]]=e[n[r]];return t};var U="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;e.promisify=function(t){function e(){for(var e,n,r=new Promise(function(t,r){e=t,n=r}),i=[],o=0;o<arguments.length;o++)i.push(arguments[o]);i.push(function(t,r){t?n(t):e(r)});try{t.apply(this,i)}catch(t){n(t)}return r}if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');if(U&&t[U]){var e=t[U];if("function"!=typeof e)throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(e,U,{value:e,enumerable:!1,writable:!1,configurable:!0}),e}return Object.setPrototypeOf(e,Object.getPrototypeOf(t)),U&&Object.defineProperty(e,U,{value:e,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(e,I(t))},e.promisify.custom=U,e.callbackify=M}).call(e,n(139))},182:function(t,e,n){var r,i;!function(o){"use strict";var a={inspect:{}};"object"==typeof t&&"object"==typeof t.exports?t.exports=o(n(181),n(51),n(52)):null!=n(77)?(r=[n(51),n(52)],void 0!==(i=function(t,e){return o(a,t,e)}.apply(e,r))&&(t.exports=i)):self.sanctuaryEither=o(a,self.sanctuaryShow,self.sanctuaryTypeClasses)}(function(t,e,n){"use strict";function r(t){return{tag:r,value:t}}function i(t){return{tag:i,value:t}}function o(){return"Left ("+e(this.value)+")"}function a(){return"Right ("+e(this.value)+")"}function u(t){return t.isLeft&&n.equals(this.value,t.value)}function s(t){return t.isRight&&n.equals(this.value,t.value)}function c(t){return t.isRight||n.lte(this.value,t.value)}function l(t){return t.isRight&&n.lte(this.value,t.value)}function f(t){return t.isLeft?C(n.concat(this.value,t.value)):t}function p(t){return t.isRight?R(n.concat(this.value,t.value)):this}function d(t){return this}function h(t){return R(t(this.value))}function y(t,e){return C(t(this.value))}function m(t,e){return R(e(this.value))}function v(t){return t.isLeft?t:this}function g(t){return t.isLeft?t:R(t.value(this.value))}function b(t){return this}function _(t){return t(this.value)}function w(t){return t}function O(t){return this}function A(t,e){return e}function S(t,e){return t(e,this.value)}function T(t,e){return n.of(t,this)}function E(t,e){return n.map(R,e(this.value))}function k(t){return this}function x(t){return R(t(this))}if("undefined"!=typeof __doctest){var N=__doctest.require("sanctuary");__doctest.require("sanctuary-def"),__doctest.require("sanctuary-type-identifiers");N.bimap=N.unchecked.bimap,N.of=N.unchecked.of}var F={},P={constructor:F,isLeft:!0,isRight:!1,"@@type":"sanctuary-either/Either@1","@@show":o,"fantasy-land/map":d,"fantasy-land/bimap":y,"fantasy-land/ap":v,"fantasy-land/chain":b,"fantasy-land/alt":w,"fantasy-land/reduce":A,"fantasy-land/traverse":T,"fantasy-land/extend":k},M={constructor:F,isLeft:!1,isRight:!0,"@@type":"sanctuary-either/Either@1","@@show":a,"fantasy-land/map":h,"fantasy-land/bimap":m,"fantasy-land/ap":g,"fantasy-land/chain":_,"fantasy-land/alt":O,"fantasy-land/reduce":S,"fantasy-land/traverse":E,"fantasy-land/extend":x},I=t.inspect.custom;"symbol"==typeof I?(P[I]=o,M[I]=a):(P.inspect=o,M.inspect=a);var C=F.Left=function(t){var e=Object.create(P);return n.Setoid.test(t)&&(e["fantasy-land/equals"]=u,n.Ord.test(t)&&(e["fantasy-land/lte"]=c)),n.Semigroup.test(t)&&(e["fantasy-land/concat"]=f),e.value=t,e},R=F.Right=function(t){var e=Object.create(M);return n.Setoid.test(t)&&(e["fantasy-land/equals"]=s,n.Ord.test(t)&&(e["fantasy-land/lte"]=l)),n.Semigroup.test(t)&&(e["fantasy-land/concat"]=p),e.value=t,e};return F["fantasy-land/of"]=R,F["fantasy-land/chainRec"]=function(t,e){for(var n=r(e);n.tag===r;){var o=t(r,i,n.value);if(o.isLeft)return o;n=o.value}return R(n.value)},F})},285:function(t,e,n){"use strict";function r(t,e){return{x:(t-e)*o.tileWidth+o.centerX,y:(t+e)*o.tileHeight+o.centerY}}function i(t,e,n){var r=(e-n)*o.tileWidth,i=(e+n)*o.tileHeight/2;return{x:r+(t?350:900),y:i+(t?50:350)}}Object.defineProperty(e,"__esModule",{value:!0}),e.cartesianToIsometric=r,e.cartesianToIsometricBattle=i;var o=n(174)},286:function(t,e){function n(t,e,n){this.x=t,this.y=e,this.walkable=void 0===n||n}t.exports=n},287:function(t,e,n){function r(t){t=t||{},this.allowDiagonal=t.allowDiagonal,this.dontCrossCorners=t.dontCrossCorners,this.heuristic=t.heuristic||a.manhattan,this.weight=t.weight||1,this.diagonalMovement=t.diagonalMovement,this.diagonalMovement||(this.allowDiagonal?this.dontCrossCorners?this.diagonalMovement=u.OnlyWhenNoObstacles:this.diagonalMovement=u.IfAtMostOneObstacle:this.diagonalMovement=u.Never),this.diagonalMovement===u.Never?this.heuristic=t.heuristic||a.manhattan:this.heuristic=t.heuristic||a.octile}var i=n(178),o=n(89),a=n(130),u=n(33);r.prototype.findPath=function(t,e,n,r,a){var u,s,c,l,f,p,d,h,y=new i(function(t,e){return t.f-e.f}),m=a.getNodeAt(t,e),v=a.getNodeAt(n,r),g=this.heuristic,b=this.diagonalMovement,_=this.weight,w=Math.abs,O=Math.SQRT2;for(m.g=0,m.f=0,y.push(m),m.opened=!0;!y.empty();){if(u=y.pop(),u.closed=!0,u===v)return o.backtrace(v);for(s=a.getNeighbors(u,b),l=0,f=s.length;l<f;++l)c=s[l],c.closed||(p=c.x,d=c.y,h=u.g+(p-u.x==0||d-u.y==0?1:O),(!c.opened||h<c.g)&&(c.g=h,c.h=c.h||_*g(w(p-n),w(d-r)),c.f=c.g+c.h,c.parent=u,c.opened?y.updateItem(c):(y.push(c),c.opened=!0)))}return[]},t.exports=r},288:function(t,e,n){function r(t){t=t||{},this.allowDiagonal=t.allowDiagonal,this.dontCrossCorners=t.dontCrossCorners,this.diagonalMovement=t.diagonalMovement,this.heuristic=t.heuristic||a.manhattan,this.weight=t.weight||1,this.diagonalMovement||(this.allowDiagonal?this.dontCrossCorners?this.diagonalMovement=u.OnlyWhenNoObstacles:this.diagonalMovement=u.IfAtMostOneObstacle:this.diagonalMovement=u.Never),this.diagonalMovement===u.Never?this.heuristic=t.heuristic||a.manhattan:this.heuristic=t.heuristic||a.octile}var i=n(178),o=n(89),a=n(130),u=n(33);r.prototype.findPath=function(t,e,n,r,a){var u,s,c,l,f,p,d,h,y=function(t,e){return t.f-e.f},m=new i(y),v=new i(y),g=a.getNodeAt(t,e),b=a.getNodeAt(n,r),_=this.heuristic,w=this.diagonalMovement,O=this.weight,A=Math.abs,S=Math.SQRT2;for(g.g=0,g.f=0,m.push(g),g.opened=1,b.g=0,b.f=0,v.push(b),b.opened=2;!m.empty()&&!v.empty();){for(u=m.pop(),u.closed=!0,s=a.getNeighbors(u,w),l=0,f=s.length;l<f;++l)if(c=s[l],!c.closed){if(2===c.opened)return o.biBacktrace(u,c);p=c.x,d=c.y,h=u.g+(p-u.x==0||d-u.y==0?1:S),(!c.opened||h<c.g)&&(c.g=h,c.h=c.h||O*_(A(p-n),A(d-r)),c.f=c.g+c.h,c.parent=u,c.opened?m.updateItem(c):(m.push(c),c.opened=1))}for(u=v.pop(),u.closed=!0,s=a.getNeighbors(u,w),l=0,f=s.length;l<f;++l)if(c=s[l],!c.closed){if(1===c.opened)return o.biBacktrace(c,u);p=c.x,d=c.y,h=u.g+(p-u.x==0||d-u.y==0?1:S),(!c.opened||h<c.g)&&(c.g=h,c.h=c.h||O*_(A(p-t),A(d-e)),c.f=c.g+c.h,c.parent=u,c.opened?v.updateItem(c):(v.push(c),c.opened=2))}}return[]},t.exports=r},33:function(t,e){var n={Always:1,Never:2,IfAtMostOneObstacle:3,OnlyWhenNoObstacles:4};t.exports=n},40:function(t,e,n){"use strict";function r(t,e,n,r){var i,o,a={leader:n.leader,x:t,y:e,id:n.id},u=Object.values(r).find(function(n){return n.x===t&&n.y===e});if(u){var c=s(s({},u),{x:n.x,y:n.y});return{members:s(s({},r),(i={},i[n.id]=a,i[u.id]=c,i)),updatedUnits:[{id:n.id,x:t,y:e},{id:u.id,x:n.x,y:n.y}]}}return{members:s(s({},r),(o={},o[n.id]=a,o)),updatedUnits:[{id:n.id,x:t,y:e}]}}Object.defineProperty(e,"__esModule",{value:!0}),e.equipItem=e.createSquad=e.removeUnitFromSquad=e.changeSquadMemberPosition=e.addUnitToSquad=e.unitsWithoutSquad=e.disbandSquad=e.saveSquadUnit=e.saveUnit=e.saveSquad=e.saveItems=e.saveUnits=e.saveSquads=e.getUnit=e.getItemTypes=e.getItemList=e.getItem=e.getItems=e.getUnits=e.getSquadLeader=e.getSquadMember=e.getSquadMembers=e.getSquad=e.getSquads=void 0;var i=n(1484),o=n(572),a=n(175),u=n(76),s=function(){return s=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},s.apply(this,arguments)},c=function(t){return JSON.parse(localStorage.getItem(t)||"{}")},l=function(t,e){return localStorage.setItem(t,JSON.stringify(e))},f=function(){return c("squads")};e.getSquads=f;var p=function(t){var e=Object.values(f()).find(function(e){return e.id===t});if(!e)throw new Error(u.INVALID_STATE);return e};e.getSquad=p;var d=function(t){var e=p(t);return Object.values(e.members).map(function(t){return w(t.id)}).filter(function(t){return t})};e.getSquadMembers=d;var h=function(t){var e=w(t);if(!e||!e.squad)throw new Error(u.INVALID_STATE);var n=p(e.squad);return Object.values(n.members).find(function(e){return e.id===t})};e.getSquadMember=h;var y=function(t){var e=d(t),n=e.find(function(e){return e.id===t});if(!n)throw new Error(u.INVALID_STATE);return n};e.getSquadLeader=y;var m=function(){return c("units")};e.getUnits=m;var v=function(){return c("items")};e.getItems=v;var g=function(t){var e=v()[t];if(!e)throw new Error(u.INVALID_STATE);return e};e.getItem=g;var b=function(){return Object.values(v())};e.getItemList=b;var _=function(){return o.itemTypeSlots};e.getItemTypes=_;var w=function(t){var e=m()[t];if(!e)throw new Error(u.INVALID_STATE);return e};e.getUnit=w;var O=function(t){return l("squads",t)};e.saveSquads=O;var A=function(t){return l("units",t)};e.saveUnits=A;var S=function(t){return l("items",t)};e.saveItems=S;var T=function(t){var e,n=f();O(s(s({},n),(e={},e[t.id]=t,e)))};e.saveSquad=T;var E=function(t){var e,n=m();A(s(s({},n),(e={},e[t.id]=t,e)))};e.saveUnit=E;var k=function(t){var e,n,r,i=t.squadId,o=t.unitId,a=t.x,u=t.y;console.log("save squad unit",i,o,a,u);var c=f(),l=c[i];O(s(s({},c),(e={},e[i]=s(s({},l),{members:s(s({},l.members),(n={},n[o]={id:o,x:a,y:u,leader:!0===(null===(r=l.members[o])||void 0===r?void 0:r.leader)},n))}),e)))};e.saveSquadUnit=k;var x=function(t){var e=f(),n=e[t];Object.values(n.members).forEach(function(t){return M(t.id,n)});var r=(0,a.removeIdFromMap)(t,e);O(r)};e.disbandSquad=x;var N=function(){return(0,i.unitsWithoutSquadSelector)(m())};e.unitsWithoutSquad=N;var F=function(t,e,n,r){var i,o=e.members,a={leader:0===Object.keys(o).length,x:n,y:r,id:t.id};console.log("NEW ENTRY",a);var c=Object.values(o).find(function(t){return t.x===n&&t.y===r});if(c){console.log("REMOVE EXISTING");var l=Object.values(o).filter(function(t){return t.id!==c.id}),f=l.concat([a]).reduce(function(t,e){var n;return s(s({},t),(n={},n[e.id]=e,n))},{}),p=s(s({},e),{members:f}),d=w(c.id);if(!d)throw new Error(u.INVALID_STATE);return E(s(s({},d),{squad:null})),E(s(s({},t),{squad:e.id})),T(p),p}var f=s(s({},o),(i={},i[t.id]=a,i)),p=s(s({},e),{members:f,name:a.leader?t.name:e.name});return E(s(s({},t),{squad:e.id})),T(p),p};e.addUnitToSquad=F;var P=function(t,e,n,i){console.log("change position",t,e,n,i);var o=e.members,a=r(n,i,t,o);console.log("ujpdated board",a);var u=s(s({},e),{members:a.members});return console.log("will save updatedSquad",u),T(u),console.log("will return",a),a};e.changeSquadMemberPosition=P;var M=function(t,e){var n=w(t);if(!n)throw new Error("ERROR: tried to save unit with invalid ID");var r=s(s({},n),{squad:null}),i=e.members,o=(0,a.removeIdFromMap)(t,i),u=s(s({},e),{members:o});E(r),T(u)};e.removeUnitFromSquad=M;var I=function(t){var e,n,r=f(),i=r.length.toString(),o={id:i,name:t.name,emblem:"Emoji",members:(e={},e[t.id]={id:t.id,leader:!0,x:2,y:2},e)},a=s(s({},r),(n={},n[i]=o,n)),u=s(s({},t),{squad:i}),c=function(t){O(a),E(u);var e=m();console.log(e,a),t({units:e,squads:a})};return new Promise(c)};e.createSquad=I;var C=function(t,e){var n,r=w(e),i=g(t);if(!r)throw new Error("An invalid unit id was supplied to equipItem");if(!i)throw new Error("An invalid item id was supplied to equipItem");var o=_()[i.type],a=s(s({},r),{equips:s(s({},r.equips),(n={},n[o]=i.id,n))});E(a)};e.equipItem=C},51:function(t,e,n){var r,i,o;!function(a){"use strict";"object"==typeof t&&"object"==typeof t.exports?t.exports=a():null!=n(77)?(i=[],r=a,void 0!==(o="function"==typeof r?r.apply(e,i):r)&&(t.exports=o)):self.sanctuaryShow=a()}(function(){"use strict";function t(t){return function(e){return n(e)+": "+n(t[e])}}function e(t){return Object.keys(t).sort()}function n(o){if(i.indexOf(o)>=0)return"<Circular>";switch(Object.prototype.toString.call(o)){case"[object Boolean]":return"object"==typeof o?"new Boolean ("+n(o.valueOf())+")":o.toString();case"[object Number]":return"object"==typeof o?"new Number ("+n(o.valueOf())+")":1/o==-1/0?"-0":o.toString(10);case"[object String]":return"object"==typeof o?"new String ("+n(o.valueOf())+")":JSON.stringify(o);case"[object Date]":return"new Date ("+n(isNaN(o.valueOf())?NaN:o.toISOString())+")";case"[object Error]":return"new "+o.name+" ("+n(o.message)+")";case"[object Arguments]":return"function () { return arguments; } ("+Array.prototype.map.call(o,n).join(", ")+")";case"[object Array]":i.push(o);try{return"["+o.map(n).concat(e(o).filter(function(t){return!/^\d+$/.test(t)}).map(t(o))).join(", ")+"]"}finally{i.pop()}case"[object Object]":i.push(o);try{return r in o&&(null==o.constructor||o.constructor.prototype!==o)?o[r]():"{"+e(o).map(t(o)).join(", ")+"}"}finally{i.pop()}case"[object Set]":i.push(o);try{return"new Set ("+n(Array.from(o.values()))+")"}finally{i.pop()}case"[object Map]":i.push(o);try{return"new Map ("+n(Array.from(o.entries()))+")"}finally{i.pop()}default:return String(o)}}var r="@@show",i=[];return n})},52:function(t,e,n){var r,i,o;!function(a){"use strict";"object"==typeof t&&"object"==typeof t.exports?t.exports=a(n(104)):null!=n(77)?(i=[n(104)],r=a,void 0!==(o="function"==typeof r?r.apply(e,i):r)&&(t.exports=o)):self.sanctuaryTypeClasses=a(self.sanctuaryTypeIdentifiers)}(function(t){"use strict";function e(t){return function(e){return t.concat(e)}}function n(t){return function(e){return t}}function r(t,e){Object.keys(t).forEach(e,t)}function i(t,e){return Object.prototype.hasOwnProperty.call(e,t)}function o(t){return t}function a(t){return function(e){return[t,e]}}function u(e,n){return typeof e==typeof n&&t(e)===t(n)}function s(t){return Object.keys(t).sort()}function c(t){return function(e){return e(t)}}function l(t){return function(e){return t(e)}}function f(t){return{value:t,done:!1}}function p(t){return{value:t,done:!0}}function d(t,e,n,r){if(!(this instanceof d))return new d(t,e,n,r);this.name=t,this.url=e,this.test=function(t){return n.every(function(e){return e.test(t)})&&r(t)}}function h(t,e,n){for(var r=n,o=0;o<e.length;o+=1){var a=e[o];if(null==r||!t&&!i(a,r))return null;r=r[a]}return"function"==typeof r?r:null}function y(t,e){return h(!0,t,e)}function m(t){return h(!1,t,Be)}function v(e,n,r){function i(e){var n="fantasy-land/"+e;return r[e]===de?function(t){var e=y([n],t);return null==e&&"function"==typeof t?m([ye(t),n]):e}:function(e){var r=null!=e&&null!=e.constructor&&e.constructor.prototype===e,i=null;return r||(i=y([n],e)),null==i&&(i=m([t(e),"prototype",n])),i&&i.bind(e)}}var o=Object.keys(r),a=d("sanctuary-type-classes/"+e,"https://github.com/sanctuary-js/sanctuary-type-classes/tree/v12.1.0#"+e,n,function(t){return o.every(function(e){var n=r[e]===de?t.constructor:t;return null!=i(e)(n)})});return a.methods=o.reduce(function(t,e){return t[e]=i(e),t},{}),a}function g(t){return!0}function b(t){return!0}function _(t){return!0}function w(t){return!0}function O(t){return"object"==typeof this?We(this.valueOf(),t.valueOf()):this===t}function A(t){return"object"==typeof this?Ve(this.valueOf(),t.valueOf()):!1===this||!0===t}function S(t){return"object"==typeof this?We(this.valueOf(),t.valueOf()):isNaN(this)&&isNaN(t)||this===t}function T(t){return"object"==typeof this?Ve(this.valueOf(),t.valueOf()):isNaN(this)||this<=t}function E(t){return We(this.valueOf(),t.valueOf())}function k(t){return Ve(this.valueOf(),t.valueOf())}function x(t){return t.source===this.source&&t.global===this.global&&t.ignoreCase===this.ignoreCase&&t.multiline===this.multiline&&t.sticky===this.sticky&&t.unicode===this.unicode}function N(){return""}function F(t){return"object"==typeof this?We(this.valueOf(),t.valueOf()):this===t}function P(t){return"object"==typeof this?Ve(this.valueOf(),t.valueOf()):this<=t}function M(t){return this+t}function I(){return[]}function C(t){return[t]}function R(t,e){for(var n=[],r={},i={head:e,tail:r};i!==r;){for(var o=r,a=t(f,p,i.head),u=0;u<a.length;u+=1){var s=a[u];s.done?n.push(s.value):o={head:s.value,tail:o}}for(i=i.tail;o!==r;)i={head:o.head,tail:i},o=o.tail}return n}function j(){return[]}function D(t){if(t.length!==this.length)return!1;for(var e=0;e<this.length;e+=1)if(!We(this[e],t[e]))return!1;return!0}function U(t){for(var e=0;!0;e+=1){if(e===this.length)return!0;if(e===t.length)return!1;if(!We(this[e],t[e]))return Ve(this[e],t[e])}}function q(t){return this.concat(t)}function H(t){return this.filter(function(e){return t(e)})}function L(t){return this.map(function(e){return t(e)})}function B(t){for(var e=[],n=0;n<t.length;n+=1)for(var r=0;r<this.length;r+=1)e.push(t[n](this[r]));return e}function W(t){for(var e=[],n=0;n<this.length;n+=1)for(var r=0,i=t(this[n]);r<i.length;r+=1)e.push(i[r]);return e}function V(t,e){for(var n=e,r=0;r<this.length;r+=1)n=t(n,this[r]);return n}function Y(t,n){function r(o,u){switch(u){case 0:return Ht(t,[]);case 2:return jt(a,n(i[o]),n(i[o+1]));default:var s=2*Math.floor(u/4);return jt(e,r(o,s),r(o+s,u-s))}}var i=this;return this.length%2==1?jt(e,Ft(C,n(this[0])),r(1,this.length-1)):r(0,this.length)}function K(t){return this.map(function(e,n,r){return t(r.slice(n))})}function G(t){return D.call(this,t)}function X(t){return U.call(this,t)}function z(t){return We(this.name,t.name)&&We(this.message,t.message)}function J(){return{}}function $(){return{}}function Z(t){var e=this,n=s(this);return We(n,s(t))&&n.every(function(n){return We(e[n],t[n])})}function Q(t){for(var e=s(this),n=s(t);;){if(0===e.length)return!0;if(0===n.length)return!1;var r=e.shift(),i=n.shift();if(r<i)return!0;if(r>i)return!1;if(!We(this[r],t[r]))return Ve(this[r],t[r])}}function tt(t){function e(t){n[t]=this[t]}var n={};return r(this,e),r(t,e),n}function et(t){var e={};return r(this,function(n){t(this[n])&&(e[n]=this[n])}),e}function nt(t){var e={};return r(this,function(n){e[n]=t(this[n])}),e}function rt(t){var e={};return r(this,function(n){i(n,t)&&(e[n]=t[n](this[n]))}),e}function it(t,e){function n(e,n){return t(e,r[n])}var r=this;return s(this).reduce(n,e)}function ot(t,e){var n=this;return Object.keys(this).reduce(function(t,r){function i(t){return function(e){var n={};return n[r]=e,tt.call(t,n)}}return jt(i,t,e(n[r]))},Ht(t,{}))}function at(){return o}function ut(t){return function(e){return t}}function st(t,e){return function(n){for(var r=f(e);!r.done;)r=t(f,p,r.value)(n);return r.value}}function ct(t){return t===this}function lt(t){var e=this;return function(n){return t(e(n))}}function ft(t){var e=this;return function(n){return t(e(n))}}function pt(t,e){var n=this;return function(r){return e(n(t(r)))}}function dt(t){var e=this;return function(n){return t(n)(e(n))}}function ht(t){var e=this;return function(n){return t(e(n))(n)}}function yt(t){var e=this;return function(n){return t(function(t){return e(Tt(n,t))})}}function mt(t){var e=this;return function(n){return e(t(n))}}function vt(t,e){return u(t,e)&&!Ve(e,t)}function gt(t,e){return vt(e,t)}function bt(t,e){return Ve(e,t)}function _t(t,e){return Ve(t,e)?t:e}function wt(t,e){return Ve(t,e)?e:t}function Ot(t,e,n){return wt(t,_t(e,n))}function At(t,e){return ge.methods.compose(e)(t)}function St(t){return be.methods.id(t)()}function Tt(t,e){return _e.methods.concat(t)(e)}function Et(t){return we.methods.empty(t)()}function kt(t){return Oe.methods.invert(t)()}function xt(t,e){return Ae.methods.filter(e)(t)}function Nt(t,e){return xt(function(e){return!t(e)},e)}function Ft(t,e){return Se.methods.map(e)(t)}function Pt(t,e){return Se.methods.map(t)(c(e))}function Mt(t,e,n){return Te.methods.bimap(n)(t,e)}function It(t,e){return Mt(t,o,e)}function Ct(t,e,n){return Ee.methods.promap(n)(t,e)}function Rt(t,e){return ke.methods.ap(e)(t)}function jt(t,e,n){return Rt(Ft(t,e),n)}function Dt(t,e,n,r){return Rt(Rt(Ft(t,e),n),r)}function Ut(t,e){return jt(n,t,e)}function qt(t,e){return jt(n(o),t,e)}function Ht(t,e){return xe.methods.of(t)(e)}function Lt(t,e){return Tt(e,Ht(e.constructor,t))}function Bt(t,e){return Tt(Ht(e.constructor,t),e)}function Wt(t,e){return Ne.methods.chain(e)(t)}function Vt(t){return Wt(o,t)}function Yt(t,e,n){return Fe.methods.chainRec(t)(e,n)}function Kt(t,e){return Me.methods.alt(t)(e)}function Gt(t){return Ie.methods.zero(t)()}function Xt(t,e,n){return Re.methods.reduce(n)(t,e)}function zt(t){return Array.isArray(t)?t.length:Xt(function(t,e){return t+1},0,t)}function Jt(t,e){return Array.isArray(e)?e.every(l(t)):Xt(function(e,n){return e&&t(n)},!0,e)}function $t(t,e){return Array.isArray(e)?e.some(l(t)):Xt(function(e,n){return e||t(n)},!1,e)}function Zt(t,e){return!$t(t,e)}function Qt(t,e){return $t(function(e){return We(t,e)},e)}function te(t,e){return Xt(function(e,n){return{empty:!1,value:Tt(e.value,e.empty?n:Tt(t,n))}},{empty:!0,value:Et(t.constructor)},e).value}function ee(t,e,n){return Xt(function(t,n){return Tt(t,e(n))},Et(t),n)}function ne(t){if(Array.isArray(t))return t.slice().reverse();var e=t.constructor;return Xt(function(t,n){return Tt(Ht(e,n),t)},Et(e),t)}function re(t){return ie(o,t)}function ie(t,e){var n=Xt(function(e,n){return e.push({idx:e.length,x:n,fx:t(n)}),e},[],e),r=function(t){switch(typeof(t&&t.fx)){case"number":return function(t,e){return t<=e||t!==t};case"string":return function(t,e){return t<=e};default:return Ve}}(n[0]);if(n.sort(function(t,e){return r(t.fx,e.fx)?r(e.fx,t.fx)?t.idx-e.idx:-1:1}),Array.isArray(e)){for(var i=0;i<n.length;i+=1)n[i]=n[i].x;return n}var o=e.constructor,a=Et(o);for(i=0;i<n.length;i+=1)a=Tt(a,Ht(o,n[i].x));return a}function oe(t,e,n){return je.methods.traverse(n)(t,e)}function ae(t,e){return oe(t,o,e)}function ue(t,e){return De.methods.extend(e)(t)}function se(t){return ue(o,t)}function ce(t){return Ue.methods.extract(t)()}function le(t,e){return qe.methods.contramap(e)(t)}if("undefined"!=typeof __doctest){var fe=(__doctest.require("sanctuary-identity"),__doctest.require("./test/List")),pe=__doctest.require("sanctuary-maybe");__doctest.require("sanctuary-pair"),__doctest.require("./test/Sum"),fe.Nil,fe.Cons,pe.Nothing,pe.Just}d.prototype["@@type"]="sanctuary-type-classes/TypeClass@1";var de="Constructor",he="Value",ye=i("name",function(){})?function(t){return t.name}:function(t){var e=/function (\w*)/.exec(t);return null==e?"":e[1]},me=v("Setoid",[],{equals:he}),ve=v("Ord",[me],{lte:he}),ge=v("Semigroupoid",[],{compose:he}),be=v("Category",[ge],{id:de}),_e=v("Semigroup",[],{concat:he}),we=v("Monoid",[_e],{empty:de}),Oe=v("Group",[we],{invert:he}),Ae=v("Filterable",[],{filter:he}),Se=v("Functor",[],{map:he}),Te=v("Bifunctor",[Se],{bimap:he}),Ee=v("Profunctor",[Se],{promap:he}),ke=v("Apply",[Se],{ap:he}),xe=v("Applicative",[ke],{of:de}),Ne=v("Chain",[ke],{chain:he}),Fe=v("ChainRec",[Ne],{chainRec:de}),Pe=v("Monad",[xe,Ne],{}),Me=v("Alt",[Se],{alt:he}),Ie=v("Plus",[Me],{zero:de}),Ce=v("Alternative",[xe,Ie],{}),Re=v("Foldable",[],{reduce:he}),je=v("Traversable",[Se,Re],{traverse:he}),De=v("Extend",[Se],{extend:he}),Ue=v("Comonad",[De],{extract:he}),qe=v("Contravariant",[],{contramap:he}),He=q,Le=tt,Be={Null:{prototype:{"fantasy-land/equals":g,"fantasy-land/lte":b}},Undefined:{prototype:{"fantasy-land/equals":_,"fantasy-land/lte":w}},Boolean:{prototype:{"fantasy-land/equals":O,"fantasy-land/lte":A}},Number:{prototype:{"fantasy-land/equals":S,"fantasy-land/lte":T}},Date:{prototype:{"fantasy-land/equals":E,"fantasy-land/lte":k}},RegExp:{prototype:{"fantasy-land/equals":x}},String:{"fantasy-land/empty":N,prototype:{"fantasy-land/equals":F,"fantasy-land/lte":P,"fantasy-land/concat":M}},Array:{"fantasy-land/empty":I,"fantasy-land/of":C,"fantasy-land/chainRec":R,"fantasy-land/zero":j,prototype:{"fantasy-land/equals":D,"fantasy-land/lte":U,"fantasy-land/concat":q,"fantasy-land/filter":H,"fantasy-land/map":L,"fantasy-land/ap":B,"fantasy-land/chain":W,"fantasy-land/alt":He,"fantasy-land/reduce":V,"fantasy-land/traverse":Y,"fantasy-land/extend":K}},Arguments:{prototype:{"fantasy-land/equals":G,"fantasy-land/lte":X}},Error:{prototype:{"fantasy-land/equals":z}},Object:{"fantasy-land/empty":J,"fantasy-land/zero":$,prototype:{"fantasy-land/equals":Z,"fantasy-land/lte":Q,"fantasy-land/concat":tt,"fantasy-land/filter":et,"fantasy-land/map":nt,"fantasy-land/ap":rt,"fantasy-land/alt":Le,"fantasy-land/reduce":it,"fantasy-land/traverse":ot}},Function:{"fantasy-land/id":at,"fantasy-land/of":ut,"fantasy-land/chainRec":st,prototype:{"fantasy-land/equals":ct,"fantasy-land/compose":lt,"fantasy-land/map":ft,"fantasy-land/promap":pt,"fantasy-land/ap":dt,"fantasy-land/chain":ht,"fantasy-land/extend":yt,"fantasy-land/contramap":mt}}},We=function(){var t=[];return function(e,n){if(!u(e,n))return!1;if(t.some(function(t){return t[0]===e&&t[1]===n}))return!0;t.push([e,n]);try{return me.test(e)&&me.test(n)&&me.methods.equals(e)(n)}finally{t.pop()}}}(),Ve=function(){var t=[];return function(e,n){if(!u(e,n))return!1;if(t.some(function(t){return t[0]===e&&t[1]===n}))return We(e,n);t.push([e,n]);try{return ve.test(e)&&ve.test(n)&&ve.methods.lte(e)(n)}finally{t.pop()}}}();return{TypeClass:d,Setoid:me,Ord:ve,Semigroupoid:ge,Category:be,Semigroup:_e,Monoid:we,Group:Oe,Filterable:Ae,Functor:Se,Bifunctor:Te,Profunctor:Ee,Apply:ke,Applicative:xe,Chain:Ne,ChainRec:Fe,Monad:Pe,Alt:Me,Plus:Ie,Alternative:Ce,Foldable:Re,Traversable:je,Extend:De,Comonad:Ue,Contravariant:qe,equals:We,lt:vt,lte:Ve,gt:gt,gte:bt,min:_t,max:wt,clamp:Ot,compose:At,id:St,concat:Tt,empty:Et,invert:kt,filter:xt,reject:Nt,map:Ft,flip:Pt,bimap:Mt,mapLeft:It,promap:Ct,ap:Rt,lift2:jt,lift3:Dt,apFirst:Ut,apSecond:qt,of:Ht,append:Lt,prepend:Bt,chain:Wt,join:Vt,chainRec:Yt,alt:Kt,zero:Gt,reduce:Xt,size:zt,all:Jt,any:$t,none:Zt,elem:Qt,intercalate:te,foldMap:ee,reverse:ne,sort:re,sortBy:ie,traverse:oe,sequence:ae,extend:ue,duplicate:se,extract:ce,contramap:le}})},572:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.itemTypeSlots=e.modifiers=void 0;var r={str:0,agi:0,dex:0,vit:0,int:0,wis:0,atk:0,def:0,m_atk:0,m_def:0,res_fire:0,res_water:0,res_earth:0,res_wind:0,res_light:0,res_shadow:0};e.modifiers=r;var i={accessory:"ornament",sword:"mainHand",axe:"mainHand",robe:"chest",light_armor:"chest",shield:"offHand",staff:"mainHand"};e.itemTypeSlots=i},573:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.initialMapState=e.tileMap=e.CPU_FORCE=e.PLAYER_FORCE=void 0;var r,i;e.PLAYER_FORCE="PLAYER_FORCE";e.CPU_FORCE="CPU_FORCE";var o={0:"grass",1:"woods",2:"mountain"};e.tileMap=o;var a={cells:[[0,1,0,0,0,0,0,0,2,2,2,2,2],[0,1,0,0,0,0,0,0,0,0,0,0,1],[0,1,0,0,0,0,0,2,2,2,0,0,1],[0,0,0,0,0,0,0,2,1,2,0,0,1],[0,1,0,0,0,0,0,2,2,2,0,0,1],[1,1,1,1,1,0,0,0,0,0,0,1,1]],units:[{id:"0",pos:{x:0,y:0},range:5,status:"alive",validSteps:[],enemiesInRange:[],force:"PLAYER_FORCE"},{id:"1",pos:{x:3,y:2},range:5,validSteps:[],enemiesInRange:[],status:"alive",force:"PLAYER_FORCE"},{id:"2",pos:{x:0,y:3},range:5,validSteps:[],enemiesInRange:[],status:"alive",force:"CPU_FORCE"},{id:"3",pos:{x:3,y:1},range:5,validSteps:[],enemiesInRange:[],status:"alive",force:"CPU_FORCE"}],forces:[{id:"PLAYER_FORCE",name:"Player",units:["0","1"],relations:(r={},r.CPU_FORCE="hostile",r)},{id:"CPU_FORCE",name:"CPU",units:["2","3"],relations:(i={},i.CPU_FORCE="hostile",i)}],cities:[{id:"a1",name:"Arabella",x:1,y:1,force:"PLAYER_FORCE",type:"town"},{id:"m1",name:"Marqueze",x:3,y:1,force:"CPU_FORCE",type:"town"}]};e.initialMapState=a},574:function(t,e,n){"use strict";function r(t,e){return t+e}Object.defineProperty(e,"__esModule",{value:!0}),e.sum=r,e.random=void 0;var i=function(t,e){return Math.floor(Math.random()*(e-t+1)+t)};e.random=i},575:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=function(t){return function(e,n,r){return t.tweens.add({targets:e,y:e?e.y+n:0,yoyo:!0,duration:r,repeat:-1})}};e.default=r},576:function(t,e,n){(function(r){var i,o;!function(r){"use strict";var a={inspect:{}};"object"==typeof t&&"object"==typeof t.exports?t.exports=r(n(181),n(182),n(51),n(52),n(104)):null!=n(77)?(i=[n(182),n(51),n(52),n(104)],void 0!==(o=function(t,e,n,i){return r(a,t,e,n,i)}.apply(e,i))&&(t.exports=o)):self.sanctuaryDef=r(a,self.sanctuaryEither,self.sanctuaryShow,self.sanctuaryTypeClasses,self.sanctuaryTypeIdentifiers)}(function(t,e,n,i,o){"use strict";function a(t){return function(e){return function(n){return t(e(n))}}}function u(t){return t}function s(t){return function(e){return t}}function c(t){return function(){return t}}function l(t){return function(e,n){return t}}function f(t){return function(e){return!t(e)}}function p(t){return function(e){return i.filter(t,e)}}function d(t){return t.slice(0,-1)}function h(t){return 0===i.size(t)}function y(t){return function(e){if(t.length>e.length)return!1;for(var n=0;n<t.length;n+=1)if(t[n]!==e[n])return!1;return!0}}function m(t,e){return e.join(t)}function v(t){return t[t.length-1]}function g(t){return function(e){return t.some(function(t){return i.equals(t,e)})}}function b(t,e){return h(t)?e:t}function _(t){return function(e){return e[t]}}function w(t){return function(e){return i.size(e)===t}}function O(t,e){return m(t,Array(e+1))}function A(t){return function(e){return O(t,e.length)}}function S(t){return Object.keys(t).sort()}function T(t){return Array.isArray(t)?t:i.reduce(function(t,e){return t.push(e),t},[],t)}function E(t,e,n,r){return h(r)?t:i.reduce(function(t,e){return t+"  - "+n(e)+"\n"},e,r)}function k(t){return t.replace(/[ ]+$/gm,"")}function x(t){return function(e){return function(n){return t?e(n):n}}}function N(t){return function(e){return function(n){return t+n+e}}}function F(t){return N(t("("))(t(")"))}function P(t){return t.name.slice(t.name.indexOf("/")+1)}function M(t){return function(e){return function n(r){return r.supertypes.every(n)&&r._test(t)(e)}}}function I(t,e,r,o,u,s,c,l){var f=Object.create(Kt);return f._test=c,f._extractors=l.reduce(function(t,e){return t[e[0]]=e[1],t},{}),f.arity=o,f.extractors=i.map(a(T),f._extractors),f.format=u||function(t,r){return i.reduce(function(e,i){return e+t(" ")+x(i[2].arity>0)(F(t))(r(i[0])(n(i[2])))},t(e),l)},f.keys=l.map(function(t){return t[0]}),f.name=e,f.supertypes=s,f.type=t,f.types=l.reduce(function(t,e){return t[e[0]]=e[2],t},{}),f.url=r,f}function C(t){return function(e){return e.arity>=t}}function R(t){return function(e){return o(e)===t}}function j(t){return function(e){return typeof e===t}}function D(t){return"https://github.com/sanctuary-js/sanctuary-def/tree/v0.21.1#"+t}function U(t){return function(e){return q([t,e])}}function q(t){function e(t,e){return x(2!==r.length)(F(t))(m(t(", "),i.map(function(r){return x(r[2].type===Xt)(F(t))(e(r[0])(n(r[2])))},d(r))))+t(" -> ")+e(v(r)[0])(n(v(r)[2]))}var r=i.reduce(function(t,e){return t.push(["$"+n(t.length+1),s([]),e]),t},[],t);return I(Xt,"","",t.length,e,[le],s(s(!0)),r)}function H(t){return 0!==t}function L(t){return t>=0}function B(t){return t>0}function W(t){return t<0}function V(t){return et(t)("")([])(s(!0))}function Y(t){return(t<an.length?an[t]:n(t))+" "+(1===t?"argument":"arguments")}function K(t){return function(e){return function(n){return function(r){return function(i){return i.type===te?G(t,e,r(n)):[i]}}}}}function G(t,e,n){function r(n,r){var a;if("object"==typeof r&&null!=r||"function"==typeof r){if(e.indexOf(r)>=0)return[];a=i.concat(e,[r])}else a=e;var u=o(a)(r);return i.chain(function(e){return e.validate(t)(r).isLeft?[]:e.type===Qt?i.map(rt(e),u(e.extractors.$1)(e.types.$1)):e.type===Gt?i.lift2(ot(e),u(e.extractors.$1)(e.types.$1),u(e.extractors.$2)(e.types.$2)):[e]},n)}var o=K(t);return h(n)?[ue]:b(i.reduce(r,t,n),[ne])}function X(t){return t.type===Qt?X(t.types.$1):t.type===Gt?X(t.types.$1)&&X(t.types.$2):t.type!==zt}function z(t,e){return i.filter(X,G(t,[],e))}function J(t,e){return i.reject(function(t){return t.type===zt},G(t,[],e))}function $(t,e,n,r,o,u){var s={};for(var c in e){var l=e[c],f={types:l.types.slice(),valuesByPath:{}};for(var d in l.valuesByPath)f.valuesByPath[d]=l.valuesByPath[d].slice();s[c]=f}qt.call(s,n.name)||(s[n.name]={types:i.filter(C(n.arity),t),valuesByPath:{}});var h=JSON.stringify(i.concat([r],o));qt.call(s[n.name].valuesByPath,h)||(s[n.name].valuesByPath[h]=[]);var y=tt(t),m=a(a(a(p(X))))(K(t)([]));return u.forEach(function(t){var e=m(t);s[n.name].valuesByPath[h].push(t),s[n.name].types=i.chain(function(r){return y(r)(t)?0===n.arity&&r.type===Qt?i.map(rt(r),e(r.extractors.$1)(r.types.$1)):0===n.arity&&r.type===Gt?i.lift2(ot(r),e(r.extractors.$1)(r.types.$1),e(r.extractors.$2)(r.types.$2)):[r]:[]},s[n.name].types)}),s}function Z(t,e){var n=i.map(JSON.parse,S(e));return At(t,s(s(Vt)),function(t){return function(r){return function(o){return function(o){var a=i.concat([t],o);return function(t){if(n.some(y(a))){var i=JSON.stringify(a);if(!qt.call(e,i))return t;if(!h(e[i]))return r(t)}return Vt(t)}}}}})}function Q(t,e,n,r,o,a,u){for(var s=Q,c=0;c<u.length;c+=1){var l=r.validate(t)(u[c]);if(l.isLeft)return Bt(function(){return Nt(t,e,o,i.concat(a,l.value.propPath),l.value.value)})}switch(r.type){case ee:var f=r.name,p=e.constraints;if(qt.call(p,f)){var d=p[f];for(c=0;c<u.length;c+=1)for(var y=0;y<d.length;y+=1)if(!d[y].test(u[c]))return Bt(function(){return kt(t,e,d[y],o,a,u[c],n)})}var m=$(t,n,r,o,a,u),v=m[f].types;return h(v)?Bt(function(){return xt(t,e,o,a,m[f].valuesByPath)}):i.reduce(function(n,c){return i.chain(function(n){var l=c.arity-r.arity;return r.keys.reduce(function(n,f,p){var d=c.extractors[c.keys[l+p]];return i.reduce(function(n,u){return i.chain(function(n){return s(t,e,n.typeVarMap,r.types[f],o,i.concat(a,[f]),[u])},n)},n,i.chain(d,u))},Wt(n))},n)},Wt({typeVarMap:m,types:v}),v);case Qt:return i.map(function(t){return{typeVarMap:t.typeVarMap,types:i.map(rt(r),b(t.types,[r.types.$1]))}},s(t,e,n,r.types.$1,o,i.concat(a,["$1"]),i.chain(r.extractors.$1,u)));case Gt:return i.chain(function(n){var c=n.types;return i.map(function(t){var e=t.types;return{typeVarMap:t.typeVarMap,types:i.lift2(ot(r),b(c,[r.types.$1]),b(e,[r.types.$2]))}},s(t,e,n.typeVarMap,r.types.$2,o,i.concat(a,["$2"]),i.chain(r.extractors.$2,u)))},s(t,e,n,r.types.$1,o,i.concat(a,["$1"]),i.chain(r.extractors.$1,u)));case Zt:return i.reduce(function(n,c){return i.chain(function(n){return s(t,e,n.typeVarMap,r.types[c],o,i.concat(a,[c]),i.chain(r.extractors[c],u))},n)},Wt({typeVarMap:n,types:[r]}),r.keys);default:return Wt({typeVarMap:n,types:[r]})}}function tt(t){return function(e){return function(n){return Q(t,{name:"name",constraints:{},types:[e]},{},e,0,[],[n]).isRight}}}function et(t){return function(e){return function(n){return function(r){return I($t,t,e,0,null,n,s(r),[])}}}}function nt(t){return function(e){return function(n){return function(r){return function(i){return function(o){return I(Qt,t,e,1,null,n,s(r),[["$1",i,o]])}}}}}}function rt(t){return nt(t.name)(t.url)(t.supertypes)(t._test([]))(t._extractors.$1)}function it(t){return function(e){return function(n){return function(r){return function(i){return function(o){return function(a){return function(u){return I(Gt,t,e,2,null,n,s(r),[["$1",i,a],["$2",o,u]])}}}}}}}}function ot(t){return it(t.name)(t.url)(t.supertypes)(t._test([]))(t._extractors.$1)(t._extractors.$2)}function at(t){return function(e){return a(et(t)(e)([]))(g)}}function ut(t){function e(e,r){if(h(o))return e("{}");var a=i.map(function(i){var o=t[i];return e(" ")+e(/^(?!\d)[$\w]+$/.test(i)?i:n(i))+e(" :: ")+r(i)(n(o))},o);return N(e("{"))(e(" }"))(m(e(","),a))}function r(t){return function(t){if(null==t)return!1;var e={};o.forEach(function(t){e[t]=t});for(var n in t)delete e[n];return h(e)}}var o=S(t),a=o.map(function(e){return[e,function(t){return[t[e]]},t[e]]});return I(Zt,"","",0,e,[],r,a)}function st(t){return function(e){return function(n){return function(r){function i(e,n){return e(t)}function o(t){var e=M(t);return function(t){if(null==t)return!1;var n={};a.forEach(function(t){n[t]=t});for(var i in t)delete n[i];return h(n)&&a.every(function(n){return e(t[n])(r[n])})}}var a=S(r),u=a.map(function(t){return[t,function(e){return[e[t]]},r[t]]});return I(Zt,t,e,0,i,n,o,u)}}}}function ct(t){var e=C(t);return function(t){var n=M(t);return function(r){var i=n(r);return t.some(function(t){return e(t)&&i(t)})}}}function lt(t){var e=[],n=ct(e.length);return I(ee,t,"",0,l(t),[],n,e)}function ft(t){return function(e){var n=[["$1",s([]),e]],r=ct(n.length);return I(ee,t,"",1,null,[],r,n)}}function pt(t){return function(e){return function(n){var r=[["$1",s([]),e],["$2",s([]),n]],i=ct(r.length);return I(ee,t,"",2,null,[],i,r)}}}function dt(t){return q([t])}function ht(t){return U(t)(me)}function yt(t,e,r,i){return new TypeError(k(Yt(t.name)+" applied to the wrong number of arguments\n\n"+At(t,s(s(Vt)),function(t){return function(n){return s(s(t===e?n:Vt))}})+"\nExpected "+Y(r)+" but received "+Y(i.length)+E(".\n",":\n\n",n,i)))}function mt(t,e,n){var r=[];return S(t).forEach(function(e){var i=n(e);t[e].forEach(function(t){r.push(i(t)(P(t)+" "+e))})}),x(r.length>0)(N("")(e(" => ")))(x(r.length>1)(F(e))(m(e(", "),r)))}function vt(t){return function(e){var n=e.length-t.length;return O(" ",Math.floor(n/2))+t+O(" ",Math.ceil(n/2))}}function gt(t){return i.concat(t.type===ee?[t.name]:[],i.chain(function(e){return gt(t.types[e])},t.keys))}function bt(t){var e=i.chain(gt,t);return function(t){var r="a".charCodeAt(0);return x(t.type===Xt)(F(u))(n(t).replace(/\bUnknown\b/g,function(){do{var t=String.fromCharCode(r++)}while(e.indexOf(t)>=0);return t}))}}function _t(t,e,r,o){var a=bt(e.types);return n(o)+")  "+m("\n    ",i.map(function(e){return n(e)+" :: "+m(", ",b(i.map(a,J(t,[e])),["(no types)"]))},r))}function wt(t){return t.name+" :: "+mt(t.constraints,u,s(s(u)))+m(" -> ",i.map(bt(t.types),t.types))}function Ot(t,e,n){return n(t)(e)(t.format(Vt,function(r){return s(Ot(t.types[r],i.concat(e,[r]),n))}))}function At(t,e,r){var i=t.types.reduce(function(t,e,i){var o=a(x(e.type===Xt)(F(Vt)))(a(function(t){return Ot(e,[],t)})(r(i)));return t.carets.push(o(A("^"))),t.numbers.push(o(function(e){return vt(n(t.counter+=1))(e)})),t},{carets:[],numbers:[],counter:0});return wt(t)+"\n"+Vt(t.name+" :: ")+mt(t.constraints,Vt,e)+m(Vt(" -> "),i.carets)+"\n"+Vt(t.name+" :: ")+mt(t.constraints,Vt,s(s(Vt)))+m(Vt(" -> "),i.numbers)+"\n"}function St(t,e){return i.reduce(function(t,e){return t.types[e]},t,e)}function Tt(t){return function(e){return function(n){return function(r){return function(r){var o=i.concat([e],r),a=y(o)(t),s=y(t)(o);return a&&s?n:a?u:Vt}}}}}function Et(t,e){return null==e.url||""===e.url?"":"\nSee "+e.url+" for information about the "+e.name+" "+t+".\n"}function kt(t,e,n,r,o,a,u){var s=St(e.types[r],o);return new TypeError(k("Type-class constraint violation\n\n"+At(e,function(t){return function(e){return t===s.name&&e.name===n.name?A("^"):Vt}},Tt(i.concat([r],o)))+"\n"+_t(t,e,[a],1)+"\n\n"+Yt(e.name)+" requires "+Yt(s.name)+" to satisfy the "+P(n)+" type-class constraint; the value at position 1 does not.\n"+Et("type class",n)))}function xt(t,e,n,r,o){var a=JSON.stringify(i.concat([n],r)),u=o[a],s=i.filter(function(e){var n=o[e];return e===a||h(z(t,i.concat(u,n)))},S(o)),c=Z(e,i.reduce(function(t,e){return t[e]=o[e],t},{},s));return new TypeError(k("Type-variable constraint violation\n\n"+c+"\n"+i.reduce(function(n,r){var i=o[r];return h(i)?n:{idx:n.idx+1,s:n.s+_t(t,e,i,n.idx+1)+"\n\n"}},{idx:0,s:""},s).s+"Since there is no type of which all the above values are members, the type-variable constraint has been violated.\n"))}function Nt(t,e,r,o,a){var u=St(e.types[r],o),c=At(e,s(s(Vt)),Tt(i.concat([r],o)));return new TypeError(k(u.type===ee&&h(J(t,[a]))?"Unrecognized value\n\n"+c+"\n"+_t(t,e,[a],1)+"\n\n"+E("The environment is empty! Polymorphic functions require a non-empty environment.\n","The value at position 1 is not a member of any type in the environment.\n\nThe environment contains the following types:\n\n",bt(e.types),t):"Invalid value\n\n"+c+"\n"+_t(t,e,[a],1)+"\n\nThe value at position 1 is not a member of "+Yt(n(u))+".\n"+Et(C(1)(u)?"type constructor":"type",u)))}function Ft(t,e,r,i){return new TypeError(k(Yt(t.name)+" applied "+Yt(n(t.types[e]))+" to the wrong number of arguments\n\n"+At(t,s(s(Vt)),function(t){return function(n){return function(r){return function(i){return function(i){return t===e?r.format(Vt,function(t){return"$1"===t?n:Vt}):Vt(i)}}}}})+"\nExpected "+Y(r)+" but received "+Y(i.length)+E(".\n",":\n\n",n,i)))}function Pt(t){if(t.isLeft)throw t.value();return t.value}function Mt(t,e,n){function r(n,r,o){function a(n,r,o,a){var s=[o],c=u.types[o];return c.type===ee?i.chain(function(n){return h(n[c.name].types)?Bt(function(){return xt(t,e,r,s,n[c.name].valuesByPath)}):Wt(n)},Wt($(t,n,c,r,s,[a]))):i.map(function(t){return t.typeVarMap},Q(t,e,n,c,r,s,[a]))}var u=e.types[r];if(u.type!==Xt)return o;var s=n;return function(t){if(arguments.length!==u.arity-1)throw Ft(e,r,u.arity-1,Ut.call(arguments));var n=arguments;s=Pt(d(u.keys).reduce(function(t,e,o){var u=n[o];return i.chain(function(t){return a(t,r,e,u)},t)},Wt(s)));var c=o.apply(this,arguments),l=v(u.keys);return s=Pt(a(s,r,l,c)),c}}function o(u,s,c){return function(l){var f=Ut.call(arguments);if(1!==f.length)throw yt(e,c,1,f);var p=Pt(Q(t,e,u,e.types[c],c,[],f)).typeVarMap,d=i.concat(s,f);if(c+1===a){var h=d.reduce(function(t,e,n){return t(r(p,n,e))},n);return p=Pt(Q(t,e,p,e.types[a],a,[],[h])).typeVarMap,r(p,a,h)}return o(p,d,c+1)}}var a=e.types.length-1,u=e.types[0].type===Jt?function(){if(0!==arguments.length)throw yt(e,0,0,Ut.call(arguments));var i=n();return r(Pt(Q(t,e,{},e.types[a],a,[],[i])).typeVarMap,a,i)}:o({},[],0);return u[Lt]=u.toString=c(wt(e)),u}function It(t){function e(e){return function(n){return function(r){return function(o){return t.checkTypes?Mt(t.env,{name:e,constraints:n,types:1===r.length?i.concat([re],r):r},o):o}}}}return e(e.name)({})(un)(e)}function Ct(t){var e=t(ue);return sn(e.name)({})([tn,tn])(rt(e))}function Rt(t){var e=t(ue)(ue);return sn(e.name)({})([tn,tn,tn])(ot(e))}var jt=Math.pow(2,53)-1,Dt=-jt,Ut=Array.prototype.slice,qt=Object.prototype.hasOwnProperty,Ht=Object.prototype.toString,Lt="symbol"==typeof t.inspect.custom?t.inspect.custom:"inspect",Bt=e.Left,Wt=e.Right,Vt=A(" "),Yt=N("‘")("’"),Kt={"@@type":"sanctuary-def/Type@1","@@show":function(){return this.format(u,s(u))},validate:function(t){var e=M(t),n=this;return function(r){if(!e(r)(n))return Bt({value:r,propPath:[]});for(var o=0;o<n.keys.length;o+=1)for(var a=n.keys[o],u=n.types[a],s=n.extractors[a](r),c=0;c<s.length;c+=1){var l=u.validate(t)(s[c]);if(l.isLeft)return Bt({value:l.value.value,propPath:i.concat([a],l.value.propPath)})}return Wt(r)}},"fantasy-land/equals":function(t){return i.equals(this.type,t.type)&&i.equals(this.name,t.name)&&i.equals(this.url,t.url)&&i.equals(this.supertypes,t.supertypes)&&i.equals(this.keys,t.keys)&&i.equals(this.types,t.types)}},Gt="BINARY",Xt="FUNCTION",zt="INCONSISTENT",Jt="NO_ARGUMENTS",$t="NULLARY",Zt="RECORD",Qt="UNARY",te="UNKNOWN",ee="VARIABLE",ne=I(zt,"","",0,l("???"),[],s(s(!1)),[]),re=I(Jt,"","",0,l("()"),[],s(s(!0)),[]),ie=i.ap(et,D),oe=i.ap(nt,D),ae=i.ap(it,D),ue=I(te,"","",0,l("Unknown"),[],s(s(!0)),[]),se=ie("Void")([])(s(!1)),ce=ie("Any")([])(s(!0)),le=ie("Function")([])(j("function")),fe=ie("Arguments")([])(R("Arguments")),pe=oe("Array")([])(R("Array"))(u),de=ie("Array0")([pe(ue)])(w(0)),he=oe("Array1")([pe(ue)])(w(1))(u),ye=ae("Array2")([pe(ue)])(w(2))(function(t){return[t[0]]})(function(t){return[t[1]]}),me=ie("Boolean")([])(j("boolean")),ve=ie("Date")([])(R("Date")),ge=ie("ValidDate")([ve])(a(f(isNaN))(Number)),be=oe("Descending")([])(R("sanctuary-descending/Descending@1"))(u),_e=ae("Either")([])(R("sanctuary-either/Either@1"))(function(t){return t.isLeft?[t.value]:[]})(function(t){return t.isLeft?[]:[t.value]}),we=ie("Error")([])(R("Error")),Oe=ie("HtmlElement")([])(function(t){return/^\[object HTML.+Element\]$/.test(Ht.call(t))}),Ae=oe("Identity")([])(R("sanctuary-identity/Identity@1"))(u),Se=ae("JsMap")([])(function(t){return"[object Map]"===Ht.call(t)})(function(t){return Array.from(t.keys())})(function(t){return Array.from(t.values())}),Te=oe("JsSet")([])(function(t){return"[object Set]"===Ht.call(t)})(function(t){return Array.from(t.values())}),Ee=oe("Maybe")([])(R("sanctuary-maybe/Maybe@1"))(u),ke=ie("Module")([])(function(t){return"[object Module]"===Ht.call(t)}),xe=oe("NonEmpty")([])(function(t){return i.Monoid.test(t)&&i.Setoid.test(t)&&!i.equals(t,i.empty(t.constructor))})(function(t){return[t]}),Ne=ie("Null")([])(R("Null")),Fe=oe("Nullable")([])(s(!0))(function(t){return null===t?[]:[t]}),Pe=ie("Number")([])(j("number")),Me=ie("PositiveNumber")([Pe])(B),Ie=ie("NegativeNumber")([Pe])(W),Ce=ie("ValidNumber")([Pe])(f(isNaN)),Re=ie("NonZeroValidNumber")([Ce])(H),je=ie("FiniteNumber")([Ce])(isFinite),De=ie("NonZeroFiniteNumber")([je])(H),Ue=ie("PositiveFiniteNumber")([je])(B),qe=ie("NegativeFiniteNumber")([je])(W),He=ie("Integer")([Ce])(function(t){return Math.floor(t)===t&&t>=Dt&&t<=jt}),Le=ie("NonZeroInteger")([He])(H),Be=ie("NonNegativeInteger")([He])(L),We=ie("PositiveInteger")([He])(B),Ve=ie("NegativeInteger")([He])(W),Ye=ie("Object")([])(R("Object")),Ke=ae("Pair")([])(R("sanctuary-pair/Pair@1"))(function(t){return[t.fst]})(function(t){return[t.snd]}),Ge=ie("RegExp")([])(R("RegExp")),Xe=ie("GlobalRegExp")([Ge])(_("global")),ze=ie("NonGlobalRegExp")([Ge])(f(_("global"))),Je=oe("StrMap")([Ye])(s(!0))(u),$e=ie("String")([])(j("string")),Ze=ie("RegexFlags")([$e])(function(t){return/^g?i?m?$/.test(t)}),Qe=ie("Symbol")([])(j("symbol")),tn=ie("Type")([])(R("sanctuary-def/Type@1")),en=ie("TypeClass")([])(R("sanctuary-type-classes/TypeClass@1")),nn=ie("Undefined")([])(R("Undefined")),rn=[le,fe,pe(ue),ye(ue)(ue),me,ve,be(ue),_e(ue)(ue),we,U(ue)(ue),Oe,Ae(ue),Se(ue)(ue),Te(ue),Ee(ue),ke,Ne,Pe,Ye,Ke(ue)(ue),Ge,Je(ue),$e,Qe,tn,en,nn],on=void 0!==r&&null!=r&&null!=r.env&&"production"===r.env.NODE_ENV,an=["zero","one","two","three","four","five","six","seven","eight","nine"],un=[$e,Je(pe(en)),xe(pe(tn)),le,le],sn=It({checkTypes:!on,env:rn});return{Any:ce,AnyFunction:le,Arguments:fe,Array:Ct(pe),Array0:de,Array1:Ct(he),Array2:Rt(ye),Boolean:me,Date:ve,ValidDate:ge,Descending:Ct(be),Either:Rt(_e),Error:we,Fn:sn("Fn")({})([tn,tn,tn])(U),Function:sn("Function")({})([xe(pe(tn)),tn])(q),HtmlElement:Oe,Identity:Ct(Ae),JsMap:Rt(Se),JsSet:Ct(Te),Maybe:Ct(Ee),Module:ke,NonEmpty:xe,Null:Ne,Nullable:Ct(Fe),Number:Pe,PositiveNumber:Me,NegativeNumber:Ie,ValidNumber:Ce,NonZeroValidNumber:Re,FiniteNumber:je,NonZeroFiniteNumber:De,PositiveFiniteNumber:Ue,NegativeFiniteNumber:qe,Integer:He,NonZeroInteger:Le,NonNegativeInteger:Be,PositiveInteger:We,NegativeInteger:Ve,Object:Ye,Pair:Rt(Ke),RegExp:Ge,GlobalRegExp:Xe,NonGlobalRegExp:ze,RegexFlags:Ze,StrMap:Ct(Je),String:$e,Symbol:Qe,Type:tn,TypeClass:en,Undefined:nn,Unknown:ue,Void:se,env:rn,create:sn("create")({})([ut({checkTypes:me,env:pe(tn)}),V(m(" -> ",i.map(n,un)))])(It),test:sn("test")({})([pe(tn),tn,ce,me])(tt),NullaryType:sn("NullaryType")({})([$e,$e,pe(tn),V("(Any -> Boolean)"),tn])(et),UnaryType:sn("UnaryType")({f:[i.Foldable]})([$e,$e,pe(tn),V("(Any -> Boolean)"),V("(t a -> f a)"),V("Type -> Type")])(function(t){return a(a(a(a(sn(t)({})([tn,tn])))))(nt(t))}),BinaryType:sn("BinaryType")({f:[i.Foldable]})([$e,$e,pe(tn),V("(Any -> Boolean)"),V("(t a b -> f a)"),V("(t a b -> f b)"),V("Type -> Type -> Type")])(function(t){return a(a(a(a(a(sn(t)({})([tn,tn,tn]))))))(it(t))}),EnumType:sn("EnumType")({})([$e,$e,pe(ce),tn])(at),RecordType:sn("RecordType")({})([Je(tn),tn])(ut),NamedRecordType:sn("NamedRecordType")({})([xe($e),$e,pe(tn),Je(tn),tn])(st),TypeVariable:sn("TypeVariable")({})([$e,tn])(lt),UnaryTypeVariable:sn("UnaryTypeVariable")({})([$e,V("Type -> Type")])(function(t){return sn(t)({})([tn,tn])(ft(t))}),BinaryTypeVariable:sn("BinaryTypeVariable")({})([$e,V("Type -> Type -> Type")])(function(t){return sn(t)({})([tn,tn,tn])(pt(t))}),Thunk:sn("Thunk")({})([tn,tn])(dt),Predicate:sn("Predicate")({})([tn,tn])(ht)}})}).call(e,n(139))},577:function(t,e,n){var r,i;!function(o){"use strict";var a={inspect:{}};"object"==typeof t&&"object"==typeof t.exports?t.exports=o(n(181),n(51),n(52)):null!=n(77)?(r=[n(51),n(52)],void 0!==(i=function(t,e){return o(a,t,e)}.apply(e,r))&&(t.exports=i)):self.sanctuaryMaybe=o(a,self.sanctuaryShow,self.sanctuaryTypeClasses)}(function(t,e,n){"use strict";function r(t){return{tag:r,value:t}}function i(t){return{tag:i,value:t}}function o(){return"Nothing"}function a(){return"Just ("+e(this.value)+")"}function u(t){return t.isNothing}function s(t){return t.isJust&&n.equals(this.value,t.value)}function c(t){return!0}function l(t){return t.isJust&&n.lte(this.value,t.value)}function f(t){return t}function p(t){return t.isJust?R(n.concat(this.value,t.value)):this}function d(t){return this}function h(t){return t(this.value)?this:C}function y(t){return this}function m(t){return R(t(this.value))}function v(t){return this}function g(t){return t.isJust?R(t.value(this.value)):t}function b(t){return this}function _(t){return t(this.value)}function w(t){return t}function O(t){return this}function A(t,e){return e}function S(t,e){return t(e,this.value)}function T(t,e){return n.of(t,this)}function E(t,e){return n.map(R,e(this.value))}function k(t){return this}function x(t){return R(t(this))}if("undefined"!=typeof __doctest){var N=__doctest.require("sanctuary");__doctest.require("sanctuary-def"),__doctest.require("sanctuary-type-identifiers");N.empty=N.unchecked.empty,N.of=N.unchecked.of,N.zero=N.unchecked.zero}var F={},P={constructor:F,isNothing:!0,isJust:!1,"@@type":"sanctuary-maybe/Maybe@1","@@show":o,"fantasy-land/equals":u,"fantasy-land/lte":c,"fantasy-land/concat":f,"fantasy-land/filter":d,"fantasy-land/map":y,"fantasy-land/ap":v,"fantasy-land/chain":b,"fantasy-land/alt":w,"fantasy-land/reduce":A,"fantasy-land/traverse":T,"fantasy-land/extend":k},M={constructor:F,isNothing:!1,isJust:!0,"@@type":"sanctuary-maybe/Maybe@1","@@show":a,"fantasy-land/filter":h,"fantasy-land/map":m,"fantasy-land/ap":g,"fantasy-land/chain":_,"fantasy-land/alt":O,"fantasy-land/reduce":S,"fantasy-land/traverse":E,"fantasy-land/extend":x},I=t.inspect.custom;"symbol"==typeof I?(P[I]=o,M[I]=a):(P.inspect=o,M.inspect=a);var C=F.Nothing=Object.create(P),R=F.Just=function(t){var e=Object.create(M);return n.Setoid.test(t)&&(e["fantasy-land/equals"]=s,n.Ord.test(t)&&(e["fantasy-land/lte"]=l)),n.Semigroup.test(t)&&(e["fantasy-land/concat"]=p),e.value=t,e};return F["fantasy-land/empty"]=function(){return C},F["fantasy-land/of"]=R,F["fantasy-land/chainRec"]=function(t,e){for(var n=r(e);n.tag===r;){var o=t(r,i,n.value);if(o.isNothing)return o;n=o.value}return R(n.value)},F["fantasy-land/zero"]=function(){return C},F})},578:function(t,e,n){var r,i;!function(o){"use strict";var a={inspect:{}};"object"==typeof t&&"object"==typeof t.exports?t.exports=o(n(181),n(51),n(52)):null!=n(77)?(r=[n(51),n(52)],void 0!==(i=function(t,e){return o(a,t,e)}.apply(e,r))&&(t.exports=i)):self.sanctuaryPair=o(a,self.sanctuaryShow,self.sanctuaryTypeClasses)}(function(t,e,n){"use strict";function r(t){return function(e){var r=Object.create(g);return n.Setoid.test(t)&&n.Setoid.test(e)&&(r["fantasy-land/equals"]=o,n.Ord.test(t)&&n.Ord.test(e)&&(r["fantasy-land/lte"]=a)),n.Semigroup.test(t)&&(n.Semigroup.test(e)&&(r["fantasy-land/concat"]=s),r["fantasy-land/ap"]=f,r["fantasy-land/chain"]=p),r.fst=t,r.snd=e,r}}function i(){return"Pair ("+e(this.fst)+") ("+e(this.snd)+")"}function o(t){return n.equals(this.fst,t.fst)&&n.equals(this.snd,t.snd)}function a(t){return n.equals(this.fst,t.fst)?n.lte(this.snd,t.snd):n.lte(this.fst,t.fst)}function u(t){return r(this.fst)(t.snd)}function s(t){return r(n.concat(this.fst,t.fst))(n.concat(this.snd,t.snd))}function c(t){return r(this.fst)(t(this.snd))}function l(t,e){return r(t(this.fst))(e(this.snd))}function f(t){return r(n.concat(t.fst,this.fst))(t.snd(this.snd))}function p(t){var e=t(this.snd);return r(n.concat(this.fst,e.fst))(e.snd)}function d(t,e){return t(e,this.snd)}function h(t,e){return n.map(r(this.fst),e(this.snd))}function y(t){return r(this.fst)(t(this))}function m(){return this.snd}if("undefined"!=typeof __doctest){var v=__doctest.require("sanctuary");__doctest.require("sanctuary-def"),__doctest.require("sanctuary-type-identifiers");v.bimap=v.unchecked.bimap,v.compose=v.unchecked.compose}var g={constructor:r,"@@type":"sanctuary-pair/Pair@1","@@show":i,"fantasy-land/compose":u,"fantasy-land/map":c,"fantasy-land/bimap":l,"fantasy-land/reduce":d,"fantasy-land/traverse":h,"fantasy-land/extend":y,"fantasy-land/extract":m},b=t.inspect.custom;return"symbol"==typeof b?g[b]=i:g.inspect=i,"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator&&(g[Symbol.iterator]=function(){return[this.fst,this.snd][Symbol.iterator]()}),r.fst=function(t){return t.fst},r.snd=function(t){return t.snd},r.swap=function(t){return r(t.snd)(t.fst)},r})},579:function(t,e,n){t.exports=n(580)},580:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}n(31);var i=n(174),o=r(n(1483)),a=n(1490),u=n(1500),s=n(1502),c=n(1505),l=r(n(1528)),f=r(n(176)),p={type:Phaser.AUTO,backgroundColor:"#125555",width:i.SCREEN_WIDTH,height:i.SCREEN_HEIGHT,scale:{mode:Phaser.Scale.FIT,autoCenter:Phaser.Scale.CENTER_BOTH},scene:[o.default,a.EditSquadScene,u.ListSquadsScene,s.ListUnitsScene,c.MapScene,l.default]};setTimeout(function(){new Phaser.Game(p).scale.lockOrientation(Phaser.Scale.PORTRAIT)},function(){return null===localStorage.getItem("player")?((0,f.default)(!0),50):0}())},76:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.error=e.INVALID_STATE=e.NOT_IMPLEMENTED=void 0;e.NOT_IMPLEMENTED="NOT_IMPLEMENTED";e.INVALID_STATE="INVALID_STATE";var r=function(t){throw new Error(t)};e.error=r},77:function(t,e){(function(e){t.exports=e}).call(e,{})},89:function(t,e){function n(t){for(var e=[[t.x,t.y]];t.parent;)t=t.parent,e.push([t.x,t.y]);return e.reverse()}function r(t,e){var r=n(t),i=n(e);return r.concat(i.reverse())}function i(t){var e,n,r,i,o,a=0;for(e=1;e<t.length;++e)n=t[e-1],r=t[e],i=n[0]-r[0],o=n[1]-r[1],a+=Math.sqrt(i*i+o*o);return a}function o(t,e,n,r){var i,o,a,u,s,c,l=Math.abs,f=[];for(a=l(n-t),u=l(r-e),i=t<n?1:-1,o=e<r?1:-1,s=a-u;;){if(f.push([t,e]),t===n&&e===r)break;c=2*s,c>-u&&(s-=u,t+=i),c<a&&(s+=a,e+=o)}return f}function a(t){var e,n,r,i,a,u,s=[],c=t.length;if(c<2)return s;for(a=0;a<c-1;++a)for(e=t[a],n=t[a+1],r=o(e[0],e[1],n[0],n[1]),i=r.length,u=0;u<i-1;++u)s.push(r[u]);return s.push(t[c-1]),s}function u(t,e){var n,r,i,a,u,s,c,l,f,p,d,h=e.length,y=e[0][0],m=e[0][1],v=e[h-1][0],g=e[h-1][1];for(n=y,r=m,u=[[n,r]],s=2;s<h;++s){for(l=e[s],i=l[0],a=l[1],f=o(n,r,i,a),d=!1,c=1;c<f.length;++c)if(p=f[c],!t.isWalkableAt(p[0],p[1])){d=!0;break}d&&(lastValidCoord=e[s-1],u.push(lastValidCoord),n=lastValidCoord[0],r=lastValidCoord[1])}return u.push([v,g]),u}function s(t){if(t.length<3)return t;var e,n,r,i,o,a,u=[],s=t[0][0],c=t[0][1],l=t[1][0],f=t[1][1],p=l-s,d=f-c;for(o=Math.sqrt(p*p+d*d),p/=o,d/=o,u.push([s,c]),a=2;a<t.length;a++)e=l,n=f,r=p,i=d,l=t[a][0],f=t[a][1],p=l-e,d=f-n,o=Math.sqrt(p*p+d*d),p/=o,d/=o,p===r&&d===i||u.push([e,n]);return u.push([l,f]),u}e.backtrace=n,e.biBacktrace=r,e.pathLength=i,e.interpolate=o,e.expandPath=a,e.smoothenPath=u,e.compressPath=s}},[579]);