webpackJsonp([0],{103:function(t,e,n){"use strict";function r(t){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t){return t&&t.__esModule?t:{default:t}}function o(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return o=function(){return t},t}Object.defineProperty(e,"__esModule",{value:!0}),e.Chara=void 0;var a=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==r(t)&&"function"!=typeof t)return{default:t};var e=o();if(e&&e.has(t))return e.get(t);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){var u=i?Object.getOwnPropertyDescriptor(t,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=t[a]}return n.default=t,e&&e.set(t,n),n}(n(31)),u=i(n(1494)),s=i(n(1495)),c=i(n(1496)),f=i(n(1497)),l=i(n(1498)),p=i(n(1499)),h=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),d=function(t){function e(e,n,r,i,o,a,u,s){void 0===s&&(s=!0);var c=t.call(this,e)||this;return c.key=e,c.parent=n,c.unit=r,c.cx=i,c.cy=o,c.scaleSizing=a,c.front=u,c.animated=s,c.container={},c.charaWrapper={},c.head=null,c.trunk=null,c.leftHand=null,c.rightHand=null,c.leftFoot=null,c.rightFoot=null,c.mainHandContainer=null,c.mainHand=null,n.scene.add(e,c,!0),c}return h(e,t),e.prototype.create=function(){this.charaWrapper=this.add.container(),this.container=this.add.container(this.cx,this.cy),this.charaWrapper.add(this.container),this.container.setDepth(this.cy),(0,p.default)(this),this.animated&&this.stand(),this.maybeRenderInsignea();this.container.setSize(100,170),this.container.scale=this.scaleSizing,this.container.name=this.unit.id;var t=this.add.text(0,100,this.unit.name,{color:"#000"});this.container.add(t)},e.prototype.maybeRenderInsignea=function(){if(this.unit.leader){var t=this.add.image(50,0,"insignea");this.container.add(t)}},e.prototype.onClick=function(t){var e=this;this.container.setInteractive(),this.container.on("pointerdown",function(n){t(e)})},e.prototype.enableDrag=function(t,e){var n=this;this.container.setInteractive(),this.input.setDraggable(this.container),this.input.on("drag",function(e,r,i,o){n.container.setDepth(1/0),r.x=i,r.y=o,t(n.unit,i,o,n)}),this.container.on("dragend",function(t,r,i){n.container.setDepth(i),e(n.unit,n.container.x||0,n.container.y||0,n)})},e.prototype.handleClick=function(t){var e=this;this.container.on("pointerdown",function(n){t(e,n)})},e.prototype.clearAnimations=function(){(0,s.default)(this)},e.prototype.stand=function(){(0,c.default)(this)},e.prototype.attack=function(t){(0,l.default)(this,t)},e.prototype.flinch=function(t,e){(0,f.default)(this,t,e)},e.prototype.die=function(){console.log("die!!"),this.tweens.add({targets:this.container,alpha:0,duration:1e3})},e.prototype.run=function(){(0,u.default)(this)},e.prototype.fadeOut=function(t){var e=this;this.container.iterate(function(n){e.tweens.addCounter({from:255,to:0,duration:500,onComplete:function(){e.tweens.add({targets:e.container,alpha:0,duration:500,onComplete:t})},onUpdate:function(t){var e=Math.floor(t.getValue());"Container"===n.type?n.iterate(function(t){t.setTint(a.Display.Color.GetColor(e,e,e))}):n.setTint(a.Display.Color.GetColor(e,e,e))}})})},e}(a.Scene);e.Chara=d},104:function(t,e,n){var r,i,o;!function(a){"use strict";"object"==typeof t&&"object"==typeof t.exports?t.exports=a():null!=n(77)?(i=[],r=a,void 0!==(o="function"==typeof r?r.apply(e,i):r)&&(t.exports=o)):self.sanctuaryTypeIdentifiers=a()}(function(){"use strict";function t(t){return null!=t&&null!=t.constructor&&t.constructor.prototype!==t&&"string"==typeof t[e]?t[e]:Object.prototype.toString.call(t).slice("[object ".length,-"]".length)}var e="@@type",n=new RegExp("^([\\s\\S]+)/([\\s\\S]+?)(?:@([0-9]+))?$");return t.parse=function(t){var e=null,r=t,i=0,o=n.exec(t);return null!=o&&(e=o[1],r=o[2],null!=o[3]&&(i=Number(o[3]))),{namespace:e,name:r,version:i}},t})},129:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.tileHeight=e.tileWidth=e.centerY=e.centerX=e.SCREEN_HEIGHT=e.SCREEN_WIDTH=void 0;e.SCREEN_WIDTH=1280;e.SCREEN_HEIGHT=720;e.centerX=640;e.centerY=260;e.tileWidth=128;e.tileHeight=64},130:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=function(t,e,n,r,i,o){var a=i.add.text(t,e,n,{color:"#000",fontSize:"28px"}),u=i.add.image(t-15,e-10,"panel");return u.setOrigin(0,0),r.add(u),r.add(a),u.setInteractive(),u.displayWidth=a.width+30,u.displayHeight=a.height+20,u.on("pointerdown",function(){u.setTint(4473924),a.setColor("#ffffff")}),u.on("pointerup",function(){u.clearTint(),a.setColor("#000000"),o()}),u.on("pointerover",function(){u.setTint(4473924),a.setColor("#ffffff")}),u.on("pointerout",function(){u.clearTint(),a.setColor("#000000")}),u};e.default=r},131:function(t,e){t.exports={manhattan:function(t,e){return t+e},euclidean:function(t,e){return Math.sqrt(t*t+e*e)},octile:function(t,e){var n=Math.SQRT2-1;return t<e?n*t+e:n*e+t},chebyshev:function(t,e){return Math.max(t,e)}}},1483:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=r(n(31)),o=n(40),a=r(n(176)),u=n(1490),s=r(n(130)),c=n(573),f=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),l=function(t){function e(){var e=t.call(this,"TitleScene")||this;return e.preload=u.preload,e}return f(e,t),e.prototype.create=function(){var t=this,e=this.add.container(0,0);(0,s.default)(20,50,"List Units",e,this,function(){t.scene.transition({target:"ListUnitsScene",duration:0,moveBelow:!0})}),(0,s.default)(20,100,"Edit Squad 0",e,this,function(){t.scene.transition({target:"EditSquadScene",duration:0,moveBelow:!0,data:{squad:(0,o.getSquads)()[0]}})}),(0,s.default)(20,150,"List Squads",e,this,function(){t.scene.start("ListSquadsScene")}),(0,s.default)(20,200,"Map",e,this,function(){t.scene.start("MapScene",[{type:"UPDATE_STATE",target:c.initialMapState}])}),(0,s.default)(20,250,"Combat",e,this,function(){t.scene.start("CombatScene",{top:"0",bottom:"1"})}),(0,s.default)(20,600,"Erase Data",e,this,function(){(0,a.default)(!0),alert("Data erased!")}),(0,s.default)(220,600,"Go Fullscreen",e,this,function(){window.document.body.requestFullscreen()})},e}(i.default.Scene),p=l;e.default=p},1484:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.unitsWithoutSquadSelector=void 0;var r=function(t){return Object.entries(t).filter(function(t){t[0];return null===t[1].squad}).map(function(t){t[0];return t[1]})};e.unitsWithoutSquadSelector=r},1485:function(t,e){t.exports=[{name:"Iron Sword",type:"sword",description:"A short sword",atk:"3",m_atk:"0",def:"0",m_def:"0",str:"0",int:"0",agi:"0",dex:"0",vit:"0",wis:"0",res_fire:"0",res_wind:"0",res_earth:"0",res_water:"0",res_light:"0",res_shadow:"0",atk_fire:"0",atk_wind:"0",atk_earth:"0",atk_water:"0",atk_light:"0",atk_hadow:"0"},{name:"Iron Armor",type:"light_armor",description:"A simple metal armor",atk:"0",m_atk:"0",def:"3",m_def:"0",str:"0",int:"0",agi:"0",dex:"0",vit:"0",wis:"0",res_fire:"0",res_wind:"0",res_earth:"0",res_water:"0",res_light:"0",res_shadow:"0",atk_fire:"0",atk_wind:"0",atk_earth:"0",atk_water:"0",atk_light:"0",atk_hadow:"0"},{name:"Iron Shield",type:"shield",description:"A simple metal shield",atk:"0",m_atk:"0",def:"4",m_def:"0",str:"0",int:"0",agi:"0",dex:"0",vit:"0",wis:"0",res_fire:"0",res_wind:"0",res_earth:"0",res_water:"0",res_light:"0",res_shadow:"0",atk_fire:"0",atk_wind:"0",atk_earth:"0",atk_water:"0",atk_light:"0",atk_hadow:"0"},{name:"Amulet",type:"accessory",description:"An amulet used in encantations",atk:"0",m_atk:"2",def:"0",m_def:"2",str:"0",int:"2",agi:"0",dex:"0",vit:"0",wis:"0",res_fire:"0",res_wind:"0",res_earth:"0",res_water:"0",res_light:"0",res_shadow:"0",atk_fire:"0",atk_wind:"0",atk_earth:"0",atk_water:"0",atk_light:"0",atk_hadow:"0"},{name:"Steel Sword",type:"sword",description:"A high quality sword",atk:"5",m_atk:"0",def:"0",m_def:"0",str:"0",int:"0",agi:"0",dex:"0",vit:"0",wis:"0",res_fire:"0",res_wind:"0",res_earth:"0",res_water:"0",res_light:"0",res_shadow:"0",atk_fire:"0",atk_wind:"0",atk_earth:"0",atk_water:"0",atk_light:"0",atk_hadow:"0"},{name:"Steel Armor",type:"light_armor",description:"A very resistant armor",atk:"0",m_atk:"0",def:"5",m_def:"0",str:"0",int:"0",agi:"0",dex:"0",vit:"0",wis:"0",res_fire:"0",res_wind:"0",res_earth:"0",res_water:"0",res_light:"0",res_shadow:"0",atk_fire:"0",atk_wind:"0",atk_earth:"0",atk_water:"0",atk_light:"0",atk_hadow:"0"},{name:"Steel Shield",type:"shield",description:"You can trust in this shield",atk:"0",m_atk:"0",def:"6",m_def:"0",str:"0",int:"0",agi:"0",dex:"0",vit:"0",wis:"0",res_fire:"0",res_wind:"0",res_earth:"0",res_water:"0",res_light:"0",res_shadow:"0",atk_fire:"0",atk_wind:"0",atk_earth:"0",atk_water:"0",atk_light:"0",atk_hadow:"0"},{name:"Baldar Sword",type:"sword",description:"One of the best swords that you can find",atk:"7",m_atk:"0",def:"0",m_def:"0",str:"2",int:"0",agi:"0",dex:"0",vit:"0",wis:"0",res_fire:"0",res_wind:"0",res_earth:"0",res_water:"0",res_light:"0",res_shadow:"0",atk_fire:"0",atk_wind:"0",atk_earth:"0",atk_water:"0",atk_light:"0",atk_hadow:"0"},{name:"Baldar Armor",type:"light_armor",description:"This armor can keep you safe",atk:"0",m_atk:"0",def:"8",m_def:"0",str:"2",int:"0",agi:"0",dex:"0",vit:"0",wis:"0",res_fire:"0",res_wind:"0",res_earth:"0",res_water:"0",res_light:"0",res_shadow:"0",atk_fire:"0",atk_wind:"0",atk_earth:"0",atk_water:"0",atk_light:"0",atk_hadow:"0"},{name:"Baldar Shield",type:"shield",description:"An unbreakable shield",atk:"0",m_atk:"0",def:"9",m_def:"0",str:"2",int:"0",agi:"0",dex:"0",vit:"0",wis:"0",res_fire:"0",res_wind:"0",res_earth:"0",res_water:"0",res_light:"0",res_shadow:"0",atk_fire:"0",atk_wind:"0",atk_earth:"0",atk_water:"0",atk_light:"0",atk_hadow:"0"},{name:"Oaken Staff",type:"staff",description:"A staff given to apprentice wizards",atk:"0",m_atk:"11",def:"0",m_def:"0",str:"0",int:"0",agi:"0",dex:"0",vit:"0",wis:"0",res_fire:"0",res_wind:"0",res_earth:"0",res_water:"0",res_light:"0",res_shadow:"0",atk_fire:"0",atk_wind:"0",atk_earth:"0",atk_water:"0",atk_light:"0",atk_hadow:"0"}]},1486:function(t,e,n){"use strict";function r(t){return t.toLowerCase().split(" ").join("_")}Object.defineProperty(e,"__esModule",{value:!0}),e.idfy=r},1487:function(t,e,n){"use strict";function r(t){return{id:t.toString(),name:(0,a.randomItem)(o.maleNames),class:(0,a.randomItem)(a.classes),movement:"mountain",elem:"neutral",equips:{ornament:"amulet",chest:"iron_armor",mainHand:"iron_sword",offHand:"iron_shield"},squad:null,lvl:11,hp:100,currentHp:100,exp:99,str:(0,u.random)(10,200),agi:(0,u.random)(10,200),dex:(0,u.random)(10,200),vit:(0,u.random)(10,200),int:(0,u.random)(10,200),wis:(0,u.random)(10,200),style:{head:(0,a.randomItem)([1,2,3]),trunk:(0,a.randomItem)([1,2,3,4])}}}function i(t){throw new Error("Not implemented.")}Object.defineProperty(e,"__esModule",{value:!0}),e.fromJSON=r,e.toJSON=i;var o=n(1488),a=n(176),u=n(175)},1488:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.maleNames=void 0;var r=["Lydan","Syrin","Ptorik","Joz","Varog","Gethrod","Hezra","Feron","Ophni","Colborn","Fintis","Gatlin","Jinto","Hagalbar","Krinn","Lenox","Revvyn","Hodus","Dimian","Paskel","Kontas","Weston","Azamarr","Jather","Tekren","Jareth","Adon","Zaden","Eune","Graff","Tez","Jessop","Gunnar","Pike","Domnhar","Baske","Jerrick","Mavrek","Riordan","Wulfe","Straus","Tyvrik","Henndar","Favroe","Whit","Jaris","Renham","Kagran","Lassrin","Vadim","Arlo","Quintis","Vale","Caelan","Yorjan","Khron","Ishmael","Jakrin","Fangar","Roux","Baxar","Hawke","Gatlen","Barak","Nazim","Kadric","Paquin","Kent","Moki","Rankar","Lothe","Ryven","Clawsen","Pakker","Embre","Cassian","Verssek","Dagfinn","Ebraheim","Nesso","Eldermar","Rivik","Rourke","Barton","Hemm","Sarkin","Blaiz","Talon","Agro","Zagaroth","Turrek","Esdel","Lustros","Zenner","Baashar","Dagrod","Gentar","Feston","Khastan","Prishnak"];e.maleNames=r},1489:function(t,e,n){"use strict";function r(){return{value:!1}}function i(t){t&&(t.value=!0)}function o(){}function a(t){return void 0===t.size&&(t.size=t.__iterate(s)),t.size}function u(t,e){if("number"!=typeof e){var n=e>>>0;if(""+n!==e||4294967295===n)return NaN;e=n}return e<0?a(t)+e:e}function s(){return!0}function c(t,e,n){return(0===t&&!h(t)||void 0!==n&&t<=-n)&&(void 0===e||void 0!==n&&e>=n)}function f(t,e){return p(t,e,0)}function l(t,e){return p(t,e,e)}function p(t,e,n){return void 0===t?n:h(t)?e===1/0?e:0|Math.max(0,e+t):void 0===e||e===t?t:0|Math.min(e,t)}function h(t){return t<0||0===t&&1/t==-1/0}function d(t){return Boolean(t&&t[hn])}function y(t){return Boolean(t&&t[dn])}function v(t){return Boolean(t&&t[yn])}function m(t){return y(t)||v(t)}function _(t){return Boolean(t&&t[bn])}function g(t){return Boolean(t&&t[wn])}function b(t){return d(t)||g(t)}function w(t){return Boolean(t&&t[Sn])}function S(t,e,n,r){var i=0===t?e:1===t?n:[e,n];return r?r.value=i:r={value:i,done:!1},r}function O(){return{value:void 0,done:!0}}function A(t){return!!I(t)}function E(t){return t&&"function"==typeof t.next}function T(t){var e=I(t);return e&&e.call(t)}function I(t){var e=t&&(Tn&&t[Tn]||t[In]);if("function"==typeof e)return e}function x(t){return!(!Array.isArray(t)&&"string"!=typeof t)||t&&"object"==typeof t&&Number.isInteger(t.length)&&t.length>=0&&(0===t.length?1===Object.keys(t).length:t.hasOwnProperty(t.length-1))}function k(){return Dn||(Dn=new jn([]))}function C(t){var e=Array.isArray(t)?new jn(t):A(t)?new Un(t):void 0;if(e)return e.fromEntrySeq();if("object"==typeof t)return new Fn(t);throw new TypeError("Expected Array or collection object of [k, v] entries, or keyed object: "+t)}function N(t){var e=R(t);if(e)return e;throw new TypeError("Expected Array or collection object of values: "+t)}function M(t){var e=R(t);if(e)return e;if("object"==typeof t)return new Fn(t);throw new TypeError("Expected Array or collection object of values, or keyed object: "+t)}function R(t){return x(t)?new jn(t):A(t)?new Un(t):void 0}function P(t){return Boolean(t&&t[Ln])}function j(t){return P(t)&&w(t)}function F(t){return Boolean(t&&"function"==typeof t.equals&&"function"==typeof t.hashCode)}function D(t,e){if(t===e||t!==t&&e!==e)return!0;if(!t||!e)return!1;if("function"==typeof t.valueOf&&"function"==typeof e.valueOf){if(t=t.valueOf(),e=e.valueOf(),t===e||t!==t&&e!==e)return!0;if(!t||!e)return!1}return!!(F(t)&&F(e)&&t.equals(e))}function q(t){return t>>>1&1073741824|3221225471&t}function U(t){switch(typeof t){case"boolean":return t?1108378657:1108378656;case"number":return L(t);case"string":return t.length>Gn?H(t):W(t);case"object":case"function":return null===t?1108378658:"function"==typeof t.hashCode?q(t.hashCode(t)):(t.valueOf!==Wn&&"function"==typeof t.valueOf&&(t=t.valueOf(t)),B(t));case"undefined":return 1108378659;default:if("function"==typeof t.toString)return W(t.toString());throw new Error("Value type "+typeof t+" cannot be hashed.")}}function L(t){if(t!==t||t===1/0)return 0;var e=0|t;for(e!==t&&(e^=4294967295*t);t>4294967295;)t/=4294967295,e^=t;return q(e)}function H(t){var e=$n[t];return void 0===e&&(e=W(t),Jn===Xn&&(Jn=0,$n={}),Jn++,$n[t]=e),e}function W(t){for(var e=0,n=0;n<t.length;n++)e=31*e+t.charCodeAt(n)|0;return q(e)}function B(t){var e;if(Kn&&void 0!==(e=qn.get(t)))return e;if(void 0!==(e=t[Yn]))return e;if(!zn){if(void 0!==(e=t.propertyIsEnumerable&&t.propertyIsEnumerable[Yn]))return e;if(void 0!==(e=z(t)))return e}if(e=++Vn,1073741824&Vn&&(Vn=0),Kn)qn.set(t,e);else{if(void 0!==Bn&&!1===Bn(t))throw new Error("Non-extensible objects are not allowed as keys.");if(zn)Object.defineProperty(t,Yn,{enumerable:!1,configurable:!1,writable:!1,value:e});else if(void 0!==t.propertyIsEnumerable&&t.propertyIsEnumerable===t.constructor.prototype.propertyIsEnumerable)t.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},t.propertyIsEnumerable[Yn]=e;else{if(void 0===t.nodeType)throw new Error("Unable to set a non-enumerable property on object.");t[Yn]=e}}return e}function z(t){if(t&&t.nodeType>0)switch(t.nodeType){case 1:return t.uniqueID;case 9:return t.documentElement&&t.documentElement.uniqueID}}function K(t){var e=lt(t);return e._iter=t,e.size=t.size,e.flip=function(){return t},e.reverse=function(){var e=t.reverse.apply(this);return e.flip=function(){return t.reverse()},e},e.has=function(e){return t.includes(e)},e.includes=function(e){return t.has(e)},e.cacheResult=pt,e.__iterateUncached=function(e,n){var r=this;return t.__iterate(function(t,n){return!1!==e(n,t,r)},n)},e.__iteratorUncached=function(e,n){if(e===En){var r=t.__iterator(e,n);return new kn(function(){var t=r.next();if(!t.done){var e=t.value[0];t.value[0]=t.value[1],t.value[1]=e}return t})}return t.__iterator(e===An?On:An,n)},e}function V(t,e,n){var r=lt(t);return r.size=t.size,r.has=function(e){return t.has(e)},r.get=function(r,i){var o=t.get(r,pn);return o===pn?i:e.call(n,o,r,t)},r.__iterateUncached=function(r,i){var o=this;return t.__iterate(function(t,i,a){return!1!==r(e.call(n,t,i,a),i,o)},i)},r.__iteratorUncached=function(r,i){var o=t.__iterator(En,i);return new kn(function(){var i=o.next();if(i.done)return i;var a=i.value,u=a[0];return S(r,u,e.call(n,a[1],u,t),i)})},r}function Y(t,e){var n=this,r=lt(t);return r._iter=t,r.size=t.size,r.reverse=function(){return t},t.flip&&(r.flip=function(){var e=K(t);return e.reverse=function(){return t.flip()},e}),r.get=function(n,r){return t.get(e?n:-1-n,r)},r.has=function(n){return t.has(e?n:-1-n)},r.includes=function(e){return t.includes(e)},r.cacheResult=pt,r.__iterate=function(n,r){var i=this,o=0;return r&&a(t),t.__iterate(function(t,a){return n(t,e?a:r?i.size-++o:o++,i)},!r)},r.__iterator=function(r,i){var o=0;i&&a(t);var u=t.__iterator(En,!i);return new kn(function(){var t=u.next();if(t.done)return t;var a=t.value;return S(r,e?a[0]:i?n.size-++o:o++,a[1],t)})},r}function G(t,e,n,r){var i=lt(t);return r&&(i.has=function(r){var i=t.get(r,pn);return i!==pn&&!!e.call(n,i,r,t)},i.get=function(r,i){var o=t.get(r,pn);return o!==pn&&e.call(n,o,r,t)?o:i}),i.__iterateUncached=function(i,o){var a=this,u=0;return t.__iterate(function(t,o,s){if(e.call(n,t,o,s))return u++,i(t,r?o:u-1,a)},o),u},i.__iteratorUncached=function(i,o){var a=t.__iterator(En,o),u=0;return new kn(function(){for(;;){var o=a.next();if(o.done)return o;var s=o.value,c=s[0],f=s[1];if(e.call(n,f,c,t))return S(i,r?c:u++,f,o)}})},i}function X(t,e,n){var r=nr().asMutable();return t.__iterate(function(i,o){r.update(e.call(n,i,o,t),0,function(t){return t+1})}),r.asImmutable()}function J(t,e,n){var r=y(t),i=(w(t)?br():nr()).asMutable();t.__iterate(function(o,a){i.update(e.call(n,o,a,t),function(t){return t=t||[],t.push(r?[a,o]:o),t})});var o=ft(t);return i.map(function(e){return st(t,o(e))}).asImmutable()}function $(t,e,n,r){var i=t.size;if(c(e,n,i))return t;var o=f(e,i),a=l(n,i);if(o!==o||a!==a)return $(t.toSeq().cacheResult(),e,n,r);var s,p=a-o;p===p&&(s=p<0?0:p);var h=lt(t);return h.size=0===s?s:t.size&&s||void 0,!r&&_(t)&&s>=0&&(h.get=function(e,n){return e=u(this,e),e>=0&&e<s?t.get(e+o,n):n}),h.__iterateUncached=function(e,n){var i=this;if(0===s)return 0;if(n)return this.cacheResult().__iterate(e,n);var a=0,u=!0,c=0;return t.__iterate(function(t,n){if(!u||!(u=a++<o))return c++,!1!==e(t,r?n:c-1,i)&&c!==s}),c},h.__iteratorUncached=function(e,n){if(0!==s&&n)return this.cacheResult().__iterator(e,n);if(0===s)return new kn(O);var i=t.__iterator(e,n),a=0,u=0;return new kn(function(){for(;a++<o;)i.next();if(++u>s)return O();var t=i.next();return r||e===An||t.done?t:e===On?S(e,u-1,void 0,t):S(e,u-1,t.value[1],t)})},h}function Z(t,e,n){var r=lt(t);return r.__iterateUncached=function(r,i){var o=this;if(i)return this.cacheResult().__iterate(r,i);var a=0;return t.__iterate(function(t,i,u){return e.call(n,t,i,u)&&++a&&r(t,i,o)}),a},r.__iteratorUncached=function(r,i){var o=this;if(i)return this.cacheResult().__iterator(r,i);var a=t.__iterator(En,i),u=!0;return new kn(function(){if(!u)return O();var t=a.next();if(t.done)return t;var i=t.value,s=i[0],c=i[1];return e.call(n,c,s,o)?r===En?t:S(r,s,c,t):(u=!1,O())})},r}function Q(t,e,n,r){var i=lt(t);return i.__iterateUncached=function(i,o){var a=this;if(o)return this.cacheResult().__iterate(i,o);var u=!0,s=0;return t.__iterate(function(t,o,c){if(!u||!(u=e.call(n,t,o,c)))return s++,i(t,r?o:s-1,a)}),s},i.__iteratorUncached=function(i,o){var a=this;if(o)return this.cacheResult().__iterator(i,o);var u=t.__iterator(En,o),s=!0,c=0;return new kn(function(){var t,o,f;do{if(t=u.next(),t.done)return r||i===An?t:i===On?S(i,c++,void 0,t):S(i,c++,t.value[1],t);var l=t.value;o=l[0],f=l[1],s&&(s=e.call(n,f,o,a))}while(s);return i===En?t:S(i,o,f,t)})},i}function tt(t,e){var n=y(t),r=[t].concat(e).map(function(t){return d(t)?n&&(t=mn(t)):t=n?C(t):N(Array.isArray(t)?t:[t]),t}).filter(function(t){return 0!==t.size});if(0===r.length)return t;if(1===r.length){var i=r[0];if(i===t||n&&y(i)||v(t)&&v(i))return i}var o=new jn(r);return n?o=o.toKeyedSeq():v(t)||(o=o.toSetSeq()),o=o.flatten(!0),o.size=r.reduce(function(t,e){if(void 0!==t){var n=e.size;if(void 0!==n)return t+n}},0),o}function et(t,e,n){var r=lt(t);return r.__iterateUncached=function(i,o){function a(t,c){t.__iterate(function(t,o){return(!e||c<e)&&d(t)?a(t,c+1):(u++,!1===i(t,n?o:u-1,r)&&(s=!0)),!s},o)}if(o)return this.cacheResult().__iterate(i,o);var u=0,s=!1;return a(t,0),u},r.__iteratorUncached=function(r,i){if(i)return this.cacheResult().__iterator(r,i);var o=t.__iterator(r,i),a=[],u=0;return new kn(function(){for(;o;){var t=o.next();if(!1===t.done){var s=t.value;if(r===En&&(s=s[1]),e&&!(a.length<e)||!d(s))return n?t:S(r,u++,s,t);a.push(o),o=s.__iterator(r,i)}else o=a.pop()}return O()})},r}function nt(t,e,n){var r=ft(t);return t.toSeq().map(function(i,o){return r(e.call(n,i,o,t))}).flatten(!0)}function rt(t,e){var n=lt(t);return n.size=t.size&&2*t.size-1,n.__iterateUncached=function(n,r){var i=this,o=0;return t.__iterate(function(t){return(!o||!1!==n(e,o++,i))&&!1!==n(t,o++,i)},r),o},n.__iteratorUncached=function(n,r){var i,o=t.__iterator(An,r),a=0;return new kn(function(){return(!i||a%2)&&(i=o.next(),i.done)?i:a%2?S(n,a++,e):S(n,a++,i.value,i)})},n}function it(t,e,n){e||(e=ht);var r=y(t),i=0,o=t.toSeq().map(function(e,r){return[r,e,i++,n?n(e,r,t):e]}).valueSeq().toArray();return o.sort(function(t,n){return e(t[3],n[3])||t[2]-n[2]}).forEach(r?function(t,e){o[e].length=2}:function(t,e){o[e]=t[1]}),r?Mn(o):v(t)?Rn(o):Pn(o)}function ot(t,e,n){if(e||(e=ht),n){var r=t.toSeq().map(function(e,r){return[e,n(e,r,t)]}).reduce(function(t,n){return at(e,t[1],n[1])?n:t});return r&&r[0]}return t.reduce(function(t,n){return at(e,t,n)?n:t})}function at(t,e,n){var r=t(n,e);return 0===r&&n!==e&&(void 0===n||null===n||n!==n)||r>0}function ut(t,e,n,r){var i=lt(t),o=new jn(n).map(function(t){return t.size});return i.size=r?o.max():o.min(),i.__iterate=function(t,e){for(var n,r=this.__iterator(An,e),i=0;!(n=r.next()).done&&!1!==t(n.value,i++,this););return i},i.__iteratorUncached=function(t,i){var o=n.map(function(t){return t=vn(t),T(i?t.reverse():t)}),a=0,u=!1;return new kn(function(){var n;return u||(n=o.map(function(t){return t.next()}),u=r?n.every(function(t){return t.done}):n.some(function(t){return t.done})),u?O():S(t,a++,e.apply(null,n.map(function(t){return t.value})))})},i}function st(t,e){return t===e?t:_(t)?e:t.constructor(e)}function ct(t){if(t!==Object(t))throw new TypeError("Expected [K, V] tuple: "+t)}function ft(t){return y(t)?mn:v(t)?_n:gn}function lt(t){return Object.create((y(t)?Mn:v(t)?Rn:Pn).prototype)}function pt(){return this._iter.cacheResult?(this._iter.cacheResult(),this.size=this._iter.size,this):Nn.prototype.cacheResult.call(this)}function ht(t,e){return void 0===t&&void 0===e?0:void 0===t?1:void 0===e?-1:t>e?1:t<e?-1:0}function dt(t,e){e=e||0;for(var n=Math.max(0,t.length-e),r=new Array(n),i=0;i<n;i++)r[i]=t[i+e];return r}function yt(t,e){if(!t)throw new Error(e)}function vt(t){yt(t!==1/0,"Cannot perform this action with an infinite size.")}function mt(t){if(x(t)&&"string"!=typeof t)return t;if(w(t))return t.toArray();throw new TypeError("Invalid keyPath: expected Ordered Collection or Array: "+t)}function _t(t){return t&&("function"!=typeof t.constructor||"Object"===t.constructor.name)}function gt(t){return"object"==typeof t&&(b(t)||Array.isArray(t)||_t(t))}function bt(t){try{return"string"==typeof t?JSON.stringify(t):String(t)}catch(e){return JSON.stringify(t)}}function wt(t,e){return b(t)?t.has(e):gt(t)&&Cn.call(t,e)}function St(t,e,n){return b(t)?t.get(e,n):wt(t,e)?"function"==typeof t.get?t.get(e):t[e]:n}function Ot(t){if(Array.isArray(t))return dt(t);var e={};for(var n in t)Cn.call(t,n)&&(e[n]=t[n]);return e}function At(t,e){if(!gt(t))throw new TypeError("Cannot update non-data-structure value: "+t);if(b(t)){if(!t.remove)throw new TypeError("Cannot update immutable value without .remove() method: "+t);return t.remove(e)}if(!Cn.call(t,e))return t;var n=Ot(t);return Array.isArray(n)?n.splice(e,1):delete n[e],n}function Et(t,e,n){if(!gt(t))throw new TypeError("Cannot update non-data-structure value: "+t);if(b(t)){if(!t.set)throw new TypeError("Cannot update immutable value without .set() method: "+t);return t.set(e,n)}if(Cn.call(t,e)&&n===t[e])return t;var r=Ot(t);return r[e]=n,r}function Tt(t,e,n,r){r||(r=n,n=void 0);var i=It(b(t),t,mt(e),0,n,r);return i===pn?n:i}function It(t,e,n,r,i,o){var a=e===pn;if(r===n.length){var u=a?i:e,s=o(u);return s===u?e:s}if(!a&&!gt(e))throw new TypeError("Cannot update within non-data-structure value in path ["+n.slice(0,r).map(bt)+"]: "+e);var c=n[r],f=a?pn:St(e,c,pn),l=It(f===pn?t:b(f),f,n,r+1,i,o);return l===f?e:l===pn?At(e,c):Et(a?t?ne():{}:e,c,l)}function xt(t,e,n){return Tt(t,e,pn,function(){return n})}function kt(t,e){return xt(this,t,e)}function Ct(t,e){return Tt(t,e,function(){return pn})}function Nt(t){return Ct(this,t)}function Mt(t,e,n,r){return Tt(t,[e],n,r)}function Rt(t,e,n){return 1===arguments.length?t(this):Mt(this,t,e,n)}function Pt(t,e,n){return Tt(this,t,e,n)}function jt(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return Dt(this,t)}function Ft(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];if("function"!=typeof t)throw new TypeError("Invalid merger function: "+t);return Dt(this,e,t)}function Dt(t,e,n){for(var r=[],i=0;i<e.length;i++){var o=mn(e[i]);0!==o.size&&r.push(o)}return 0===r.length?t:0!==t.toSeq().size||t.__ownerID||1!==r.length?t.withMutations(function(t){for(var e=n?function(e,r){Mt(t,r,pn,function(t){return t===pn?e:n(t,e,r)})}:function(e,n){t.set(n,e)},i=0;i<r.length;i++)r[i].forEach(e)}):t.constructor(r[0])}function qt(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];return Bt(t,e)}function Ut(t,e){for(var n=[],r=arguments.length-2;r-- >0;)n[r]=arguments[r+2];return Bt(e,n,t)}function Lt(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];return Wt(t,e)}function Ht(t,e){for(var n=[],r=arguments.length-2;r-- >0;)n[r]=arguments[r+2];return Wt(e,n,t)}function Wt(t,e,n){return Bt(t,e,zt(n))}function Bt(t,e,n){if(!gt(t))throw new TypeError("Cannot merge into non-data-structure value: "+t);if(b(t))return"function"==typeof n&&t.mergeWith?t.mergeWith.apply(t,[n].concat(e)):t.merge?t.merge.apply(t,e):t.concat.apply(t,e);for(var r=Array.isArray(t),i=t,o=r?_n:mn,a=r?function(e){i===t&&(i=Ot(i)),i.push(e)}:function(e,r){var o=Cn.call(i,r),a=o&&n?n(i[r],e,r):e;o&&a===i[r]||(i===t&&(i=Ot(i)),i[r]=a)},u=0;u<e.length;u++)o(e[u]).forEach(a);return i}function zt(t){function e(n,r,i){return gt(n)&&gt(r)?Bt(n,[r],e):t?t(n,r,i):r}return e}function Kt(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return Wt(this,t)}function Vt(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];return Wt(this,e,t)}function Yt(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];return Tt(this,t,ne(),function(t){return Bt(t,e)})}function Gt(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];return Tt(this,t,ne(),function(t){return Wt(t,e)})}function Xt(t){var e=this.asMutable();return t(e),e.wasAltered()?e.__ensureOwner(this.__ownerID):this}function Jt(){return this.__ownerID?this:this.__ensureOwner(new o)}function $t(){return this.__ensureOwner()}function Zt(){return this.__altered}function Qt(t,e){return S(t,e[0],e[1])}function te(t,e){return{node:t,index:0,__prev:e}}function ee(t,e,n,r){var i=Object.create(rr);return i.size=t,i._root=e,i.__ownerID=n,i.__hash=r,i.__altered=!1,i}function ne(){return cr||(cr=ee(0))}function re(t,e,n){var i,o;if(t._root){var a=r(),u=r();if(i=ie(t._root,t.__ownerID,0,void 0,e,n,a,u),!u.value)return t;o=t.size+(a.value?n===pn?-1:1:0)}else{if(n===pn)return t;o=1,i=new ir(t.__ownerID,[[e,n]])}return t.__ownerID?(t.size=o,t._root=i,t.__hash=void 0,t.__altered=!0,t):i?ee(o,i):ne()}function ie(t,e,n,r,o,a,u,s){return t?t.update(e,n,r,o,a,u,s):a===pn?t:(i(s),i(u),new sr(e,r,[o,a]))}function oe(t){return t.constructor===sr||t.constructor===ur}function ae(t,e,n,r,i){if(t.keyHash===r)return new ur(e,r,[t.entry,i]);var o,a=(0===n?t.keyHash:t.keyHash>>>n)&ln,u=(0===n?r:r>>>n)&ln,s=a===u?[ae(t,e,n+cn,r,i)]:(o=new sr(e,r,i),a<u?[t,o]:[o,t]);return new or(e,1<<a|1<<u,s)}function ue(t,e,n,r){t||(t=new o);for(var i=new sr(t,U(n),[n,r]),a=0;a<e.length;a++){var u=e[a];i=i.update(t,0,void 0,u[0],u[1])}return i}function se(t,e,n,r){for(var i=0,o=0,a=new Array(n),u=0,s=1,c=e.length;u<c;u++,s<<=1){var f=e[u];void 0!==f&&u!==r&&(i|=s,a[o++]=f)}return new or(t,i,a)}function ce(t,e,n,r,i){for(var o=0,a=new Array(fn),u=0;0!==n;u++,n>>>=1)a[u]=1&n?e[o++]:void 0;return a[r]=i,new ar(t,o+1,a)}function fe(t){return t-=t>>1&1431655765,t=(858993459&t)+(t>>2&858993459),t=t+(t>>4)&252645135,t+=t>>8,127&(t+=t>>16)}function le(t,e,n,r){var i=r?t:dt(t);return i[e]=n,i}function pe(t,e,n,r){var i=t.length+1;if(r&&e+1===i)return t[e]=n,t;for(var o=new Array(i),a=0,u=0;u<i;u++)u===e?(o[u]=n,a=-1):o[u]=t[u+a];return o}function he(t,e,n){var r=t.length-1;if(n&&e===r)return t.pop(),t;for(var i=new Array(r),o=0,a=0;a<r;a++)a===e&&(o=1),i[a]=t[a+o];return i}function de(t){return Boolean(t&&t[dr])}function ye(t,e){function n(t,e,n){return 0===e?r(t,n):i(t,e,n)}function r(t,n){var r=n===u?s&&s.array:t&&t.array,i=n>o?0:o-n,c=a-n;return c>fn&&(c=fn),function(){if(i===c)return gr;var t=e?--c:i++;return r&&r[t]}}function i(t,r,i){var u,s=t&&t.array,c=i>o?0:o-i>>r,f=1+(a-i>>r);return f>fn&&(f=fn),function(){for(;;){if(u){var t=u();if(t!==gr)return t;u=null}if(c===f)return gr;var o=e?--f:c++;u=n(s&&s[o],r-cn,i+(o<<r))}}}var o=t._origin,a=t._capacity,u=Oe(a),s=t._tail;return n(t._root,t._level,0)}function ve(t,e,n,r,i,o,a){var u=Object.create(vr);return u.size=e-t,u._origin=t,u._capacity=e,u._level=n,u._root=r,u._tail=i,u.__ownerID=o,u.__hash=a,u.__altered=!1,u}function me(){return _r||(_r=ve(0,0,cn))}function _e(t,e,n){if((e=u(t,e))!==e)return t;if(e>=t.size||e<0)return t.withMutations(function(t){e<0?Se(t,e).set(0,n):Se(t,0,e+1).set(e,n)});e+=t._origin;var i=t._tail,o=t._root,a=r();return e>=Oe(t._capacity)?i=ge(i,t.__ownerID,0,e,n,a):o=ge(o,t.__ownerID,t._level,e,n,a),a.value?t.__ownerID?(t._root=o,t._tail=i,t.__hash=void 0,t.__altered=!0,t):ve(t._origin,t._capacity,t._level,o,i):t}function ge(t,e,n,r,o,a){var u=r>>>n&ln,s=t&&u<t.array.length;if(!s&&void 0===o)return t;var c;if(n>0){var f=t&&t.array[u],l=ge(f,e,n-cn,r,o,a);return l===f?t:(c=be(t,e),c.array[u]=l,c)}return s&&t.array[u]===o?t:(a&&i(a),c=be(t,e),void 0===o&&u===c.array.length-1?c.array.pop():c.array[u]=o,c)}function be(t,e){return e&&t&&e===t.ownerID?t:new mr(t?t.array.slice():[],e)}function we(t,e){if(e>=Oe(t._capacity))return t._tail;if(e<1<<t._level+cn){for(var n=t._root,r=t._level;n&&r>0;)n=n.array[e>>>r&ln],r-=cn;return n}}function Se(t,e,n){void 0!==e&&(e|=0),void 0!==n&&(n|=0);var r=t.__ownerID||new o,i=t._origin,a=t._capacity,u=i+e,s=void 0===n?a:n<0?a+n:i+n;if(u===i&&s===a)return t;if(u>=s)return t.clear();for(var c=t._level,f=t._root,l=0;u+l<0;)f=new mr(f&&f.array.length?[void 0,f]:[],r),c+=cn,l+=1<<c;l&&(u+=l,i+=l,s+=l,a+=l);for(var p=Oe(a),h=Oe(s);h>=1<<c+cn;)f=new mr(f&&f.array.length?[f]:[],r),c+=cn;var d=t._tail,y=h<p?we(t,s-1):h>p?new mr([],r):d;if(d&&h>p&&u<a&&d.array.length){f=be(f,r);for(var v=f,m=c;m>cn;m-=cn){var _=p>>>m&ln;v=v.array[_]=be(v.array[_],r)}v.array[p>>>cn&ln]=d}if(s<a&&(y=y&&y.removeAfter(r,0,s)),u>=h)u-=h,s-=h,c=cn,f=null,y=y&&y.removeBefore(r,0,u);else if(u>i||h<p){for(l=0;f;){var g=u>>>c&ln;if(g!==h>>>c&ln)break;g&&(l+=(1<<c)*g),c-=cn,f=f.array[g]}f&&u>i&&(f=f.removeBefore(r,c,u-l)),f&&h<p&&(f=f.removeAfter(r,c,h-l)),l&&(u-=l,s-=l)}return t.__ownerID?(t.size=s-u,t._origin=u,t._capacity=s,t._level=c,t._root=f,t._tail=y,t.__hash=void 0,t.__altered=!0,t):ve(u,s,c,f,y)}function Oe(t){return t<fn?0:t-1>>>cn<<cn}function Ae(t,e,n,r){var i=Object.create(br.prototype);return i.size=t?t.size:0,i._map=t,i._list=e,i.__ownerID=n,i.__hash=r,i}function Ee(){return wr||(wr=Ae(ne(),me()))}function Te(t,e,n){var r,i,o=t._map,a=t._list,u=o.get(e),s=void 0!==u;if(n===pn){if(!s)return t;a.size>=fn&&a.size>=2*o.size?(i=a.filter(function(t,e){return void 0!==t&&u!==e}),r=i.toKeyedSeq().map(function(t){return t[0]}).flip().toMap(),t.__ownerID&&(r.__ownerID=i.__ownerID=t.__ownerID)):(r=o.remove(e),i=u===a.size-1?a.pop():a.set(u,void 0))}else if(s){if(n===a.get(u)[1])return t;r=o,i=a.set(u,[e,n])}else r=o.set(e,a.size),i=a.set(a.size,[e,n]);return t.__ownerID?(t.size=r.size,t._map=r,t._list=i,t.__hash=void 0,t):Ae(r,i)}function Ie(t){return Boolean(t&&t[Sr])}function xe(t,e,n,r){var i=Object.create(Ar);return i.size=t,i._head=e,i.__ownerID=n,i.__hash=r,i.__altered=!1,i}function ke(){return Er||(Er=xe(0))}function Ce(t){return Boolean(t&&t[Tr])}function Ne(t){return Ce(t)&&w(t)}function Me(t,e){if(t===e)return!0;if(!d(e)||void 0!==t.size&&void 0!==e.size&&t.size!==e.size||void 0!==t.__hash&&void 0!==e.__hash&&t.__hash!==e.__hash||y(t)!==y(e)||v(t)!==v(e)||w(t)!==w(e))return!1;if(0===t.size&&0===e.size)return!0;var n=!m(t);if(w(t)){var r=t.entries();return e.every(function(t,e){var i=r.next().value;return i&&D(i[1],t)&&(n||D(i[0],e))})&&r.next().done}var i=!1;if(void 0===t.size)if(void 0===e.size)"function"==typeof t.cacheResult&&t.cacheResult();else{i=!0;var o=t;t=e,e=o}var a=!0,u=e.__iterate(function(e,r){if(n?!t.has(e):i?!D(e,t.get(r,pn)):!D(t.get(r,pn),e))return a=!1,!1});return a&&t.size===u}function Re(t,e){var n=function(n){t.prototype[n]=e[n]};return Object.keys(e).forEach(n),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(e).forEach(n),t}function Pe(t){if(!t||"object"!=typeof t)return t;if(!d(t)){if(!gt(t))return t;t=Nn(t)}if(y(t)){var e={};return t.__iterate(function(t,n){e[n]=Pe(t)}),e}var n=[];return t.__iterate(function(t){n.push(Pe(t))}),n}function je(t,e){return t.__ownerID?(t.size=e.size,t._map=e,t):e===t._map?t:0===e.size?t.__empty():t.__make(e)}function Fe(t,e){var n=Object.create(xr);return n.size=t?t.size:0,n._map=t,n.__ownerID=e,n}function De(){return kr||(kr=Fe(ne()))}function qe(t,e,n){for(var r=mt(e),i=0;i!==r.length;)if((t=St(t,r[i++],pn))===pn)return n;return t}function Ue(t,e){return qe(this,t,e)}function Le(t,e){return qe(t,e,pn)!==pn}function He(t){return Le(this,t)}function We(){vt(this.size);var t={};return this.__iterate(function(e,n){t[n]=e}),t}function Be(t,e,n,r,i,o){return vt(t.size),t.__iterate(function(t,o,a){i?(i=!1,n=t):n=e.call(r,n,t,o,a)},o),n}function ze(t,e){return e}function Ke(t,e){return[e,t]}function Ve(t){return function(){return!t.apply(this,arguments)}}function Ye(t){return function(){return-t.apply(this,arguments)}}function Ge(){return dt(arguments)}function Xe(t,e){return t<e?1:t>e?-1:0}function Je(t){if(t.size===1/0)return 0;var e=w(t),n=y(t),r=e?1:0;return $e(t.__iterate(n?e?function(t,e){r=31*r+Ze(U(t),U(e))|0}:function(t,e){r=r+Ze(U(t),U(e))|0}:e?function(t){r=31*r+U(t)|0}:function(t){r=r+U(t)|0}),r)}function $e(t,e){return e=Hn(e,3432918353),e=Hn(e<<15|e>>>-15,461845907),e=Hn(e<<13|e>>>-13,5),e=(e+3864292196|0)^t,e=Hn(e^e>>>16,2246822507),e=Hn(e^e>>>13,3266489909),e=q(e^e>>>16)}function Ze(t,e){return t^e+2654435769+(t<<6)+(t>>2)|0}function Qe(t,e){var n=Object.create(Fr);return n.size=t?t.size:0,n._map=t,n.__ownerID=e,n}function tn(){return Dr||(Dr=Qe(Ee()))}function en(t,e,n){var r=Object.create(Object.getPrototypeOf(t));return r._values=e,r.__ownerID=n,r}function nn(t){return t.constructor.displayName||t.constructor.name||"Record"}function rn(t){return C(t._keys.map(function(e){return[e,t.get(e)]}))}function on(t,e){try{Object.defineProperty(t,e,{get:function(){return this.get(e)},set:function(t){yt(this.__ownerID,"Cannot set on an immutable record."),this.set(e,t)}})}catch(t){}}function an(t,e){return un([],e||sn,t,"",e&&e.length>2?[]:void 0,{"":t})}function un(t,e,n,r,i,o){var a=Array.isArray(n)?Rn:_t(n)?Mn:null;if(a){if(~t.indexOf(n))throw new TypeError("Cannot convert circular structure to Immutable");t.push(n),i&&""!==r&&i.push(r);var u=e.call(o,r,a(n).map(function(r,o){return un(t,e,r,o,i,n)}),i&&i.slice());return t.pop(),i&&i.pop(),u}return n}function sn(t,e){return y(e)?e.toMap():e.toList()}Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"version",function(){return Wr}),n.d(e,"Collection",function(){return vn}),n.d(e,"Iterable",function(){return zr}),n.d(e,"Seq",function(){return Nn}),n.d(e,"Map",function(){return nr}),n.d(e,"OrderedMap",function(){return br}),n.d(e,"List",function(){return yr}),n.d(e,"Stack",function(){return Or}),n.d(e,"Set",function(){return Ir}),n.d(e,"OrderedSet",function(){return jr}),n.d(e,"Record",function(){return qr}),n.d(e,"Range",function(){return Nr}),n.d(e,"Repeat",function(){return Hr}),n.d(e,"is",function(){return D}),n.d(e,"fromJS",function(){return an}),n.d(e,"hash",function(){return U}),n.d(e,"isImmutable",function(){return b}),n.d(e,"isCollection",function(){return d}),n.d(e,"isKeyed",function(){return y}),n.d(e,"isIndexed",function(){return v}),n.d(e,"isAssociative",function(){return m}),n.d(e,"isOrdered",function(){return w}),n.d(e,"isValueObject",function(){return F}),n.d(e,"get",function(){return St}),n.d(e,"getIn",function(){return qe}),n.d(e,"has",function(){return wt}),n.d(e,"hasIn",function(){return Le}),n.d(e,"merge",function(){return qt}),n.d(e,"mergeDeep",function(){return Lt}),n.d(e,"mergeWith",function(){return Ut}),n.d(e,"mergeDeepWith",function(){return Ht}),n.d(e,"remove",function(){return At}),n.d(e,"removeIn",function(){return Ct}),n.d(e,"set",function(){return Et}),n.d(e,"setIn",function(){return xt}),n.d(e,"update",function(){return Mt}),n.d(e,"updateIn",function(){return Tt});var cn=5,fn=1<<cn,ln=fn-1,pn={},hn="@@__IMMUTABLE_ITERABLE__@@",dn="@@__IMMUTABLE_KEYED__@@",yn="@@__IMMUTABLE_INDEXED__@@",vn=function(t){return d(t)?t:Nn(t)},mn=function(t){function e(t){return y(t)?t:Mn(t)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(vn),_n=function(t){function e(t){return v(t)?t:Rn(t)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(vn),gn=function(t){function e(t){return d(t)&&!m(t)?t:Pn(t)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(vn);vn.Keyed=mn,vn.Indexed=_n,vn.Set=gn;var bn="@@__IMMUTABLE_SEQ__@@",wn="@@__IMMUTABLE_RECORD__@@",Sn="@@__IMMUTABLE_ORDERED__@@",On=0,An=1,En=2,Tn="function"==typeof Symbol&&Symbol.iterator,In="@@iterator",xn=Tn||In,kn=function(t){this.next=t};kn.prototype.toString=function(){return"[Iterator]"},kn.KEYS=On,kn.VALUES=An,kn.ENTRIES=En,kn.prototype.inspect=kn.prototype.toSource=function(){return this.toString()},kn.prototype[xn]=function(){return this};var Cn=Object.prototype.hasOwnProperty,Nn=function(t){function e(t){return null===t||void 0===t?k():b(t)?t.toSeq():M(t)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toSeq=function(){return this},e.prototype.toString=function(){return this.__toString("Seq {","}")},e.prototype.cacheResult=function(){return!this._cache&&this.__iterateUncached&&(this._cache=this.entrySeq().toArray(),this.size=this._cache.length),this},e.prototype.__iterate=function(t,e){var n=this._cache;if(n){for(var r=n.length,i=0;i!==r;){var o=n[e?r-++i:i++];if(!1===t(o[1],o[0],this))break}return i}return this.__iterateUncached(t,e)},e.prototype.__iterator=function(t,e){var n=this._cache;if(n){var r=n.length,i=0;return new kn(function(){if(i===r)return O();var o=n[e?r-++i:i++];return S(t,o[0],o[1])})}return this.__iteratorUncached(t,e)},e}(vn),Mn=function(t){function e(t){return null===t||void 0===t?k().toKeyedSeq():d(t)?y(t)?t.toSeq():t.fromEntrySeq():g(t)?t.toSeq():C(t)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toKeyedSeq=function(){return this},e}(Nn),Rn=function(t){function e(t){return null===t||void 0===t?k():d(t)?y(t)?t.entrySeq():t.toIndexedSeq():g(t)?t.toSeq().entrySeq():N(t)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return e(arguments)},e.prototype.toIndexedSeq=function(){return this},e.prototype.toString=function(){return this.__toString("Seq [","]")},e}(Nn),Pn=function(t){function e(t){return(d(t)&&!m(t)?t:Rn(t)).toSetSeq()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return e(arguments)},e.prototype.toSetSeq=function(){return this},e}(Nn);Nn.isSeq=_,Nn.Keyed=Mn,Nn.Set=Pn,Nn.Indexed=Rn,Nn.prototype[bn]=!0;var jn=function(t){function e(t){this._array=t,this.size=t.length}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t,e){return this.has(t)?this._array[u(this,t)]:e},e.prototype.__iterate=function(t,e){for(var n=this._array,r=n.length,i=0;i!==r;){var o=e?r-++i:i++;if(!1===t(n[o],o,this))break}return i},e.prototype.__iterator=function(t,e){var n=this._array,r=n.length,i=0;return new kn(function(){if(i===r)return O();var o=e?r-++i:i++;return S(t,o,n[o])})},e}(Rn),Fn=function(t){function e(t){var e=Object.keys(t);this._object=t,this._keys=e,this.size=e.length}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t,e){return void 0===e||this.has(t)?this._object[t]:e},e.prototype.has=function(t){return Cn.call(this._object,t)},e.prototype.__iterate=function(t,e){for(var n=this._object,r=this._keys,i=r.length,o=0;o!==i;){var a=r[e?i-++o:o++];if(!1===t(n[a],a,this))break}return o},e.prototype.__iterator=function(t,e){var n=this._object,r=this._keys,i=r.length,o=0;return new kn(function(){if(o===i)return O();var a=r[e?i-++o:o++];return S(t,a,n[a])})},e}(Mn);Fn.prototype[Sn]=!0;var Dn,qn,Un=function(t){function e(t){this._collection=t,this.size=t.length||t.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.__iterateUncached=function(t,e){if(e)return this.cacheResult().__iterate(t,e);var n=this._collection,r=T(n),i=0;if(E(r))for(var o;!(o=r.next()).done&&!1!==t(o.value,i++,this););return i},e.prototype.__iteratorUncached=function(t,e){if(e)return this.cacheResult().__iterator(t,e);var n=this._collection,r=T(n);if(!E(r))return new kn(O);var i=0;return new kn(function(){var e=r.next();return e.done?e:S(t,i++,e.value)})},e}(Rn),Ln="@@__IMMUTABLE_MAP__@@",Hn="function"==typeof Math.imul&&-2===Math.imul(4294967295,2)?Math.imul:function(t,e){t|=0,e|=0;var n=65535&t,r=65535&e;return n*r+((t>>>16)*r+n*(e>>>16)<<16>>>0)|0},Wn=Object.prototype.valueOf,Bn=Object.isExtensible,zn=function(){try{return Object.defineProperty({},"@",{}),!0}catch(t){return!1}}(),Kn="function"==typeof WeakMap;Kn&&(qn=new WeakMap);var Vn=0,Yn="__immutablehash__";"function"==typeof Symbol&&(Yn=Symbol(Yn));var Gn=16,Xn=255,Jn=0,$n={},Zn=function(t){function e(t,e){this._iter=t,this._useKeys=e,this.size=t.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t,e){return this._iter.get(t,e)},e.prototype.has=function(t){return this._iter.has(t)},e.prototype.valueSeq=function(){return this._iter.valueSeq()},e.prototype.reverse=function(){var t=this,e=Y(this,!0);return this._useKeys||(e.valueSeq=function(){return t._iter.toSeq().reverse()}),e},e.prototype.map=function(t,e){var n=this,r=V(this,t,e);return this._useKeys||(r.valueSeq=function(){return n._iter.toSeq().map(t,e)}),r},e.prototype.__iterate=function(t,e){var n=this;return this._iter.__iterate(function(e,r){return t(e,r,n)},e)},e.prototype.__iterator=function(t,e){return this._iter.__iterator(t,e)},e}(Mn);Zn.prototype[Sn]=!0;var Qn=function(t){function e(t){this._iter=t,this.size=t.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.includes=function(t){return this._iter.includes(t)},e.prototype.__iterate=function(t,e){var n=this,r=0;return e&&a(this),this._iter.__iterate(function(i){return t(i,e?n.size-++r:r++,n)},e)},e.prototype.__iterator=function(t,e){var n=this,r=this._iter.__iterator(An,e),i=0;return e&&a(this),new kn(function(){var o=r.next();return o.done?o:S(t,e?n.size-++i:i++,o.value,o)})},e}(Rn),tr=function(t){function e(t){this._iter=t,this.size=t.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.has=function(t){return this._iter.includes(t)},e.prototype.__iterate=function(t,e){var n=this;return this._iter.__iterate(function(e){return t(e,e,n)},e)},e.prototype.__iterator=function(t,e){var n=this._iter.__iterator(An,e);return new kn(function(){var e=n.next();return e.done?e:S(t,e.value,e.value,e)})},e}(Pn),er=function(t){function e(t){this._iter=t,this.size=t.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.entrySeq=function(){return this._iter.toSeq()},e.prototype.__iterate=function(t,e){var n=this;return this._iter.__iterate(function(e){if(e){ct(e);var r=d(e);return t(r?e.get(1):e[1],r?e.get(0):e[0],n)}},e)},e.prototype.__iterator=function(t,e){var n=this._iter.__iterator(An,e);return new kn(function(){for(;;){var e=n.next();if(e.done)return e;var r=e.value;if(r){ct(r);var i=d(r);return S(t,i?r.get(0):r[0],i?r.get(1):r[1],e)}}})},e}(Mn);Qn.prototype.cacheResult=Zn.prototype.cacheResult=tr.prototype.cacheResult=er.prototype.cacheResult=pt;var nr=function(t){function e(e){return null===e||void 0===e?ne():P(e)&&!w(e)?e:ne().withMutations(function(n){var r=t(e);vt(r.size),r.forEach(function(t,e){return n.set(e,t)})})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return ne().withMutations(function(e){for(var n=0;n<t.length;n+=2){if(n+1>=t.length)throw new Error("Missing value for key: "+t[n]);e.set(t[n],t[n+1])}})},e.prototype.toString=function(){return this.__toString("Map {","}")},e.prototype.get=function(t,e){return this._root?this._root.get(0,void 0,t,e):e},e.prototype.set=function(t,e){return re(this,t,e)},e.prototype.remove=function(t){return re(this,t,pn)},e.prototype.deleteAll=function(t){var e=vn(t);return 0===e.size?this:this.withMutations(function(t){e.forEach(function(e){return t.remove(e)})})},e.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._root=null,this.__hash=void 0,this.__altered=!0,this):ne()},e.prototype.sort=function(t){return br(it(this,t))},e.prototype.sortBy=function(t,e){return br(it(this,e,t))},e.prototype.map=function(t,e){return this.withMutations(function(n){n.forEach(function(r,i){n.set(i,t.call(e,r,i,n))})})},e.prototype.__iterator=function(t,e){return new fr(this,t,e)},e.prototype.__iterate=function(t,e){var n=this,r=0;return this._root&&this._root.iterate(function(e){return r++,t(e[1],e[0],n)},e),r},e.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?ee(this.size,this._root,t,this.__hash):0===this.size?ne():(this.__ownerID=t,this.__altered=!1,this)},e}(mn);nr.isMap=P;var rr=nr.prototype;rr[Ln]=!0,rr.delete=rr.remove,rr.removeAll=rr.deleteAll,rr.setIn=kt,rr.removeIn=rr.deleteIn=Nt,rr.update=Rt,rr.updateIn=Pt,rr.merge=rr.concat=jt,rr.mergeWith=Ft,rr.mergeDeep=Kt,rr.mergeDeepWith=Vt,rr.mergeIn=Yt,rr.mergeDeepIn=Gt,rr.withMutations=Xt,rr.wasAltered=Zt,rr.asImmutable=$t,rr["@@transducer/init"]=rr.asMutable=Jt,rr["@@transducer/step"]=function(t,e){return t.set(e[0],e[1])},rr["@@transducer/result"]=function(t){return t.asImmutable()};var ir=function(t,e){this.ownerID=t,this.entries=e};ir.prototype.get=function(t,e,n,r){for(var i=this.entries,o=0,a=i.length;o<a;o++)if(D(n,i[o][0]))return i[o][1];return r},ir.prototype.update=function(t,e,n,r,o,a,u){for(var s=o===pn,c=this.entries,f=0,l=c.length;f<l&&!D(r,c[f][0]);f++);var p=f<l;if(p?c[f][1]===o:s)return this;if(i(u),(s||!p)&&i(a),!s||1!==c.length){if(!p&&!s&&c.length>=lr)return ue(t,c,r,o);var h=t&&t===this.ownerID,d=h?c:dt(c);return p?s?f===l-1?d.pop():d[f]=d.pop():d[f]=[r,o]:d.push([r,o]),h?(this.entries=d,this):new ir(t,d)}};var or=function(t,e,n){this.ownerID=t,this.bitmap=e,this.nodes=n};or.prototype.get=function(t,e,n,r){void 0===e&&(e=U(n));var i=1<<((0===t?e:e>>>t)&ln),o=this.bitmap;return 0==(o&i)?r:this.nodes[fe(o&i-1)].get(t+cn,e,n,r)},or.prototype.update=function(t,e,n,r,i,o,a){void 0===n&&(n=U(r));var u=(0===e?n:n>>>e)&ln,s=1<<u,c=this.bitmap,f=0!=(c&s);if(!f&&i===pn)return this;var l=fe(c&s-1),p=this.nodes,h=f?p[l]:void 0,d=ie(h,t,e+cn,n,r,i,o,a);if(d===h)return this;if(!f&&d&&p.length>=pr)return ce(t,p,c,u,d);if(f&&!d&&2===p.length&&oe(p[1^l]))return p[1^l];if(f&&d&&1===p.length&&oe(d))return d;var y=t&&t===this.ownerID,v=f?d?c:c^s:c|s,m=f?d?le(p,l,d,y):he(p,l,y):pe(p,l,d,y);return y?(this.bitmap=v,this.nodes=m,this):new or(t,v,m)};var ar=function(t,e,n){this.ownerID=t,this.count=e,this.nodes=n};ar.prototype.get=function(t,e,n,r){void 0===e&&(e=U(n));var i=(0===t?e:e>>>t)&ln,o=this.nodes[i];return o?o.get(t+cn,e,n,r):r},ar.prototype.update=function(t,e,n,r,i,o,a){void 0===n&&(n=U(r));var u=(0===e?n:n>>>e)&ln,s=i===pn,c=this.nodes,f=c[u];if(s&&!f)return this;var l=ie(f,t,e+cn,n,r,i,o,a);if(l===f)return this;var p=this.count;if(f){if(!l&&--p<hr)return se(t,c,p,u)}else p++;var h=t&&t===this.ownerID,d=le(c,u,l,h);return h?(this.count=p,this.nodes=d,this):new ar(t,p,d)};var ur=function(t,e,n){this.ownerID=t,this.keyHash=e,this.entries=n};ur.prototype.get=function(t,e,n,r){for(var i=this.entries,o=0,a=i.length;o<a;o++)if(D(n,i[o][0]))return i[o][1];return r},ur.prototype.update=function(t,e,n,r,o,a,u){void 0===n&&(n=U(r));var s=o===pn;if(n!==this.keyHash)return s?this:(i(u),i(a),ae(this,t,e,n,[r,o]));for(var c=this.entries,f=0,l=c.length;f<l&&!D(r,c[f][0]);f++);var p=f<l;if(p?c[f][1]===o:s)return this;if(i(u),(s||!p)&&i(a),s&&2===l)return new sr(t,this.keyHash,c[1^f]);var h=t&&t===this.ownerID,d=h?c:dt(c);return p?s?f===l-1?d.pop():d[f]=d.pop():d[f]=[r,o]:d.push([r,o]),h?(this.entries=d,this):new ur(t,this.keyHash,d)};var sr=function(t,e,n){this.ownerID=t,this.keyHash=e,this.entry=n};sr.prototype.get=function(t,e,n,r){return D(n,this.entry[0])?this.entry[1]:r},sr.prototype.update=function(t,e,n,r,o,a,u){var s=o===pn,c=D(r,this.entry[0]);return(c?o===this.entry[1]:s)?this:(i(u),s?void i(a):c?t&&t===this.ownerID?(this.entry[1]=o,this):new sr(t,this.keyHash,[r,o]):(i(a),ae(this,t,e,U(r),[r,o])))},ir.prototype.iterate=ur.prototype.iterate=function(t,e){for(var n=this.entries,r=0,i=n.length-1;r<=i;r++)if(!1===t(n[e?i-r:r]))return!1},or.prototype.iterate=ar.prototype.iterate=function(t,e){for(var n=this.nodes,r=0,i=n.length-1;r<=i;r++){var o=n[e?i-r:r];if(o&&!1===o.iterate(t,e))return!1}},sr.prototype.iterate=function(t,e){return t(this.entry)};var cr,fr=function(t){function e(t,e,n){this._type=e,this._reverse=n,this._stack=t._root&&te(t._root)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){for(var t=this._type,e=this._stack;e;){var n=e.node,r=e.index++,i=void 0;if(n.entry){if(0===r)return Qt(t,n.entry)}else if(n.entries){if(i=n.entries.length-1,r<=i)return Qt(t,n.entries[this._reverse?i-r:r])}else if(i=n.nodes.length-1,r<=i){var o=n.nodes[this._reverse?i-r:r];if(o){if(o.entry)return Qt(t,o.entry);e=this._stack=te(o,e)}continue}e=this._stack=this._stack.__prev}return O()},e}(kn),lr=fn/4,pr=fn/2,hr=fn/4,dr="@@__IMMUTABLE_LIST__@@",yr=function(t){function e(e){var n=me();if(null===e||void 0===e)return n;if(de(e))return e;var r=t(e),i=r.size;return 0===i?n:(vt(i),i>0&&i<fn?ve(0,i,cn,null,new mr(r.toArray())):n.withMutations(function(t){t.setSize(i),r.forEach(function(e,n){return t.set(n,e)})}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.prototype.toString=function(){return this.__toString("List [","]")},e.prototype.get=function(t,e){if((t=u(this,t))>=0&&t<this.size){t+=this._origin;var n=we(this,t);return n&&n.array[t&ln]}return e},e.prototype.set=function(t,e){return _e(this,t,e)},e.prototype.remove=function(t){return this.has(t)?0===t?this.shift():t===this.size-1?this.pop():this.splice(t,1):this},e.prototype.insert=function(t,e){return this.splice(t,0,e)},e.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=this._origin=this._capacity=0,this._level=cn,this._root=this._tail=null,this.__hash=void 0,this.__altered=!0,this):me()},e.prototype.push=function(){var t=arguments,e=this.size;return this.withMutations(function(n){Se(n,0,e+t.length);for(var r=0;r<t.length;r++)n.set(e+r,t[r])})},e.prototype.pop=function(){return Se(this,0,-1)},e.prototype.unshift=function(){var t=arguments;return this.withMutations(function(e){Se(e,-t.length);for(var n=0;n<t.length;n++)e.set(n,t[n])})},e.prototype.shift=function(){return Se(this,1)},e.prototype.concat=function(){for(var e=arguments,n=[],r=0;r<arguments.length;r++){var i=e[r],o=t("string"!=typeof i&&A(i)?i:[i]);0!==o.size&&n.push(o)}return 0===n.length?this:0!==this.size||this.__ownerID||1!==n.length?this.withMutations(function(t){n.forEach(function(e){return e.forEach(function(e){return t.push(e)})})}):this.constructor(n[0])},e.prototype.setSize=function(t){return Se(this,0,t)},e.prototype.map=function(t,e){var n=this;return this.withMutations(function(r){for(var i=0;i<n.size;i++)r.set(i,t.call(e,r.get(i),i,r))})},e.prototype.slice=function(t,e){var n=this.size;return c(t,e,n)?this:Se(this,f(t,n),l(e,n))},e.prototype.__iterator=function(t,e){var n=e?this.size:0,r=ye(this,e);return new kn(function(){var i=r();return i===gr?O():S(t,e?--n:n++,i)})},e.prototype.__iterate=function(t,e){for(var n,r=e?this.size:0,i=ye(this,e);(n=i())!==gr&&!1!==t(n,e?--r:r++,this););return r},e.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?ve(this._origin,this._capacity,this._level,this._root,this._tail,t,this.__hash):0===this.size?me():(this.__ownerID=t,this.__altered=!1,this)},e}(_n);yr.isList=de;var vr=yr.prototype;vr[dr]=!0,vr.delete=vr.remove,vr.merge=vr.concat,vr.setIn=kt,vr.deleteIn=vr.removeIn=Nt,vr.update=Rt,vr.updateIn=Pt,vr.mergeIn=Yt,vr.mergeDeepIn=Gt,vr.withMutations=Xt,vr.wasAltered=Zt,vr.asImmutable=$t,vr["@@transducer/init"]=vr.asMutable=Jt,vr["@@transducer/step"]=function(t,e){return t.push(e)},vr["@@transducer/result"]=function(t){return t.asImmutable()};var mr=function(t,e){this.array=t,this.ownerID=e};mr.prototype.removeBefore=function(t,e,n){if(n===e?1<<e:0===this.array.length)return this;var r=n>>>e&ln;if(r>=this.array.length)return new mr([],t);var i,o=0===r;if(e>0){var a=this.array[r];if((i=a&&a.removeBefore(t,e-cn,n))===a&&o)return this}if(o&&!i)return this;var u=be(this,t);if(!o)for(var s=0;s<r;s++)u.array[s]=void 0;return i&&(u.array[r]=i),u},mr.prototype.removeAfter=function(t,e,n){if(n===(e?1<<e:0)||0===this.array.length)return this;var r=n-1>>>e&ln;if(r>=this.array.length)return this;var i;if(e>0){var o=this.array[r];if((i=o&&o.removeAfter(t,e-cn,n))===o&&r===this.array.length-1)return this}var a=be(this,t);return a.array.splice(r+1),i&&(a.array[r]=i),a};var _r,gr={},br=function(t){function e(t){return null===t||void 0===t?Ee():j(t)?t:Ee().withMutations(function(e){var n=mn(t);vt(n.size),n.forEach(function(t,n){return e.set(n,t)})})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.prototype.toString=function(){return this.__toString("OrderedMap {","}")},e.prototype.get=function(t,e){var n=this._map.get(t);return void 0!==n?this._list.get(n)[1]:e},e.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._map.clear(),this._list.clear(),this):Ee()},e.prototype.set=function(t,e){return Te(this,t,e)},e.prototype.remove=function(t){return Te(this,t,pn)},e.prototype.wasAltered=function(){return this._map.wasAltered()||this._list.wasAltered()},e.prototype.__iterate=function(t,e){var n=this;return this._list.__iterate(function(e){return e&&t(e[1],e[0],n)},e)},e.prototype.__iterator=function(t,e){return this._list.fromEntrySeq().__iterator(t,e)},e.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._map.__ensureOwner(t),n=this._list.__ensureOwner(t);return t?Ae(e,n,t,this.__hash):0===this.size?Ee():(this.__ownerID=t,this._map=e,this._list=n,this)},e}(nr);br.isOrderedMap=j,br.prototype[Sn]=!0,br.prototype.delete=br.prototype.remove;var wr,Sr="@@__IMMUTABLE_STACK__@@",Or=function(t){function e(t){return null===t||void 0===t?ke():Ie(t)?t:ke().pushAll(t)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.prototype.toString=function(){return this.__toString("Stack [","]")},e.prototype.get=function(t,e){var n=this._head;for(t=u(this,t);n&&t--;)n=n.next;return n?n.value:e},e.prototype.peek=function(){return this._head&&this._head.value},e.prototype.push=function(){var t=arguments;if(0===arguments.length)return this;for(var e=this.size+arguments.length,n=this._head,r=arguments.length-1;r>=0;r--)n={value:t[r],next:n};return this.__ownerID?(this.size=e,this._head=n,this.__hash=void 0,this.__altered=!0,this):xe(e,n)},e.prototype.pushAll=function(e){if(e=t(e),0===e.size)return this;if(0===this.size&&Ie(e))return e;vt(e.size);var n=this.size,r=this._head;return e.__iterate(function(t){n++,r={value:t,next:r}},!0),this.__ownerID?(this.size=n,this._head=r,this.__hash=void 0,this.__altered=!0,this):xe(n,r)},e.prototype.pop=function(){return this.slice(1)},e.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._head=void 0,this.__hash=void 0,this.__altered=!0,this):ke()},e.prototype.slice=function(e,n){if(c(e,n,this.size))return this;var r=f(e,this.size);if(l(n,this.size)!==this.size)return t.prototype.slice.call(this,e,n);for(var i=this.size-r,o=this._head;r--;)o=o.next;return this.__ownerID?(this.size=i,this._head=o,this.__hash=void 0,this.__altered=!0,this):xe(i,o)},e.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?xe(this.size,this._head,t,this.__hash):0===this.size?ke():(this.__ownerID=t,this.__altered=!1,this)},e.prototype.__iterate=function(t,e){var n=this;if(e)return new jn(this.toArray()).__iterate(function(e,r){return t(e,r,n)},e);for(var r=0,i=this._head;i&&!1!==t(i.value,r++,this);)i=i.next;return r},e.prototype.__iterator=function(t,e){if(e)return new jn(this.toArray()).__iterator(t,e);var n=0,r=this._head;return new kn(function(){if(r){var e=r.value;return r=r.next,S(t,n++,e)}return O()})},e}(_n);Or.isStack=Ie;var Ar=Or.prototype;Ar[Sr]=!0,Ar.shift=Ar.pop,Ar.unshift=Ar.push,Ar.unshiftAll=Ar.pushAll,Ar.withMutations=Xt,Ar.wasAltered=Zt,Ar.asImmutable=$t,Ar["@@transducer/init"]=Ar.asMutable=Jt,Ar["@@transducer/step"]=function(t,e){return t.unshift(e)},Ar["@@transducer/result"]=function(t){return t.asImmutable()};var Er,Tr="@@__IMMUTABLE_SET__@@",Ir=function(t){function e(e){return null===e||void 0===e?De():Ce(e)&&!w(e)?e:De().withMutations(function(n){var r=t(e);vt(r.size),r.forEach(function(t){return n.add(t)})})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.fromKeys=function(t){return this(mn(t).keySeq())},e.intersect=function(t){return t=vn(t).toArray(),t.length?xr.intersect.apply(e(t.pop()),t):De()},e.union=function(t){return t=vn(t).toArray(),t.length?xr.union.apply(e(t.pop()),t):De()},e.prototype.toString=function(){return this.__toString("Set {","}")},e.prototype.has=function(t){return this._map.has(t)},e.prototype.add=function(t){return je(this,this._map.set(t,t))},e.prototype.remove=function(t){return je(this,this._map.remove(t))},e.prototype.clear=function(){return je(this,this._map.clear())},e.prototype.map=function(t,e){var n=this,r=[],i=[];return this.forEach(function(o){var a=t.call(e,o,o,n);a!==o&&(r.push(o),i.push(a))}),this.withMutations(function(t){r.forEach(function(e){return t.remove(e)}),i.forEach(function(e){return t.add(e)})})},e.prototype.union=function(){for(var e=[],n=arguments.length;n--;)e[n]=arguments[n];return e=e.filter(function(t){return 0!==t.size}),0===e.length?this:0!==this.size||this.__ownerID||1!==e.length?this.withMutations(function(n){for(var r=0;r<e.length;r++)t(e[r]).forEach(function(t){return n.add(t)})}):this.constructor(e[0])},e.prototype.intersect=function(){for(var e=[],n=arguments.length;n--;)e[n]=arguments[n];if(0===e.length)return this;e=e.map(function(e){return t(e)});var r=[];return this.forEach(function(t){e.every(function(e){return e.includes(t)})||r.push(t)}),this.withMutations(function(t){r.forEach(function(e){t.remove(e)})})},e.prototype.subtract=function(){for(var e=[],n=arguments.length;n--;)e[n]=arguments[n];if(0===e.length)return this;e=e.map(function(e){return t(e)});var r=[];return this.forEach(function(t){e.some(function(e){return e.includes(t)})&&r.push(t)}),this.withMutations(function(t){r.forEach(function(e){t.remove(e)})})},e.prototype.sort=function(t){return jr(it(this,t))},e.prototype.sortBy=function(t,e){return jr(it(this,e,t))},e.prototype.wasAltered=function(){return this._map.wasAltered()},e.prototype.__iterate=function(t,e){var n=this;return this._map.__iterate(function(e){return t(e,e,n)},e)},e.prototype.__iterator=function(t,e){return this._map.__iterator(t,e)},e.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._map.__ensureOwner(t);return t?this.__make(e,t):0===this.size?this.__empty():(this.__ownerID=t,this._map=e,this)},e}(gn);Ir.isSet=Ce;var xr=Ir.prototype;xr[Tr]=!0,xr.delete=xr.remove,xr.merge=xr.concat=xr.union,xr.withMutations=Xt,xr.asImmutable=$t,xr["@@transducer/init"]=xr.asMutable=Jt,xr["@@transducer/step"]=function(t,e){return t.add(e)},xr["@@transducer/result"]=function(t){return t.asImmutable()},xr.__empty=De,xr.__make=Fe;var kr,Cr,Nr=function(t){function e(t,n,r){if(!(this instanceof e))return new e(t,n,r);if(yt(0!==r,"Cannot step a Range by 0"),t=t||0,void 0===n&&(n=1/0),r=void 0===r?1:Math.abs(r),n<t&&(r=-r),this._start=t,this._end=n,this._step=r,this.size=Math.max(0,Math.ceil((n-t)/r-1)+1),0===this.size){if(Cr)return Cr;Cr=this}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toString=function(){return 0===this.size?"Range []":"Range [ "+this._start+"..."+this._end+(1!==this._step?" by "+this._step:"")+" ]"},e.prototype.get=function(t,e){return this.has(t)?this._start+u(this,t)*this._step:e},e.prototype.includes=function(t){var e=(t-this._start)/this._step;return e>=0&&e<this.size&&e===Math.floor(e)},e.prototype.slice=function(t,n){return c(t,n,this.size)?this:(t=f(t,this.size),n=l(n,this.size),n<=t?new e(0,0):new e(this.get(t,this._end),this.get(n,this._end),this._step))},e.prototype.indexOf=function(t){var e=t-this._start;if(e%this._step==0){var n=e/this._step;if(n>=0&&n<this.size)return n}return-1},e.prototype.lastIndexOf=function(t){return this.indexOf(t)},e.prototype.__iterate=function(t,e){for(var n=this.size,r=this._step,i=e?this._start+(n-1)*r:this._start,o=0;o!==n&&!1!==t(i,e?n-++o:o++,this);)i+=e?-r:r;return o},e.prototype.__iterator=function(t,e){var n=this.size,r=this._step,i=e?this._start+(n-1)*r:this._start,o=0;return new kn(function(){if(o===n)return O();var a=i;return i+=e?-r:r,S(t,e?n-++o:o++,a)})},e.prototype.equals=function(t){return t instanceof e?this._start===t._start&&this._end===t._end&&this._step===t._step:Me(this,t)},e}(Rn);vn.isIterable=d,vn.isKeyed=y,vn.isIndexed=v,vn.isAssociative=m,vn.isOrdered=w,vn.Iterator=kn,Re(vn,{toArray:function(){vt(this.size);var t=new Array(this.size||0),e=y(this),n=0;return this.__iterate(function(r,i){t[n++]=e?[i,r]:r}),t},toIndexedSeq:function(){return new Qn(this)},toJS:function(){return Pe(this)},toKeyedSeq:function(){return new Zn(this,!0)},toMap:function(){return nr(this.toKeyedSeq())},toObject:We,toOrderedMap:function(){return br(this.toKeyedSeq())},toOrderedSet:function(){return jr(y(this)?this.valueSeq():this)},toSet:function(){return Ir(y(this)?this.valueSeq():this)},toSetSeq:function(){return new tr(this)},toSeq:function(){return v(this)?this.toIndexedSeq():y(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return Or(y(this)?this.valueSeq():this)},toList:function(){return yr(y(this)?this.valueSeq():this)},toString:function(){return"[Collection]"},__toString:function(t,e){return 0===this.size?t+e:t+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+e},concat:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return st(this,tt(this,t))},includes:function(t){return this.some(function(e){return D(e,t)})},entries:function(){return this.__iterator(En)},every:function(t,e){vt(this.size);var n=!0;return this.__iterate(function(r,i,o){if(!t.call(e,r,i,o))return n=!1,!1}),n},filter:function(t,e){return st(this,G(this,t,e,!0))},find:function(t,e,n){var r=this.findEntry(t,e);return r?r[1]:n},forEach:function(t,e){return vt(this.size),this.__iterate(e?t.bind(e):t)},join:function(t){vt(this.size),t=void 0!==t?""+t:",";var e="",n=!0;return this.__iterate(function(r){n?n=!1:e+=t,e+=null!==r&&void 0!==r?r.toString():""}),e},keys:function(){return this.__iterator(On)},map:function(t,e){return st(this,V(this,t,e))},reduce:function(t,e,n){return Be(this,t,e,n,arguments.length<2,!1)},reduceRight:function(t,e,n){return Be(this,t,e,n,arguments.length<2,!0)},reverse:function(){return st(this,Y(this,!0))},slice:function(t,e){return st(this,$(this,t,e,!0))},some:function(t,e){return!this.every(Ve(t),e)},sort:function(t){return st(this,it(this,t))},values:function(){return this.__iterator(An)},butLast:function(){return this.slice(0,-1)},isEmpty:function(){return void 0!==this.size?0===this.size:!this.some(function(){return!0})},count:function(t,e){return a(t?this.toSeq().filter(t,e):this)},countBy:function(t,e){return X(this,t,e)},equals:function(t){return Me(this,t)},entrySeq:function(){var t=this;if(t._cache)return new jn(t._cache);var e=t.toSeq().map(Ke).toIndexedSeq();return e.fromEntrySeq=function(){return t.toSeq()},e},filterNot:function(t,e){return this.filter(Ve(t),e)},findEntry:function(t,e,n){var r=n;return this.__iterate(function(n,i,o){if(t.call(e,n,i,o))return r=[i,n],!1}),r},findKey:function(t,e){var n=this.findEntry(t,e);return n&&n[0]},findLast:function(t,e,n){return this.toKeyedSeq().reverse().find(t,e,n)},findLastEntry:function(t,e,n){return this.toKeyedSeq().reverse().findEntry(t,e,n)},findLastKey:function(t,e){return this.toKeyedSeq().reverse().findKey(t,e)},first:function(t){return this.find(s,null,t)},flatMap:function(t,e){return st(this,nt(this,t,e))},flatten:function(t){return st(this,et(this,t,!0))},fromEntrySeq:function(){return new er(this)},get:function(t,e){return this.find(function(e,n){return D(n,t)},void 0,e)},getIn:Ue,groupBy:function(t,e){return J(this,t,e)},has:function(t){return this.get(t,pn)!==pn},hasIn:He,isSubset:function(t){return t="function"==typeof t.includes?t:vn(t),this.every(function(e){return t.includes(e)})},isSuperset:function(t){return t="function"==typeof t.isSubset?t:vn(t),t.isSubset(this)},keyOf:function(t){return this.findKey(function(e){return D(e,t)})},keySeq:function(){return this.toSeq().map(ze).toIndexedSeq()},last:function(t){return this.toSeq().reverse().first(t)},lastKeyOf:function(t){return this.toKeyedSeq().reverse().keyOf(t)},max:function(t){return ot(this,t)},maxBy:function(t,e){return ot(this,e,t)},min:function(t){return ot(this,t?Ye(t):Xe)},minBy:function(t,e){return ot(this,e?Ye(e):Xe,t)},rest:function(){return this.slice(1)},skip:function(t){return 0===t?this:this.slice(Math.max(0,t))},skipLast:function(t){return 0===t?this:this.slice(0,-Math.max(0,t))},skipWhile:function(t,e){return st(this,Q(this,t,e,!0))},skipUntil:function(t,e){return this.skipWhile(Ve(t),e)},sortBy:function(t,e){return st(this,it(this,e,t))},take:function(t){return this.slice(0,Math.max(0,t))},takeLast:function(t){return this.slice(-Math.max(0,t))},takeWhile:function(t,e){return st(this,Z(this,t,e))},takeUntil:function(t,e){return this.takeWhile(Ve(t),e)},update:function(t){return t(this)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){return this.__hash||(this.__hash=Je(this))}});var Mr=vn.prototype;Mr[hn]=!0,Mr[xn]=Mr.values,Mr.toJSON=Mr.toArray,Mr.__toStringMapper=bt,Mr.inspect=Mr.toSource=function(){return this.toString()},Mr.chain=Mr.flatMap,Mr.contains=Mr.includes,Re(mn,{flip:function(){return st(this,K(this))},mapEntries:function(t,e){var n=this,r=0;return st(this,this.toSeq().map(function(i,o){return t.call(e,[o,i],r++,n)}).fromEntrySeq())},mapKeys:function(t,e){var n=this;return st(this,this.toSeq().flip().map(function(r,i){return t.call(e,r,i,n)}).flip())}});var Rr=mn.prototype;Rr[dn]=!0,Rr[xn]=Mr.entries,Rr.toJSON=We,Rr.__toStringMapper=function(t,e){return bt(e)+": "+bt(t)},Re(_n,{toKeyedSeq:function(){return new Zn(this,!1)},filter:function(t,e){return st(this,G(this,t,e,!1))},findIndex:function(t,e){var n=this.findEntry(t,e);return n?n[0]:-1},indexOf:function(t){var e=this.keyOf(t);return void 0===e?-1:e},lastIndexOf:function(t){var e=this.lastKeyOf(t);return void 0===e?-1:e},reverse:function(){return st(this,Y(this,!1))},slice:function(t,e){return st(this,$(this,t,e,!1))},splice:function(t,e){var n=arguments.length;if(e=Math.max(e||0,0),0===n||2===n&&!e)return this;t=f(t,t<0?this.count():this.size);var r=this.slice(0,t);return st(this,1===n?r:r.concat(dt(arguments,2),this.slice(t+e)))},findLastIndex:function(t,e){var n=this.findLastEntry(t,e);return n?n[0]:-1},first:function(t){return this.get(0,t)},flatten:function(t){return st(this,et(this,t,!1))},get:function(t,e){return t=u(this,t),t<0||this.size===1/0||void 0!==this.size&&t>this.size?e:this.find(function(e,n){return n===t},void 0,e)},has:function(t){return(t=u(this,t))>=0&&(void 0!==this.size?this.size===1/0||t<this.size:-1!==this.indexOf(t))},interpose:function(t){return st(this,rt(this,t))},interleave:function(){var t=[this].concat(dt(arguments)),e=ut(this.toSeq(),Rn.of,t),n=e.flatten(!0);return e.size&&(n.size=e.size*t.length),st(this,n)},keySeq:function(){return Nr(0,this.size)},last:function(t){return this.get(-1,t)},skipWhile:function(t,e){return st(this,Q(this,t,e,!1))},zip:function(){return st(this,ut(this,Ge,[this].concat(dt(arguments))))},zipAll:function(){return st(this,ut(this,Ge,[this].concat(dt(arguments)),!0))},zipWith:function(t){var e=dt(arguments);return e[0]=this,st(this,ut(this,t,e))}});var Pr=_n.prototype;Pr[yn]=!0,Pr[Sn]=!0,Re(gn,{get:function(t,e){return this.has(t)?t:e},includes:function(t){return this.has(t)},keySeq:function(){return this.valueSeq()}}),gn.prototype.has=Mr.includes,gn.prototype.contains=gn.prototype.includes,Re(Mn,mn.prototype),Re(Rn,_n.prototype),Re(Pn,gn.prototype);var jr=function(t){function e(t){return null===t||void 0===t?tn():Ne(t)?t:tn().withMutations(function(e){var n=gn(t);vt(n.size),n.forEach(function(t){return e.add(t)})})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.fromKeys=function(t){return this(mn(t).keySeq())},e.prototype.toString=function(){return this.__toString("OrderedSet {","}")},e}(Ir);jr.isOrderedSet=Ne;var Fr=jr.prototype;Fr[Sn]=!0,Fr.zip=Pr.zip,Fr.zipWith=Pr.zipWith,Fr.__empty=tn,Fr.__make=Qe;var Dr,qr=function(t,e){var n,r=function(o){var a=this;if(o instanceof r)return o;if(!(this instanceof r))return new r(o);if(!n){n=!0;var u=Object.keys(t),s=i._indices={};i._name=e,i._keys=u,i._defaultValues=t;for(var c=0;c<u.length;c++){var f=u[c];s[f]=c,i[f]?"object"==typeof console&&console.warn&&console.warn("Cannot define "+nn(this)+' with property "'+f+'" since that property name is part of the Record API.'):on(i,f)}}this.__ownerID=void 0,this._values=yr().withMutations(function(t){t.setSize(a._keys.length),mn(o).forEach(function(e,n){t.set(a._indices[n],e===a._defaultValues[n]?void 0:e)})})},i=r.prototype=Object.create(Ur);return i.constructor=r,e&&(r.displayName=e),r};qr.prototype.toString=function(){for(var t,e=nn(this)+" { ",n=this._keys,r=0,i=n.length;r!==i;r++)t=n[r],e+=(r?", ":"")+t+": "+bt(this.get(t));return e+" }"},qr.prototype.equals=function(t){return this===t||t&&this._keys===t._keys&&rn(this).equals(rn(t))},qr.prototype.hashCode=function(){return rn(this).hashCode()},qr.prototype.has=function(t){return this._indices.hasOwnProperty(t)},qr.prototype.get=function(t,e){if(!this.has(t))return e;var n=this._indices[t],r=this._values.get(n);return void 0===r?this._defaultValues[t]:r},qr.prototype.set=function(t,e){if(this.has(t)){var n=this._values.set(this._indices[t],e===this._defaultValues[t]?void 0:e);if(n!==this._values&&!this.__ownerID)return en(this,n)}return this},qr.prototype.remove=function(t){return this.set(t)},qr.prototype.clear=function(){var t=this._values.clear().setSize(this._keys.length);return this.__ownerID?this:en(this,t)},qr.prototype.wasAltered=function(){return this._values.wasAltered()},qr.prototype.toSeq=function(){return rn(this)},qr.prototype.toJS=function(){return Pe(this)},qr.prototype.entries=function(){return this.__iterator(En)},qr.prototype.__iterator=function(t,e){return rn(this).__iterator(t,e)},qr.prototype.__iterate=function(t,e){return rn(this).__iterate(t,e)},qr.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._values.__ensureOwner(t);return t?en(this,e,t):(this.__ownerID=t,this._values=e,this)},qr.isRecord=g,qr.getDescriptiveName=nn;var Ur=qr.prototype;Ur[wn]=!0,Ur.delete=Ur.remove,Ur.deleteIn=Ur.removeIn=Nt,Ur.getIn=Ue,Ur.hasIn=Mr.hasIn,Ur.merge=jt,Ur.mergeWith=Ft,Ur.mergeIn=Yt,Ur.mergeDeep=Kt,Ur.mergeDeepWith=Vt,Ur.mergeDeepIn=Gt,Ur.setIn=kt,Ur.update=Rt,Ur.updateIn=Pt,Ur.withMutations=Xt,Ur.asMutable=Jt,Ur.asImmutable=$t,Ur[xn]=Ur.entries,Ur.toJSON=Ur.toObject=Mr.toObject,Ur.inspect=Ur.toSource=function(){return this.toString()};var Lr,Hr=function(t){function e(t,n){if(!(this instanceof e))return new e(t,n);if(this._value=t,this.size=void 0===n?1/0:Math.max(0,n),0===this.size){if(Lr)return Lr;Lr=this}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toString=function(){return 0===this.size?"Repeat []":"Repeat [ "+this._value+" "+this.size+" times ]"},e.prototype.get=function(t,e){return this.has(t)?this._value:e},e.prototype.includes=function(t){return D(this._value,t)},e.prototype.slice=function(t,n){var r=this.size;return c(t,n,r)?this:new e(this._value,l(n,r)-f(t,r))},e.prototype.reverse=function(){return this},e.prototype.indexOf=function(t){return D(this._value,t)?0:-1},e.prototype.lastIndexOf=function(t){return D(this._value,t)?this.size:-1},e.prototype.__iterate=function(t,e){for(var n=this.size,r=0;r!==n&&!1!==t(this._value,e?n-++r:r++,this););return r},e.prototype.__iterator=function(t,e){var n=this,r=this.size,i=0;return new kn(function(){return i===r?O():S(t,e?r-++i:i++,n._value)})},e.prototype.equals=function(t){return t instanceof e?D(this._value,t._value):Me(t)},e}(Rn),Wr="4.0.0-rc.11",Br={version:Wr,Collection:vn,Iterable:vn,Seq:Nn,Map:nr,OrderedMap:br,List:yr,Stack:Or,Set:Ir,OrderedSet:jr,Record:qr,Range:Nr,Repeat:Hr,is:D,fromJS:an,hash:U,isImmutable:b,isCollection:d,isKeyed:y,isIndexed:v,isAssociative:m,isOrdered:w,isValueObject:F,isSeq:_,isList:de,isMap:P,isOrderedMap:j,isStack:Ie,isSet:Ce,isOrderedSet:Ne,isRecord:g,get:St,getIn:qe,has:wt,hasIn:Le,merge:qt,mergeDeep:Lt,mergeWith:Ut,mergeDeepWith:Ht,remove:At,removeIn:Ct,set:Et,setIn:xt,update:Mt,updateIn:Tt},zr=vn;e.default=Br},1490:function(t,e,n){"use strict";function r(){var t=this;["insignea","tile","hand","foot","head","backgrounds/plain","backgrounds/squad_edit"].forEach(function(e){return t.load.image(e,i+"/"+e+".svg")}),[1,2,3,4].forEach(function(e){t.load.image("head"+e.toString(),i+"/head.svg"),t.load.image("back_head"+e.toString(),i+"/back_head.svg")}),["fighter","knight","wizard"].forEach(function(e){t.load.image("trunk_"+e,i+"/trunk_"+e+".svg"),t.load.image("trunk_back_"+e,i+"/trunk_back_"+e+".svg")}),["arrow_right","panel"].forEach(function(e){t.load.image(e,i+"/ui/"+e+".svg")}),["amulet","iron_armor","iron_shield","iron_sword","steel_armor","steel_shield","steel_sword","baldar_armor","baldar_shield","baldar_sword","oaken_staff"].forEach(function(e){t.load.image(e,i+"/items/"+e+".png")}),["equips/iron_sword","equips/steel_sword","equips/baldar_sword","equips/oaken_staff"].forEach(function(e){t.load.image(e,i+"/"+e+".svg")}),["props/grass","props/bush","props/far_tree_1","props/branch"].forEach(function(e){t.load.image(e,i+"/"+e+".svg")}),["tiles/grass","tiles/woods","tiles/mountain","tiles/castle"].forEach(function(e){t.load.image(e,i+"/"+e+".svg")}),["tiles/town"].forEach(function(e){t.load.image(e,i+"/"+e+".png")}),["merano"].forEach(function(e){t.load.image(e,i+"/art/castles/"+e+".jpg")})}Object.defineProperty(e,"__esModule",{value:!0}),e.preload=r;var i="assets"},1491:function(t,e,n){"use strict";function r(t){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t){return t&&t.__esModule?t:{default:t}}function o(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return o=function(){return t},t}function a(t){if(t&&t.__esModule)return t;if(null===t||"object"!==r(t)&&"function"!=typeof t)return{default:t};var e=o();if(e&&e.has(t))return e.get(t);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){var u=i?Object.getOwnPropertyDescriptor(t,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=t[a]}return n.default=t,e&&e.set(t,n),n}Object.defineProperty(e,"__esModule",{value:!0}),e.EditSquadScene=void 0;var u=a(n(31)),s=n(40),c=i(n(1492)),f=a(n(1500)),l=i(n(130)),p=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),h=function(t){function e(){var e=t.call(this,"EditSquadScene")||this;return e.unitListScene=null,e.boardScene=null,console.log("EditSquadScene constructor. this:",e),e}return p(e,t),e.prototype.create=function(t){var e=t.squad;this.add.image(0,0,"backgrounds/squad_edit"),this.renderBoard(e),this.renderUnitList(),this.renderReturnBtn()},e.prototype.renderBoard=function(t){this.boardScene=new f.default(t),this.scene.add(f.BOARD_SCENE_KEY,this.boardScene,!0)},e.prototype.renderUnitList=function(){var t=this;this.unitListScene=new c.default(50,40),this.unitListScene.onDrag=function(e,n,r){return t.onDragFromList(e,n,r)},this.unitListScene.onDragEnd=function(e,n,r,i){return t.onDragEndFromList(e,n,r,i)},this.scene.add("UnitListScene",this.unitListScene,!0)},e.prototype.onDragEndFromList=function(t,e,n,r){var i,o,a,u,c,f,l=null===(i=this.boardScene)||void 0===i?void 0:i.findTileByXY(e,n);console.log("dropped on ",l);var p=this.boardScene;if(p){if(l){var h=(0,s.addUnitToSquad)(t,p.squad,l.boardX,l.boardY),d=Object.values(p.squad.members).find(function(t){return t.x===l.boardX&&t.y===l.boardY});if(p.squad=h,null===(o=this.unitListScene)||void 0===o||o.removeUnit(t),p.placeUnit({member:h.members[t.id],fromOutside:!0}),d){var y=p.unitList.find(function(t){return t.unit.id===d.id});this.tweens.add({targets:null===y||void 0===y?void 0:y.container,y:((null===(a=null===y||void 0===y?void 0:y.container)||void 0===a?void 0:a.y)||0)-200,alpha:0,ease:"Cubic",duration:400,repeat:0,paused:!1,yoyo:!1})}}else console.log("lets return",t,null===(u=this.unitListScene)||void 0===u?void 0:u.rows),null===(c=this.unitListScene)||void 0===c||c.returnToOriginalPosition(t),null===(f=this.unitListScene)||void 0===f||f.scaleDown(r);p.tiles.forEach(function(t){return t.sprite.clearTint()})}},e.prototype.onDragFromList=function(t,e,n){var r=this.boardScene;if(r){r.tiles.forEach(function(t){return t.sprite.clearTint()});var i=r.findTileByXY(e,n);i&&i.sprite.setTint(3407752)}},e.prototype.renderReturnBtn=function(){var t=this;console.log("rendering return btn"),(0,l.default)(1100,100,"Return to title",this.add.container(0,0),this,function(){t.scene.transition({target:"TitleScene",duration:0,moveBelow:!0}),t.destroyChildren()}),(0,l.default)(1100,200,"Return to List",this.add.container(0,0),this,function(){t.destroyChildren(),t.scene.transition({target:"ListSquadsScene",duration:0,moveBelow:!0})}),console.log("done")},e.prototype.destroyChildren=function(){var t,e;null===(t=this.boardScene)||void 0===t||t.destroy(),null===(e=this.unitListScene)||void 0===e||e.destroy()},e}(u.Scene);e.EditSquadScene=h},1492:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=function(t){return t&&t.__esModule?t:{default:t}}(n(31)),i=n(1493),o=n(40),a=n(103),u=n(76),s=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),c=function(t){function e(e,n){var r=t.call(this,"UnitListScene")||this;return r.x=e,r.y=n,r.controls=[],r.onUnitClick=null,r.onDrag=null,r.onDragEnd=null,r.rows=[],r.page=0,r.itemsPerPage=6,r}return s(e,t),e.prototype.create=function(){this.render(),this.renderControls()},e.prototype.makeBackground=function(){var t=new r.default.Geom.Rectangle(-50,-30,200,90),e=this.add.graphics({fillStyle:{color:255}});return e.alpha=.2,e.fillRectShape(t),e},e.prototype.destroy=function(){var t=this;this.rows.forEach(function(e){return t.scene.remove(t.makeUnitKey(e.chara.unit))}),this.scene.remove()},e.prototype.renderControls=function(){var t=this;this.controls.forEach(function(t){return t.destroy()});var e=(0,i.getUnitsWithoutSquad)((0,o.getUnits)()),n=Object.keys(e).length,r=this.add.image(this.x+100,this.y+630,"arrow_right");n<this.itemsPerPage||this.itemsPerPage*(this.page+1)>=n?r.setAlpha(.5):(r.setInteractive(),r.on("pointerdown",function(e){t.nextPage()}));var a=this.add.image(this.x,this.y+630,"arrow_right");a.setScale(-1,1),0===this.page?a.setAlpha(.5):(a.setInteractive(),a.on("pointerdown",function(e){t.prevPage()})),this.controls=[r,a]},e.prototype.nextPage=function(){this.page=this.page+1,this.clearUnitList(),this.render(),this.renderControls()},e.prototype.prevPage=function(){this.page=this.page-1,this.clearUnitList(),this.render(),this.renderControls()},e.prototype.clearUnitList=function(){var t=this;this.rows.forEach(function(e){t.scene.remove(e.chara.key),t.children.remove(e.container)}),this.rows=[]},e.prototype.getUnitsToRender=function(){var t=(0,i.getUnitsWithoutSquad)((0,o.getUnits)());return Object.values(t).slice(this.page*this.itemsPerPage,this.page*this.itemsPerPage+this.itemsPerPage)},e.prototype.render=function(){var t=this,e=this.getUnitsToRender();console.log("....",e),e.forEach(function(e,n){t.renderUnitListItem(e,n)})},e.prototype.handleUnitClick=function(t){this.onUnitClick&&(console.log("An event to handle unit click has been defined",t),this.onUnitClick(t))},e.prototype.handleUnitDrag=function(t,e,n,r){if(this.scaleUp(r),this.scene.bringToTop(r.key),this.onDrag)return this.onDrag(t,e,n)},e.prototype.handleUnitDragEnd=function(t,e,n,r){this.renderControls(),this.onDragEnd&&this.onDragEnd(t,e,n,r)},e.prototype.renderUnitListItem=function(t,e){var n=this.getRowPosition(e),i=n.charaX,o=n.charaY,u=this.makeUnitKey(t),s=this.add.container(i,o),c=this.onUnitClick?this.handleUnitClick.bind(this):void 0,f=this.onDrag?this.handleUnitDrag.bind(this):void 0,l=this.onDragEnd?this.handleUnitDragEnd.bind(this):void 0,p=new r.default.Geom.Rectangle(-50,-30,200,90),h=this.makeBackground();h.setInteractive(p,r.default.Geom.Rectangle.Contains),s.add(h),c&&h.on("pointerdown",function(){c(t)});var d=new a.Chara(u,this,t,i,o,.5,!0);f&&l&&d.enableDrag(f.bind(this),l.bind(this));var y=this.add.text(40,30,t.name);return s.add(y),this.rows.push({chara:d,text:y,container:s}),d},e.prototype.getRowPosition=function(t){return{charaX:this.x,charaY:this.y+100*t}},e.prototype.getUnitIndex=function(t){return this.rows.findIndex(function(e){return e.chara.unit.id===t.id})},e.prototype.returnToOriginalPosition=function(t){var e=this,n=this.getUnitIndex(t),r=this.rows.find(function(n){return n.chara.key===e.makeUnitKey(t)});if(!r)return(0,u.error)(u.INVALID_STATE);this.reposition(r,n)},e.prototype.scaleUp=function(t){this.tweens.add({targets:t.container,scale:1,duration:400,ease:"Cubic",repeat:0,paused:!1,yoyo:!1})},e.prototype.scaleDown=function(t){this.tweens.add({targets:t.container,scale:.5,duration:400,ease:"Cubic",repeat:0,paused:!1,yoyo:!1})},e.prototype.makeUnitKey=function(t){return"unit-list-"+t.id},e.prototype.reposition=function(t,e){var n=t.chara,r=t.container,i=this.getRowPosition(e),o=i.charaX,a=i.charaY;this.tweens.add({targets:n.container,x:o,y:a,duration:600,ease:"Cubic",repeat:0,paused:!1,yoyo:!1}),this.tweens.add({targets:r,x:o,y:a,duration:600,ease:"Cubic",repeat:0,paused:!1,yoyo:!1})},e.prototype.removeUnit=function(t){var e=this,n=function(e){return e.chara.unit.id===t.id};this.rows.filter(n).forEach(function(t){e.scene.remove(t.chara),e.children.remove(t.container)}),this.rows=this.rows.filter(function(t){return!n(t)}),this.rows.forEach(function(t,n){return e.reposition(t,n)});var r=this.getUnitsToRender();if(!(r.length<1)){var i=r[r.length-1];if(!this.rows.some(function(t){return t.chara.unit.id===i.id})){var o=this.renderUnitListItem(i,this.itemsPerPage-1);o.container&&o.container.setPosition(o.container.x,o.container.y+300);var a=this.rows[this.rows.length-1];a&&this.reposition(a,this.itemsPerPage-1)}}},e}(r.default.Scene),f=c;e.default=f},1493:function(t,e,n){"use strict";function r(t){var e=t.unit,n=t.stat,r=t.items,i=t.slot,o=e.equips[i],a=r[o];if(!a)throw new Error("Invalid State: Item should be in index");var u=a.modifiers[n];return u||0}function i(t,e,n){return n[t]+c.map(function(i){return r({unit:n,stat:t,items:e,slot:i})}).reduce(a.sum,0)}function o(t){return Object.values(t).reduce(function(t,e){var n;return e.squad?t:u(u({},t),(n={},n[e.id]=e,n))},{})}Object.defineProperty(e,"__esModule",{value:!0}),e.getActualStat=i,e.getUnitsWithoutSquad=o,e.makeAnimatedUnit=void 0;var a=n(574),u=function(){return u=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},u.apply(this,arguments)},s=function(t,e){return u(u({},e),{container:t.add.container(0,0),tweens:[]})};e.makeAnimatedUnit=s;var c=["mainHand","offHand","chest","ornament"]},1494:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n(177),i=n(175),o=function(t){return t&&t.__esModule?t:{default:t}}(n(575)),a=function(t){t.clearAnimations(),t.add.tween({targets:t.leftFoot,x:r.LEFT_FOOT_FRONT_X-20,yoyo:!0,rotation:-.2,repeat:-1,duration:500}),t.add.tween({targets:t.rightFoot,x:r.RIGHT_FOOT_FRONT_X+10,yoyo:!0,rotation:-.2,repeat:-1,duration:500}),t.add.tween({targets:t.leftHand,x:r.LEFT_HAND_FRONT_X+10,yoyo:!0,rotation:-.2,repeat:-1,duration:500}),t.add.tween({targets:t.mainHandContainer,x:r.RIGHT_HAND_FRONT_X-10,yoyo:!0,rotation:-.2,repeat:-1,duration:500}),t.add.tween({targets:t.charaWrapper,y:r.CHARA_WRAPPER_Y-20,yoyo:!0,repeat:-1,duration:100})},u=function(t){var e,n,r,a;t.clearAnimations(),(0,o.default)(t)(t.charaWrapper,-12,100),t.add.tween({targets:t.leftFoot,x:(0,i.maybeZero)(null===(e=t.leftFoot)||void 0===e?void 0:e.x)-20,yoyo:!0,rotation:-.2,repeat:-1,duration:500}),t.add.tween({targets:t.rightFoot,x:(0,i.maybeZero)(null===(n=t.rightFoot)||void 0===n?void 0:n.x)+10,yoyo:!0,rotation:-.2,repeat:-1,duration:500}),t.add.tween({targets:t.leftHand,x:(0,i.maybeZero)(null===(r=t.leftHand)||void 0===r?void 0:r.x)+10,yoyo:!0,rotation:-.2,repeat:-1,duration:500}),t.add.tween({targets:t.mainHandContainer,x:(0,i.maybeZero)(null===(a=t.mainHandContainer)||void 0===a?void 0:a.x)-10,yoyo:!0,rotation:-.2,repeat:-1,duration:500})},s=function(t){t.front?a(t):u(t)};e.default=s},1495:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n(76),i=n(177),o=function(t){if(t.tweens.killAll(),!(t.head&&t.trunk&&t.leftHand&&t.mainHandContainer&&t.leftFoot&&t.rightFoot&&t.charaWrapper))throw new Error(r.INVALID_STATE);t.head.rotation=0,t.leftFoot.rotation=0,t.leftHand.rotation=0,t.rightFoot.rotation=0,t.mainHandContainer.rotation=0,t.trunk.rotation=0,t.front?(t.charaWrapper.x=i.CHARA_WRAPPER_X,t.charaWrapper.y=i.CHARA_WRAPPER_Y,t.head.x=i.HEAD_FRONT_X,t.head.y=i.HEAD_FRONT_Y,t.leftFoot.x=i.LEFT_FOOT_FRONT_X,t.leftFoot.y=i.LEFT_FOOT_FRONT_Y,t.rightFoot.x=i.RIGHT_FOOT_FRONT_X,t.rightFoot.y=i.RIGHT_FOOT_FRONT_Y,t.leftHand.x=i.LEFT_HAND_FRONT_X,t.leftHand.y=i.LEFT_HAND_FRONT_Y,t.mainHandContainer.x=i.RIGHT_HAND_FRONT_X,t.mainHandContainer.y=i.RIGHT_HAND_FRONT_Y):(t.charaWrapper.x=i.CHARA_WRAPPER_X,t.charaWrapper.y=i.CHARA_WRAPPER_Y,t.head.x=i.HEAD_BACK_X,t.head.y=i.HEAD_BACK_Y,t.leftFoot.x=i.LEFT_FOOT_BACK_X,t.leftFoot.y=i.LEFT_FOOT_BACK_Y,t.rightFoot.x=i.RIGHT_FOOT_BACK_X,t.rightFoot.y=i.RIGHT_FOOT_BACK_Y,t.leftHand.x=i.LEFT_HAND_BACK_X,t.leftHand.y=i.LEFT_HAND_BACK_Y,t.mainHandContainer.x=i.RIGHT_HAND_BACK_X,t.mainHandContainer.y=i.RIGHT_HAND_BACK_Y)};e.default=o},1496:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n(177),i=function(t){return t&&t.__esModule?t:{default:t}}(n(575)),o=function(t){t.clearAnimations(),t.tweens.add({targets:t.head,y:r.HEAD_FRONT_Y-2,duration:1600,yoyo:!0,repeat:-1}),t.tweens.add({targets:t.trunk,y:r.TRUNK_FRONT_Y+2,duration:1600,yoyo:!0,repeat:-1}),t.tweens.add({targets:t.leftHand,y:r.LEFT_HAND_FRONT_Y+8,duration:1600,yoyo:!0,repeat:-1}),t.tweens.add({targets:t.mainHandContainer,y:r.RIGHT_HAND_FRONT_Y-4,duration:1600,yoyo:!0,repeat:-1})},a=function(t){t.clearAnimations();var e=(0,i.default)(t);e(t.head,-2,1600),e(t.trunk,2,1600),e(t.leftHand,4,1600),e(t.mainHandContainer,-4,1600)},u=function(t){t.front?o(t):a(t)};e.default=u},1497:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=function(t,e,n){n&&t.die(),t.parent.tweens.add({targets:null===t||void 0===t?void 0:t.container,rotation:.15,yoyo:!0,duration:500});var r=t.parent.add.text(-25,0,e.toString(),{fontSize:48});r.setStroke("#000000",2),t.container.add(r),t.parent.tweens.add({targets:r,y:-200,alpha:0,duration:3e3,ease:"Expo",onComplete:function(){r.destroy()}})};e.default=r},1498:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=function(t,e){var n,r;t.clearAnimations(),t.parent.tweens.add({targets:null===t||void 0===t?void 0:t.mainHandContainer,rotation:t.front?1.9:-1.9,yoyo:!0,x:((null===(n=t.mainHandContainer)||void 0===n?void 0:n.x)||0)+(t.front?30:-60),Y:((null===(r=t.mainHandContainer)||void 0===r?void 0:r.y)||0)-20,duration:250,ease:"Expo",onComplete:function(){e()}})};e.default=r},1499:function(t,e,n){"use strict";function r(t){var e,n=function(e,n){var r,i=t.add.image(e,n,"foot");return null===(r=t.container)||void 0===r||r.add(i),i},r=function(e,n,r){var i,o=t.add.image(e,n,"hand");return o.scaleX=r,null===(i=t.container)||void 0===i||i.add(o),o};t.leftFoot=n(o.LEFT_FOOT_FRONT_X,o.LEFT_FOOT_FRONT_Y),t.rightFoot=n(o.RIGHT_FOOT_FRONT_X,o.RIGHT_FOOT_FRONT_Y),t.leftHand=r(o.LEFT_HAND_FRONT_X,o.LEFT_HAND_FRONT_Y,-1),t.trunk=function(e,n,r){var i,o=t.add.image(n,r,"trunk_"+e);return null===(i=t.container)||void 0===i||i.add(o),o}(t.unit.class,o.TRUNK_FRONT_X,o.TRUNK_FRONT_Y),t.head=function(e,n){var r,i=t.add.image(e,n,"head"+t.unit.style.head.toString());return null===(r=t.container)||void 0===r||r.add(i),i}(o.HEAD_FRONT_X,o.HEAD_FRONT_Y),t.mainHandContainer=t.add.container(o.RIGHT_HAND_FRONT_X,o.RIGHT_HAND_FRONT_Y),t.mainHand=t.add.image(10,10,"equips/"+t.unit.equips.mainHand),t.mainHandContainer.add(t.mainHand),"oaken_staff"===t.unit.equips.mainHand?(t.mainHand.setScale(.3),t.mainHand.setOrigin(.45,.7),t.mainHand.setRotation(-.2)):(t.mainHand.setScale(.2),t.mainHand.setOrigin(1,1)),t.rightHand=r(-2,0,1),t.rightHand.rotation=-2.2,null===(e=t.container)||void 0===e||e.add(t.mainHandContainer),t.mainHandContainer.add(t.rightHand)}function i(t){function e(e,n){var r,i=t.add.image(e,n,"foot");return i.scaleX=-1,i.rotation=.6,null===(r=t.container)||void 0===r||r.add(i),i}function n(e,n){var r,i=t.add.image(e,n,"hand");return null===(r=t.container)||void 0===r||r.add(i),i}var r;t.mainHandContainer=t.add.container(o.RIGHT_HAND_BACK_X,o.RIGHT_HAND_BACK_Y),null===(r=t.container)||void 0===r||r.add(t.mainHandContainer),t.mainHand=t.add.image(-10,20,"equips/"+t.unit.equips.mainHand),t.mainHandContainer.add(t.mainHand),t.mainHand.setScale(-.2,.2),t.mainHand.setOrigin(1,1),t.rightHand=n(0,0),t.mainHandContainer.add(t.rightHand),t.rightFoot=e(o.RIGHT_FOOT_BACK_X,o.RIGHT_FOOT_BACK_Y),t.rightFoot.scaleY=-1,t.leftFoot=e(o.LEFT_FOOT_BACK_X,o.LEFT_FOOT_BACK_Y),t.leftFoot.scaleY=-1,t.trunk=function(e,n,r){var i,o=t.add.image(n,r,"trunk_back_"+e);return null===(i=t.container)||void 0===i||i.add(o),o}(t.unit.class,o.TRUNK_BACK_X,o.TRUNK_BACK_Y),t.head=function(e,n){var r,i=t.add.image(e,n,"back_head"+t.unit.style.head.toString());return null===(r=t.container)||void 0===r||r.add(i),i}(o.HEAD_BACK_X,o.HEAD_BACK_Y),t.leftHand=n(o.LEFT_HAND_BACK_X,o.LEFT_HAND_BACK_Y)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=n(177),a=function(t){t.front?r(t):i(t)};e.default=a},1500:function(t,e,n){"use strict";function r(t){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return i=function(){return t},t}function o(t){var e=(0,c.cartesianToIsometric)(t.x,t.y);return{x:e.x,y:e.y-230}}function a(t){return function(e){var n=Math.abs(e.sprite.x-t.x),r=Math.abs(e.sprite.y-t.y);return n/l.tileWidth+r/l.tileHeight<1}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.BOARD_SCENE_KEY=void 0;var u=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==r(t)&&"function"!=typeof t)return{default:t};var e=i();if(e&&e.has(t))return e.get(t);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){var u=o?Object.getOwnPropertyDescriptor(t,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=t[a]}return n.default=t,e&&e.set(t,n),n}(n(31)),s=n(103),c=n(285),f=n(40),l=n(129),p=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),h="BoardScene";e.BOARD_SCENE_KEY=h;var d=function(t){function e(e){var n=t.call(this,h)||this;return n.squad=e,n.tiles=[],n.unitList=[],n.onUnitDragEnd=function(t,e,r){var i,a,u,s=n.squad;console.log("the squad",s),console.log(n.tiles,e,r);var c=n.findTileByXY(e,r),f=s.members[t.id];if(!f)throw new Error("Invalid state. Unit should be in board object.");if(c&&function(t){return f.x!==t.boardX||f.y!==t.boardY}(c))n.changeUnitPositionInBoard({unit:t,x:c.boardX,y:c.boardY});else{var l=o(f),p=l.x,h=l.y;console.log("TWEEN: return to original"),n.tweens.add({targets:null===(i=n.getChara(t))||void 0===i?void 0:i.container,x:p,y:h,ease:"Cubic",duration:400,repeat:0,paused:!1,yoyo:!1})}n.tiles.map(function(t){return t.sprite.clearTint()}),(null===(u=null===(a=n.getChara(t))||void 0===a?void 0:a.container)||void 0===u?void 0:u.list).map(function(t){return t.clearTint()})},n.onUnitDrag=function(t,e,r){var i=n.findTileByXY(e,r);n.tiles.map(function(t){return t.sprite.clearTint()}),i&&i.sprite.setTint(52224),n.scene.bringToTop(n.makeUnitKey(t))},console.log("boardScene constructor"),n}return p(e,t),e.prototype.create=function(){this.tiles=this.placeTiles({mapWidth:3,mapHeight:3}),this.placeUnits()},e.prototype.findTileByXY=function(t,e){return this.tiles.find(a({x:t,y:e+100}))},e.prototype.changeUnitPositionInBoard=function(t){var e=this,n=t.unit,r=t.x,i=t.y,o=(0,f.changeSquadMemberPosition)(this.squad.members[n.id],this.squad,r,i);this.squad.members=o.members,console.log("the received updatedBoard",o),o.updatedUnits.forEach(function(t){e.moveUnitToBoardTile(t.id,t.x,t.y)})},e.prototype.moveUnitToBoardTile=function(t,e,n){var r=this,i=this.unitList.find(function(e){return e.unit.id===t});if(i){var a=i.unit,u=o(this.squad.members[a.id]);this.tweens.add({targets:null===i||void 0===i?void 0:i.container,x:u.x,y:u.y,ease:"Cubic",duration:400,repeat:0,paused:!1,yoyo:!1}).on("complete",function(){r.sortUnitsByDepth()})}},e.prototype.getChara=function(t){var e=this;return this.unitList.find(function(n){return n.key===e.makeUnitKey(t)})},e.prototype.placeTiles=function(t){for(var e=this,n=t.mapWidth,r=t.mapHeight,i=[[]],o=[],u=0;u<n;u++){i[u]=[];for(var s=0;s<r;s++)i[u][s]=null}return i.forEach(function(t,n){t.forEach(function(t,r){var i=(0,c.cartesianToIsometric)(r,n),a=i.x,u=i.y,s=e.add.image(a,u,"tile");s.depth=u,s.setInteractive(),o.push({sprite:s,x:a,y:u,boardX:r+1,boardY:n+1})})}),this.input.on("pointerdown",function(t){e.tiles.filter(a(t)).forEach(function(t){console.log("clicked>>",t.x,t.y)})}),o},e.prototype.addUnitToBoard=function(t){var e=o(t),n=e.x,r=e.y,i=(0,f.getUnit)(t.id);if(!i)throw new Error("Invalid member supplied.");var a=this.makeUnitKey(i),u=new s.Chara(a,this,i,n,r,1,!0);return u.enableDrag(this.onUnitDrag.bind(this),this.onUnitDragEnd.bind(this)),u},e.prototype.placeUnits=function(){var t=this,e=this.squad;console.log("...",e.members),Object.values(e.members).forEach(function(e){return t.placeUnit({member:e,fromOutside:!1})})},e.prototype.placeUnit=function(t){var e=t.member,n=t.fromOutside,r=this.addUnitToBoard(e);this.unitList=this.unitList.concat([r]),this.sortUnitsByDepth(),n&&(this.squad.members[e.id]=e)},e.prototype.makeUnitKey=function(t){return"board-"+t.id},e.prototype.sortUnitsByDepth=function(){this.unitList.forEach(function(t){var e;return t.container.setDepth(null===(e=t.container)||void 0===e?void 0:e.y)}),this.unitList.sort(function(t,e){var n,r;return((null===(n=t.container)||void 0===n?void 0:n.depth)||0)-((null===(r=e.container)||void 0===r?void 0:r.depth)||0)}).forEach(function(t){return t.scene.bringToTop()})},e.prototype.destroy=function(){var t=this;this.tiles.forEach(function(t){return t.sprite.destroy()}),this.unitList.forEach(function(e){return t.scene.remove(t.makeUnitKey(e.unit))}),this.scene.remove()},e}(u.Scene),y=d;e.default=y},1501:function(t,e,n){"use strict";function r(t){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t){return t&&t.__esModule?t:{default:t}}function o(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return o=function(){return t},t}function a(t){if(t&&t.__esModule)return t;if(null===t||"object"!==r(t)&&"function"!=typeof t)return{default:t};var e=o();if(e&&e.has(t))return e.get(t);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){var u=i?Object.getOwnPropertyDescriptor(t,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=t[a]}return n.default=t,e&&e.set(t,n),n}Object.defineProperty(e,"__esModule",{value:!0}),e.ListSquadsScene=void 0;var u=a(n(31)),s=a(n(40)),c=i(n(1502)),f=i(n(130)),l=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),p=function(t){function e(){var e=t.call(this,"ListSquadsScene")||this;return e.boardScenes=[],e.controls=[],e.selectedSquadInfo=null,e.page=0,e.itemsPerPage=9,e}return l(e,t),e.prototype.create=function(){this.renderSquadList(),this.renderControls()},e.prototype.renderSquadList=function(){var t=this,e=Object.values(s.getSquads()).slice(this.page*this.itemsPerPage,this.page*this.itemsPerPage+this.itemsPerPage);this.formatList(e,[]).forEach(function(e,n){return e.forEach(function(e,r){return t.renderBoard(e,r,n)})})},e.prototype.formatList=function(t,e){if(t.length<=3)return e.concat([t]);var n=t.slice(0,3);return this.formatList(t.slice(3,t.length),e.concat([n]))},e.prototype.renderSelectSquadInfo=function(t){var e,n=this;this.selectedSquadInfo&&this.selectedSquadInfo.destroy(),null===(e=this.selectedSquadInfo)||void 0===e||e.destroy(),this.selectedSquadInfo=this.add.container(0,0),this.selectedSquadInfo.name=t.id;var r=this.add.text(10,680,t.name);this.selectedSquadInfo.add(r),(0,f.default)(1100,350,"Edit",this.selectedSquadInfo,this,function(){n.editSquad(t)}),(0,f.default)(1100,400,"Disband Squad",this.selectedSquadInfo,this,function(){n.selectedSquadInfo&&(s.disbandSquad(n.selectedSquadInfo.name),n.refresh())})},e.prototype.renderBoard=function(t,e,n){var r=this,i=new c.default(t,320*e,170*n,.3);this.scene.add("board-squad-"+t.id,i,!0),i.onClick(function(t){return r.renderSelectSquadInfo(t)}),this.boardScenes.push(i)},e.prototype.renderControls=function(){var t=this;(0,f.default)(1100,10,"Return to Title",this.add.container(0,0),this,function(){t.removeChildren(),t.scene.transition({target:"TitleScene",duration:0,moveBelow:!0})}),(0,f.default)(1100,600,"Create Squad",this.add.container(0,0),this,function(){t.removeChildren();var e=Object.keys(s.getSquads());t.scene.transition({target:"EditSquadScene",duration:0,moveBelow:!0,data:{squad:{id:(e.length+1).toString(),name:"",emblem:"",members:{}}}})}),this.renderNavigation()},e.prototype.renderNavigation=function(){var t=this,e=s.getSquads(),n=Object.keys(e).length,r=this.add.image(400,630,"arrow_right");r.setScale(-1,1),0===this.page?r.setAlpha(.5):(r.setInteractive(),r.on("pointerdown",function(e){t.prevPage()})),this.controls.push(r);var i=this.add.image(500,630,"arrow_right");n<this.itemsPerPage||this.itemsPerPage*(this.page+1)>=n?i.setAlpha(.5):(i.setInteractive(),i.on("pointerdown",function(){t.nextPage()})),this.controls.push(i)},e.prototype.refresh=function(){this.removeChildren(),this.renderSquadList(),this.renderControls()},e.prototype.nextPage=function(){this.page=this.page+1,this.refresh()},e.prototype.prevPage=function(){this.page=this.page-1,this.refresh()},e.prototype.removeChildren=function(){var t=this;this.boardScenes.forEach(function(e){e.destroy(t)}),this.boardScenes=[],this.controls.forEach(function(t){return t.destroy()}),this.controls=[]},e.prototype.editSquad=function(t){this.removeChildren(),this.scene.transition({target:"EditSquadScene",duration:0,moveBelow:!0,data:{squad:t}})},e}(u.Scene);e.ListSquadsScene=p},1502:function(t,e,n){"use strict";function r(t){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return i=function(){return t},t}function o(t){return"static-squad-"+t.id}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==r(t)&&"function"!=typeof t)return{default:t};var e=i();if(e&&e.has(t))return e.get(t);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){var u=o?Object.getOwnPropertyDescriptor(t,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=t[a]}return n.default=t,e&&e.set(t,n),n}(n(31)),u=n(103),s=n(285),c=n(40),f=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),l=function(t){function e(e,n,r,i){var a=t.call(this,o(e))||this;return a.squad=e,a.x=n,a.y=r,a.scaleSizing=i,a.tiles=[],a.unitList=[],a.overlay=null,a}return f(e,t),e.prototype.create=function(){this.tiles=this.placeTiles({mapWidth:3,mapHeight:3}),this.placeUnits(),this.makeOverlay()},e.prototype.destroy=function(t){var e=this;console.log("lets remove a board",this),this.tiles.forEach(function(t){return t.sprite.destroy()}),this.unitList.forEach(function(n){var r=e.makeUnitKey(n.unit);t.scene.remove(r)}),console.log("removing board scene",this.scene.key),t.scene.remove(o(this.squad))},e.prototype.makeOverlay=function(){var t=new a.Geom.Rectangle(this.x+60,this.y+40,250,150),e=this.add.graphics({});e.alpha=.2,e.fillRectShape(t),this.overlay=e},e.prototype.onClick=function(t){var e,n,r=this,i=new a.Geom.Rectangle(this.x+60,this.y+40,250,150);null===(e=this.overlay)||void 0===e||e.setInteractive(i,a.Geom.Rectangle.Contains),null===(n=this.overlay)||void 0===n||n.on("pointerdown",function(){t(r.squad)})},e.prototype.placeTiles=function(t){for(var e=this,n=t.mapWidth,r=t.mapHeight,i=[[]],o=[],a=0;a<n;a++){i[a]=[];for(var u=0;u<r;u++)i[a][u]=null}return i.forEach(function(t,n){t.forEach(function(t,r){var i=(0,s.cartesianToIsometric)(r,n),a=i.x,u=i.y;a=a*e.scaleSizing+e.x,u=u*e.scaleSizing+e.y;var c=e.add.image(a,u,"tile");c.scale=e.scaleSizing,c.depth=u,o.push({sprite:c,x:a,y:u,boardX:r+1,boardY:n+1})})}),o},e.prototype.addUnitToBoard=function(t){var e=this.getUnitPositionInScreen(t),n=e.x,r=e.y;n=n*this.scaleSizing+this.x,r=r*this.scaleSizing+this.y;var i=(0,c.getUnit)(t.id);if(!i)throw new Error("Invalid member supplied");var o=this.makeUnitKey(i);return new u.Chara(o,this,i,n,r,this.scaleSizing,!0)},e.prototype.placeUnits=function(){var t=this,e=this.squad;Object.values(e.members).forEach(function(e){return t.placeUnit(e)})},e.prototype.placeUnit=function(t){var e=this.addUnitToBoard(t);this.unitList=this.unitList.concat([e]),this.sortUnitsByDepth()},e.prototype.makeUnitKey=function(t){return"board-unit-"+t.id},e.prototype.sortUnitsByDepth=function(){this.unitList.forEach(function(t){var e;return t.container.setDepth(null===(e=t.container)||void 0===e?void 0:e.y)}),this.unitList.sort(function(t,e){var n,r;return((null===(n=t.container)||void 0===n?void 0:n.depth)||0)-((null===(r=e.container)||void 0===r?void 0:r.depth)||0)}).forEach(function(t){return t.scene.bringToTop()})},e.prototype.getUnitPositionInScreen=function(t){var e=(0,s.cartesianToIsometric)(t.x,t.y);return{x:e.x,y:e.y-230}},e}(a.Scene),p=l;e.default=p},1503:function(t,e,n){"use strict";function r(t){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return i=function(){return t},t}function o(t){if(t&&t.__esModule)return t;if(null===t||"object"!==r(t)&&"function"!=typeof t)return{default:t};var e=i();if(e&&e.has(t))return e.get(t);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){var u=o?Object.getOwnPropertyDescriptor(t,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=t[a]}return n.default=t,e&&e.set(t,n),n}Object.defineProperty(e,"__esModule",{value:!0}),e.ListUnitsScene=void 0;var a=o(n(31)),u=o(n(40)),s=n(103),c=n(1504),f=function(t){return t&&t.__esModule?t:{default:t}}(n(130)),l=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),p=function(t){function e(){var e=t.call(this,"ListUnitsScene")||this;return e.units=[],e.page=0,e.itemsPerPage=40,e.unitDetails=[],e.detailsBar=null,e}return l(e,t),e.prototype.create=function(){var t=this;this.detailsBar=new c.UnitDetailsBarScene,this.renderUnitsList(),this.scene.add("details-bar",this.detailsBar,!0),(0,f.default)(1120,20,"Back to Title",this.add.container(0,0),this,function(){t.removeChildren(),t.scene.remove("UnitDetailsBarScene"),t.scene.transition({target:"TitleScene",duration:0,moveBelow:!0})})},e.prototype.renderUnitsList=function(){var t=this,e=Object.values(u.getUnits()).slice(this.page*this.itemsPerPage,this.page*this.itemsPerPage+this.itemsPerPage);this.formatList(e,[]).forEach(function(e,n){return e.forEach(function(e,r){return t.renderUnit(e,r,n)})})},e.prototype.formatList=function(t,e){if(t.length<=10)return e.concat([t]);var n=t.slice(0,10);return this.formatList(t.slice(10,t.length),e.concat([n]))},e.prototype.renderUnit=function(t,e,n){var r=this,i="list-chara-"+t.id,o=new s.Chara(i,this,t,100+120*e,100+110*n,.6,!0,!1);o.onClick(function(t){r.renderUnitDetails(t)}),this.units.push(o)},e.prototype.renderUnitDetails=function(t){var e;null===(e=this.detailsBar)||void 0===e||e.render(t.unit.id)},e.prototype.renderNavigation=function(){},e.prototype.refresh=function(){this.removeChildren(),this.renderUnitsList()},e.prototype.nextPage=function(){this.page=this.page+1,this.refresh()},e.prototype.prevPage=function(){this.page=this.page-1,this.refresh()},e.prototype.removeChildren=function(){var t,e=this;this.units.forEach(function(t){e.scene.remove("list-chara-"+t.unit.id)}),this.units=[],null===(t=this.detailsBar)||void 0===t||t.destroy(this)},e}(a.Scene);e.ListUnitsScene=p},1504:function(t,e,n){"use strict";function r(t){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return i=function(){return t},t}function o(t){if(t&&t.__esModule)return t;if(null===t||"object"!==r(t)&&"function"!=typeof t)return{default:t};var e=i();if(e&&e.has(t))return e.get(t);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){var u=o?Object.getOwnPropertyDescriptor(t,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=t[a]}return n.default=t,e&&e.set(t,n),n}Object.defineProperty(e,"__esModule",{value:!0}),e.UnitDetailsBarScene=void 0;var a=o(n(31)),u=o(n(40)),s=n(76),c=n(1505),f=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),l=function(t){function e(){var e=t.call(this,"UnitDetailsBarScene")||this;return e.colWidth=100,e.rowHeight=30,e.chara=null,e.container=null,e.itemDetail=null,e.write=function(t,n,r){var i;return null===(i=e.container)||void 0===i?void 0:i.add(e.add.text(t,n,"number"==typeof r?r.toString():r,{color:"#000"}))},e.col=function(t,n,r){return r.forEach(function(r,i){return e.write(t,n+e.rowHeight*i,r)})},e}return f(e,t),e.prototype.create=function(){this.itemDetail=new c.ItemDetailWindowScene,this.scene.add("item-detail",this.itemDetail,!0)},e.prototype.destroy=function(t){var e;null===(e=this.container)||void 0===e||e.destroy(),t.scene.remove("ItemDetailWindowScene"),t.scene.remove("UnitDetailsBarScene")},e.prototype.clearChildren=function(){var t;null===(t=this.container)||void 0===t||t.destroy(),this.container=this.add.container(10,520)},e.prototype.renderBgLayer=function(){},e.prototype.render=function(t){var e;this.clearChildren();var n=this.add.image(0,0,"panel");null===(e=this.container)||void 0===e||e.add(n),n.setOrigin(0,0),n.displayWidth=1260,n.displayHeight=180;var r=u.getUnit(t);if(!r)throw new Error(s.INVALID_STATE);this.unitStats(r),this.unitItems(r)},e.prototype.unitStats=function(t){var e=t.str,n=t.agi,r=t.int,i=t.wis,o=t.vit,a=t.dex;this.write(10,10,t.name),this.col(10+this.colWidth,10,["STR","AGI","INT"]),this.col(10+2*this.colWidth,10,[e,n,r]),this.col(10+3*this.colWidth,10,["WIS","VIT","DEX"]),this.col(10+4*this.colWidth,10,[i,o,a])},e.prototype.unitItems=function(t){var e=this,n=function(n,r,i){var o,a,c,f=u.getItem(t.equips[i]);if(!f)throw new Error(s.INVALID_STATE);var l=e.add.image(n,r,"panel");l.displayWidth=74,l.displayHeight=74,null===(o=e.container)||void 0===o||o.add(l);var p=e.add.image(n,r,f.id);p.displayWidth=64,p.displayHeight=64,p.setInteractive(),p.on("pointerdown",function(){var n;console.log("clicked1!!",i),null===(n=e.itemDetail)||void 0===n||n.render(f.id,t.id,function(){return e.render(t.id)})});var h=e.add.text(n+32+5+10,r,f.name);null===(a=e.container)||void 0===a||a.add(h),null===(c=e.container)||void 0===c||c.add(p)};n(600,50,"mainHand"),n(600,129,"offHand"),n(879,50,"chest"),n(879,129,"ornament")},e}(a.Scene);e.UnitDetailsBarScene=l},1505:function(t,e,n){"use strict";function r(t){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return i=function(){return t},t}function o(t){if(t&&t.__esModule)return t;if(null===t||"object"!==r(t)&&"function"!=typeof t)return{default:t};var e=i();if(e&&e.has(t))return e.get(t);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){var u=o?Object.getOwnPropertyDescriptor(t,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=t[a]}return n.default=t,e&&e.set(t,n),n}Object.defineProperty(e,"__esModule",{value:!0}),e.ItemDetailWindowScene=void 0;var a=o(n(31)),u=o(n(40)),s=n(76),c=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),f=function(t){function e(){var e=t.call(this,"ItemDetailWindowScene")||this;return e.x=100,e.y=100,e.colWidth=100,e.rowHeight=30,e.container=null,e.selectecItemDetailsContainer=null,e.write=function(t,n,r,i){var o,a=e.add.text(t,n,"number"==typeof r?r.toString():r,{color:"#000"});i?i.add(a):null===(o=e.container)||void 0===o||o.add(a)},e.col=function(t,n,r){return r.forEach(function(r,i){return e.write(t,n+e.rowHeight*i,r,null)})},e}return c(e,t),e.prototype.create=function(){},e.prototype.clearChildren=function(){var t;null===(t=this.container)||void 0===t||t.destroy()},e.prototype.render=function(t,e,n){var r=this;this.clearChildren(),this.container=this.add.container(this.x,this.y),this.renderBgLayer(this.container),this.renderPanel(0,0,300,300,this.container);var i=u.getItem(t);if(!i)throw new Error(s.INVALID_STATE);this.itemIcon(100,50,i,60,this.container),this.write(100,10,i.name,this.container),this.itemStats(i,10,120,this.container),this.btn(150,250,"Replace",function(){return r.replaceItemList(i,e,n)})},e.prototype.renderBgLayer=function(t){var e=this,n=new a.Geom.Rectangle(-1*this.x,-1*this.y,1280,520),r=this.add.graphics({fillStyle:{color:0}});r.alpha=.3,r.fillRectShape(n),t.add(r),r.setInteractive(n,a.Geom.Rectangle.Contains),r.on("pointerdown",function(){e.clearChildren(),r.destroy()})},e.prototype.renderPanel=function(t,e,n,r,i){var o,u=new a.Geom.Rectangle(t,e,n,r),s=this.add.graphics({fillStyle:{color:14592647},lineStyle:{width:2,color:0}});s.strokeRectShape(u),s.fillRectShape(u),s.strokeRect(t,e,n,r),i?i.add(s):null===(o=this.container)||void 0===o||o.add(s)},e.prototype.replaceItemList=function(t,e,n){var r=this,i=u.getItemList().filter(function(e){return e.slot===t.slot&&e.id!==t.id});this.renderPanel(350,0,300,400,this.container),i.forEach(function(t,i){if(!r.container)throw new Error(s.INVALID_STATE);var o=100*i+10,u=r.makeBackground(350,0);u.x=360,u.y=o;var c=new a.Geom.Rectangle(0,0,300,80);u.setInteractive(c,a.Geom.Rectangle.Contains),u.on("pointerdown",function(){r.selectedItemDetails(t,e,350,0,n)}),r.container.add(u),r.itemIcon(360,o,t,50,r.container),r.write(450,50+o,t.name,r.container)})},e.prototype.itemIcon=function(t,e,n,r,i){this.renderPanel(t,e,r+20,r+20,i);var o=this.add.image(t+r/2+10,e+r/2+10,n.id);o.displayWidth=r,o.displayHeight=r,null===i||void 0===i||i.add(o)},e.prototype.selectedItemDetails=function(t,e,n,r,i){var o,a,s=this;null===(o=this.selectecItemDetailsContainer)||void 0===o||o.destroy(),this.selectecItemDetailsContainer=this.add.container(0,0),null===(a=this.container)||void 0===a||a.add(this.selectecItemDetailsContainer),this.renderPanel(n+350,r,300,300,this.selectecItemDetailsContainer),this.write(n+370,r+20,t.name,this.selectecItemDetailsContainer),this.itemIcon(n+450,r+50,t,60,this.selectecItemDetailsContainer),this.itemStats(t,n+370,r+130,this.selectecItemDetailsContainer),this.btn(n+400,r+250,"Equip",function(){console.log(t),u.equipItem(t.id,e),s.clearChildren(),i()})},e.prototype.makeBackground=function(t,e){var n=new a.Geom.Rectangle(-10,e+-10,300,80),r=this.add.graphics({fillStyle:{color:255}});return r.alpha=.2,r.fillRectShape(n),r},e.prototype.btn=function(t,e,n,r){var i,o,a=this.add.text(t,e,n,{color:"#000"}),u=this.add.image(t-15,e-10,"panel");u.setOrigin(0,0),null===(i=this.container)||void 0===i||i.add(u),null===(o=this.container)||void 0===o||o.add(a),u.setInteractive(),u.displayWidth=a.width+30,u.displayHeight=a.height+20,u.on("pointerdown",function(){r()})},e.prototype.itemStats=function(t,e,n,r){var i=this;Object.keys(t.modifiers).filter(function(e){var n=t.modifiers[e];return n&&0!==n}).forEach(function(o,a){var u=t.modifiers[o];i.write(e,n+i.rowHeight*a,o,r),i.write(e+200,n+i.rowHeight*a,u.toString(),r)})},e}(a.Scene);e.ItemDetailWindowScene=f},1506:function(t,e,n){"use strict";function r(t){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t){return t&&t.__esModule?t:{default:t}}function o(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return o=function(){return t},t}Object.defineProperty(e,"__esModule",{value:!0}),e.MapScene=void 0;var a=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==r(t)&&"function"!=typeof t)return{default:t};var e=o();if(e&&e.has(t))return e.get(t);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){var u=i?Object.getOwnPropertyDescriptor(t,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=t[a]}return n.default=t,e&&e.set(t,n),n}(n(31)),u=n(103),s=n(40),c=n(76),f=i(n(130)),l=i(n(1507)),p=i(n(1508)),h=n(1509),d=n(176),y=i(n(180)),v=n(573),m=n(129),_=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),g=function(){return g=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},g.apply(this,arguments)},b=500,w=[0],S=function(t){function e(){var e=t.call(this,"MapScene")||this;return e.charas=[],e.tiles=[],e.citySprites=[],e.mapContainer={},e.missionContainer={},e.uiContainer={},e.actionWindowContainer=null,e.state={},e.selectedEntity=null,e.currentForce=v.PLAYER_FORCE,e.movedUnits=[],e.dragState=null,e.mapX=0,e.mapY=0,e.bounds={x:{min:0,max:0},y:{min:0,max:0}},e.hasShownVictoryCondition=!1,e.mapUnit=function(t){return function(n){return y.default.map(function(e){return t(e)})(e.getUnit(n))}},e.unitIO=function(t){return function(n){y.default.map(function(e){return t(e)})(e.getUnit(n))}},e.cityIO=function(t){return function(n){y.default.map(function(e){return t(e)})(y.default.find(function(t){return t.id===n})(e.state.cities))}},e.citySpriteIO=function(t){return function(n){y.default.map(function(e){return t(e)})(y.default.find(function(t){return t.name===n})(e.citySprites))}},e.charaIO=function(t){return function(n){y.default.map(function(e){return t(e)})(e.getChara(n))}},e.moveUnit=function(t,n,r){var i=function(){n.forEach(function(t){return e.getTileAt(t.x,t.y).tile.clearTint()}),r()},o=n.filter(function(t,e){return e>0}).map(function(n){var r=e.getCellPositionOnScreen(n);return{targets:t.container,x:r.x,y:r.y,duration:b,ease:"Cubic"}}).concat([{targets:t.container,duration:200,alpha:.2,onComplete:i.bind(e)}]);return e.tweens.timeline({tweens:o})},e}return _(e,t),e.prototype.signal=function(t){var e=this;t.forEach(function(t){if(console.log("SIGNAL::",t),"DESTROY_TEAM"===t.type){e.unitIO(function(t){t.status="defeated",e.movedUnits=y.default.reject(function(e){return e===t.id})(e.movedUnits)})(t.target);var n=function(){return e.charaIO(function(t){t.fadeOut(function(){})})(t.target)};e.time.addEvent({delay:100,callback:function(){return n()}})}else if("UPDATE_STATE"===t.type)e.updateState(t.target);else if("UPDATE_UNIT_POS"===t.type)e.state.units=e.state.units.map(function(e){return e.id===t.id?g(g({},e),{pos:t.pos}):e});else if("CLICK_CELL"===t.type)y.default.map(function(n){e.selectTile(n,t.cell,function(){return e.checkTurnEnd()})})(e.getSelectedUnit());else if("CLICK_UNIT"===t.type)e.clickUnit(t.unit);else if("CLEAR_TILES"===t.type)e.clearTiles();else if("CLEAR_TILES_EVENTS"===t.type)e.clearAllTileEvents();else if("CLEAR_TILES_TINTING"===t.type)e.clearAllTileTint();else if("SHOW_UNIT_PANEL"===t.type)e.showUnitPanel(t.unit);else if("SHOW_CLICKABLE_CELLS"===t.type)e.showClickableCellsForUnit(t.unit);else if("HIGHLIGHT_CELL"===t.type){var r=t.pos,i=r.x,o=r.y,a=e.tileAt(i,o);a.tile.setTint(10048938)}else if("CLOSE_ACTION_PANEL"===t.type)e.closeActionWindow();else if("END_UNIT_TURN"===t.type){var u=e.getAliveUnitsFromForce(e.currentForce).map(function(t){return t.id}),s=e.getDefeatedForces();console.log("defeated::",s),s.includes(v.PLAYER_FORCE)?console.log("player loses!"):s.includes(v.CPU_FORCE)?console.log("player wins!"):y.default.equals(u)(e.movedUnits)?(console.log("all units moved, finish turn"),e.endTurn()):e.currentForce===v.CPU_FORCE?(console.log("ai turn, proceed"),e.time.addEvent({delay:500,callback:function(){return e.runAi(e.currentForce)}})):console.log("player turn!!")}else"RUN_TURN"===t.type?e.runTurn():"CITY_CLICK"===t.type?(e.selectedEntity&&"unit"===e.selectedEntity.type?e.cityIO(function(n){e.unitIO(function(r){"PLAYER_FORCE"===r.force?e.selectTile(r,n,function(){}):e.setSelectedCity(t.id)})(e.selectedEntity.id)})(t.id):e.setSelectedCity(t.id),e.renderUI()):"CAPTURE_CITY"===t.type&&(e.state.cities=e.state.cities.map(function(e){return e.id===t.id?g(g({},e),{force:t.force}):e}),e.citySpriteIO(function(t){return t.setTint(6750054)})(t.id))})},e.prototype.updateState=function(t){this.state=t},e.prototype.create=function(t){console.log("CREATE COMMANDS:",t),window.map=this,this.mapContainer=this.add.container(this.mapX,this.mapY),this.uiContainer=this.add.container(),this.missionContainer=this.add.container(),this.actionWindowContainer=this.add.container(),this.signal(t),this.renderMap(),this.renderStructures(),this.renderUnits(),this.renderUI(),this.setWorldBounds(),this.makeWorldDraggable(),this.hasShownVictoryCondition||(this.showVictoryCondition(),this.hasShownVictoryCondition=!0)},e.prototype.tween=function(t){var e=this;return new Promise(function(n){return e.tweens.add(g(g({},t),{onComplete:n}))})},e.prototype.delay=function(t){var e=this;return new Promise(function(n){return e.time.addEvent({delay:t,callback:n})})},e.prototype.showVictoryCondition=function(){var t=this,e=this.label(m.SCREEN_WIDTH/2,60,"Victory Condition");e.setAlpha(0),y.default.pipe([y.default.prop("cities"),y.default.find(function(t){return"castle"===t.type&&t.force===v.CPU_FORCE}),y.default.map(function(n){t.delay(500).then(function(){return t.tween({targets:e,alpha:1,duration:1e3})}).then(function(){return t.delay(500)}).then(function(){return t.moveCameraTo(n,1e3)}).then(function(){var e=t.label(m.SCREEN_WIDTH/2,160,"Conquer enemy headquarters");return e.setAlpha(0),t.tween({targets:e,alpha:1,duration:500})}).then(function(){var e=t.add.sprite(m.SCREEN_WIDTH/2,350,"merano");e.setOrigin(.5),e.setDisplaySize(250,250);var n=t.label(m.SCREEN_WIDTH/2,520,"Merano Castle");return e.setAlpha(0),n.setAlpha(0),t.missionContainer.add(e),t.tween({targets:[e,n],alpha:1,duration:1e3})}).then(function(){return t.delay(1e3)}).then(function(){return t.tween({targets:t.missionContainer,alpha:0,duration:1e3})}).then(function(){t.missionContainer.destroy(),t.missionContainer=t.add.container();var e=t.label(m.SCREEN_WIDTH/2,m.SCREEN_HEIGHT/2,"Mission Start");return e.setAlpha(0),t.tween({targets:e,alpha:1,duration:1e3})}).then(function(){return t.delay(1e3)}).then(function(){return t.tween({targets:t.missionContainer,alpha:0,duration:1e3})}).then(function(){return t.runTurn()})})])(this.state)},e.prototype.moveCameraTo=function(t,e){var n=this,r=this.getPos(t),i=r.x,o=r.y;i=-1*i+m.SCREEN_WIDTH/2,o=-1*o+m.SCREEN_HEIGHT/2;var a=function(){return i<n.bounds.x.min?n.bounds.x.min:i>n.bounds.x.max?n.bounds.x.max:i},u=function(){return o<n.bounds.y.min?n.bounds.y.min:o>n.bounds.y.max?n.bounds.y.max:o};return new Promise(function(t){return n.tweens.add({targets:n.mapContainer,x:a(),y:u(),duration:e,ease:"cubic.out",onComplete:t})})},e.prototype.setWorldBounds=function(){var t=this.state.cells[0].length,e=this.state.cells.length;this.bounds={x:{min:-1*(100*t-m.SCREEN_WIDTH),max:0},y:{min:-1*(100*e-m.SCREEN_HEIGHT),max:0}}},e.prototype.label=function(t,e,n){var r=this.add.container(),i=this.add.text(t,e,n,{fontSize:"36px",color:"#000"});return i.setOrigin(.5),(0,l.default)(i.x-20-i.width/2,i.y-20-i.height/2,i.width+40,i.height+40,r,this),r.add(i),this.missionContainer.add(r),r},e.prototype.makeWorldDraggable=function(){var t=this;this.mapContainer.setSize(this.mapContainer.getBounds().width,this.mapContainer.getBounds().height),this.mapContainer.setInteractive(),this.input.setDraggable(this.mapContainer),this.input.on("drag",function(e,n,r,i){var o=n.x-r,a=n.y-i,u=t.mapX-o,s=t.mapY-a,c=t.bounds,f=c.x,l=c.y;u<f.max&&u>f.min&&s<l.max&&s>l.min&&t.mapContainer.setPosition(t.mapX-o,t.mapY-a)}),this.input.on("dragend",function(){t.mapX=t.mapContainer.x,t.mapY=t.mapContainer.y})},e.prototype.getContainers=function(){return{container:this.mapContainer,uiContainer:this.uiContainer}},e.prototype.tileAt=function(t,e){var n=this.tiles.find(function(n){return n.x===t&&n.y===e});if(!n)throw new Error(c.INVALID_STATE);return n},e.prototype.cityAt=function(t,e){return y.default.find(function(n){return n.x===t&&n.y===e})(this.state.cities)},e.prototype.setValidMoves=function(){var t=(0,h.getPossibleMoves)(O(this.state)(this.currentForce));(0,h.unitsFromForce)(this.state)(this.currentForce).forEach(function(e){var n=y.default.chain(y.default.find(function(t){return t.id===e.id}))(t),r=y.default.map(function(t){return t.validSteps})(n),i=y.default.map(function(t){return t.enemiesInRange})(n);y.default.map(function(t){e.validSteps=t})(r),y.default.map(function(t){e.enemiesInRange=t})(i)})},e.prototype.getForce=function(t){var e,n=null===(e=this.state)||void 0===e?void 0:e.forces.find(function(e){return e.id===t});if(!n)throw new Error(c.INVALID_STATE);return n},e.prototype.getUnit=function(t){return(0,h.getUnit)(this.state)(t)},e.prototype.getDefeatedForces=function(){var t=this;return this.state.forces.map(function(t){return t.id}).reduce(function(e,n){return t.state.units.filter(function(t){return t.force===n}).every(function(t){return"defeated"===t.status})?e.concat([n]):e},[])},e.prototype.getCurrentForce=function(){return this.getForce(this.currentForce)},e.prototype.getPos=function(t){return{x:50+100*t.x,y:50+100*t.y}},e.prototype.renderStructures=function(){var t=this;this.state.cities.forEach(function(e){var n=t.getPos({x:e.x,y:e.y}),r=n.x,i=n.y,o=t.add.image(r,i,"tiles/"+e.type);o.setScale(.5),"PLAYER_FORCE"===e.force?o.setTint(6750054):o.setTint(16737894),o.setInteractive(),o.on("pointerup",function(){return t.signal([{type:"CITY_CLICK",id:e.id}])}),t.mapContainer.add(o),o.name=e.id,t.citySprites.push(o)})},e.prototype.renderMap=function(){var t=this,e=this.getContainers().container;this.state.cells.forEach(function(n,r){return n.forEach(function(n,i){var o=t.getPos({x:i,y:r}),a=o.x,u=o.y,s=t.add.image(a,u,"tiles/"+v.tileMap[n]);s.setInteractive(),e.add(s),t.input.setDraggable(s),s.displayWidth=100,s.displayHeight=100,t.tiles.push({x:i,y:r,type:n,tile:s})})})},e.prototype.getSelectedUnit=function(){return this.selectedEntity&&"unit"===this.selectedEntity.type?this.getUnit(this.selectedEntity.id):y.default.Nothing},e.prototype.makeInteractive=function(t){var e=this;t.tile.on("pointerup",function(){e.signal([{type:"CLICK_CELL",cell:t}])})},e.prototype.clearAllTileEvents=function(){this.tiles.forEach(function(t){return t.tile.removeAllListeners()})},e.prototype.clearAllTileTint=function(){this.tiles.forEach(function(t){return t.tile.clearTint()})},e.prototype.renderUnits=function(){var t=this;this.state.units.filter(function(t){return"alive"===t.status}).forEach(function(e){return t.renderUnit(e)})},e.prototype.getCellPositionOnScreen=function(t){var e=t.x,n=t.y,r=this.getPos({x:e,y:n});return g(g({},r),{y:r.y+-10})},e.prototype.renderUnit=function(t){var e=this,n=this.getContainers().container,r=(0,s.getSquadLeader)(t.id),i=this.getCellPositionOnScreen(t.pos),o=i.x,a=i.y,c=new u.Chara("unit-"+t.id,this,r,o,a,.45,!0);n.add(c.container),this.charas.push(c),this.movedUnits.includes(t.id)&&c.container.setAlpha(.5),c.onClick(function(n){e.signal([{type:"CLICK_UNIT",unit:t}])})},e.prototype.clickUnit=function(t){t.force===v.PLAYER_FORCE?this.handleClickOnOwnUnit(t):this.handleClickOnEnemyUnit(t)},e.prototype.showClickableCellsForUnit=function(t){var e=this;this.clearTiles();var n=this.state.units.find(function(e){return e.id===t.id});n&&(n.validSteps.forEach(function(t){return e.makeCellClickable(e.tileAt(t.target.x,t.target.y))}),n.enemiesInRange.forEach(function(t){var n=t.enemy;e.unitIO(function(t){e.tileAt(t.pos.x,t.pos.y).tile.setTint(16720418)})(n)}))},e.prototype.getChara=function(t){return y.default.find(function(e){return e.unit.id===t})(this.charas)},e.prototype.handleClickOnOwnUnit=function(t){this.movedUnits.includes(t.id)?this.signal([{type:"CLEAR_TILES"},{type:"SHOW_UNIT_PANEL",unit:t}]):this.signal([{type:"CLEAR_TILES"},{type:"SHOW_UNIT_PANEL",unit:t},{type:"SHOW_CLICKABLE_CELLS",unit:t}])},e.prototype.handleClickOnEnemyUnit=function(t){var e=this,n=this.getSelectedUnit();y.default.isNothing(n)?this.signal([{type:"SHOW_UNIT_PANEL",unit:t}]):y.default.map(function(n){y.default.map(function(r){var i=y.default.elem(t.id)(y.default.map(function(t){return t.enemy})(n.enemiesInRange));n.force===v.PLAYER_FORCE&&i&&!e.movedUnits.includes(n.id)?(e.showEnemyUnitMenu(t,r,n),e.signal([{type:"CLEAR_TILES"},{type:"SHOW_CLICKABLE_CELLS",unit:n}])):e.signal([{type:"CLEAR_TILES"},{type:"SHOW_UNIT_PANEL",unit:t}])})(e.getChara(t.id))})(n)},e.prototype.showUnitPanel=function(t){this.setSelectedUnit(t.id),this.renderUI()},e.prototype.setSelectedUnit=function(t){this.selectedEntity={type:"unit",id:t}},e.prototype.setSelectedCity=function(t){this.selectedEntity={type:"city",id:t}},e.prototype.showEnemyUnitMenu=function(t,e,n){var r=this;this.closeActionWindow(),this.actionWindow(e.container.x||0,e.container.y||0,[{title:"Attack",action:function(){r.moveToEnemyUnit(t,e,n)}},{title:"View",action:function(){r.moveCameraTo(t.pos,500),console.log(t)}},{title:"Cancel",action:function(){r.closeActionWindow()}}])},e.prototype.moveToEnemyUnit=function(t,e,n){var r=this,i=y.default.find(function(e){return e.enemy===t.id})(n.enemiesInRange);if(this.movedUnits.push(n.id),y.default.isJust(i)){var o=this.charas.find(function(t){return t.unit.id===n.id});if(!o)return;var a=function(){r.turnOff();var e=n.force===v.PLAYER_FORCE;r.scene.transition({target:"CombatScene",duration:0,moveBelow:!0,data:{top:e?t.id:n.id,bottom:e?n.id:t.id}})};y.default.map(function(t){var e=t.steps;r.moveUnit(o,e,a),n.pos=e.reverse()[0]})(i)}else console.error("This should be impossible, check logic"),this.showUnitPanel(t)},e.prototype.turnOff=function(){var t=this;this.mapContainer.destroy(),this.uiContainer.destroy(),this.charas.forEach(function(e){e.container.destroy(),t.scene.remove(e)}),this.charas=[],this.tiles.forEach(function(t){t.tile.destroy()}),this.tiles=[]},e.prototype.makeCellClickable=function(t){t.tile.setTint(8956552),this.makeInteractive(t)},e.prototype.renderUI=function(){var t=this,e=this.getContainers(),n=e.container,r=e.uiContainer;if(r.removeAll(),r.add((0,l.default)(0,600,1280,120,r,this)),this.selectedEntity&&"unit"===this.selectedEntity.type){var i=(0,s.getSquad)(this.selectedEntity.id);this.unitIO(function(e){(0,p.default)(20,610,i.name,r,t),(0,p.default)(1e3,610,e.range+" cells",r,t)})(this.selectedEntity.id)}else this.selectedEntity&&"city"===this.selectedEntity.type&&this.cityIO(function(e){(0,p.default)(20,610,e.name,r,t),e.force&&(0,p.default)(1e3,610,"Controlled by "+t.getForce(e.force).name,r,t)})(this.selectedEntity.id);(0,f.default)(900,50,"Return to Title",r,this,function(){n.removeAll(),r.removeAll(),t.charas.forEach(function(e){return t.scene.remove(e.scene.key)}),t.charas=[],t.tiles=[],t.scene.transition({target:"TitleScene",duration:0,moveBelow:!0})})},e.prototype.switchForce=function(){var t,e=this,n=null===(t=this.state)||void 0===t?void 0:t.forces.find(function(t){return t.id!==e.currentForce});if(!n)throw new Error(c.INVALID_STATE);this.currentForce=n.id},e.prototype.runTurn=function(){var t=this.getForce(this.currentForce);if(console.log(this.movedUnits),this.showTurnTitle(t),this.setValidMoves(),t.id===v.CPU_FORCE)this.runAiActions(t.id);else{var e=this.state.units.filter(function(t){return t.force===v.PLAYER_FORCE})[0];this.moveCameraTo(e.pos,500)}},e.prototype.getAliveUnitsFromForce=function(t){return(0,h.unitsFromForce)(this.state)(t).filter(function(t){return"alive"===t.status})},e.prototype.runAi=function(t){var e=this,n=this.getAliveUnitsFromForce(t).filter(function(t){return!e.movedUnits.includes(t.id)});if(!(n.length<1)){var r=n[0];if(!r)throw new Error(c.INVALID_STATE);this.moveCameraTo(r.pos,200),this.setSelectedUnit(r.id),this.renderUI();var i=y.default.head(r.enemiesInRange);if(y.default.isJust(i))y.default.map(function(t){e.unitIO(function(t){var n=e.getChara(t.id);y.default.map(function(n){e.moveToEnemyUnit(t,n,r)})(n)})(t.enemy)})(i);else{var o=(0,d.randomItem)(r.validSteps).target,a=o.x,u=o.y,s=this.getTileAt(a,u);this.moveToTile(r.id,s,function(){e.signal([{type:"END_UNIT_TURN"}]),e.setValidMoves()})}}},e.prototype.runAiActions=function(t){this.runAi(t)},e.prototype.checkTurnEnd=function(){var t=this.getCurrentForce();this.setValidMoves(),this.movedUnits.length===t.units.length&&this.endTurn()},e.prototype.showTurnTitle=function(t){var e=this.add.text(-200,500,t.name+" Turn"),n=this.tweens.createTimeline();n.add({targets:e,x:700,ease:"Bounce",duration:500}),n.add({targets:e,x:800,duration:1500}),n.add({targets:e,x:1700,duration:500}),n.play()},e.prototype.tilesInRange=function(t,e,n){var r=this;return this.tiles.filter(function(i){return r.getDistance({x:t,y:e},i)<=n})},e.prototype.getDistance=function(t,e){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)},e.prototype.clearTiles=function(){this.clearAllTileTint(),this.clearAllTileEvents()},e.prototype.closeActionWindow=function(){var t;null===(t=this.actionWindowContainer)||void 0===t||t.destroy()},e.prototype.selectTile=function(t,e,n){var r=this,i=e.x,o=e.y;if(!this.movedUnits.includes(t.id)){var a=y.default.find(function(t){return t.x===i&&t.y===o})(this.tiles);y.default.map(function(e){var i=e.tile;r.signal([{type:"CLOSE_ACTION_PANEL"},{type:"SHOW_CLICKABLE_CELLS",unit:t},{type:"HIGHLIGHT_CELL",pos:{x:e.x,y:e.y}}]),r.actionWindow(i.x,i.y,[{title:"Move",action:function(){var o;r.moveToTile(t.id,e,n),null===(o=r.actionWindowContainer)||void 0===o||o.destroy(),i.clearTint()}},{title:"Cancel",action:function(){r.signal([{type:"CLOSE_ACTION_PANEL"},{type:"SHOW_CLICKABLE_CELLS",unit:t}])}}])})(a)}},e.prototype.actionWindow=function(t,e,n){var r=this;this.actionWindowContainer&&this.actionWindowContainer.destroy(),this.actionWindowContainer=this.add.container(t,e);var i=n.map(function(t,e){var n=t.title,i=t.action;if(!r.actionWindowContainer)throw new Error(c.INVALID_STATE);return(0,f.default)(20,50*e,n,r.actionWindowContainer,r,i)}),o=i.sort(function(t,e){return e.displayWidth-t.displayWidth})[0].displayWidth;i.forEach(function(t){t.setDisplaySize(o,t.displayHeight)})},e.prototype.moveToTile=function(t,e,n){var r=this,i=e.x,o=e.y,a=this.charas.find(function(e){return e.unit.id===t}),u=this.getCurrentForce();if(!a||!u)throw new Error(c.INVALID_STATE);var s=this.state.units.find(function(t){return t.id===a.unit.squad});if(!s)throw new Error(c.INVALID_STATE);this.tiles.forEach(function(t){return w.includes(t.type)?t.tile.clearTint():null}),this.movedUnits.push(t),this.unitIO(function(t){var e=y.default.find(function(t){return y.default.equals(t.target)({x:i,y:o})})(t.validSteps);y.default.map(function(t){r.moveUnit(a,t.steps,function(){y.default.map(function(t){r.signal([{type:"CAPTURE_CITY",id:t.id,force:s.force}])})(r.cityAt(i,o)),n()})})(e)})(t),this.signal([{type:"UPDATE_UNIT_POS",id:s.id,pos:{x:i,y:o}}]),this.renderUI()},e.prototype.endTurn=function(){this.movedUnits=[],this.charas.forEach(function(t){var e;return null===(e=t.container)||void 0===e?void 0:e.setAlpha(1)}),this.switchForce(),this.runTurn()},e.prototype.isEnemyInTile=function(t){return this.getEnemies().some(function(e){var n=e.pos,r=n.x,i=n.y;return r===t.x&&i===t.y})},e.prototype.getEnemies=function(){var t=this;return this.state.units.filter(function(e){return e.force!==t.currentForce})},e.prototype.getTileAt=function(t,e){var n=this.tiles.find(function(n){return n.x===t&&n.y===e});if(!n)throw new Error(c.INVALID_STATE);return n},e}(a.Scene);e.MapScene=S;var O=function(t){return function(e){return{units:t.units.filter(function(t){return"alive"===t.status}),forces:t.forces,width:14,height:6,walkableCells:[0],grid:t.cells.map(function(t){return t.map(function(t){return 0===t?0:1})}),currentForce:e}}}},1507:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=function(t,e,n,r,i,o){var a=new Phaser.Geom.Rectangle(t,e,n,r),u=o.add.graphics({fillStyle:{color:14592647},lineStyle:{width:2,color:0}});return u.strokeRectShape(a),u.fillRectShape(a),u.strokeRect(t,e,n,r),i.add(u),u};e.default=r},1508:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=function(t,e,n,r,i){var o=i.add.text(t,e,"number"==typeof n?n.toString():n,{color:"#000"});r.add(o)};e.default=r},1509:function(t,e,n){"use strict";function r(t){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return i=function(){return t},t}Object.defineProperty(e,"__esModule",{value:!0}),e.getPathTo=e.blockVectorsInGrid=e.getPossibleMoves=e.getEntities=e.getForce=e.getUnit=e.unitsFromForce=e.findById=void 0;var o=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==r(t)&&"function"!=typeof t)return{default:t};var e=i();if(e&&e.has(t))return e.get(t);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){var u=o?Object.getOwnPropertyDescriptor(t,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=t[a]}return n.default=t,e&&e.set(t,n),n}(n(1510)),a=function(t){return t&&t.__esModule?t:{default:t}}(n(180)),u=function(){return u=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},u.apply(this,arguments)},s=function(t){return function(e){return a.default.find(function(n){return a.default.equals(a.default.prop(t)(n))(e)})}},c=s("id"),f=function(t){return function(e){return s("id")(e)(t)}};e.findById=f;var l=a.default.reduce(function(t){return function(e){return a.default.elem(e)(t)?t:t.concat([e])}})([]),p=function(t){return function(e){return{x:t,y:e}}},h=function(t){return function(e){return Math.abs(t.x-e.x)+Math.abs(t.y-e.y)}},d=function(t){return function(e){return a.default.filter(function(t){return t.force===e})(t.units)}};e.unitsFromForce=d;var y=function(t){return function(e){return f(t.units)(e)}};e.getUnit=y;var v=function(t){return function(e){return f(t.forces)(e)}};e.getForce=v;var m=function(t){return function(e){return a.default.pipe([a.default.map(function(e){return f(t)(e)}),a.default.justs])(e)}};e.getEntities=m;var _=function(t){var e=t.units,n=t.forces,r=t.currentForce,i=t.grid,o=t.walkableCells,s=t.width,f=t.height,d=c(r)(n),y=a.default.filter(function(t){return t.force!==r})(e),v=a.default.pipe([a.default.map(function(t){return c(t)(e)}),a.default.justs]),m=a.default.prop("pos"),_=a.default.map(m)(y),w=function(t){return a.default.elem(t)(_)},S=g(i)(_),O=function(t){var e=t.pos,n=e.x,r=e.y,u=t.range,c=a.default.range(n-u)(n+u+1),d=a.default.range(r-u)(r+u+1),y=function(t){return t.x>=0&&t.x<s&&t.y>=0&&t.y<f},v=function(t){var e=t.x,n=t.y;return o.includes(i[n][e])},m=function(t){return{x:t[0],y:t[1]}},_=b(S)({x:n,y:r}),g=function(t){return t.length<=u+1},O=function(t){return a.default.equals(w(t))(!0)};return a.default.pipe([function(t){var e=t.xs,n=t.ys;return a.default.lift2(p)(e)(n)},a.default.filter(y),a.default.filter(function(t){return function(e){return h({x:n,y:r})(e)<=t}}(u)),a.default.filter(v),a.default.map(_),a.default.filter(g),a.default.chain(a.default.map(m)),l,a.default.reject(O),a.default.reject(a.default.equals({x:n,y:r})),a.default.map(function(t){return{target:t,steps:a.default.map(function(t){var e=t[0],n=t[1];return p(e)(n)})(b(S)({x:n,y:r})(t))}})])({xs:c,ys:d})};return a.default.map(a.default.pipe([a.default.prop("units"),v,a.default.map(function(t){var n=O(t),r=a.default.map(function(t){return t.target})(n);return u(u({},t),{validSteps:n,enemiesInRange:a.default.pipe([a.default.filter(function(e){return t.force!==e.force}),a.default.filter(function(e){return a.default.any(function(n){return 1===h(n)(e.pos)&&b(i)(t.pos)(e.pos).length<=t.range})(r)}),a.default.map(function(e){return{enemy:e.id,steps:b(i)(t.pos)(e.pos).slice(0,-1).map(function(t){var e=t[0],n=t[1];return p(e)(n)})}})])(e)})})]))(d)};e.getPossibleMoves=_;var g=function(t){return function(e){var n=function(t){return a.default.pipe([a.default.prop("length"),a.default.range(0),a.default.zip(t)])(t)};return a.default.map(function(t){var r=a.default.fst(t),i=a.default.snd(t);return a.default.map(function(t){var n=a.default.snd(t);return a.default.elem({x:n,y:i})(e)?1:a.default.fst(t)})(n(r))})(n(t))}};e.blockVectorsInGrid=g;var b=function(t){return function(e){return function(n){var r=new o.Grid(t);return(new o.AStarFinder).findPath(e.x,e.y,n.x,n.y,r)}}};e.getPathTo=b},1510:function(t,e,n){t.exports=n(1511)},1511:function(t,e,n){t.exports={Heap:n(178),Node:n(286),Grid:n(1514),Util:n(89),DiagonalMovement:n(33),Heuristic:n(131),AStarFinder:n(287),BestFirstFinder:n(1515),BreadthFirstFinder:n(1516),DijkstraFinder:n(1517),BiAStarFinder:n(288),BiBestFirstFinder:n(1518),BiBreadthFirstFinder:n(1519),BiDijkstraFinder:n(1520),IDAStarFinder:n(1521),JumpPointFinder:n(1522)}},1512:function(t,e,n){(function(t){(function(){var e,n,r,i,o,a,u,s,c,f,l,p,h,d,y;r=Math.floor,f=Math.min,n=function(t,e){return t<e?-1:t>e?1:0},c=function(t,e,i,o,a){var u;if(null==i&&(i=0),null==a&&(a=n),i<0)throw new Error("lo must be non-negative");for(null==o&&(o=t.length);i<o;)u=r((i+o)/2),a(e,t[u])<0?o=u:i=u+1;return[].splice.apply(t,[i,i-i].concat(e)),e},a=function(t,e,r){return null==r&&(r=n),t.push(e),d(t,0,t.length-1,r)},o=function(t,e){var r,i;return null==e&&(e=n),r=t.pop(),t.length?(i=t[0],t[0]=r,y(t,0,e)):i=r,i},s=function(t,e,r){var i;return null==r&&(r=n),i=t[0],t[0]=e,y(t,0,r),i},u=function(t,e,r){var i;return null==r&&(r=n),t.length&&r(t[0],e)<0&&(i=[t[0],e],e=i[0],t[0]=i[1],y(t,0,r)),e},i=function(t,e){var i,o,a,u,s,c;for(null==e&&(e=n),u=function(){c=[];for(var e=0,n=r(t.length/2);0<=n?e<n:e>n;0<=n?e++:e--)c.push(e);return c}.apply(this).reverse(),s=[],o=0,a=u.length;o<a;o++)i=u[o],s.push(y(t,i,e));return s},h=function(t,e,r){var i;if(null==r&&(r=n),-1!==(i=t.indexOf(e)))return d(t,0,i,r),y(t,i,r)},l=function(t,e,r){var o,a,s,c,f;if(null==r&&(r=n),a=t.slice(0,e),!a.length)return a;for(i(a,r),f=t.slice(e),s=0,c=f.length;s<c;s++)o=f[s],u(a,o,r);return a.sort(r).reverse()},p=function(t,e,r){var a,u,s,l,p,h,d,y,v;if(null==r&&(r=n),10*e<=t.length){if(s=t.slice(0,e).sort(r),!s.length)return s;for(u=s[s.length-1],d=t.slice(e),l=0,h=d.length;l<h;l++)a=d[l],r(a,u)<0&&(c(s,a,0,null,r),s.pop(),u=s[s.length-1]);return s}for(i(t,r),v=[],p=0,y=f(e,t.length);0<=y?p<y:p>y;0<=y?++p:--p)v.push(o(t,r));return v},d=function(t,e,r,i){var o,a,u;for(null==i&&(i=n),o=t[r];r>e&&(u=r-1>>1,a=t[u],i(o,a)<0);)t[r]=a,r=u;return t[r]=o},y=function(t,e,r){var i,o,a,u,s;for(null==r&&(r=n),o=t.length,s=e,a=t[e],i=2*e+1;i<o;)u=i+1,u<o&&!(r(t[i],t[u])<0)&&(i=u),t[e]=t[i],e=i,i=2*e+1;return t[e]=a,d(t,s,e,r)},e=function(){function t(t){this.cmp=null!=t?t:n,this.nodes=[]}return t.push=a,t.pop=o,t.replace=s,t.pushpop=u,t.heapify=i,t.updateItem=h,t.nlargest=l,t.nsmallest=p,t.prototype.push=function(t){return a(this.nodes,t,this.cmp)},t.prototype.pop=function(){return o(this.nodes,this.cmp)},t.prototype.peek=function(){return this.nodes[0]},t.prototype.contains=function(t){return-1!==this.nodes.indexOf(t)},t.prototype.replace=function(t){return s(this.nodes,t,this.cmp)},t.prototype.pushpop=function(t){return u(this.nodes,t,this.cmp)},t.prototype.heapify=function(){return i(this.nodes,this.cmp)},t.prototype.updateItem=function(t){return h(this.nodes,t,this.cmp)},t.prototype.clear=function(){return this.nodes=[]},t.prototype.empty=function(){return 0===this.nodes.length},t.prototype.size=function(){return this.nodes.length},t.prototype.clone=function(){var e;return e=new t,e.nodes=this.nodes.slice(0),e},t.prototype.toArray=function(){return this.nodes.slice(0)},t.prototype.insert=t.prototype.push,t.prototype.top=t.prototype.peek,t.prototype.front=t.prototype.peek,t.prototype.has=t.prototype.contains,t.prototype.copy=t.prototype.clone,t}(),(void 0!==t&&null!==t?t.exports:void 0)?t.exports=e:window.Heap=e}).call(this)}).call(e,n(1513)(t))},1513:function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},1514:function(t,e,n){function r(t,e,n){var r;"object"!=typeof t?r=t:(e=t.length,r=t[0].length,n=t),this.width=r,this.height=e,this.nodes=this._buildNodes(r,e,n)}var i=n(286),o=n(33);r.prototype._buildNodes=function(t,e,n){var r,o,a=new Array(e);for(r=0;r<e;++r)for(a[r]=new Array(t),o=0;o<t;++o)a[r][o]=new i(o,r);if(void 0===n)return a;if(n.length!==e||n[0].length!==t)throw new Error("Matrix size does not fit");for(r=0;r<e;++r)for(o=0;o<t;++o)n[r][o]&&(a[r][o].walkable=!1);return a},r.prototype.getNodeAt=function(t,e){return this.nodes[e][t]},r.prototype.isWalkableAt=function(t,e){return this.isInside(t,e)&&this.nodes[e][t].walkable},r.prototype.isInside=function(t,e){return t>=0&&t<this.width&&e>=0&&e<this.height},r.prototype.setWalkableAt=function(t,e,n){this.nodes[e][t].walkable=n},r.prototype.getNeighbors=function(t,e){var n=t.x,r=t.y,i=[],a=!1,u=!1,s=!1,c=!1,f=!1,l=!1,p=!1,h=!1,d=this.nodes;if(this.isWalkableAt(n,r-1)&&(i.push(d[r-1][n]),a=!0),this.isWalkableAt(n+1,r)&&(i.push(d[r][n+1]),s=!0),this.isWalkableAt(n,r+1)&&(i.push(d[r+1][n]),f=!0),this.isWalkableAt(n-1,r)&&(i.push(d[r][n-1]),p=!0),e===o.Never)return i;if(e===o.OnlyWhenNoObstacles)u=p&&a,c=a&&s,l=s&&f,h=f&&p;else if(e===o.IfAtMostOneObstacle)u=p||a,c=a||s,l=s||f,h=f||p;else{if(e!==o.Always)throw new Error("Incorrect value of diagonalMovement");u=!0,c=!0,l=!0,h=!0}return u&&this.isWalkableAt(n-1,r-1)&&i.push(d[r-1][n-1]),c&&this.isWalkableAt(n+1,r-1)&&i.push(d[r-1][n+1]),l&&this.isWalkableAt(n+1,r+1)&&i.push(d[r+1][n+1]),h&&this.isWalkableAt(n-1,r+1)&&i.push(d[r+1][n-1]),i},r.prototype.clone=function(){var t,e,n=this.width,o=this.height,a=this.nodes,u=new r(n,o),s=new Array(o);for(t=0;t<o;++t)for(s[t]=new Array(n),e=0;e<n;++e)s[t][e]=new i(e,t,a[t][e].walkable);return u.nodes=s,u},t.exports=r},1515:function(t,e,n){function r(t){i.call(this,t);var e=this.heuristic;this.heuristic=function(t,n){return 1e6*e(t,n)}}var i=n(287);r.prototype=new i,r.prototype.constructor=r,t.exports=r},1516:function(t,e,n){function r(t){t=t||{},this.allowDiagonal=t.allowDiagonal,this.dontCrossCorners=t.dontCrossCorners,this.diagonalMovement=t.diagonalMovement,this.diagonalMovement||(this.allowDiagonal?this.dontCrossCorners?this.diagonalMovement=o.OnlyWhenNoObstacles:this.diagonalMovement=o.IfAtMostOneObstacle:this.diagonalMovement=o.Never)}var i=n(89),o=n(33);r.prototype.findPath=function(t,e,n,r,o){var a,u,s,c,f,l=[],p=this.diagonalMovement,h=o.getNodeAt(t,e),d=o.getNodeAt(n,r);for(l.push(h),h.opened=!0;l.length;){if(s=l.shift(),s.closed=!0,s===d)return i.backtrace(d);for(a=o.getNeighbors(s,p),c=0,f=a.length;c<f;++c)u=a[c],u.closed||u.opened||(l.push(u),u.opened=!0,u.parent=s)}return[]},t.exports=r},1517:function(t,e,n){function r(t){i.call(this,t),this.heuristic=function(t,e){return 0}}var i=n(287);r.prototype=new i,r.prototype.constructor=r,t.exports=r},1518:function(t,e,n){function r(t){i.call(this,t);var e=this.heuristic;this.heuristic=function(t,n){return 1e6*e(t,n)}}var i=n(288);r.prototype=new i,r.prototype.constructor=r,t.exports=r},1519:function(t,e,n){function r(t){t=t||{},this.allowDiagonal=t.allowDiagonal,this.dontCrossCorners=t.dontCrossCorners,this.diagonalMovement=t.diagonalMovement,this.diagonalMovement||(this.allowDiagonal?this.dontCrossCorners?this.diagonalMovement=o.OnlyWhenNoObstacles:this.diagonalMovement=o.IfAtMostOneObstacle:this.diagonalMovement=o.Never)}var i=n(89),o=n(33);r.prototype.findPath=function(t,e,n,r,o){var a,u,s,c,f,l=o.getNodeAt(t,e),p=o.getNodeAt(n,r),h=[],d=[],y=this.diagonalMovement;for(h.push(l),l.opened=!0,l.by=0,d.push(p),p.opened=!0,p.by=1;h.length&&d.length;){for(s=h.shift(),s.closed=!0,a=o.getNeighbors(s,y),c=0,f=a.length;c<f;++c)if(u=a[c],!u.closed)if(u.opened){if(1===u.by)return i.biBacktrace(s,u)}else h.push(u),u.parent=s,u.opened=!0,u.by=0;for(s=d.shift(),s.closed=!0,a=o.getNeighbors(s,y),c=0,f=a.length;c<f;++c)if(u=a[c],!u.closed)if(u.opened){if(0===u.by)return i.biBacktrace(u,s)}else d.push(u),u.parent=s,u.opened=!0,u.by=1}return[]},t.exports=r},1520:function(t,e,n){function r(t){i.call(this,t),this.heuristic=function(t,e){return 0}}var i=n(288);r.prototype=new i,r.prototype.constructor=r,t.exports=r},1521:function(t,e,n){function r(t){t=t||{},this.allowDiagonal=t.allowDiagonal,this.dontCrossCorners=t.dontCrossCorners,this.diagonalMovement=t.diagonalMovement,this.heuristic=t.heuristic||i.manhattan,this.weight=t.weight||1,this.trackRecursion=t.trackRecursion||!1,this.timeLimit=t.timeLimit||1/0,this.diagonalMovement||(this.allowDiagonal?this.dontCrossCorners?this.diagonalMovement=a.OnlyWhenNoObstacles:this.diagonalMovement=a.IfAtMostOneObstacle:this.diagonalMovement=a.Never),this.diagonalMovement===a.Never?this.heuristic=t.heuristic||i.manhattan:this.heuristic=t.heuristic||i.octile}var i=(n(89),n(131)),o=n(286),a=n(33);r.prototype.findPath=function(t,e,n,r,i){var a,u,s,c=0,f=(new Date).getTime(),l=function(t,e){return this.heuristic(Math.abs(e.x-t.x),Math.abs(e.y-t.y))}.bind(this),p=function(t,e){return t.x===e.x||t.y===e.y?1:Math.SQRT2},h=function(t,e,n,r,a){if(c++,this.timeLimit>0&&(new Date).getTime()-f>1e3*this.timeLimit)return 1/0;var u=e+l(t,y)*this.weight;if(u>n)return u;if(t==y)return r[a]=[t.x,t.y],t;var s,d,v,m,_=i.getNeighbors(t,this.diagonalMovement);for(v=0,s=1/0;m=_[v];++v){if(this.trackRecursion&&(m.retainCount=m.retainCount+1||1,!0!==m.tested&&(m.tested=!0)),(d=h(m,e+p(t,m),n,r,a+1))instanceof o)return r[a]=[t.x,t.y],d;this.trackRecursion&&0==--m.retainCount&&(m.tested=!1),d<s&&(s=d)}return s}.bind(this),d=i.getNodeAt(t,e),y=i.getNodeAt(n,r),v=l(d,y);for(a=0;!0;++a){if(u=[],(s=h(d,0,v,u,0))===1/0)return[];if(s instanceof o)return u;v=s}return[]},t.exports=r},1522:function(t,e,n){function r(t){return t=t||{},t.diagonalMovement===i.Never?new o(t):t.diagonalMovement===i.Always?new a(t):t.diagonalMovement===i.OnlyWhenNoObstacles?new u(t):new s(t)}var i=n(33),o=n(1523),a=n(1524),u=n(1525),s=n(1526);t.exports=r},1523:function(t,e,n){function r(t){i.call(this,t)}var i=n(179),o=n(33);r.prototype=new i,r.prototype.constructor=r,r.prototype._jump=function(t,e,n,r){var i=this.grid,o=t-n,a=e-r;if(!i.isWalkableAt(t,e))return null;if(!0===this.trackJumpRecursion&&(i.getNodeAt(t,e).tested=!0),i.getNodeAt(t,e)===this.endNode)return[t,e];if(0!==o){if(i.isWalkableAt(t,e-1)&&!i.isWalkableAt(t-o,e-1)||i.isWalkableAt(t,e+1)&&!i.isWalkableAt(t-o,e+1))return[t,e]}else{if(0===a)throw new Error("Only horizontal and vertical movements are allowed");if(i.isWalkableAt(t-1,e)&&!i.isWalkableAt(t-1,e-a)||i.isWalkableAt(t+1,e)&&!i.isWalkableAt(t+1,e-a))return[t,e];if(this._jump(t+1,e,t,e)||this._jump(t-1,e,t,e))return[t,e]}return this._jump(t+o,e+a,t,e)},r.prototype._findNeighbors=function(t){var e,n,r,i,a,u,s,c,f=t.parent,l=t.x,p=t.y,h=this.grid,d=[];if(f)e=f.x,n=f.y,r=(l-e)/Math.max(Math.abs(l-e),1),i=(p-n)/Math.max(Math.abs(p-n),1),0!==r?(h.isWalkableAt(l,p-1)&&d.push([l,p-1]),h.isWalkableAt(l,p+1)&&d.push([l,p+1]),h.isWalkableAt(l+r,p)&&d.push([l+r,p])):0!==i&&(h.isWalkableAt(l-1,p)&&d.push([l-1,p]),h.isWalkableAt(l+1,p)&&d.push([l+1,p]),h.isWalkableAt(l,p+i)&&d.push([l,p+i]));else for(a=h.getNeighbors(t,o.Never),s=0,c=a.length;s<c;++s)u=a[s],d.push([u.x,u.y]);return d},t.exports=r},1524:function(t,e,n){function r(t){i.call(this,t)}var i=n(179),o=n(33);r.prototype=new i,r.prototype.constructor=r,r.prototype._jump=function(t,e,n,r){var i=this.grid,o=t-n,a=e-r;if(!i.isWalkableAt(t,e))return null;if(!0===this.trackJumpRecursion&&(i.getNodeAt(t,e).tested=!0),i.getNodeAt(t,e)===this.endNode)return[t,e];if(0!==o&&0!==a){if(i.isWalkableAt(t-o,e+a)&&!i.isWalkableAt(t-o,e)||i.isWalkableAt(t+o,e-a)&&!i.isWalkableAt(t,e-a))return[t,e];if(this._jump(t+o,e,t,e)||this._jump(t,e+a,t,e))return[t,e]}else if(0!==o){if(i.isWalkableAt(t+o,e+1)&&!i.isWalkableAt(t,e+1)||i.isWalkableAt(t+o,e-1)&&!i.isWalkableAt(t,e-1))return[t,e]}else if(i.isWalkableAt(t+1,e+a)&&!i.isWalkableAt(t+1,e)||i.isWalkableAt(t-1,e+a)&&!i.isWalkableAt(t-1,e))return[t,e];return this._jump(t+o,e+a,t,e)},r.prototype._findNeighbors=function(t){var e,n,r,i,a,u,s,c,f=t.parent,l=t.x,p=t.y,h=this.grid,d=[];if(f)e=f.x,n=f.y,r=(l-e)/Math.max(Math.abs(l-e),1),i=(p-n)/Math.max(Math.abs(p-n),1),0!==r&&0!==i?(h.isWalkableAt(l,p+i)&&d.push([l,p+i]),h.isWalkableAt(l+r,p)&&d.push([l+r,p]),h.isWalkableAt(l+r,p+i)&&d.push([l+r,p+i]),h.isWalkableAt(l-r,p)||d.push([l-r,p+i]),h.isWalkableAt(l,p-i)||d.push([l+r,p-i])):0===r?(h.isWalkableAt(l,p+i)&&d.push([l,p+i]),h.isWalkableAt(l+1,p)||d.push([l+1,p+i]),h.isWalkableAt(l-1,p)||d.push([l-1,p+i])):(h.isWalkableAt(l+r,p)&&d.push([l+r,p]),h.isWalkableAt(l,p+1)||d.push([l+r,p+1]),h.isWalkableAt(l,p-1)||d.push([l+r,p-1]));else for(a=h.getNeighbors(t,o.Always),s=0,c=a.length;s<c;++s)u=a[s],d.push([u.x,u.y]);return d},t.exports=r},1525:function(t,e,n){function r(t){i.call(this,t)}var i=n(179),o=n(33);r.prototype=new i,r.prototype.constructor=r,r.prototype._jump=function(t,e,n,r){var i=this.grid,o=t-n,a=e-r;if(!i.isWalkableAt(t,e))return null;if(!0===this.trackJumpRecursion&&(i.getNodeAt(t,e).tested=!0),i.getNodeAt(t,e)===this.endNode)return[t,e];if(0!==o&&0!==a){if(this._jump(t+o,e,t,e)||this._jump(t,e+a,t,e))return[t,e]}else if(0!==o){if(i.isWalkableAt(t,e-1)&&!i.isWalkableAt(t-o,e-1)||i.isWalkableAt(t,e+1)&&!i.isWalkableAt(t-o,e+1))return[t,e]}else if(0!==a&&(i.isWalkableAt(t-1,e)&&!i.isWalkableAt(t-1,e-a)||i.isWalkableAt(t+1,e)&&!i.isWalkableAt(t+1,e-a)))return[t,e];return i.isWalkableAt(t+o,e)&&i.isWalkableAt(t,e+a)?this._jump(t+o,e+a,t,e):null},r.prototype._findNeighbors=function(t){var e,n,r,i,a,u,s,c,f=t.parent,l=t.x,p=t.y,h=this.grid,d=[];if(f)if(e=f.x,n=f.y,r=(l-e)/Math.max(Math.abs(l-e),1),i=(p-n)/Math.max(Math.abs(p-n),1),0!==r&&0!==i)h.isWalkableAt(l,p+i)&&d.push([l,p+i]),h.isWalkableAt(l+r,p)&&d.push([l+r,p]),h.isWalkableAt(l,p+i)&&h.isWalkableAt(l+r,p)&&d.push([l+r,p+i]);else{var y;if(0!==r){y=h.isWalkableAt(l+r,p);var v=h.isWalkableAt(l,p+1),m=h.isWalkableAt(l,p-1);y&&(d.push([l+r,p]),v&&d.push([l+r,p+1]),m&&d.push([l+r,p-1])),v&&d.push([l,p+1]),m&&d.push([l,p-1])}else if(0!==i){y=h.isWalkableAt(l,p+i);var _=h.isWalkableAt(l+1,p),g=h.isWalkableAt(l-1,p);y&&(d.push([l,p+i]),_&&d.push([l+1,p+i]),g&&d.push([l-1,p+i])),_&&d.push([l+1,p]),g&&d.push([l-1,p])}}else for(a=h.getNeighbors(t,o.OnlyWhenNoObstacles),s=0,c=a.length;s<c;++s)u=a[s],d.push([u.x,u.y]);return d},t.exports=r},1526:function(t,e,n){function r(t){i.call(this,t)}var i=n(179),o=n(33);r.prototype=new i,r.prototype.constructor=r,r.prototype._jump=function(t,e,n,r){var i=this.grid,o=t-n,a=e-r;if(!i.isWalkableAt(t,e))return null;if(!0===this.trackJumpRecursion&&(i.getNodeAt(t,e).tested=!0),i.getNodeAt(t,e)===this.endNode)return[t,e];if(0!==o&&0!==a){if(i.isWalkableAt(t-o,e+a)&&!i.isWalkableAt(t-o,e)||i.isWalkableAt(t+o,e-a)&&!i.isWalkableAt(t,e-a))return[t,e];if(this._jump(t+o,e,t,e)||this._jump(t,e+a,t,e))return[t,e]}else if(0!==o){if(i.isWalkableAt(t+o,e+1)&&!i.isWalkableAt(t,e+1)||i.isWalkableAt(t+o,e-1)&&!i.isWalkableAt(t,e-1))return[t,e]}else if(i.isWalkableAt(t+1,e+a)&&!i.isWalkableAt(t+1,e)||i.isWalkableAt(t-1,e+a)&&!i.isWalkableAt(t-1,e))return[t,e];return i.isWalkableAt(t+o,e)||i.isWalkableAt(t,e+a)?this._jump(t+o,e+a,t,e):null},r.prototype._findNeighbors=function(t){var e,n,r,i,a,u,s,c,f=t.parent,l=t.x,p=t.y,h=this.grid,d=[];if(f)e=f.x,n=f.y,r=(l-e)/Math.max(Math.abs(l-e),1),i=(p-n)/Math.max(Math.abs(p-n),1),0!==r&&0!==i?(h.isWalkableAt(l,p+i)&&d.push([l,p+i]),h.isWalkableAt(l+r,p)&&d.push([l+r,p]),(h.isWalkableAt(l,p+i)||h.isWalkableAt(l+r,p))&&d.push([l+r,p+i]),!h.isWalkableAt(l-r,p)&&h.isWalkableAt(l,p+i)&&d.push([l-r,p+i]),!h.isWalkableAt(l,p-i)&&h.isWalkableAt(l+r,p)&&d.push([l+r,p-i])):0===r?h.isWalkableAt(l,p+i)&&(d.push([l,p+i]),h.isWalkableAt(l+1,p)||d.push([l+1,p+i]),h.isWalkableAt(l-1,p)||d.push([l-1,p+i])):h.isWalkableAt(l+r,p)&&(d.push([l+r,p]),h.isWalkableAt(l,p+1)||d.push([l+r,p+1]),h.isWalkableAt(l,p-1)||d.push([l+r,p-1]));else for(a=h.getNeighbors(t,o.IfAtMostOneObstacle),s=0,c=a.length;s<c;++s)u=a[s],d.push([u.x,u.y]);return d},t.exports=r},1527:function(t,e){t.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},1528:function(t,e){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},1529:function(t,e,n){"use strict";function r(t){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return i=function(){return t},t}function o(t){if(t&&t.__esModule)return t;if(null===t||"object"!==r(t)&&"function"!=typeof t)return{default:t};var e=i();if(e&&e.has(t))return e.get(t);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){var u=o?Object.getOwnPropertyDescriptor(t,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=t[a]}return n.default=t,e&&e.set(t,n),n}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=o(n(31)),u=n(103),s=o(n(40)),c=n(285),f=n(76),l=n(1530),p=function(t){return t&&t.__esModule?t:{default:t}}(n(1531)),h=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),d=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var o=arguments[e],a=0,u=o.length;a<u;a++,i++)r[i]=o[a];return r},y=function(t){return 1===t?3:3===t?1:t},v=function(t){return function(e){if(!e.squad)throw new Error(f.INVALID_STATE);var n=s.getSquad(e.squad);if(!n)throw new Error(f.INVALID_STATE);var r=n.members[e.id],i=r.x,o=r.y;return{x:n.id===t?i:y(i),y:n.id===t?o:y(o)}}},m=function(t){function e(){var e=t.call(this,"CombatScene")||this;return e.charas=[],e.top="",e.bottom="",e.conflictId="",e.currentTurn=0,e.container=null,e}return h(e,t),e.prototype.updateUnit=function(t){this.charas=this.charas.map(function(e){return e.unit.id===t.id&&(e.unit=t),e})},e.prototype.create=function(t){var e=this;this.container&&this.container.destroy(),this.container=this.add.container(0,0),(0,p.default)(this,this.container),this.top=t.top,this.bottom=t.bottom,this.conflictId=t.conflictId,[t.top,t.bottom].forEach(function(n){var r=s.getSquadMembers(n),i=n===t.top,o=v(t.top);r.sort(function(t,e){return o(t).y-o(e).y}).forEach(function(t){var n=o(t),r=(0,c.cartesianToIsometricBattle)(i,n.x,n.y),a=r.x,s=r.y,f=new u.Chara("combat-chara-"+t.id,e,t,a,s,1,i);e.charas.push(f)})}),setTimeout(function(){e.turn()},1e3)},e.prototype.turnOff=function(){var t;this.removeChildren(),null===(t=this.container)||void 0===t||t.destroy(),this.scene.stop()},e.prototype.removeChildren=function(){var t=this;this.charas.forEach(function(e){e.container.destroy(),t.scene.remove(e)}),this.charas=[]},e.prototype.turn=function(){var t=(0,l.runCombat)(this.charas.map(function(t){return t.unit}));this.execute(t)},e.prototype.execute=function(t){var e=this,n=t[0];console.log("Command:",n);var r=function(t){return t.filter(function(t,e){return e>0})},i=function(){var n=r(t);0===n.length?console.log("finish!"):e.execute(n)};"MOVE"===n.type?this.moveUnit(n.source,n.target).then(i):"ATTACK"===n.type?this.attack(n.source,n.target,n.damage,n.updatedTarget).then(i):"RETURN"===n.type?this.return(n.target).then(i):"END_TURN"===n.type?(this.currentTurn=this.currentTurn+1,this.turn()):"RESTART_TURNS"===n.type?(this.currentTurn=0,this.turn()):"END_COMBAT"===n.type?this.retreatUnits().then(function(t){var n=t.map(function(t){return{type:"UPDATE_UNIT",target:t}});e.scene.start("MapScene",d(n,[{type:"END_UNIT_TURN"}])),e.turnOff()}):"VICTORY"===n.type?(console.log("Winning Team:",n.target),this.scene.start("MapScene",[{type:"DESTROY_TEAM",target:n.target===this.top?this.bottom:this.top},{type:"END_UNIT_TURN"}]),this.turnOff()):console.error("Unknown command:",n)},e.prototype.getChara=function(t){var e=this.charas.find(function(e){return e.unit.id===t});if(!e||!e.container)throw new Error(f.INVALID_STATE);return e},e.prototype.moveUnit=function(t,e){var n=this,r=this.getChara(t),i=this.getChara(e);r.clearAnimations(),r.run();var o=this.top===i.unit.squad;if(!i.container)throw new Error(f.INVALID_STATE);var a=s.getSquadMember(i.unit.id),u=(0,c.cartesianToIsometricBattle)(o,o?a.x+1:y(a.x)-1,o?a.y:y(a.y)),l=u.x,p=u.y,h=function(t){return{targets:r.container,x:l,y:p,duration:500,onComplete:function(){t()}}},d={delay:500/60,callback:function(){n.charas.sort(function(t,e){return t.container&&e.container?t.container.y-e.container.y:0}).forEach(function(t){return n.scene.bringToTop(t.key)})},repeat:60};return new Promise(function(t){n.time.addEvent(d),n.tweens.add(h(t))})},e.prototype.retreatUnits=function(){var t=this;return this.charas.forEach(function(e){e.clearAnimations(),e.run();var n=t.top===e.unit.squad,r=function(){if(!e.container)throw new Error(f.INVALID_STATE);return n?{x:e.container.x-200,y:e.container.y-200}:{x:e.container.x+200,y:e.container.y+200}}(),i=r.x,o=r.y,a={targets:e.container,x:i,y:o,duration:1e3};t.tweens.add(a)}),new Promise(function(e){var n={delay:1e3,callback:function(){return e(t.charas.map(function(t){return t.unit}))}};t.time.addEvent(n)})},e.prototype.attack=function(t,e,n,r){this.updateUnit(r);var i=this.getChara(t),o=this.getChara(e);return new Promise(function(t){i.attack(t),o.flinch(n,0===r.currentHp)})},e.prototype.return=function(t){var e=this,n=this.getChara(t);n.clearAnimations(),n.run();var r=v(this.top)(n.unit),i=(0,c.cartesianToIsometricBattle)(this.top===n.unit.squad,r.x,r.y),o=i.x,a=i.y,u=function(t){return{targets:n.container,x:o,y:a,duration:500,onComplete:function(){n.stand(),t()}}};return new Promise(function(t){e.tweens.add(u(t))})},e}(a.Scene),_=m;e.default=_},1530:function(t,e,n){"use strict";function r(t,e){return s.default.pipe([s.default.map(s.default.prop("unit")),s.default.filter(u(t.unit)),s.default.all(function(t){return!a(t)})])(e)}function i(t){return s.default.all(function(t){return t.remainingAttacks<1})(t)}function o(t,e){return e.map(function(t){return t.unit}).filter(u(t)).filter(a).sort(function(t,e){return t.currentHp-e.currentHp})[0]}function a(t){return t.currentHp>0}function u(t){return function(e){return t.squad!==e.squad}}Object.defineProperty(e,"__esModule",{value:!0}),e.getTarget=o,e.runTurn=e.runCombat=e.initiativeList=void 0;var s=function(t){return t&&t.__esModule?t:{default:t}}(n(180)),c=n(76),f=function(){return f=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},f.apply(this,arguments)},l=function(t){return t.unit.agi+t.unit.dex},p=function(t){return t.sort(function(t,e){return l(e)-l(t)})};e.initiativeList=p;var h=function(t){var e=t.map(function(t){return{unit:t,remainingAttacks:2}}),n=p(e);return d(0,n,[])};e.runCombat=h;var d=function t(e,n,a){var u=n[e],s=n.length-1===e,l=s?0:e+1;if(u.unit.currentHp<1)return t(l,n,a);if(!u.unit.squad)throw new Error(c.INVALID_STATE);var p=o(u.unit,n);if(!p)throw new Error(c.INVALID_STATE);var h=n.map(function(t){var e=t.unit.currentHp-100*Math.random(),n=e<1?0:e;return t.unit.id===p.id?{remainingAttacks:t.remainingAttacks,unit:f(f({},t.unit),{currentHp:n})}:t}).map(function(t){return t.unit.id===u.unit.id?{remainingAttacks:t.remainingAttacks-1,unit:f({},t.unit)}:t}),d=h.find(function(t){return t.unit.id===p.id}),y=h.find(function(t){return t.unit.id===u.unit.id});if(!d||!y)throw new Error(c.INVALID_STATE);var v=[{type:"MOVE",source:u.unit.id,target:p.id}],m=[{type:"ATTACK",source:u.unit.id,target:p.id,damage:Math.floor(1e3*Math.random()),updatedTarget:d.unit,updatedSource:y.unit}],_=[{type:"RETURN",target:u.unit.id}],g=a.concat(v).concat(m).concat(_),b=u.unit.squad;return r(u,h)?g.concat([function(){return{type:"VICTORY",target:b}}()]):i(h)?g.concat([function(){return{type:"END_COMBAT"}}()]):t(l,h,g)};e.runTurn=d},1531:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=r(n(1532)),o=r(n(1533)),a=n(129),u=function(t,e){var n=t.add.image(0,0,"backgrounds/plain");e.add(n),n.setOrigin(0,0),n.displayWidth=a.SCREEN_WIDTH,n.displayHeight=a.SCREEN_HEIGHT,[{x:350,y:40},{x:320,y:60},{x:460,y:70},{x:420,y:80},{x:550,y:110},{x:590,y:120},{x:680,y:120},{x:1110,y:350},{x:1130,y:370}].map((0,i.default)(t)).forEach(function(t){return e.add(t)}),[{x:320,y:700},{x:390,y:710},{x:450,y:750},{x:1250,y:450},{x:50,y:410}].forEach(function(n){var r=n.x,i=n.y,o=t.add.image(r,i,"props/bush");e.add(o),o.setScale(1),o.setOrigin(.5,1),t.tweens.add({targets:o,scaleX:1.25,duration:2e3*Math.random()+1e4,repeat:-1,yoyo:!0,ease:"Linear"})});var r=t.add.image(870,130,"props/far_tree_1");e.add(r),r.setScale(.5),r.setOrigin(.5,1),t.tweens.add({targets:r,scaleX:.55,rotation:-.2,duration:1200*Math.random()+4e3,repeat:-1,yoyo:!0,ease:"Linear"});var u=(0,o.default)(t)(1e3,250,.4);e.add(u)};e.default=u},1532:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=function(t){return function(e){var n=e.x,r=e.y,i=t.add.image(n,r,"props/grass");return i.setScale(.4),i.setOrigin(.5,1),i.setRotation(-.2),t.tweens.add({targets:i,rotation:.2,scaleX:.5,duration:1e3*Math.random()+5e3,repeat:-1,yoyo:!0,ease:"Bounce"}),i}};e.default=r},1533:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n(574),i=function(t){return function(e,n,i){return[{x:e,y:n,scale:i},{x:e-30*i,y:n,scale:.8*i},{x:e+30*i,y:n+20,scale:.7*i},{x:e-60*i,y:n+20,scale:.4*i}].map(function(e){var n=t.add.image(e.x,e.y,"props/branch"),i=.3*e.scale,o=(0,r.random)(2,4)/10*-1;return n.setScale(i),n.setOrigin(.3,1),n.setRotation(o),t.tweens.add({targets:n,rotation:-1*o,duration:6e3,yoyo:!0,repeat:-1,scaleX:i+i/10,ease:"Bounce"}),n})}};e.default=i},175:function(t,e,n){"use strict";function r(t,e){return Math.floor(Math.random()*e+t)}function i(t,e){return Object.values(e).reduce(function(e,n){var r;return n.id===t?e:o(o({},e),(r={},r[n.id]=n,r))},{})}Object.defineProperty(e,"__esModule",{value:!0}),e.random=r,e.removeIdFromMap=i,e.maybeZero=e.indexById=void 0;var o=function(){return o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},o.apply(this,arguments)},a=function(t){return t.reduce(function(t,e){var n;return o(o({},t),(n={},n[e.id]=e,n))},{})};e.indexById=a;var u=function(t){return t||0};e.maybeZero=u},176:function(t,e,n){"use strict";function r(t){return t[Math.floor(Math.random()*t.length)]}function i(t,e){var n=e.type,r=e.name,i=Object.keys(o.modifiers),a=function(t,e){var n,r=e[0],o=e[1];return i.includes(r)?l(l({},t),(n={},n[r]=parseInt(o),n)):t},s=Object.entries(e).filter(function(t){return!["name","type","description"].includes(t[0])}),c=s.reduce(a,o.modifiers),f=o.itemTypeSlots[n];return o.itemTypeSlots[n]?t.concat([{id:(0,u.idfy)(e.name),name:r,type:n,slot:f,description:e.description,modifiers:c}]):t}Object.defineProperty(e,"__esModule",{value:!0}),e.randomItem=r,e.default=e.clearDB=e.player=e.items=e.squads=e.units=e.classes=void 0;var o=n(572),a=function(t){return t&&t.__esModule?t:{default:t}}(n(1485)),u=n(1486),s=n(1487),c=n(175),f=n(1489),l=function(){return l=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},l.apply(this,arguments)},p=["fighter","knight","wizard"];e.classes=p;var h=(0,c.indexById)(Array.from({length:70},function(t,e){return e}).map(function(t){return(0,s.fromJSON)(t)}));e.units=h;var d={};e.squads=d;for(var y=0;y<15;y++)d[y.toString()]=function(t,e){var n;return e.squad=t.toString(),{id:t.toString(),name:e.name,emblem:"Emoji",members:(n={},n[e.id]={id:e.id,leader:!0,x:2,y:2},n)}}(y,h[y]);var v=(0,c.indexById)(a.default.reduce(i,[]));e.items=v;var m={id:"player_1",name:"Player Derp",gold:100,iventory:{iron_sword:2,steel_sword:1},units:(0,f.Range)(0,10).map(function(t){return t.toString()}).toJS()};e.player=m;var _=[["units",h],["squads",d],["items",v],["itemTypes",o.itemTypeSlots],["player",m]],g=function(){b(!0),alert("Data Cleared!")};e.clearDB=g;var b=function(t){_.forEach(function(e){var n=e[0],r=e[1];(null===localStorage.getItem(n)||t)&&localStorage.setItem(n,JSON.stringify(r))})},w=b;e.default=w},177:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TRUNK_BACK_Y=e.TRUNK_BACK_X=e.RIGHT_FOOT_BACK_Y=e.RIGHT_FOOT_BACK_X=e.LEFT_FOOT_BACK_Y=e.LEFT_FOOT_BACK_X=e.LEFT_HAND_BACK_Y=e.LEFT_HAND_BACK_X=e.RIGHT_HAND_BACK_Y=e.RIGHT_HAND_BACK_X=e.HEAD_BACK_Y=e.HEAD_BACK_X=e.RIGHT_HAND_FRONT_Y=e.RIGHT_HAND_FRONT_X=e.LEFT_HAND_FRONT_Y=e.LEFT_HAND_FRONT_X=e.TRUNK_FRONT_Y=e.TRUNK_FRONT_X=e.RIGHT_FOOT_FRONT_Y=e.RIGHT_FOOT_FRONT_X=e.LEFT_FOOT_FRONT_Y=e.LEFT_FOOT_FRONT_X=e.HEAD_FRONT_Y=e.HEAD_FRONT_X=e.CHARA_WRAPPER_Y=e.CHARA_WRAPPER_X=void 0;e.CHARA_WRAPPER_X=0;e.CHARA_WRAPPER_Y=0;e.HEAD_FRONT_X=0;e.HEAD_FRONT_Y=0;e.LEFT_FOOT_FRONT_X=20;e.LEFT_FOOT_FRONT_Y=90;e.RIGHT_FOOT_FRONT_X=-10;e.RIGHT_FOOT_FRONT_Y=97;e.TRUNK_FRONT_X=0;e.TRUNK_FRONT_Y=55;e.LEFT_HAND_FRONT_X=35;e.LEFT_HAND_FRONT_Y=50;e.RIGHT_HAND_FRONT_X=-25;e.RIGHT_HAND_FRONT_Y=65;e.HEAD_BACK_X=0;e.HEAD_BACK_Y=0;e.RIGHT_HAND_BACK_X=20;e.RIGHT_HAND_BACK_Y=50;e.LEFT_HAND_BACK_X=-30;e.LEFT_HAND_BACK_Y=50;e.LEFT_FOOT_BACK_X=20;e.LEFT_FOOT_BACK_Y=80;e.RIGHT_FOOT_BACK_X=-10;e.RIGHT_FOOT_BACK_Y=87;e.TRUNK_BACK_X=0;e.TRUNK_BACK_Y=55},178:function(t,e,n){t.exports=n(1512)},179:function(t,e,n){function r(t){t=t||{},this.heuristic=t.heuristic||a.manhattan,this.trackJumpRecursion=t.trackJumpRecursion||!1}var i=n(178),o=n(89),a=n(131);n(33);r.prototype.findPath=function(t,e,n,r,a){var u,s=this.openList=new i(function(t,e){return t.f-e.f}),c=this.startNode=a.getNodeAt(t,e),f=this.endNode=a.getNodeAt(n,r);for(this.grid=a,c.g=0,c.f=0,s.push(c),c.opened=!0;!s.empty();){if(u=s.pop(),u.closed=!0,u===f)return o.expandPath(o.backtrace(f));this._identifySuccessors(u)}return[]},r.prototype._identifySuccessors=function(t){var e,n,r,i,o,u,s,c,f,l,p=this.grid,h=this.heuristic,d=this.openList,y=this.endNode.x,v=this.endNode.y,m=t.x,_=t.y,g=Math.abs;Math.max;for(e=this._findNeighbors(t),i=0,o=e.length;i<o;++i)if(n=e[i],r=this._jump(n[0],n[1],m,_)){if(u=r[0],s=r[1],l=p.getNodeAt(u,s),l.closed)continue;c=a.octile(g(u-m),g(s-_)),f=t.g+c,(!l.opened||f<l.g)&&(l.g=f,l.h=l.h||h(g(u-y),g(s-v)),l.f=l.g+l.h,l.parent=t,l.opened?d.updateItem(l):(d.push(l),l.opened=!0))}},t.exports=r},180:function(t,e,n){(function(r){var i,o,a;!function(r){"use strict";"object"==typeof t&&"object"==typeof t.exports?t.exports=r(n(576),n(182),n(577),n(578),n(51),n(52),n(104)):null!=n(77)?(o=[n(576),n(182),n(577),n(578),n(51),n(52),n(104)],i=r,void 0!==(a="function"==typeof i?i.apply(e,o):i)&&(t.exports=a)):self.sanctuary=r(self.sanctuaryDef,self.sanctuaryEither,self.sanctuaryMaybe,self.sanctuaryPair,self.sanctuaryShow,self.sanctuaryTypeClasses,self.sanctuaryTypeIdentifiers)}(function(t,e,i,o,a,u,s){"use strict";function c(t){return function(e){return function(n){return t(e(n))}}}function f(t){return function(e){return function(n){return t(n)(e)}}}function l(t){return c(function(e){return t in e?le(e[t]):fe})(d)}function p(t){return function(e){return e[t]()}}function h(t){return function(e){return function(n){return n[t](e)}}}function d(t){return null==t?Object.create(null):Object(t)}function y(n){var r=t.create(n),o={env:n.env,is:r("is")({})([t.Type,t.Any,t.Boolean])(t.test(n.env)),Maybe:i,Nothing:fe,Either:e};return Object.keys(Ie).forEach(function(t){o[t]=r(t)(Ie[t].consts)(Ie[t].types)(Ie[t].impl)}),o.unchecked=n.checkTypes?y({checkTypes:!1,env:n.env}):o,o}function v(t){var e=s.parse(s(t));return e.namespace=u.reject(m(null),le(e.namespace)),e}function m(t){return function(e){return u.equals(t,e)}}function _(t){return function(e){return u.lt(e,t)}}function g(t){return function(e){return u.lte(e,t)}}function b(t){return function(e){return u.gt(e,t)}}function w(t){return function(e){return u.gte(e,t)}}function S(t){return function(e){return u.filter(t,e)}}function O(t){return function(e){return u.reject(t,e)}}function A(t){return function(e){return u.map(t,e)}}function E(t){return function(e){return u.alt(e,t)}}function T(t){return function(e){return function(n){return u.reduce(function(e,n){return t(e)(n)},e,n)}}}function I(t){return function(e){return u.of(t,e)}}function x(t){return function(e){function n(t,n,r){return u.map(J(t)(n),e(r))}return function(e){return u.chainRec(t,n,e)}}}function k(t){return t}function C(t){return function(e){return t}}function N(t){return function(e){return e(t)}}function M(t){return function(e){return function(n){return t(e,n)}}}function R(t){return function(e){return function(n){return function(r){return t(e,n,r)}}}}function P(t){return function(e){return function(n){return function(r){return function(i){return t(e,n,r,i)}}}}}function j(t){return function(e){return function(n){return function(r){return function(i){return function(o){return t(e,n,r,i,o)}}}}}}function F(t){return function(e){return T(N)(e)(t)}}function D(t){return function(e){return u.reduce(function(t,e){return u.chain(e,t)},e,t)}}function q(t){return function(e){return function(n){return function(r){return t(e(n))(e(r))}}}}function U(t){return function(e){return t(e.fst)(e.snd)}}function L(t){return t.isNothing}function H(t){return t.isJust}function W(t){return t.isJust?t.value:null}function B(t){return function(e){return function(n){return n.isJust?e(n.value):t}}}function z(t){return function(e){return function(n){return n.isJust?e(n.value):t()}}}function K(t){return A(Ot("value"))(S(H)(t))}function V(t){return B(se(t))(ce)}function Y(t){return t.isLeft}function G(t){return t.isRight}function X(t){return J(C(t))(k)}function J(t){return function(e){return function(n){return(n.isLeft?t:e)(n.value)}}}function $(t){return it(t)(ce)(se)}function Z(t){return function(e){try{return ce(t(e))}catch(t){return se(t)}}}function Q(t){return t.isLeft?fe:le(t.value)}function tt(t){return function(e){return t&&e}}function et(t){return function(e){return t||e}}function nt(t){return!t}function rt(t){return function(e){return function(n){return n?e:t}}}function it(t){return function(e){return function(n){return function(r){return(t(r)?e:n)(r)}}}}function ot(t){return f(it(t))(k)}function at(t){return it(t)(k)}function ut(t){return function(e){return function(n){return 0===n.length?t:e(n[0])(n.slice(1))}}}function st(t){return Array.isArray(t)?t.length>0?le(t[0]):fe:u.reduce(function(t,e){return t.isJust?t:le(e)},fe,t)}function ct(t){return Array.isArray(t)?t.length>0?le(t[t.length-1]):fe:u.reduce(function(t,e){return le(e)},fe,t)}function ft(t){if(Array.isArray(t))return t.length>0?le(t.slice(1)):fe;var e=u.empty(t.constructor);return u.reduce(function(t,n){return le(B(e)(mt(n))(t))},fe,t)}function lt(t){if(Array.isArray(t))return t.length>0?le(t.slice(0,-1)):fe;var e=u.empty(t.constructor);return u.map(o.snd,u.reduce(function(t,n){return le(o(n)(B(e)(U(mt))(t)))},fe,t))}function pt(t,e){return function(n){return function(r){if(n<0)return fe;if(Array.isArray(r))return n<=r.length?le(t(n,r)):fe;var i=u.reduce(function(t,n){return u.map(function(t){var r=t.fst,i=t.snd;return o(r-1)(e(r,i,n))},t)},le(o(n)(u.empty(r.constructor))),r);return u.map(o.snd,u.reject(c(b(0))(o.fst),i))}}}function ht(t){return function(e){return u.map(u.reverse,xe(t)(u.reverse(e)))}}function dt(t){return function(e){return u.map(u.reverse,ke(t)(u.reverse(e)))}}function yt(t){return function(e){for(var n=0;n<e.length&&t(e[n]);)n+=1;return e.slice(0,n)}}function vt(t){return function(e){for(var n=0;n<e.length&&t(e[n]);)n+=1;return e.slice(n)}}function mt(t){return function(e){return u.append(t,e)}}function _t(t){return function(e){return u.reduce(function(e,n){return e.isJust?e:t(n)?le(n):fe},fe,e)}}function gt(t){return function(e){for(var n=[],r=t(e);r.isJust;r=t(r.value.snd))n.push(r.value.fst);return n}}function bt(t){return function(e){for(var n=[],r=t;r<e;r+=1)n.push(r);return n}}function wt(t){return function(e){if(0===e.length)return[];for(var n=e[0],r=[n],i=[r],o=1;o<e.length;o+=1){var a=e[o];t(n)(a)?r.push(a):i.push(r=[n=a])}return i}}function St(t){return function(e){return function(n){for(var r=[],i=Math.min(e.length,n.length),o=0;o<i;o+=1)r.push(t(e[o])(n[o]));return r}}}function Ot(t){return function(e){var n=d(e);if(t in n)return n[t];throw new TypeError("‘prop’ expected object to have a property named ‘"+t+"’; "+a(e)+" does not")}}function At(t){return function(e){return t.reduce(function(e,n){var r=d(e);if(n in r)return r[n];throw new TypeError("‘props’ expected object to have a property at "+a(t)+"; "+a(e)+" does not")},e)}}function Et(t){return c(c(S(t)))(l)}function Tt(t){return function(e){return function(n){return u.filter(t,e.reduce(function(t,e){return u.chain(l(e),t)},le(n)))}}}function It(t){return function(e){return Object.prototype.propertyIsEnumerable.call(e,t)?le(e[t]):fe}}function xt(t){return function(e){var n={};return n[t]=e,n}}function kt(t){return function(e){return function(n){return u.concat(n,xt(t)(e))}}}function Ct(t){return function(e){var n=u.concat(e,{});return delete n[t],n}}function Nt(t){return u.map(function(e){return t[e]},Object.keys(t))}function Mt(t){return u.map(function(e){return o(e)(t[e])},Object.keys(t))}function Rt(t){return u.reduce(function(t,e){return t[e.fst]=e.snd,t},{},t)}function Pt(t){return-t}function jt(t){return function(e){return t+e}}function Ft(t){return function(e){return e-t}}function Dt(t){return function(e){return t*e}}function qt(t){return function(e){return e/t}}function Ut(t){return function(e){return Math.pow(e,t)}}function Lt(t){var e=u.reduce(function(t,e){return t.total+=e,t.count+=1,t},{total:0,count:0},t);return e.count>0?le(e.total/e.count):fe}function Ht(t){return t%2==0}function Wt(t){return t%2!=0}function Bt(t){var e=new Date(t);return isNaN(e.valueOf())?fe:le(e)}function zt(t){return"(?:"+t.join("|")+")"}function Kt(t){return Ce.test(t)?le(parseFloat(t)):fe}function Vt(e){return function(n){var r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ".slice(0,e),i=new RegExp("^["+r+"]+$","i"),o=n.replace(/^[+-]/,"");if(i.test(16===e?o.replace(/^0x/i,""):o)){var a=parseInt(n,e);if(t.test([])(t.Integer)(a))return le(a)}return fe}}function Yt(t){return c(S(t))(c(Q)(Z(JSON.parse)))}function Gt(t){return{match:t[0],groups:u.map(c(O(m(void 0)))(le),t.slice(1))}}function Xt(t,e){var n=t.lastIndex,r=e();return t.lastIndex=n,r}function Jt(t){return function(e){return new RegExp(e,t)}}function $t(t){return t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}function Zt(t){return function(e){return Xt(t,function(){return t.test(e)})}}function Qt(t){return function(e){return u.map(Gt,u.reject(m(null),le(e.match(t))))}}function te(t){return function(e){return Xt(t,function(){return gt(function(n){return u.map(function(t){return o(Gt(t))(null)},u.reject(m(null),le(t.exec(e))))})([])})}}function ee(t){return function(e){var n=t.length;return e.slice(0,n)===t?le(e.slice(n)):fe}}function ne(t){return function(e){var n=e.length-t.length;return e.slice(n)===t?le(e.slice(0,n)):fe}}function re(t){var e=t.split(/\s+/),n=e.length;return e.slice(""===e[0]?1:0,""===e[n-1]?n-1:n)}function ie(t){return""===t?[]:t.replace(/\r\n?/g,"\n").match(/^(?=[\s\S]).*/gm)}function oe(t){return t.reduce(function(t,e){return t+e+"\n"},"")}function ae(t){return function(e){return Xt(t,function(){for(var n,r=[],i=0;null!=(n=t.exec(e));)if(t.lastIndex===i&&""===n[0]){if(t.lastIndex===e.length)return r;t.lastIndex+=1}else r.push(e.slice(i,n.index)),i=n.index+n[0].length;return r.push(e.slice(i)),r})}}if("undefined"!=typeof __doctest){var ue=(__doctest.require("sanctuary-descending"),__doctest.require("./test/internal/List").Nil,__doctest.require("./test/internal/List").Cons,__doctest.require("./test/internal/Sum"));(function(e){var n=e.create({checkTypes:!0,env:e.env.concat([__doctest.require("./test/internal/List").Type(t.Unknown),ue.Type])});n.env=e.env})(n(180))}var se=e.Left,ce=e.Right,fe=i.Nothing,le=i.Just,pe=t.TypeVariable("a"),he=t.TypeVariable("b"),de=t.TypeVariable("c"),ye=t.TypeVariable("d"),ve=t.TypeVariable("e"),me=t.TypeVariable("g"),_e=t.TypeVariable("r"),ge=t.UnaryTypeVariable("f"),be=t.UnaryTypeVariable("m"),we=t.UnaryTypeVariable("t"),Se=t.UnaryTypeVariable("w"),Oe=t.BinaryTypeVariable("p"),Ae=t.BinaryTypeVariable("s"),Ee=t.UnaryType("TypeRep")("https://github.com/fantasyland/fantasy-land#type-representatives")([])(C(!0))(C([])),Te=t.RecordType({checkTypes:t.Boolean,env:t.Array(t.Any)}),Ie={};Ie.create={consts:{},types:[Te,t.Object],impl:y},Ie.type={consts:{},types:[t.Any,t.RecordType({namespace:t.Maybe(t.String),name:t.String,version:t.NonNegativeInteger})],impl:v},Ie.show={consts:{},types:[t.Any,t.String],impl:a},Ie.equals={consts:{a:[u.Setoid]},types:[pe,pe,t.Boolean],impl:m},Ie.lt={consts:{a:[u.Ord]},types:[pe,pe,t.Boolean],impl:_},Ie.lte={consts:{a:[u.Ord]},types:[pe,pe,t.Boolean],impl:g},Ie.gt={consts:{a:[u.Ord]},types:[pe,pe,t.Boolean],impl:b},Ie.gte={consts:{a:[u.Ord]},types:[pe,pe,t.Boolean],impl:w},Ie.min={consts:{a:[u.Ord]},types:[pe,pe,pe],impl:M(u.min)},Ie.max={consts:{a:[u.Ord]},types:[pe,pe,pe],impl:M(u.max)},Ie.clamp={consts:{a:[u.Ord]},types:[pe,pe,pe,pe],impl:R(u.clamp)},Ie.id={consts:{c:[u.Category]},types:[Ee(de),de],impl:u.id},Ie.concat={consts:{a:[u.Semigroup]},types:[pe,pe,pe],impl:M(u.concat)},Ie.empty={consts:{a:[u.Monoid]},types:[Ee(pe),pe],impl:u.empty},Ie.invert={consts:{g:[u.Group]},types:[me,me],impl:u.invert},Ie.filter={consts:{f:[u.Filterable]},types:[t.Predicate(pe),ge(pe),ge(pe)],impl:S},Ie.reject={consts:{f:[u.Filterable]},types:[t.Predicate(pe),ge(pe),ge(pe)],impl:O},Ie.map={consts:{f:[u.Functor]},types:[t.Fn(pe)(he),ge(pe),ge(he)],impl:A},Ie.flip={consts:{f:[u.Functor]},types:[ge(t.Fn(pe)(he)),pe,ge(he)],impl:M(u.flip)},Ie.bimap={consts:{p:[u.Bifunctor]},types:[t.Fn(pe)(he),t.Fn(de)(ye),Oe(pe)(de),Oe(he)(ye)],impl:R(u.bimap)},Ie.mapLeft={consts:{p:[u.Bifunctor]},types:[t.Fn(pe)(he),Oe(pe)(de),Oe(he)(de)],impl:M(u.mapLeft)},Ie.promap={consts:{p:[u.Profunctor]},types:[t.Fn(pe)(he),t.Fn(de)(ye),Oe(he)(de),Oe(pe)(ye)],impl:R(u.promap)},Ie.alt={consts:{f:[u.Alt]},types:[ge(pe),ge(pe),ge(pe)],impl:E},Ie.zero={consts:{f:[u.Plus]},types:[Ee(ge(pe)),ge(pe)],impl:u.zero},Ie.reduce={consts:{f:[u.Foldable]},types:[t.Fn(pe)(t.Fn(he)(pe)),pe,ge(he),pe],impl:T},Ie.traverse={consts:{f:[u.Applicative],t:[u.Traversable]},types:[Ee(ge(he)),t.Fn(pe)(ge(he)),we(pe),ge(we(he))],impl:R(u.traverse)},Ie.sequence={consts:{f:[u.Applicative],t:[u.Traversable]},types:[Ee(ge(pe)),we(ge(pe)),ge(we(pe))],impl:M(u.sequence)},Ie.ap={consts:{f:[u.Apply]},types:[ge(t.Fn(pe)(he)),ge(pe),ge(he)],impl:M(u.ap)},Ie.lift2={consts:{f:[u.Apply]},types:[t.Fn(pe)(t.Fn(he)(de)),ge(pe),ge(he),ge(de)],impl:R(u.lift2)},Ie.lift3={consts:{f:[u.Apply]},types:[t.Fn(pe)(t.Fn(he)(t.Fn(de)(ye))),ge(pe),ge(he),ge(de),ge(ye)],impl:P(u.lift3)},Ie.apFirst={consts:{f:[u.Apply]},types:[ge(pe),ge(he),ge(pe)],impl:M(u.apFirst)},Ie.apSecond={consts:{f:[u.Apply]},types:[ge(pe),ge(he),ge(he)],impl:M(u.apSecond)},Ie.of={consts:{f:[u.Applicative]},types:[Ee(ge(pe)),pe,ge(pe)],impl:I},Ie.chain={consts:{m:[u.Chain]},types:[t.Fn(pe)(be(he)),be(pe),be(he)],impl:M(u.chain)},Ie.join={consts:{m:[u.Chain]},types:[be(be(pe)),be(pe)],impl:u.join},Ie.chainRec={consts:{m:[u.ChainRec]},types:[Ee(be(he)),t.Fn(pe)(be(t.Either(pe)(he))),pe,be(he)],impl:x},Ie.extend={consts:{w:[u.Extend]},types:[t.Fn(Se(pe))(he),Se(pe),Se(he)],impl:M(u.extend)},Ie.duplicate={consts:{w:[u.Extend]},types:[Se(pe),Se(Se(pe))],impl:u.duplicate},Ie.extract={consts:{w:[u.Comonad]},types:[Se(pe),pe],impl:u.extract},Ie.contramap={consts:{f:[u.Contravariant]},types:[t.Fn(he)(pe),ge(pe),ge(he)],impl:M(u.contramap)},Ie.I={consts:{},types:[pe,pe],impl:k},Ie.K={consts:{},types:[pe,he,pe],impl:C},Ie.T={consts:{},types:[pe,t.Fn(pe)(he),he],impl:N},Ie.curry2={consts:{},types:[t.Function([pe,he,de]),pe,he,de],impl:M},Ie.curry3={consts:{},types:[t.Function([pe,he,de,ye]),pe,he,de,ye],impl:R},Ie.curry4={consts:{},types:[t.Function([pe,he,de,ye,ve]),pe,he,de,ye,ve],impl:P},Ie.curry5={consts:{},types:[t.Function([pe,he,de,ye,ve,_e]),pe,he,de,ye,ve,_e],impl:j},Ie.compose={consts:{s:[u.Semigroupoid]},types:[Ae(he)(de),Ae(pe)(he),Ae(pe)(de)],impl:M(u.compose)},Ie.pipe={consts:{f:[u.Foldable]},types:[ge(t.Fn(t.Any)(t.Any)),pe,he],impl:F},Ie.pipeK={consts:{f:[u.Foldable],m:[u.Chain]},types:[ge(t.Fn(t.Any)(be(t.Any))),be(pe),be(he)],impl:D},Ie.on={consts:{},types:[t.Fn(he)(t.Fn(he)(de)),t.Fn(pe)(he),pe,pe,de],impl:q},Ie.Pair={consts:{},types:[pe,he,t.Pair(pe)(he)],impl:o},Ie.pair={consts:{},types:[t.Fn(pe)(t.Fn(he)(de)),t.Pair(pe)(he),de],impl:U},Ie.fst={consts:{},types:[t.Pair(pe)(he),pe],impl:U(C)},Ie.snd={consts:{},types:[t.Pair(pe)(he),he],impl:U(f(C))},Ie.swap={consts:{},types:[t.Pair(pe)(he),t.Pair(he)(pe)],impl:U(f(o))},Ie.Just={consts:{},types:[pe,t.Maybe(pe)],impl:le},Ie.isNothing={consts:{},types:[t.Maybe(pe),t.Boolean],impl:L},Ie.isJust={consts:{},types:[t.Maybe(pe),t.Boolean],impl:H},Ie.fromMaybe={consts:{},types:[pe,t.Maybe(pe),pe],impl:f(B)(k)},Ie.fromMaybe_={consts:{},types:[t.Thunk(pe),t.Maybe(pe),pe],impl:f(z)(k)},Ie.maybeToNullable={consts:{},types:[t.Maybe(pe),t.Nullable(pe)],impl:W},Ie.maybe={consts:{},types:[he,t.Fn(pe)(he),t.Maybe(pe),he],impl:B},Ie.maybe_={consts:{},types:[t.Thunk(he),t.Fn(pe)(he),t.Maybe(pe),he],impl:z},Ie.justs={consts:{f:[u.Filterable,u.Functor]},types:[ge(t.Maybe(pe)),ge(pe)],impl:K},Ie.mapMaybe={consts:{f:[u.Filterable,u.Functor]},types:[t.Fn(pe)(t.Maybe(he)),ge(pe),ge(he)],impl:c(c(K))(A)},Ie.maybeToEither={consts:{},types:[pe,t.Maybe(he),t.Either(pe)(he)],impl:V},Ie.Left={consts:{},types:[pe,t.Either(pe)(he)],impl:se},Ie.Right={consts:{},types:[he,t.Either(pe)(he)],impl:ce},Ie.isLeft={consts:{},types:[t.Either(pe)(he),t.Boolean],impl:Y},Ie.isRight={consts:{},types:[t.Either(pe)(he),t.Boolean],impl:G},Ie.fromEither={consts:{},types:[he,t.Either(pe)(he),he],impl:X},Ie.either={consts:{},types:[t.Fn(pe)(de),t.Fn(he)(de),t.Either(pe)(he),de],impl:J},Ie.lefts={consts:{f:[u.Filterable,u.Functor]},types:[ge(t.Either(pe)(he)),ge(pe)],impl:c(A(Ot("value")))(S(Y))},Ie.rights={consts:{f:[u.Filterable,u.Functor]},types:[ge(t.Either(pe)(he)),ge(he)],impl:c(A(Ot("value")))(S(G))},Ie.tagBy={consts:{},types:[t.Predicate(pe),pe,t.Either(pe)(pe)],impl:$},Ie.encase={consts:{},types:[function(e){return function(n){return function(r){var i=t.Fn(n)(r);return i.format=function(t,i){return t("Throwing "+a(e))+t(" ")+i("$1")(a(n))+t(" ")+i("$2")(a(r))},i}}}(ve)(pe)(he),pe,t.Either(ve)(he)],impl:Z},Ie.eitherToMaybe={consts:{},types:[t.Either(pe)(he),t.Maybe(he)],impl:Q},Ie.and={consts:{},types:[t.Boolean,t.Boolean,t.Boolean],impl:tt},Ie.or={consts:{},types:[t.Boolean,t.Boolean,t.Boolean],impl:et},Ie.not={consts:{},types:[t.Boolean,t.Boolean],impl:nt},Ie.complement={consts:{},types:[t.Predicate(pe),pe,t.Boolean],impl:c(nt)},Ie.boolean={consts:{},types:[pe,pe,t.Boolean,pe],impl:rt},Ie.ifElse={consts:{},types:[t.Predicate(pe),t.Fn(pe)(he),t.Fn(pe)(he),pe,he],impl:it},Ie.when={consts:{},types:[t.Predicate(pe),t.Fn(pe)(pe),pe,pe],impl:ot},Ie.unless={consts:{},types:[t.Predicate(pe),t.Fn(pe)(pe),pe,pe],impl:at},Ie.array={consts:{},types:[he,t.Fn(pe)(t.Fn(t.Array(pe))(he)),t.Array(pe),he],impl:ut},Ie.head={consts:{f:[u.Foldable]},types:[ge(pe),t.Maybe(pe)],impl:st},Ie.last={consts:{f:[u.Foldable]},types:[ge(pe),t.Maybe(pe)],impl:ct},Ie.tail={consts:{f:[u.Applicative,u.Foldable,u.Monoid]},types:[ge(pe),t.Maybe(ge(pe))],impl:ft},Ie.init={consts:{f:[u.Applicative,u.Foldable,u.Monoid]},types:[ge(pe),t.Maybe(ge(pe))],impl:lt};var xe=pt(function(t,e){return e.slice(0,t)},function(t,e,n){return t>0?u.append(n,e):e});Ie.take={consts:{f:[u.Applicative,u.Foldable,u.Monoid]},types:[t.Integer,ge(pe),t.Maybe(ge(pe))],impl:xe};var ke=pt(function(t,e){return e.slice(t)},function(t,e,n){return t>0?e:u.append(n,e)});Ie.drop={consts:{f:[u.Applicative,u.Foldable,u.Monoid]},types:[t.Integer,ge(pe),t.Maybe(ge(pe))],impl:ke},Ie.takeLast={consts:{f:[u.Applicative,u.Foldable,u.Monoid]},types:[t.Integer,ge(pe),t.Maybe(ge(pe))],impl:ht},Ie.dropLast={consts:{f:[u.Applicative,u.Foldable,u.Monoid]},types:[t.Integer,ge(pe),t.Maybe(ge(pe))],impl:dt},Ie.takeWhile={consts:{},types:[t.Predicate(pe),t.Array(pe),t.Array(pe)],impl:yt},Ie.dropWhile={consts:{},types:[t.Predicate(pe),t.Array(pe),t.Array(pe)],impl:vt},Ie.size={consts:{f:[u.Foldable]},types:[ge(pe),t.NonNegativeInteger],impl:u.size},Ie.all={consts:{f:[u.Foldable]},types:[t.Predicate(pe),ge(pe),t.Boolean],impl:M(u.all)},Ie.any={consts:{f:[u.Foldable]},types:[t.Predicate(pe),ge(pe),t.Boolean],impl:M(u.any)},Ie.none={consts:{f:[u.Foldable]},types:[t.Predicate(pe),ge(pe),t.Boolean],impl:M(u.none)},Ie.append={consts:{f:[u.Applicative,u.Semigroup]},types:[pe,ge(pe),ge(pe)],impl:mt},Ie.prepend={consts:{f:[u.Applicative,u.Semigroup]},types:[pe,ge(pe),ge(pe)],impl:M(u.prepend)},Ie.joinWith={consts:{},types:[t.String,t.Array(t.String),t.String],impl:h("join")},Ie.elem={consts:{a:[u.Setoid],f:[u.Foldable]},types:[pe,ge(pe),t.Boolean],impl:M(u.elem)},Ie.find={consts:{f:[u.Foldable]},types:[t.Predicate(pe),ge(pe),t.Maybe(pe)],impl:_t},Ie.intercalate={consts:{a:[u.Monoid],f:[u.Foldable]},types:[pe,ge(pe),pe],impl:M(u.intercalate)},Ie.foldMap={consts:{b:[u.Monoid],f:[u.Foldable]},types:[Ee(he),t.Fn(pe)(he),ge(pe),he],impl:R(u.foldMap)},Ie.unfoldr={consts:{},types:[t.Fn(he)(t.Maybe(t.Pair(pe)(he))),he,t.Array(pe)],impl:gt},Ie.range={consts:{},types:[t.Integer,t.Integer,t.Array(t.Integer)],impl:bt},Ie.groupBy={consts:{},types:[t.Fn(pe)(t.Predicate(pe)),t.Array(pe),t.Array(t.Array(pe))],impl:wt},Ie.reverse={consts:{f:[u.Applicative,u.Foldable,u.Monoid]},types:[ge(pe),ge(pe)],impl:u.reverse},Ie.sort={consts:{a:[u.Ord],m:[u.Applicative,u.Foldable,u.Monoid]},types:[be(pe),be(pe)],impl:u.sort},Ie.sortBy={consts:{b:[u.Ord],m:[u.Applicative,u.Foldable,u.Monoid]},types:[t.Fn(pe)(he),be(pe),be(pe)],impl:M(u.sortBy)},Ie.zip={consts:{},types:[t.Array(pe),t.Array(he),t.Array(t.Pair(pe)(he))],impl:St(o)},Ie.zipWith={consts:{},types:[t.Fn(pe)(t.Fn(he)(de)),t.Array(pe),t.Array(he),t.Array(de)],impl:St},Ie.prop={consts:{},types:[t.String,pe,he],impl:Ot},Ie.props={consts:{},types:[t.Array(t.String),pe,he],impl:At},Ie.get={consts:{},types:[t.Predicate(t.Any),t.String,pe,t.Maybe(he)],impl:Et},Ie.gets={consts:{},types:[t.Predicate(t.Any),t.Array(t.String),pe,t.Maybe(he)],impl:Tt},Ie.value={consts:{},types:[t.String,t.StrMap(pe),t.Maybe(pe)],impl:It},Ie.singleton={consts:{},types:[t.String,pe,t.StrMap(pe)],impl:xt},Ie.insert={consts:{},types:[t.String,pe,t.StrMap(pe),t.StrMap(pe)],impl:kt},Ie.remove={consts:{},types:[t.String,t.StrMap(pe),t.StrMap(pe)],impl:Ct},Ie.keys={consts:{},types:[t.StrMap(pe),t.Array(t.String)],impl:Object.keys},Ie.values={consts:{},types:[t.StrMap(pe),t.Array(pe)],impl:Nt},Ie.pairs={consts:{},types:[t.StrMap(pe),t.Array(t.Pair(t.String)(pe))],impl:Mt},Ie.fromPairs={consts:{f:[u.Foldable]},types:[ge(t.Pair(t.String)(pe)),t.StrMap(pe)],impl:Rt},Ie.negate={consts:{},types:[t.ValidNumber,t.ValidNumber],impl:Pt},Ie.add={consts:{},types:[t.FiniteNumber,t.FiniteNumber,t.FiniteNumber],impl:jt},Ie.sum={consts:{f:[u.Foldable]},types:[ge(t.FiniteNumber),t.FiniteNumber],impl:T(jt)(0)},Ie.sub={consts:{},types:[t.FiniteNumber,t.FiniteNumber,t.FiniteNumber],impl:Ft},Ie.mult={consts:{},types:[t.FiniteNumber,t.FiniteNumber,t.FiniteNumber],impl:Dt},Ie.product={consts:{f:[u.Foldable]},types:[ge(t.FiniteNumber),t.FiniteNumber],impl:T(Dt)(1)},Ie.div={consts:{},types:[t.NonZeroFiniteNumber,t.FiniteNumber,t.FiniteNumber],impl:qt},Ie.pow={consts:{},types:[t.FiniteNumber,t.FiniteNumber,t.FiniteNumber],impl:Ut},Ie.mean={consts:{f:[u.Foldable]},types:[ge(t.FiniteNumber),t.Maybe(t.FiniteNumber)],impl:Lt},Ie.even={consts:{},types:[t.Integer,t.Boolean],impl:Ht},Ie.odd={consts:{},types:[t.Integer,t.Boolean],impl:Wt},Ie.parseDate={consts:{},types:[t.String,t.Maybe(t.ValidDate)],impl:Bt};var Ce=new RegExp("^\\s*[+-]?"+zt(["Infinity","NaN",zt(["[0-9]+","[0-9]+[.][0-9]+","[0-9]+[.]","[.][0-9]+"])+function(t){return zt(t)+"?"}(["[Ee][+-]?[0-9]+"])])+"\\s*$");Ie.parseFloat={consts:{},types:[t.String,t.Maybe(t.Number)],impl:Kt};var Ne=t.NullaryType("Radix")("")([t.Integer])(function(t){return t>=2&&t<=36});Ie.parseInt={consts:{},types:[Ne,t.String,t.Maybe(t.Integer)],impl:Vt},Ie.parseJson={consts:{},types:[t.Predicate(t.Any),t.String,t.Maybe(pe)],impl:Yt};var Me=t.RecordType({match:t.String,groups:t.Array(t.Maybe(t.String))});return Ie.regex={consts:{},types:[t.RegexFlags,t.String,t.RegExp],impl:Jt},Ie.regexEscape={consts:{},types:[t.String,t.String],impl:$t},Ie.test={consts:{},types:[t.RegExp,t.String,t.Boolean],impl:Zt},Ie.match={consts:{},types:[t.NonGlobalRegExp,t.String,t.Maybe(Me)],impl:Qt},Ie.matchAll={consts:{},types:[t.GlobalRegExp,t.String,t.Array(Me)],impl:te},Ie.toUpper={consts:{},types:[t.String,t.String],impl:p("toUpperCase")},Ie.toLower={consts:{},types:[t.String,t.String],impl:p("toLowerCase")},Ie.trim={consts:{},types:[t.String,t.String],impl:p("trim")},Ie.stripPrefix={consts:{},types:[t.String,t.String,t.Maybe(t.String)],impl:ee},Ie.stripSuffix={consts:{},types:[t.String,t.String,t.Maybe(t.String)],impl:ne},Ie.words={consts:{},types:[t.String,t.Array(t.String)],impl:re},Ie.unwords={consts:{},types:[t.Array(t.String),t.String],impl:h("join")(" ")},Ie.lines={consts:{},types:[t.String,t.Array(t.String)],impl:ie},Ie.unlines={consts:{},types:[t.Array(t.String),t.String],impl:oe},Ie.splitOn={consts:{},types:[t.String,t.String,t.Array(t.String)],impl:h("split")},Ie.splitOnRegex={consts:{},types:[t.GlobalRegExp,t.String,t.Array(t.String)],impl:ae},y({checkTypes:void 0===r||null==r||null==r.env||"production"!==r.env.NODE_ENV,env:t.env})})}).call(e,n(140))},181:function(t,e,n){(function(t){function r(t,n){var r={seen:[],stylize:o};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),d(n)?r.showHidden=n:n&&e._extend(r,n),b(r.showHidden)&&(r.showHidden=!1),b(r.depth)&&(r.depth=2),b(r.colors)&&(r.colors=!1),b(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=i),u(r,t,r.depth)}function i(t,e){var n=r.styles[e];return n?"["+r.colors[n][0]+"m"+t+"["+r.colors[n][1]+"m":t}function o(t,e){return t}function a(t){var e={};return t.forEach(function(t,n){e[t]=!0}),e}function u(t,n,r){if(t.customInspect&&n&&E(n.inspect)&&n.inspect!==e.inspect&&(!n.constructor||n.constructor.prototype!==n)){var i=n.inspect(r,t);return _(i)||(i=u(t,i,r)),i}var o=s(t,n);if(o)return o;var d=Object.keys(n),y=a(d);if(t.showHidden&&(d=Object.getOwnPropertyNames(n)),A(n)&&(d.indexOf("message")>=0||d.indexOf("description")>=0))return c(n);if(0===d.length){if(E(n)){var v=n.name?": "+n.name:"";return t.stylize("[Function"+v+"]","special")}if(w(n))return t.stylize(RegExp.prototype.toString.call(n),"regexp");if(O(n))return t.stylize(Date.prototype.toString.call(n),"date");if(A(n))return c(n)}var m="",g=!1,b=["{","}"];if(h(n)&&(g=!0,b=["[","]"]),E(n)){m=" [Function"+(n.name?": "+n.name:"")+"]"}if(w(n)&&(m=" "+RegExp.prototype.toString.call(n)),O(n)&&(m=" "+Date.prototype.toUTCString.call(n)),A(n)&&(m=" "+c(n)),0===d.length&&(!g||0==n.length))return b[0]+m+b[1];if(r<0)return w(n)?t.stylize(RegExp.prototype.toString.call(n),"regexp"):t.stylize("[Object]","special");t.seen.push(n);var S;return S=g?f(t,n,r,y,d):d.map(function(e){return l(t,n,r,y,e,g)}),t.seen.pop(),p(S,m,b)}function s(t,e){if(b(e))return t.stylize("undefined","undefined");if(_(e)){var n="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(n,"string")}return m(e)?t.stylize(""+e,"number"):d(e)?t.stylize(""+e,"boolean"):y(e)?t.stylize("null","null"):void 0}function c(t){return"["+Error.prototype.toString.call(t)+"]"}function f(t,e,n,r,i){for(var o=[],a=0,u=e.length;a<u;++a)C(e,String(a))?o.push(l(t,e,n,r,String(a),!0)):o.push("");return i.forEach(function(i){i.match(/^\d+$/)||o.push(l(t,e,n,r,i,!0))}),o}function l(t,e,n,r,i,o){var a,s,c;if(c=Object.getOwnPropertyDescriptor(e,i)||{value:e[i]},c.get?s=c.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):c.set&&(s=t.stylize("[Setter]","special")),C(r,i)||(a="["+i+"]"),s||(t.seen.indexOf(c.value)<0?(s=y(n)?u(t,c.value,null):u(t,c.value,n-1),s.indexOf("\n")>-1&&(s=o?s.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+s.split("\n").map(function(t){return"   "+t}).join("\n"))):s=t.stylize("[Circular]","special")),b(a)){if(o&&i.match(/^\d+$/))return s;a=JSON.stringify(""+i),a.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=t.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=t.stylize(a,"string"))}return a+": "+s}function p(t,e,n){var r=0;return t.reduce(function(t,e){return r++,e.indexOf("\n")>=0&&r++,t+e.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?n[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+n[1]:n[0]+e+" "+t.join(", ")+" "+n[1]}function h(t){return Array.isArray(t)}function d(t){return"boolean"==typeof t}function y(t){return null===t}function v(t){return null==t}function m(t){return"number"==typeof t}function _(t){return"string"==typeof t}function g(t){return"symbol"==typeof t}function b(t){return void 0===t}function w(t){return S(t)&&"[object RegExp]"===I(t)}function S(t){return"object"==typeof t&&null!==t}function O(t){return S(t)&&"[object Date]"===I(t)}function A(t){return S(t)&&("[object Error]"===I(t)||t instanceof Error)}function E(t){return"function"==typeof t}function T(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t}function I(t){return Object.prototype.toString.call(t)}function x(t){return t<10?"0"+t.toString(10):t.toString(10)}function k(){var t=new Date,e=[x(t.getHours()),x(t.getMinutes()),x(t.getSeconds())].join(":");return[t.getDate(),D[t.getMonth()],e].join(" ")}function C(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function N(t,e){if(!t){var n=new Error("Promise was rejected with a falsy value");n.reason=t,t=n}return e(t)}function M(e){function n(){for(var n=[],r=0;r<arguments.length;r++)n.push(arguments[r]);var i=n.pop();if("function"!=typeof i)throw new TypeError("The last argument must be of type Function");var o=this,a=function(){return i.apply(o,arguments)};e.apply(this,n).then(function(e){t.nextTick(a,null,e)},function(e){t.nextTick(N,e,a)})}if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');return Object.setPrototypeOf(n,Object.getPrototypeOf(e)),Object.defineProperties(n,R(e)),n}var R=Object.getOwnPropertyDescriptors||function(t){for(var e=Object.keys(t),n={},r=0;r<e.length;r++)n[e[r]]=Object.getOwnPropertyDescriptor(t,e[r]);return n},P=/%[sdj%]/g;e.format=function(t){if(!_(t)){for(var e=[],n=0;n<arguments.length;n++)e.push(r(arguments[n]));return e.join(" ")}for(var n=1,i=arguments,o=i.length,a=String(t).replace(P,function(t){if("%%"===t)return"%";if(n>=o)return t;switch(t){case"%s":return String(i[n++]);case"%d":return Number(i[n++]);case"%j":try{return JSON.stringify(i[n++])}catch(t){return"[Circular]"}default:return t}}),u=i[n];n<o;u=i[++n])y(u)||!S(u)?a+=" "+u:a+=" "+r(u);return a},e.deprecate=function(n,r){function i(){if(!o){if(t.throwDeprecation)throw new Error(r);t.traceDeprecation?console.trace(r):console.error(r),o=!0}return n.apply(this,arguments)}if(void 0!==t&&!0===t.noDeprecation)return n;if(void 0===t)return function(){return e.deprecate(n,r).apply(this,arguments)};var o=!1;return i};var j,F={};e.debuglog=function(n){if(b(j)&&(j=t.env.NODE_DEBUG||""),n=n.toUpperCase(),!F[n])if(new RegExp("\\b"+n+"\\b","i").test(j)){var r=t.pid;F[n]=function(){var t=e.format.apply(e,arguments);console.error("%s %d: %s",n,r,t)}}else F[n]=function(){};return F[n]},e.inspect=r,r.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},r.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},e.isArray=h,e.isBoolean=d,e.isNull=y,e.isNullOrUndefined=v,e.isNumber=m,e.isString=_,e.isSymbol=g,e.isUndefined=b,e.isRegExp=w,e.isObject=S,e.isDate=O,e.isError=A,e.isFunction=E,e.isPrimitive=T,e.isBuffer=n(1527);var D=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];e.log=function(){console.log("%s - %s",k(),e.format.apply(e,arguments))},e.inherits=n(1528),e._extend=function(t,e){if(!e||!S(e))return t;for(var n=Object.keys(e),r=n.length;r--;)t[n[r]]=e[n[r]];return t};var q="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;e.promisify=function(t){function e(){for(var e,n,r=new Promise(function(t,r){e=t,n=r}),i=[],o=0;o<arguments.length;o++)i.push(arguments[o]);i.push(function(t,r){t?n(t):e(r)});try{t.apply(this,i)}catch(t){n(t)}return r}if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');if(q&&t[q]){var e=t[q];if("function"!=typeof e)throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(e,q,{value:e,enumerable:!1,writable:!1,configurable:!0}),e}return Object.setPrototypeOf(e,Object.getPrototypeOf(t)),q&&Object.defineProperty(e,q,{value:e,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(e,R(t))},e.promisify.custom=q,e.callbackify=M}).call(e,n(140))},182:function(t,e,n){var r,i;!function(o){"use strict";var a={inspect:{}};"object"==typeof t&&"object"==typeof t.exports?t.exports=o(n(181),n(51),n(52)):null!=n(77)?(r=[n(51),n(52)],void 0!==(i=function(t,e){return o(a,t,e)}.apply(e,r))&&(t.exports=i)):self.sanctuaryEither=o(a,self.sanctuaryShow,self.sanctuaryTypeClasses)}(function(t,e,n){"use strict";function r(t){return{tag:r,value:t}}function i(t){return{tag:i,value:t}}function o(){return"Left ("+e(this.value)+")"}function a(){return"Right ("+e(this.value)+")"}function u(t){return t.isLeft&&n.equals(this.value,t.value)}function s(t){return t.isRight&&n.equals(this.value,t.value)}function c(t){return t.isRight||n.lte(this.value,t.value)}function f(t){return t.isRight&&n.lte(this.value,t.value)}function l(t){return t.isLeft?P(n.concat(this.value,t.value)):t}function p(t){return t.isRight?j(n.concat(this.value,t.value)):this}function h(t){return this}function d(t){return j(t(this.value))}function y(t,e){return P(t(this.value))}function v(t,e){return j(e(this.value))}function m(t){return t.isLeft?t:this}function _(t){return t.isLeft?t:j(t.value(this.value))}function g(t){return this}function b(t){return t(this.value)}function w(t){return t}function S(t){return this}function O(t,e){return e}function A(t,e){return t(e,this.value)}function E(t,e){return n.of(t,this)}function T(t,e){return n.map(j,e(this.value))}function I(t){return this}function x(t){return j(t(this))}if("undefined"!=typeof __doctest){var k=__doctest.require("sanctuary");__doctest.require("sanctuary-def"),__doctest.require("sanctuary-type-identifiers");k.bimap=k.unchecked.bimap,k.of=k.unchecked.of}var C={},N={constructor:C,isLeft:!0,isRight:!1,"@@type":"sanctuary-either/Either@1","@@show":o,"fantasy-land/map":h,"fantasy-land/bimap":y,"fantasy-land/ap":m,"fantasy-land/chain":g,"fantasy-land/alt":w,"fantasy-land/reduce":O,"fantasy-land/traverse":E,"fantasy-land/extend":I},M={constructor:C,isLeft:!1,isRight:!0,"@@type":"sanctuary-either/Either@1","@@show":a,"fantasy-land/map":d,"fantasy-land/bimap":v,"fantasy-land/ap":_,"fantasy-land/chain":b,"fantasy-land/alt":S,"fantasy-land/reduce":A,"fantasy-land/traverse":T,"fantasy-land/extend":x},R=t.inspect.custom;"symbol"==typeof R?(N[R]=o,M[R]=a):(N.inspect=o,M.inspect=a);var P=C.Left=function(t){var e=Object.create(N);return n.Setoid.test(t)&&(e["fantasy-land/equals"]=u,n.Ord.test(t)&&(e["fantasy-land/lte"]=c)),n.Semigroup.test(t)&&(e["fantasy-land/concat"]=l),e.value=t,e},j=C.Right=function(t){var e=Object.create(M);return n.Setoid.test(t)&&(e["fantasy-land/equals"]=s,n.Ord.test(t)&&(e["fantasy-land/lte"]=f)),n.Semigroup.test(t)&&(e["fantasy-land/concat"]=p),e.value=t,e};return C["fantasy-land/of"]=j,C["fantasy-land/chainRec"]=function(t,e){for(var n=r(e);n.tag===r;){var o=t(r,i,n.value);if(o.isLeft)return o;n=o.value}return j(n.value)},C})},285:function(t,e,n){"use strict";function r(t,e){return{x:(t-e)*o.tileWidth+o.centerX,y:(t+e)*o.tileHeight+o.centerY}}function i(t,e,n){var r=(e-n)*o.tileWidth,i=(e+n)*o.tileHeight/2;return{x:r+(t?350:900),y:i+(t?50:350)}}Object.defineProperty(e,"__esModule",{value:!0}),e.cartesianToIsometric=r,e.cartesianToIsometricBattle=i;var o=n(129)},286:function(t,e){function n(t,e,n){this.x=t,this.y=e,this.walkable=void 0===n||n}t.exports=n},287:function(t,e,n){function r(t){t=t||{},this.allowDiagonal=t.allowDiagonal,this.dontCrossCorners=t.dontCrossCorners,this.heuristic=t.heuristic||a.manhattan,this.weight=t.weight||1,this.diagonalMovement=t.diagonalMovement,this.diagonalMovement||(this.allowDiagonal?this.dontCrossCorners?this.diagonalMovement=u.OnlyWhenNoObstacles:this.diagonalMovement=u.IfAtMostOneObstacle:this.diagonalMovement=u.Never),this.diagonalMovement===u.Never?this.heuristic=t.heuristic||a.manhattan:this.heuristic=t.heuristic||a.octile}var i=n(178),o=n(89),a=n(131),u=n(33);r.prototype.findPath=function(t,e,n,r,a){var u,s,c,f,l,p,h,d,y=new i(function(t,e){return t.f-e.f}),v=a.getNodeAt(t,e),m=a.getNodeAt(n,r),_=this.heuristic,g=this.diagonalMovement,b=this.weight,w=Math.abs,S=Math.SQRT2;for(v.g=0,v.f=0,y.push(v),v.opened=!0;!y.empty();){if(u=y.pop(),u.closed=!0,u===m)return o.backtrace(m);for(s=a.getNeighbors(u,g),f=0,l=s.length;f<l;++f)c=s[f],c.closed||(p=c.x,h=c.y,d=u.g+(p-u.x==0||h-u.y==0?1:S),(!c.opened||d<c.g)&&(c.g=d,c.h=c.h||b*_(w(p-n),w(h-r)),c.f=c.g+c.h,c.parent=u,c.opened?y.updateItem(c):(y.push(c),c.opened=!0)))}return[]},t.exports=r},288:function(t,e,n){function r(t){t=t||{},this.allowDiagonal=t.allowDiagonal,this.dontCrossCorners=t.dontCrossCorners,this.diagonalMovement=t.diagonalMovement,this.heuristic=t.heuristic||a.manhattan,this.weight=t.weight||1,this.diagonalMovement||(this.allowDiagonal?this.dontCrossCorners?this.diagonalMovement=u.OnlyWhenNoObstacles:this.diagonalMovement=u.IfAtMostOneObstacle:this.diagonalMovement=u.Never),this.diagonalMovement===u.Never?this.heuristic=t.heuristic||a.manhattan:this.heuristic=t.heuristic||a.octile}var i=n(178),o=n(89),a=n(131),u=n(33);r.prototype.findPath=function(t,e,n,r,a){var u,s,c,f,l,p,h,d,y=function(t,e){return t.f-e.f},v=new i(y),m=new i(y),_=a.getNodeAt(t,e),g=a.getNodeAt(n,r),b=this.heuristic,w=this.diagonalMovement,S=this.weight,O=Math.abs,A=Math.SQRT2;for(_.g=0,_.f=0,v.push(_),_.opened=1,g.g=0,g.f=0,m.push(g),g.opened=2;!v.empty()&&!m.empty();){for(u=v.pop(),u.closed=!0,s=a.getNeighbors(u,w),f=0,l=s.length;f<l;++f)if(c=s[f],!c.closed){if(2===c.opened)return o.biBacktrace(u,c);p=c.x,h=c.y,d=u.g+(p-u.x==0||h-u.y==0?1:A),(!c.opened||d<c.g)&&(c.g=d,c.h=c.h||S*b(O(p-n),O(h-r)),c.f=c.g+c.h,c.parent=u,c.opened?v.updateItem(c):(v.push(c),c.opened=1))}for(u=m.pop(),u.closed=!0,s=a.getNeighbors(u,w),f=0,l=s.length;f<l;++f)if(c=s[f],!c.closed){if(1===c.opened)return o.biBacktrace(c,u);p=c.x,h=c.y,d=u.g+(p-u.x==0||h-u.y==0?1:A),(!c.opened||d<c.g)&&(c.g=d,c.h=c.h||S*b(O(p-t),O(h-e)),c.f=c.g+c.h,c.parent=u,c.opened?m.updateItem(c):(m.push(c),c.opened=2))}}return[]},t.exports=r},33:function(t,e){var n={Always:1,Never:2,IfAtMostOneObstacle:3,OnlyWhenNoObstacles:4};t.exports=n},40:function(t,e,n){"use strict";function r(t,e,n,r){var i,o,a={leader:n.leader,x:t,y:e,id:n.id},u=Object.values(r).find(function(n){return n.x===t&&n.y===e});if(u){var c=s(s({},u),{x:n.x,y:n.y});return{members:s(s({},r),(i={},i[n.id]=a,i[u.id]=c,i)),updatedUnits:[{id:n.id,x:t,y:e},{id:u.id,x:n.x,y:n.y}]}}return{members:s(s({},r),(o={},o[n.id]=a,o)),updatedUnits:[{id:n.id,x:t,y:e}]}}Object.defineProperty(e,"__esModule",{value:!0}),e.equipItem=e.createSquad=e.removeUnitFromSquad=e.changeSquadMemberPosition=e.addUnitToSquad=e.unitsWithoutSquad=e.disbandSquad=e.saveSquadUnit=e.saveUnit=e.saveSquad=e.saveItems=e.saveUnits=e.saveSquads=e.getUnit=e.getItemTypes=e.getItemList=e.getItem=e.getItems=e.getUnits=e.getSquadLeader=e.getSquadMember=e.getSquadMembers=e.getSquad=e.getSquads=void 0;var i=n(1484),o=n(572),a=n(175),u=n(76),s=function(){return s=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},s.apply(this,arguments)},c=function(t){return JSON.parse(localStorage.getItem(t)||"{}")},f=function(t,e){return localStorage.setItem(t,JSON.stringify(e))},l=function(){return c("squads")};e.getSquads=l;var p=function(t){var e=Object.values(l()).find(function(e){return e.id===t});if(!e)throw new Error(u.INVALID_STATE);return e};e.getSquad=p;var h=function(t){var e=p(t);return Object.values(e.members).map(function(t){return w(t.id)}).filter(function(t){return t})};e.getSquadMembers=h;var d=function(t){var e=w(t);if(!e||!e.squad)throw new Error(u.INVALID_STATE);var n=p(e.squad);return Object.values(n.members).find(function(e){return e.id===t})};e.getSquadMember=d;var y=function(t){var e=h(t),n=e.find(function(e){return e.id===t});if(!n)throw new Error(u.INVALID_STATE);return n};e.getSquadLeader=y;var v=function(){return c("units")};e.getUnits=v;var m=function(){return c("items")};e.getItems=m;var _=function(t){var e=m()[t];if(!e)throw new Error(u.INVALID_STATE);return e};e.getItem=_;var g=function(){return Object.values(m())};e.getItemList=g;var b=function(){return o.itemTypeSlots};e.getItemTypes=b;var w=function(t){var e=v()[t];if(!e)throw new Error(u.INVALID_STATE);return e};e.getUnit=w;var S=function(t){return f("squads",t)};e.saveSquads=S;var O=function(t){return f("units",t)};e.saveUnits=O;var A=function(t){return f("items",t)};e.saveItems=A;var E=function(t){var e,n=l();S(s(s({},n),(e={},e[t.id]=t,e)))};e.saveSquad=E;var T=function(t){var e,n=v();O(s(s({},n),(e={},e[t.id]=t,e)))};e.saveUnit=T;var I=function(t){var e,n,r,i=t.squadId,o=t.unitId,a=t.x,u=t.y;console.log("save squad unit",i,o,a,u);var c=l(),f=c[i];S(s(s({},c),(e={},e[i]=s(s({},f),{members:s(s({},f.members),(n={},n[o]={id:o,x:a,y:u,leader:!0===(null===(r=f.members[o])||void 0===r?void 0:r.leader)},n))}),e)))};e.saveSquadUnit=I;var x=function(t){var e=l(),n=e[t];Object.values(n.members).forEach(function(t){return M(t.id,n)});var r=(0,a.removeIdFromMap)(t,e);S(r)};e.disbandSquad=x;var k=function(){return(0,i.unitsWithoutSquadSelector)(v())};e.unitsWithoutSquad=k;var C=function(t,e,n,r){var i,o=e.members,a={leader:0===Object.keys(o).length,x:n,y:r,id:t.id};console.log("NEW ENTRY",a);var c=Object.values(o).find(function(t){return t.x===n&&t.y===r});if(c){console.log("REMOVE EXISTING");var f=Object.values(o).filter(function(t){return t.id!==c.id}),l=f.concat([a]).reduce(function(t,e){var n;return s(s({},t),(n={},n[e.id]=e,n))},{}),p=s(s({},e),{members:l}),h=w(c.id);if(!h)throw new Error(u.INVALID_STATE);return T(s(s({},h),{squad:null})),T(s(s({},t),{squad:e.id})),E(p),p}var l=s(s({},o),(i={},i[t.id]=a,i)),p=s(s({},e),{members:l,name:a.leader?t.name:e.name});return T(s(s({},t),{squad:e.id})),E(p),p};e.addUnitToSquad=C;var N=function(t,e,n,i){console.log("change position",t,e,n,i);var o=e.members,a=r(n,i,t,o);console.log("ujpdated board",a);var u=s(s({},e),{members:a.members});return console.log("will save updatedSquad",u),E(u),console.log("will return",a),a};e.changeSquadMemberPosition=N;var M=function(t,e){var n=w(t);if(!n)throw new Error("ERROR: tried to save unit with invalid ID");var r=s(s({},n),{squad:null}),i=e.members,o=(0,a.removeIdFromMap)(t,i),u=s(s({},e),{members:o});T(r),E(u)};e.removeUnitFromSquad=M;var R=function(t){var e,n,r=l(),i=r.length.toString(),o={id:i,name:t.name,emblem:"Emoji",members:(e={},e[t.id]={id:t.id,leader:!0,x:2,y:2},e)},a=s(s({},r),(n={},n[i]=o,n)),u=s(s({},t),{squad:i}),c=function(t){S(a),T(u);var e=v();console.log(e,a),t({units:e,squads:a})};return new Promise(c)};e.createSquad=R;var P=function(t,e){var n,r=w(e),i=_(t);if(!r)throw new Error("An invalid unit id was supplied to equipItem");if(!i)throw new Error("An invalid item id was supplied to equipItem");var o=b()[i.type],a=s(s({},r),{equips:s(s({},r.equips),(n={},n[o]=i.id,n))});T(a)};e.equipItem=P},51:function(t,e,n){var r,i,o;!function(a){"use strict";"object"==typeof t&&"object"==typeof t.exports?t.exports=a():null!=n(77)?(i=[],r=a,void 0!==(o="function"==typeof r?r.apply(e,i):r)&&(t.exports=o)):self.sanctuaryShow=a()}(function(){"use strict";function t(t){return function(e){return n(e)+": "+n(t[e])}}function e(t){return Object.keys(t).sort()}function n(o){if(i.indexOf(o)>=0)return"<Circular>";switch(Object.prototype.toString.call(o)){case"[object Boolean]":return"object"==typeof o?"new Boolean ("+n(o.valueOf())+")":o.toString();case"[object Number]":return"object"==typeof o?"new Number ("+n(o.valueOf())+")":1/o==-1/0?"-0":o.toString(10);case"[object String]":return"object"==typeof o?"new String ("+n(o.valueOf())+")":JSON.stringify(o);case"[object Date]":return"new Date ("+n(isNaN(o.valueOf())?NaN:o.toISOString())+")";case"[object Error]":return"new "+o.name+" ("+n(o.message)+")";case"[object Arguments]":return"function () { return arguments; } ("+Array.prototype.map.call(o,n).join(", ")+")";case"[object Array]":i.push(o);try{return"["+o.map(n).concat(e(o).filter(function(t){return!/^\d+$/.test(t)}).map(t(o))).join(", ")+"]"}finally{i.pop()}case"[object Object]":i.push(o);try{return r in o&&(null==o.constructor||o.constructor.prototype!==o)?o[r]():"{"+e(o).map(t(o)).join(", ")+"}"}finally{i.pop()}case"[object Set]":i.push(o);try{return"new Set ("+n(Array.from(o.values()))+")"}finally{i.pop()}case"[object Map]":i.push(o);try{return"new Map ("+n(Array.from(o.entries()))+")"}finally{i.pop()}default:return String(o)}}var r="@@show",i=[];return n})},52:function(t,e,n){var r,i,o;!function(a){"use strict";"object"==typeof t&&"object"==typeof t.exports?t.exports=a(n(104)):null!=n(77)?(i=[n(104)],r=a,void 0!==(o="function"==typeof r?r.apply(e,i):r)&&(t.exports=o)):self.sanctuaryTypeClasses=a(self.sanctuaryTypeIdentifiers)}(function(t){"use strict";function e(t){return function(e){return t.concat(e)}}function n(t){return function(e){return t}}function r(t,e){Object.keys(t).forEach(e,t)}function i(t,e){return Object.prototype.hasOwnProperty.call(e,t)}function o(t){return t}function a(t){return function(e){return[t,e]}}function u(e,n){return typeof e==typeof n&&t(e)===t(n)}function s(t){return Object.keys(t).sort()}function c(t){return function(e){return e(t)}}function f(t){return function(e){return t(e)}}function l(t){return{value:t,done:!1}}function p(t){return{value:t,done:!0}}function h(t,e,n,r){if(!(this instanceof h))return new h(t,e,n,r);this.name=t,this.url=e,this.test=function(t){return n.every(function(e){return e.test(t)})&&r(t)}}function d(t,e,n){for(var r=n,o=0;o<e.length;o+=1){var a=e[o];if(null==r||!t&&!i(a,r))return null;r=r[a]}return"function"==typeof r?r:null}function y(t,e){return d(!0,t,e)}function v(t){return d(!1,t,We)}function m(e,n,r){function i(e){var n="fantasy-land/"+e;return r[e]===he?function(t){var e=y([n],t);return null==e&&"function"==typeof t?v([ye(t),n]):e}:function(e){var r=null!=e&&null!=e.constructor&&e.constructor.prototype===e,i=null;return r||(i=y([n],e)),null==i&&(i=v([t(e),"prototype",n])),i&&i.bind(e)}}var o=Object.keys(r),a=h("sanctuary-type-classes/"+e,"https://github.com/sanctuary-js/sanctuary-type-classes/tree/v12.1.0#"+e,n,function(t){return o.every(function(e){var n=r[e]===he?t.constructor:t;return null!=i(e)(n)})});return a.methods=o.reduce(function(t,e){return t[e]=i(e),t},{}),a}function _(t){return!0}function g(t){return!0}function b(t){return!0}function w(t){return!0}function S(t){return"object"==typeof this?Be(this.valueOf(),t.valueOf()):this===t}function O(t){return"object"==typeof this?ze(this.valueOf(),t.valueOf()):!1===this||!0===t}function A(t){return"object"==typeof this?Be(this.valueOf(),t.valueOf()):isNaN(this)&&isNaN(t)||this===t}function E(t){return"object"==typeof this?ze(this.valueOf(),t.valueOf()):isNaN(this)||this<=t}function T(t){return Be(this.valueOf(),t.valueOf())}function I(t){return ze(this.valueOf(),t.valueOf())}function x(t){return t.source===this.source&&t.global===this.global&&t.ignoreCase===this.ignoreCase&&t.multiline===this.multiline&&t.sticky===this.sticky&&t.unicode===this.unicode}function k(){return""}function C(t){return"object"==typeof this?Be(this.valueOf(),t.valueOf()):this===t}function N(t){return"object"==typeof this?ze(this.valueOf(),t.valueOf()):this<=t}function M(t){return this+t}function R(){return[]}function P(t){return[t]}function j(t,e){for(var n=[],r={},i={head:e,tail:r};i!==r;){for(var o=r,a=t(l,p,i.head),u=0;u<a.length;u+=1){var s=a[u];s.done?n.push(s.value):o={head:s.value,tail:o}}for(i=i.tail;o!==r;)i={head:o.head,tail:i},o=o.tail}return n}function F(){return[]}function D(t){if(t.length!==this.length)return!1;for(var e=0;e<this.length;e+=1)if(!Be(this[e],t[e]))return!1;return!0}function q(t){for(var e=0;!0;e+=1){if(e===this.length)return!0;if(e===t.length)return!1;if(!Be(this[e],t[e]))return ze(this[e],t[e])}}function U(t){return this.concat(t)}function L(t){return this.filter(function(e){return t(e)})}function H(t){return this.map(function(e){return t(e)})}function W(t){for(var e=[],n=0;n<t.length;n+=1)for(var r=0;r<this.length;r+=1)e.push(t[n](this[r]));return e}function B(t){for(var e=[],n=0;n<this.length;n+=1)for(var r=0,i=t(this[n]);r<i.length;r+=1)e.push(i[r]);return e}function z(t,e){for(var n=e,r=0;r<this.length;r+=1)n=t(n,this[r]);return n}function K(t,n){function r(o,u){switch(u){case 0:return Lt(t,[]);case 2:return Ft(a,n(i[o]),n(i[o+1]));default:var s=2*Math.floor(u/4);return Ft(e,r(o,s),r(o+s,u-s))}}var i=this;return this.length%2==1?Ft(e,Ct(P,n(this[0])),r(1,this.length-1)):r(0,this.length)}function V(t){return this.map(function(e,n,r){return t(r.slice(n))})}function Y(t){return D.call(this,t)}function G(t){return q.call(this,t)}function X(t){return Be(this.name,t.name)&&Be(this.message,t.message)}function J(){return{}}function $(){return{}}function Z(t){var e=this,n=s(this);return Be(n,s(t))&&n.every(function(n){return Be(e[n],t[n])})}function Q(t){for(var e=s(this),n=s(t);;){if(0===e.length)return!0;if(0===n.length)return!1;var r=e.shift(),i=n.shift();if(r<i)return!0;if(r>i)return!1;if(!Be(this[r],t[r]))return ze(this[r],t[r])}}function tt(t){function e(t){n[t]=this[t]}var n={};return r(this,e),r(t,e),n}function et(t){var e={};return r(this,function(n){t(this[n])&&(e[n]=this[n])}),e}function nt(t){var e={};return r(this,function(n){e[n]=t(this[n])}),e}function rt(t){var e={};return r(this,function(n){i(n,t)&&(e[n]=t[n](this[n]))}),e}function it(t,e){function n(e,n){return t(e,r[n])}var r=this;return s(this).reduce(n,e)}function ot(t,e){var n=this;return Object.keys(this).reduce(function(t,r){function i(t){return function(e){var n={};return n[r]=e,tt.call(t,n)}}return Ft(i,t,e(n[r]))},Lt(t,{}))}function at(){return o}function ut(t){return function(e){return t}}function st(t,e){return function(n){for(var r=l(e);!r.done;)r=t(l,p,r.value)(n);return r.value}}function ct(t){return t===this}function ft(t){var e=this;return function(n){return t(e(n))}}function lt(t){var e=this;return function(n){return t(e(n))}}function pt(t,e){var n=this;return function(r){return e(n(t(r)))}}function ht(t){var e=this;return function(n){return t(n)(e(n))}}function dt(t){var e=this;return function(n){return t(e(n))(n)}}function yt(t){var e=this;return function(n){return t(function(t){return e(Et(n,t))})}}function vt(t){var e=this;return function(n){return e(t(n))}}function mt(t,e){return u(t,e)&&!ze(e,t)}function _t(t,e){return mt(e,t)}function gt(t,e){return ze(e,t)}function bt(t,e){return ze(t,e)?t:e}function wt(t,e){return ze(t,e)?e:t}function St(t,e,n){return wt(t,bt(e,n))}function Ot(t,e){return _e.methods.compose(e)(t)}function At(t){return ge.methods.id(t)()}function Et(t,e){return be.methods.concat(t)(e)}function Tt(t){return we.methods.empty(t)()}function It(t){return Se.methods.invert(t)()}function xt(t,e){return Oe.methods.filter(e)(t)}function kt(t,e){return xt(function(e){return!t(e)},e)}function Ct(t,e){return Ae.methods.map(e)(t)}function Nt(t,e){return Ae.methods.map(t)(c(e))}function Mt(t,e,n){return Ee.methods.bimap(n)(t,e)}function Rt(t,e){return Mt(t,o,e)}function Pt(t,e,n){return Te.methods.promap(n)(t,e)}function jt(t,e){return Ie.methods.ap(e)(t)}function Ft(t,e,n){return jt(Ct(t,e),n)}function Dt(t,e,n,r){return jt(jt(Ct(t,e),n),r)}function qt(t,e){return Ft(n,t,e)}function Ut(t,e){return Ft(n(o),t,e)}function Lt(t,e){return xe.methods.of(t)(e)}function Ht(t,e){return Et(e,Lt(e.constructor,t))}function Wt(t,e){return Et(Lt(e.constructor,t),e)}function Bt(t,e){return ke.methods.chain(e)(t)}function zt(t){return Bt(o,t)}function Kt(t,e,n){return Ce.methods.chainRec(t)(e,n)}function Vt(t,e){return Me.methods.alt(t)(e)}function Yt(t){return Re.methods.zero(t)()}function Gt(t,e,n){return je.methods.reduce(n)(t,e)}function Xt(t){return Array.isArray(t)?t.length:Gt(function(t,e){return t+1},0,t)}function Jt(t,e){return Array.isArray(e)?e.every(f(t)):Gt(function(e,n){return e&&t(n)},!0,e)}function $t(t,e){return Array.isArray(e)?e.some(f(t)):Gt(function(e,n){return e||t(n)},!1,e)}function Zt(t,e){return!$t(t,e)}function Qt(t,e){return $t(function(e){return Be(t,e)},e)}function te(t,e){return Gt(function(e,n){return{empty:!1,value:Et(e.value,e.empty?n:Et(t,n))}},{empty:!0,value:Tt(t.constructor)},e).value}function ee(t,e,n){return Gt(function(t,n){return Et(t,e(n))},Tt(t),n)}function ne(t){if(Array.isArray(t))return t.slice().reverse();var e=t.constructor;return Gt(function(t,n){return Et(Lt(e,n),t)},Tt(e),t)}function re(t){return ie(o,t)}function ie(t,e){var n=Gt(function(e,n){return e.push({idx:e.length,x:n,fx:t(n)}),e},[],e),r=function(t){switch(typeof(t&&t.fx)){case"number":return function(t,e){return t<=e||t!==t};case"string":return function(t,e){return t<=e};default:return ze}}(n[0]);if(n.sort(function(t,e){return r(t.fx,e.fx)?r(e.fx,t.fx)?t.idx-e.idx:-1:1}),Array.isArray(e)){for(var i=0;i<n.length;i+=1)n[i]=n[i].x;return n}var o=e.constructor,a=Tt(o);for(i=0;i<n.length;i+=1)a=Et(a,Lt(o,n[i].x));return a}function oe(t,e,n){return Fe.methods.traverse(n)(t,e)}function ae(t,e){return oe(t,o,e)}function ue(t,e){return De.methods.extend(e)(t)}function se(t){return ue(o,t)}function ce(t){return qe.methods.extract(t)()}function fe(t,e){return Ue.methods.contramap(e)(t)}if("undefined"!=typeof __doctest){var le=(__doctest.require("sanctuary-identity"),__doctest.require("./test/List")),pe=__doctest.require("sanctuary-maybe");__doctest.require("sanctuary-pair"),__doctest.require("./test/Sum"),le.Nil,le.Cons,pe.Nothing,pe.Just}h.prototype["@@type"]="sanctuary-type-classes/TypeClass@1";var he="Constructor",de="Value",ye=i("name",function(){})?function(t){return t.name}:function(t){var e=/function (\w*)/.exec(t);return null==e?"":e[1]},ve=m("Setoid",[],{equals:de}),me=m("Ord",[ve],{lte:de}),_e=m("Semigroupoid",[],{compose:de}),ge=m("Category",[_e],{id:he}),be=m("Semigroup",[],{concat:de}),we=m("Monoid",[be],{empty:he}),Se=m("Group",[we],{invert:de}),Oe=m("Filterable",[],{filter:de}),Ae=m("Functor",[],{map:de}),Ee=m("Bifunctor",[Ae],{bimap:de}),Te=m("Profunctor",[Ae],{promap:de}),Ie=m("Apply",[Ae],{ap:de}),xe=m("Applicative",[Ie],{of:he}),ke=m("Chain",[Ie],{chain:de}),Ce=m("ChainRec",[ke],{chainRec:he}),Ne=m("Monad",[xe,ke],{}),Me=m("Alt",[Ae],{alt:de}),Re=m("Plus",[Me],{zero:he}),Pe=m("Alternative",[xe,Re],{}),je=m("Foldable",[],{reduce:de}),Fe=m("Traversable",[Ae,je],{traverse:de}),De=m("Extend",[Ae],{extend:de}),qe=m("Comonad",[De],{extract:de}),Ue=m("Contravariant",[],{contramap:de}),Le=U,He=tt,We={Null:{prototype:{"fantasy-land/equals":_,"fantasy-land/lte":g}},Undefined:{prototype:{"fantasy-land/equals":b,"fantasy-land/lte":w}},Boolean:{prototype:{"fantasy-land/equals":S,"fantasy-land/lte":O}},Number:{prototype:{"fantasy-land/equals":A,"fantasy-land/lte":E}},Date:{prototype:{"fantasy-land/equals":T,"fantasy-land/lte":I}},RegExp:{prototype:{"fantasy-land/equals":x}},String:{"fantasy-land/empty":k,prototype:{"fantasy-land/equals":C,"fantasy-land/lte":N,"fantasy-land/concat":M}},Array:{"fantasy-land/empty":R,"fantasy-land/of":P,"fantasy-land/chainRec":j,"fantasy-land/zero":F,prototype:{"fantasy-land/equals":D,"fantasy-land/lte":q,"fantasy-land/concat":U,"fantasy-land/filter":L,"fantasy-land/map":H,"fantasy-land/ap":W,"fantasy-land/chain":B,"fantasy-land/alt":Le,"fantasy-land/reduce":z,"fantasy-land/traverse":K,"fantasy-land/extend":V}},Arguments:{prototype:{"fantasy-land/equals":Y,"fantasy-land/lte":G}},Error:{prototype:{"fantasy-land/equals":X}},Object:{"fantasy-land/empty":J,"fantasy-land/zero":$,prototype:{"fantasy-land/equals":Z,"fantasy-land/lte":Q,"fantasy-land/concat":tt,"fantasy-land/filter":et,"fantasy-land/map":nt,"fantasy-land/ap":rt,"fantasy-land/alt":He,"fantasy-land/reduce":it,"fantasy-land/traverse":ot}},Function:{"fantasy-land/id":at,"fantasy-land/of":ut,"fantasy-land/chainRec":st,prototype:{"fantasy-land/equals":ct,"fantasy-land/compose":ft,"fantasy-land/map":lt,"fantasy-land/promap":pt,"fantasy-land/ap":ht,"fantasy-land/chain":dt,"fantasy-land/extend":yt,"fantasy-land/contramap":vt}}},Be=function(){var t=[];return function(e,n){if(!u(e,n))return!1;if(t.some(function(t){return t[0]===e&&t[1]===n}))return!0;t.push([e,n]);try{return ve.test(e)&&ve.test(n)&&ve.methods.equals(e)(n)}finally{t.pop()}}}(),ze=function(){var t=[];return function(e,n){if(!u(e,n))return!1;if(t.some(function(t){return t[0]===e&&t[1]===n}))return Be(e,n);t.push([e,n]);try{return me.test(e)&&me.test(n)&&me.methods.lte(e)(n)}finally{t.pop()}}}();return{TypeClass:h,Setoid:ve,Ord:me,Semigroupoid:_e,Category:ge,Semigroup:be,Monoid:we,Group:Se,Filterable:Oe,Functor:Ae,Bifunctor:Ee,Profunctor:Te,Apply:Ie,Applicative:xe,Chain:ke,ChainRec:Ce,Monad:Ne,Alt:Me,Plus:Re,Alternative:Pe,Foldable:je,Traversable:Fe,Extend:De,Comonad:qe,Contravariant:Ue,equals:Be,lt:mt,lte:ze,gt:_t,gte:gt,min:bt,max:wt,clamp:St,compose:Ot,id:At,concat:Et,empty:Tt,invert:It,filter:xt,reject:kt,map:Ct,flip:Nt,bimap:Mt,mapLeft:Rt,promap:Pt,ap:jt,lift2:Ft,lift3:Dt,apFirst:qt,apSecond:Ut,of:Lt,append:Ht,prepend:Wt,chain:Bt,join:zt,chainRec:Kt,alt:Vt,zero:Yt,reduce:Gt,size:Xt,all:Jt,any:$t,none:Zt,elem:Qt,intercalate:te,foldMap:ee,reverse:ne,sort:re,sortBy:ie,traverse:oe,sequence:ae,extend:ue,duplicate:se,extract:ce,contramap:fe}})},572:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.itemTypeSlots=e.modifiers=void 0;var r={str:0,agi:0,dex:0,vit:0,int:0,wis:0,atk:0,def:0,m_atk:0,m_def:0,res_fire:0,res_water:0,res_earth:0,res_wind:0,res_light:0,res_shadow:0};e.modifiers=r;var i={accessory:"ornament",sword:"mainHand",axe:"mainHand",robe:"chest",light_armor:"chest",shield:"offHand",staff:"mainHand"};e.itemTypeSlots=i},573:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.initialMapState=e.tileMap=e.CPU_FORCE=e.PLAYER_FORCE=void 0;var r,i;e.PLAYER_FORCE="PLAYER_FORCE";e.CPU_FORCE="CPU_FORCE";var o={0:"grass",1:"woods",2:"mountain"};e.tileMap=o;var a={cells:[[0,1,0,0,0,0,0,0,2,2,2,2,2,2,2,2,2,2,2,2],[0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,1,0,0,0,0,0,2,2,2,0,0,2,2,0,0,2,2,0,0],[0,0,0,0,0,0,0,2,1,2,0,0,1,2,0,0,1,2,0,0],[0,1,0,0,0,0,0,2,2,2,0,0,2,2,0,0,2,2,0,0],[1,1,1,1,1,0,0,0,0,0,0,1,0,0,0,1,0,0,0,1],[0,1,0,0,0,0,0,0,2,2,2,2,2,2,2,2,2,2,2,2],[0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,1,0,0,0,0,0,2,2,2,0,0,2,2,0,0,2,2,0,0],[0,0,0,0,0,0,0,2,1,2,0,0,1,2,0,0,1,2,0,0]],units:[{id:"0",pos:{x:0,y:0},range:5,status:"alive",validSteps:[],enemiesInRange:[],force:"PLAYER_FORCE"},{id:"1",pos:{x:3,y:2},range:5,validSteps:[],enemiesInRange:[],status:"alive",force:"PLAYER_FORCE"},{id:"2",pos:{x:15,y:3},range:5,validSteps:[],enemiesInRange:[],status:"alive",force:"CPU_FORCE"},{id:"3",pos:{x:13,y:1},range:5,validSteps:[],enemiesInRange:[],status:"alive",force:"CPU_FORCE"}],forces:[{id:"PLAYER_FORCE",name:"Player",units:["0","1"],relations:(r={},r.CPU_FORCE="hostile",r)},{id:"CPU_FORCE",name:"CPU",units:["2","3"],relations:(i={},i.CPU_FORCE="hostile",i)}],cities:[{id:"castle1",name:"Izabel",x:5,y:2,force:"PLAYER_FORCE",type:"castle"},{id:"castle2",name:"Madamaxe",x:10,y:4,force:"CPU_FORCE",type:"castle"},{id:"c1",name:"Arabella",x:0,y:1,force:"PLAYER_FORCE",type:"town"},{id:"c2",name:"Marqueze",x:10,y:1,force:"CPU_FORCE",type:"town"},{id:"c3",name:"Bauhaus",x:9,y:5,force:"CPU_FORCE",type:"town"},{id:"c4",name:"Vila Rica",x:6,y:4,force:"CPU_FORCE",type:"town"}]};e.initialMapState=a},574:function(t,e,n){"use strict";function r(t,e){return t+e}Object.defineProperty(e,"__esModule",{value:!0}),e.sum=r,e.random=void 0;var i=function(t,e){return Math.floor(Math.random()*(e-t+1)+t)};e.random=i},575:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=function(t){return function(e,n,r){return t.tweens.add({targets:e,y:e?e.y+n:0,yoyo:!0,duration:r,repeat:-1})}};e.default=r},576:function(t,e,n){(function(r){var i,o;!function(r){"use strict";var a={inspect:{}};"object"==typeof t&&"object"==typeof t.exports?t.exports=r(n(181),n(182),n(51),n(52),n(104)):null!=n(77)?(i=[n(182),n(51),n(52),n(104)],void 0!==(o=function(t,e,n,i){return r(a,t,e,n,i)}.apply(e,i))&&(t.exports=o)):self.sanctuaryDef=r(a,self.sanctuaryEither,self.sanctuaryShow,self.sanctuaryTypeClasses,self.sanctuaryTypeIdentifiers)}(function(t,e,n,i,o){"use strict";function a(t){return function(e){return function(n){return t(e(n))}}}function u(t){return t}function s(t){return function(e){return t}}function c(t){return function(){return t}}function f(t){return function(e,n){return t}}function l(t){return function(e){return!t(e)}}function p(t){return function(e){return i.filter(t,e)}}function h(t){return t.slice(0,-1)}function d(t){return 0===i.size(t)}function y(t){return function(e){if(t.length>e.length)return!1;for(var n=0;n<t.length;n+=1)if(t[n]!==e[n])return!1;return!0}}function v(t,e){return e.join(t)}function m(t){return t[t.length-1]}function _(t){return function(e){return t.some(function(t){return i.equals(t,e)})}}function g(t,e){return d(t)?e:t}function b(t){return function(e){return e[t]}}function w(t){return function(e){return i.size(e)===t}}function S(t,e){return v(t,Array(e+1))}function O(t){return function(e){return S(t,e.length)}}function A(t){return Object.keys(t).sort()}function E(t){return Array.isArray(t)?t:i.reduce(function(t,e){return t.push(e),t},[],t)}function T(t,e,n,r){return d(r)?t:i.reduce(function(t,e){return t+"  - "+n(e)+"\n"},e,r)}function I(t){return t.replace(/[ ]+$/gm,"")}function x(t){return function(e){return function(n){return t?e(n):n}}}function k(t){return function(e){return function(n){return t+n+e}}}function C(t){return k(t("("))(t(")"))}function N(t){return t.name.slice(t.name.indexOf("/")+1)}function M(t){return function(e){return function n(r){return r.supertypes.every(n)&&r._test(t)(e)}}}function R(t,e,r,o,u,s,c,f){var l=Object.create(Vt);return l._test=c,l._extractors=f.reduce(function(t,e){return t[e[0]]=e[1],t},{}),l.arity=o,l.extractors=i.map(a(E),l._extractors),l.format=u||function(t,r){return i.reduce(function(e,i){return e+t(" ")+x(i[2].arity>0)(C(t))(r(i[0])(n(i[2])))},t(e),f)},l.keys=f.map(function(t){return t[0]}),l.name=e,l.supertypes=s,l.type=t,l.types=f.reduce(function(t,e){return t[e[0]]=e[2],t},{}),l.url=r,l}function P(t){return function(e){return e.arity>=t}}function j(t){return function(e){return o(e)===t}}function F(t){return function(e){return typeof e===t}}function D(t){return"https://github.com/sanctuary-js/sanctuary-def/tree/v0.21.1#"+t}function q(t){return function(e){return U([t,e])}}function U(t){function e(t,e){return x(2!==r.length)(C(t))(v(t(", "),i.map(function(r){return x(r[2].type===Gt)(C(t))(e(r[0])(n(r[2])))},h(r))))+t(" -> ")+e(m(r)[0])(n(m(r)[2]))}var r=i.reduce(function(t,e){return t.push(["$"+n(t.length+1),s([]),e]),t},[],t);return R(Gt,"","",t.length,e,[fe],s(s(!0)),r)}function L(t){return 0!==t}function H(t){return t>=0}function W(t){return t>0}function B(t){return t<0}function z(t){return et(t)("")([])(s(!0))}function K(t){return(t<an.length?an[t]:n(t))+" "+(1===t?"argument":"arguments")}function V(t){return function(e){return function(n){return function(r){return function(i){return i.type===te?Y(t,e,r(n)):[i]}}}}}function Y(t,e,n){function r(n,r){var a;if("object"==typeof r&&null!=r||"function"==typeof r){if(e.indexOf(r)>=0)return[];a=i.concat(e,[r])}else a=e;var u=o(a)(r);return i.chain(function(e){return e.validate(t)(r).isLeft?[]:e.type===Qt?i.map(rt(e),u(e.extractors.$1)(e.types.$1)):e.type===Yt?i.lift2(ot(e),u(e.extractors.$1)(e.types.$1),u(e.extractors.$2)(e.types.$2)):[e]},n)}var o=V(t);return d(n)?[ue]:g(i.reduce(r,t,n),[ne])}function G(t){return t.type===Qt?G(t.types.$1):t.type===Yt?G(t.types.$1)&&G(t.types.$2):t.type!==Xt}function X(t,e){return i.filter(G,Y(t,[],e))}function J(t,e){return i.reject(function(t){return t.type===Xt},Y(t,[],e))}function $(t,e,n,r,o,u){var s={};for(var c in e){var f=e[c],l={types:f.types.slice(),valuesByPath:{}};for(var h in f.valuesByPath)l.valuesByPath[h]=f.valuesByPath[h].slice();s[c]=l}Ut.call(s,n.name)||(s[n.name]={types:i.filter(P(n.arity),t),valuesByPath:{}});var d=JSON.stringify(i.concat([r],o));Ut.call(s[n.name].valuesByPath,d)||(s[n.name].valuesByPath[d]=[]);var y=tt(t),v=a(a(a(p(G))))(V(t)([]));return u.forEach(function(t){var e=v(t);s[n.name].valuesByPath[d].push(t),s[n.name].types=i.chain(function(r){return y(r)(t)?0===n.arity&&r.type===Qt?i.map(rt(r),e(r.extractors.$1)(r.types.$1)):0===n.arity&&r.type===Yt?i.lift2(ot(r),e(r.extractors.$1)(r.types.$1),e(r.extractors.$2)(r.types.$2)):[r]:[]},s[n.name].types)}),s}function Z(t,e){var n=i.map(JSON.parse,A(e));return Ot(t,s(s(zt)),function(t){return function(r){return function(o){return function(o){var a=i.concat([t],o);return function(t){if(n.some(y(a))){var i=JSON.stringify(a);if(!Ut.call(e,i))return t;if(!d(e[i]))return r(t)}return zt(t)}}}}})}function Q(t,e,n,r,o,a,u){for(var s=Q,c=0;c<u.length;c+=1){var f=r.validate(t)(u[c]);if(f.isLeft)return Wt(function(){return kt(t,e,o,i.concat(a,f.value.propPath),f.value.value)})}switch(r.type){case ee:var l=r.name,p=e.constraints;if(Ut.call(p,l)){var h=p[l];for(c=0;c<u.length;c+=1)for(var y=0;y<h.length;y+=1)if(!h[y].test(u[c]))return Wt(function(){return It(t,e,h[y],o,a,u[c],n)})}var v=$(t,n,r,o,a,u),m=v[l].types;return d(m)?Wt(function(){return xt(t,e,o,a,v[l].valuesByPath)}):i.reduce(function(n,c){return i.chain(function(n){var f=c.arity-r.arity;return r.keys.reduce(function(n,l,p){var h=c.extractors[c.keys[f+p]];return i.reduce(function(n,u){return i.chain(function(n){return s(t,e,n.typeVarMap,r.types[l],o,i.concat(a,[l]),[u])},n)},n,i.chain(h,u))},Bt(n))},n)},Bt({typeVarMap:v,types:m}),m);case Qt:return i.map(function(t){return{typeVarMap:t.typeVarMap,types:i.map(rt(r),g(t.types,[r.types.$1]))}},s(t,e,n,r.types.$1,o,i.concat(a,["$1"]),i.chain(r.extractors.$1,u)));case Yt:return i.chain(function(n){var c=n.types;return i.map(function(t){var e=t.types;return{typeVarMap:t.typeVarMap,types:i.lift2(ot(r),g(c,[r.types.$1]),g(e,[r.types.$2]))}},s(t,e,n.typeVarMap,r.types.$2,o,i.concat(a,["$2"]),i.chain(r.extractors.$2,u)))},s(t,e,n,r.types.$1,o,i.concat(a,["$1"]),i.chain(r.extractors.$1,u)));case Zt:return i.reduce(function(n,c){return i.chain(function(n){return s(t,e,n.typeVarMap,r.types[c],o,i.concat(a,[c]),i.chain(r.extractors[c],u))},n)},Bt({typeVarMap:n,types:[r]}),r.keys);default:return Bt({typeVarMap:n,types:[r]})}}function tt(t){return function(e){return function(n){return Q(t,{name:"name",constraints:{},types:[e]},{},e,0,[],[n]).isRight}}}function et(t){return function(e){return function(n){return function(r){return R($t,t,e,0,null,n,s(r),[])}}}}function nt(t){return function(e){return function(n){return function(r){return function(i){return function(o){return R(Qt,t,e,1,null,n,s(r),[["$1",i,o]])}}}}}}function rt(t){return nt(t.name)(t.url)(t.supertypes)(t._test([]))(t._extractors.$1)}function it(t){return function(e){return function(n){return function(r){return function(i){return function(o){return function(a){return function(u){return R(Yt,t,e,2,null,n,s(r),[["$1",i,a],["$2",o,u]])}}}}}}}}function ot(t){return it(t.name)(t.url)(t.supertypes)(t._test([]))(t._extractors.$1)(t._extractors.$2)}function at(t){return function(e){return a(et(t)(e)([]))(_)}}function ut(t){function e(e,r){if(d(o))return e("{}");var a=i.map(function(i){var o=t[i];return e(" ")+e(/^(?!\d)[$\w]+$/.test(i)?i:n(i))+e(" :: ")+r(i)(n(o))},o);return k(e("{"))(e(" }"))(v(e(","),a))}function r(t){return function(t){if(null==t)return!1;var e={};o.forEach(function(t){e[t]=t});for(var n in t)delete e[n];return d(e)}}var o=A(t),a=o.map(function(e){return[e,function(t){return[t[e]]},t[e]]});return R(Zt,"","",0,e,[],r,a)}function st(t){return function(e){return function(n){return function(r){function i(e,n){return e(t)}function o(t){var e=M(t);return function(t){if(null==t)return!1;var n={};a.forEach(function(t){n[t]=t});for(var i in t)delete n[i];return d(n)&&a.every(function(n){return e(t[n])(r[n])})}}var a=A(r),u=a.map(function(t){return[t,function(e){return[e[t]]},r[t]]});return R(Zt,t,e,0,i,n,o,u)}}}}function ct(t){var e=P(t);return function(t){var n=M(t);return function(r){var i=n(r);return t.some(function(t){return e(t)&&i(t)})}}}function ft(t){var e=[],n=ct(e.length);return R(ee,t,"",0,f(t),[],n,e)}function lt(t){return function(e){var n=[["$1",s([]),e]],r=ct(n.length);return R(ee,t,"",1,null,[],r,n)}}function pt(t){return function(e){return function(n){var r=[["$1",s([]),e],["$2",s([]),n]],i=ct(r.length);return R(ee,t,"",2,null,[],i,r)}}}function ht(t){return U([t])}function dt(t){return q(t)(ve)}function yt(t,e,r,i){return new TypeError(I(Kt(t.name)+" applied to the wrong number of arguments\n\n"+Ot(t,s(s(zt)),function(t){return function(n){return s(s(t===e?n:zt))}})+"\nExpected "+K(r)+" but received "+K(i.length)+T(".\n",":\n\n",n,i)))}function vt(t,e,n){var r=[];return A(t).forEach(function(e){var i=n(e);t[e].forEach(function(t){r.push(i(t)(N(t)+" "+e))})}),x(r.length>0)(k("")(e(" => ")))(x(r.length>1)(C(e))(v(e(", "),r)))}function mt(t){return function(e){var n=e.length-t.length;return S(" ",Math.floor(n/2))+t+S(" ",Math.ceil(n/2))}}function _t(t){return i.concat(t.type===ee?[t.name]:[],i.chain(function(e){return _t(t.types[e])},t.keys))}function gt(t){var e=i.chain(_t,t);return function(t){var r="a".charCodeAt(0);return x(t.type===Gt)(C(u))(n(t).replace(/\bUnknown\b/g,function(){do{var t=String.fromCharCode(r++)}while(e.indexOf(t)>=0);return t}))}}function bt(t,e,r,o){var a=gt(e.types);return n(o)+")  "+v("\n    ",i.map(function(e){return n(e)+" :: "+v(", ",g(i.map(a,J(t,[e])),["(no types)"]))},r))}function wt(t){return t.name+" :: "+vt(t.constraints,u,s(s(u)))+v(" -> ",i.map(gt(t.types),t.types))}function St(t,e,n){return n(t)(e)(t.format(zt,function(r){return s(St(t.types[r],i.concat(e,[r]),n))}))}function Ot(t,e,r){var i=t.types.reduce(function(t,e,i){var o=a(x(e.type===Gt)(C(zt)))(a(function(t){return St(e,[],t)})(r(i)));return t.carets.push(o(O("^"))),t.numbers.push(o(function(e){return mt(n(t.counter+=1))(e)})),t},{carets:[],numbers:[],counter:0});return wt(t)+"\n"+zt(t.name+" :: ")+vt(t.constraints,zt,e)+v(zt(" -> "),i.carets)+"\n"+zt(t.name+" :: ")+vt(t.constraints,zt,s(s(zt)))+v(zt(" -> "),i.numbers)+"\n"}function At(t,e){return i.reduce(function(t,e){return t.types[e]},t,e)}function Et(t){return function(e){return function(n){return function(r){return function(r){var o=i.concat([e],r),a=y(o)(t),s=y(t)(o);return a&&s?n:a?u:zt}}}}}function Tt(t,e){return null==e.url||""===e.url?"":"\nSee "+e.url+" for information about the "+e.name+" "+t+".\n"}function It(t,e,n,r,o,a,u){var s=At(e.types[r],o);return new TypeError(I("Type-class constraint violation\n\n"+Ot(e,function(t){return function(e){return t===s.name&&e.name===n.name?O("^"):zt}},Et(i.concat([r],o)))+"\n"+bt(t,e,[a],1)+"\n\n"+Kt(e.name)+" requires "+Kt(s.name)+" to satisfy the "+N(n)+" type-class constraint; the value at position 1 does not.\n"+Tt("type class",n)))}function xt(t,e,n,r,o){var a=JSON.stringify(i.concat([n],r)),u=o[a],s=i.filter(function(e){var n=o[e];return e===a||d(X(t,i.concat(u,n)))},A(o)),c=Z(e,i.reduce(function(t,e){return t[e]=o[e],t},{},s));return new TypeError(I("Type-variable constraint violation\n\n"+c+"\n"+i.reduce(function(n,r){var i=o[r];return d(i)?n:{idx:n.idx+1,s:n.s+bt(t,e,i,n.idx+1)+"\n\n"}},{idx:0,s:""},s).s+"Since there is no type of which all the above values are members, the type-variable constraint has been violated.\n"))}function kt(t,e,r,o,a){var u=At(e.types[r],o),c=Ot(e,s(s(zt)),Et(i.concat([r],o)));return new TypeError(I(u.type===ee&&d(J(t,[a]))?"Unrecognized value\n\n"+c+"\n"+bt(t,e,[a],1)+"\n\n"+T("The environment is empty! Polymorphic functions require a non-empty environment.\n","The value at position 1 is not a member of any type in the environment.\n\nThe environment contains the following types:\n\n",gt(e.types),t):"Invalid value\n\n"+c+"\n"+bt(t,e,[a],1)+"\n\nThe value at position 1 is not a member of "+Kt(n(u))+".\n"+Tt(P(1)(u)?"type constructor":"type",u)))}function Ct(t,e,r,i){return new TypeError(I(Kt(t.name)+" applied "+Kt(n(t.types[e]))+" to the wrong number of arguments\n\n"+Ot(t,s(s(zt)),function(t){return function(n){return function(r){return function(i){return function(i){return t===e?r.format(zt,function(t){return"$1"===t?n:zt}):zt(i)}}}}})+"\nExpected "+K(r)+" but received "+K(i.length)+T(".\n",":\n\n",n,i)))}function Nt(t){if(t.isLeft)throw t.value();return t.value}function Mt(t,e,n){function r(n,r,o){function a(n,r,o,a){var s=[o],c=u.types[o];return c.type===ee?i.chain(function(n){return d(n[c.name].types)?Wt(function(){return xt(t,e,r,s,n[c.name].valuesByPath)}):Bt(n)},Bt($(t,n,c,r,s,[a]))):i.map(function(t){return t.typeVarMap},Q(t,e,n,c,r,s,[a]))}var u=e.types[r];if(u.type!==Gt)return o;var s=n;return function(t){if(arguments.length!==u.arity-1)throw Ct(e,r,u.arity-1,qt.call(arguments));var n=arguments;s=Nt(h(u.keys).reduce(function(t,e,o){var u=n[o];return i.chain(function(t){return a(t,r,e,u)},t)},Bt(s)));var c=o.apply(this,arguments),f=m(u.keys);return s=Nt(a(s,r,f,c)),c}}function o(u,s,c){return function(f){var l=qt.call(arguments);if(1!==l.length)throw yt(e,c,1,l);var p=Nt(Q(t,e,u,e.types[c],c,[],l)).typeVarMap,h=i.concat(s,l);if(c+1===a){var d=h.reduce(function(t,e,n){return t(r(p,n,e))},n);return p=Nt(Q(t,e,p,e.types[a],a,[],[d])).typeVarMap,r(p,a,d)}return o(p,h,c+1)}}var a=e.types.length-1,u=e.types[0].type===Jt?function(){if(0!==arguments.length)throw yt(e,0,0,qt.call(arguments));var i=n();return r(Nt(Q(t,e,{},e.types[a],a,[],[i])).typeVarMap,a,i)}:o({},[],0);return u[Ht]=u.toString=c(wt(e)),u}function Rt(t){function e(e){return function(n){return function(r){return function(o){return t.checkTypes?Mt(t.env,{name:e,constraints:n,types:1===r.length?i.concat([re],r):r},o):o}}}}return e(e.name)({})(un)(e)}function Pt(t){var e=t(ue);return sn(e.name)({})([tn,tn])(rt(e))}function jt(t){var e=t(ue)(ue);return sn(e.name)({})([tn,tn,tn])(ot(e))}var Ft=Math.pow(2,53)-1,Dt=-Ft,qt=Array.prototype.slice,Ut=Object.prototype.hasOwnProperty,Lt=Object.prototype.toString,Ht="symbol"==typeof t.inspect.custom?t.inspect.custom:"inspect",Wt=e.Left,Bt=e.Right,zt=O(" "),Kt=k("‘")("’"),Vt={"@@type":"sanctuary-def/Type@1","@@show":function(){return this.format(u,s(u))},validate:function(t){var e=M(t),n=this;return function(r){if(!e(r)(n))return Wt({value:r,propPath:[]});for(var o=0;o<n.keys.length;o+=1)for(var a=n.keys[o],u=n.types[a],s=n.extractors[a](r),c=0;c<s.length;c+=1){var f=u.validate(t)(s[c]);if(f.isLeft)return Wt({value:f.value.value,propPath:i.concat([a],f.value.propPath)})}return Bt(r)}},"fantasy-land/equals":function(t){return i.equals(this.type,t.type)&&i.equals(this.name,t.name)&&i.equals(this.url,t.url)&&i.equals(this.supertypes,t.supertypes)&&i.equals(this.keys,t.keys)&&i.equals(this.types,t.types)}},Yt="BINARY",Gt="FUNCTION",Xt="INCONSISTENT",Jt="NO_ARGUMENTS",$t="NULLARY",Zt="RECORD",Qt="UNARY",te="UNKNOWN",ee="VARIABLE",ne=R(Xt,"","",0,f("???"),[],s(s(!1)),[]),re=R(Jt,"","",0,f("()"),[],s(s(!0)),[]),ie=i.ap(et,D),oe=i.ap(nt,D),ae=i.ap(it,D),ue=R(te,"","",0,f("Unknown"),[],s(s(!0)),[]),se=ie("Void")([])(s(!1)),ce=ie("Any")([])(s(!0)),fe=ie("Function")([])(F("function")),le=ie("Arguments")([])(j("Arguments")),pe=oe("Array")([])(j("Array"))(u),he=ie("Array0")([pe(ue)])(w(0)),de=oe("Array1")([pe(ue)])(w(1))(u),ye=ae("Array2")([pe(ue)])(w(2))(function(t){return[t[0]]})(function(t){return[t[1]]}),ve=ie("Boolean")([])(F("boolean")),me=ie("Date")([])(j("Date")),_e=ie("ValidDate")([me])(a(l(isNaN))(Number)),ge=oe("Descending")([])(j("sanctuary-descending/Descending@1"))(u),be=ae("Either")([])(j("sanctuary-either/Either@1"))(function(t){return t.isLeft?[t.value]:[]})(function(t){return t.isLeft?[]:[t.value]}),we=ie("Error")([])(j("Error")),Se=ie("HtmlElement")([])(function(t){return/^\[object HTML.+Element\]$/.test(Lt.call(t))}),Oe=oe("Identity")([])(j("sanctuary-identity/Identity@1"))(u),Ae=ae("JsMap")([])(function(t){return"[object Map]"===Lt.call(t)})(function(t){return Array.from(t.keys())})(function(t){return Array.from(t.values())}),Ee=oe("JsSet")([])(function(t){return"[object Set]"===Lt.call(t)})(function(t){return Array.from(t.values())}),Te=oe("Maybe")([])(j("sanctuary-maybe/Maybe@1"))(u),Ie=ie("Module")([])(function(t){return"[object Module]"===Lt.call(t)}),xe=oe("NonEmpty")([])(function(t){return i.Monoid.test(t)&&i.Setoid.test(t)&&!i.equals(t,i.empty(t.constructor))})(function(t){return[t]}),ke=ie("Null")([])(j("Null")),Ce=oe("Nullable")([])(s(!0))(function(t){return null===t?[]:[t]}),Ne=ie("Number")([])(F("number")),Me=ie("PositiveNumber")([Ne])(W),Re=ie("NegativeNumber")([Ne])(B),Pe=ie("ValidNumber")([Ne])(l(isNaN)),je=ie("NonZeroValidNumber")([Pe])(L),Fe=ie("FiniteNumber")([Pe])(isFinite),De=ie("NonZeroFiniteNumber")([Fe])(L),qe=ie("PositiveFiniteNumber")([Fe])(W),Ue=ie("NegativeFiniteNumber")([Fe])(B),Le=ie("Integer")([Pe])(function(t){return Math.floor(t)===t&&t>=Dt&&t<=Ft}),He=ie("NonZeroInteger")([Le])(L),We=ie("NonNegativeInteger")([Le])(H),Be=ie("PositiveInteger")([Le])(W),ze=ie("NegativeInteger")([Le])(B),Ke=ie("Object")([])(j("Object")),Ve=ae("Pair")([])(j("sanctuary-pair/Pair@1"))(function(t){return[t.fst]})(function(t){return[t.snd]}),Ye=ie("RegExp")([])(j("RegExp")),Ge=ie("GlobalRegExp")([Ye])(b("global")),Xe=ie("NonGlobalRegExp")([Ye])(l(b("global"))),Je=oe("StrMap")([Ke])(s(!0))(u),$e=ie("String")([])(F("string")),Ze=ie("RegexFlags")([$e])(function(t){return/^g?i?m?$/.test(t)}),Qe=ie("Symbol")([])(F("symbol")),tn=ie("Type")([])(j("sanctuary-def/Type@1")),en=ie("TypeClass")([])(j("sanctuary-type-classes/TypeClass@1")),nn=ie("Undefined")([])(j("Undefined")),rn=[fe,le,pe(ue),ye(ue)(ue),ve,me,ge(ue),be(ue)(ue),we,q(ue)(ue),Se,Oe(ue),Ae(ue)(ue),Ee(ue),Te(ue),Ie,ke,Ne,Ke,Ve(ue)(ue),Ye,Je(ue),$e,Qe,tn,en,nn],on=void 0!==r&&null!=r&&null!=r.env&&"production"===r.env.NODE_ENV,an=["zero","one","two","three","four","five","six","seven","eight","nine"],un=[$e,Je(pe(en)),xe(pe(tn)),fe,fe],sn=Rt({checkTypes:!on,env:rn});return{Any:ce,AnyFunction:fe,Arguments:le,Array:Pt(pe),Array0:he,Array1:Pt(de),Array2:jt(ye),Boolean:ve,Date:me,ValidDate:_e,Descending:Pt(ge),Either:jt(be),Error:we,Fn:sn("Fn")({})([tn,tn,tn])(q),Function:sn("Function")({})([xe(pe(tn)),tn])(U),HtmlElement:Se,Identity:Pt(Oe),JsMap:jt(Ae),JsSet:Pt(Ee),Maybe:Pt(Te),Module:Ie,NonEmpty:xe,Null:ke,Nullable:Pt(Ce),Number:Ne,PositiveNumber:Me,NegativeNumber:Re,ValidNumber:Pe,NonZeroValidNumber:je,FiniteNumber:Fe,NonZeroFiniteNumber:De,PositiveFiniteNumber:qe,NegativeFiniteNumber:Ue,Integer:Le,NonZeroInteger:He,NonNegativeInteger:We,PositiveInteger:Be,NegativeInteger:ze,Object:Ke,Pair:jt(Ve),RegExp:Ye,GlobalRegExp:Ge,NonGlobalRegExp:Xe,RegexFlags:Ze,StrMap:Pt(Je),String:$e,Symbol:Qe,Type:tn,TypeClass:en,Undefined:nn,Unknown:ue,Void:se,env:rn,create:sn("create")({})([ut({checkTypes:ve,env:pe(tn)}),z(v(" -> ",i.map(n,un)))])(Rt),test:sn("test")({})([pe(tn),tn,ce,ve])(tt),NullaryType:sn("NullaryType")({})([$e,$e,pe(tn),z("(Any -> Boolean)"),tn])(et),UnaryType:sn("UnaryType")({f:[i.Foldable]})([$e,$e,pe(tn),z("(Any -> Boolean)"),z("(t a -> f a)"),z("Type -> Type")])(function(t){return a(a(a(a(sn(t)({})([tn,tn])))))(nt(t))}),BinaryType:sn("BinaryType")({f:[i.Foldable]})([$e,$e,pe(tn),z("(Any -> Boolean)"),z("(t a b -> f a)"),z("(t a b -> f b)"),z("Type -> Type -> Type")])(function(t){return a(a(a(a(a(sn(t)({})([tn,tn,tn]))))))(it(t))}),EnumType:sn("EnumType")({})([$e,$e,pe(ce),tn])(at),RecordType:sn("RecordType")({})([Je(tn),tn])(ut),NamedRecordType:sn("NamedRecordType")({})([xe($e),$e,pe(tn),Je(tn),tn])(st),TypeVariable:sn("TypeVariable")({})([$e,tn])(ft),UnaryTypeVariable:sn("UnaryTypeVariable")({})([$e,z("Type -> Type")])(function(t){return sn(t)({})([tn,tn])(lt(t))}),BinaryTypeVariable:sn("BinaryTypeVariable")({})([$e,z("Type -> Type -> Type")])(function(t){return sn(t)({})([tn,tn,tn])(pt(t))}),Thunk:sn("Thunk")({})([tn,tn])(ht),Predicate:sn("Predicate")({})([tn,tn])(dt)}})}).call(e,n(140))},577:function(t,e,n){var r,i;!function(o){"use strict";var a={inspect:{}};"object"==typeof t&&"object"==typeof t.exports?t.exports=o(n(181),n(51),n(52)):null!=n(77)?(r=[n(51),n(52)],void 0!==(i=function(t,e){return o(a,t,e)}.apply(e,r))&&(t.exports=i)):self.sanctuaryMaybe=o(a,self.sanctuaryShow,self.sanctuaryTypeClasses)}(function(t,e,n){"use strict";function r(t){return{tag:r,value:t}}function i(t){return{tag:i,value:t}}function o(){return"Nothing"}function a(){return"Just ("+e(this.value)+")"}function u(t){return t.isNothing}function s(t){return t.isJust&&n.equals(this.value,t.value)}function c(t){return!0}function f(t){return t.isJust&&n.lte(this.value,t.value)}function l(t){return t}function p(t){return t.isJust?j(n.concat(this.value,t.value)):this}function h(t){return this}function d(t){return t(this.value)?this:P}function y(t){return this}function v(t){return j(t(this.value))}function m(t){return this}function _(t){return t.isJust?j(t.value(this.value)):t}function g(t){return this}function b(t){return t(this.value)}function w(t){return t}function S(t){return this}function O(t,e){return e}function A(t,e){return t(e,this.value)}function E(t,e){return n.of(t,this)}function T(t,e){return n.map(j,e(this.value))}function I(t){return this}function x(t){return j(t(this))}if("undefined"!=typeof __doctest){var k=__doctest.require("sanctuary");__doctest.require("sanctuary-def"),__doctest.require("sanctuary-type-identifiers");k.empty=k.unchecked.empty,k.of=k.unchecked.of,k.zero=k.unchecked.zero}var C={},N={constructor:C,isNothing:!0,isJust:!1,"@@type":"sanctuary-maybe/Maybe@1","@@show":o,"fantasy-land/equals":u,"fantasy-land/lte":c,"fantasy-land/concat":l,"fantasy-land/filter":h,"fantasy-land/map":y,"fantasy-land/ap":m,"fantasy-land/chain":g,"fantasy-land/alt":w,"fantasy-land/reduce":O,"fantasy-land/traverse":E,"fantasy-land/extend":I},M={constructor:C,isNothing:!1,isJust:!0,"@@type":"sanctuary-maybe/Maybe@1","@@show":a,"fantasy-land/filter":d,"fantasy-land/map":v,"fantasy-land/ap":_,"fantasy-land/chain":b,"fantasy-land/alt":S,"fantasy-land/reduce":A,"fantasy-land/traverse":T,"fantasy-land/extend":x},R=t.inspect.custom;"symbol"==typeof R?(N[R]=o,M[R]=a):(N.inspect=o,M.inspect=a);var P=C.Nothing=Object.create(N),j=C.Just=function(t){var e=Object.create(M);return n.Setoid.test(t)&&(e["fantasy-land/equals"]=s,n.Ord.test(t)&&(e["fantasy-land/lte"]=f)),n.Semigroup.test(t)&&(e["fantasy-land/concat"]=p),e.value=t,e};return C["fantasy-land/empty"]=function(){return P},C["fantasy-land/of"]=j,C["fantasy-land/chainRec"]=function(t,e){for(var n=r(e);n.tag===r;){var o=t(r,i,n.value);if(o.isNothing)return o;n=o.value}return j(n.value)},C["fantasy-land/zero"]=function(){return P},C})},578:function(t,e,n){var r,i;!function(o){"use strict";var a={inspect:{}};"object"==typeof t&&"object"==typeof t.exports?t.exports=o(n(181),n(51),n(52)):null!=n(77)?(r=[n(51),n(52)],void 0!==(i=function(t,e){return o(a,t,e)}.apply(e,r))&&(t.exports=i)):self.sanctuaryPair=o(a,self.sanctuaryShow,self.sanctuaryTypeClasses)}(function(t,e,n){"use strict";function r(t){return function(e){var r=Object.create(_);return n.Setoid.test(t)&&n.Setoid.test(e)&&(r["fantasy-land/equals"]=o,n.Ord.test(t)&&n.Ord.test(e)&&(r["fantasy-land/lte"]=a)),n.Semigroup.test(t)&&(n.Semigroup.test(e)&&(r["fantasy-land/concat"]=s),r["fantasy-land/ap"]=l,r["fantasy-land/chain"]=p),r.fst=t,r.snd=e,r}}function i(){return"Pair ("+e(this.fst)+") ("+e(this.snd)+")"}function o(t){return n.equals(this.fst,t.fst)&&n.equals(this.snd,t.snd)}function a(t){return n.equals(this.fst,t.fst)?n.lte(this.snd,t.snd):n.lte(this.fst,t.fst)}function u(t){return r(this.fst)(t.snd)}function s(t){return r(n.concat(this.fst,t.fst))(n.concat(this.snd,t.snd))}function c(t){return r(this.fst)(t(this.snd))}function f(t,e){return r(t(this.fst))(e(this.snd))}function l(t){return r(n.concat(t.fst,this.fst))(t.snd(this.snd))}function p(t){var e=t(this.snd);return r(n.concat(this.fst,e.fst))(e.snd)}function h(t,e){return t(e,this.snd)}function d(t,e){return n.map(r(this.fst),e(this.snd))}function y(t){return r(this.fst)(t(this))}function v(){return this.snd}if("undefined"!=typeof __doctest){var m=__doctest.require("sanctuary");__doctest.require("sanctuary-def"),__doctest.require("sanctuary-type-identifiers");m.bimap=m.unchecked.bimap,m.compose=m.unchecked.compose}var _={constructor:r,"@@type":"sanctuary-pair/Pair@1","@@show":i,"fantasy-land/compose":u,"fantasy-land/map":c,"fantasy-land/bimap":f,"fantasy-land/reduce":h,"fantasy-land/traverse":d,"fantasy-land/extend":y,"fantasy-land/extract":v},g=t.inspect.custom;return"symbol"==typeof g?_[g]=i:_.inspect=i,"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator&&(_[Symbol.iterator]=function(){return[this.fst,this.snd][Symbol.iterator]()}),r.fst=function(t){return t.fst},r.snd=function(t){return t.snd},r.swap=function(t){return r(t.snd)(t.fst)},r})},579:function(t,e,n){t.exports=n(580)},580:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}n(31);var i=n(129),o=r(n(1483)),a=n(1491),u=n(1501),s=n(1503),c=n(1506),f=r(n(1529)),l=r(n(176)),p={type:Phaser.AUTO,backgroundColor:"#125555",width:i.SCREEN_WIDTH,height:i.SCREEN_HEIGHT,scale:{mode:Phaser.Scale.FIT,autoCenter:Phaser.Scale.CENTER_BOTH},scene:[o.default,a.EditSquadScene,u.ListSquadsScene,s.ListUnitsScene,c.MapScene,f.default]};setTimeout(function(){new Phaser.Game(p).scale.lockOrientation(Phaser.Scale.PORTRAIT)},function(){return null===localStorage.getItem("player")?((0,l.default)(!0),50):0}())},76:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.error=e.INVALID_STATE=e.NOT_IMPLEMENTED=void 0;e.NOT_IMPLEMENTED="NOT_IMPLEMENTED";e.INVALID_STATE="INVALID_STATE";var r=function(t){throw new Error(t)};e.error=r},77:function(t,e){(function(e){t.exports=e}).call(e,{})},89:function(t,e){function n(t){for(var e=[[t.x,t.y]];t.parent;)t=t.parent,e.push([t.x,t.y]);return e.reverse()}function r(t,e){var r=n(t),i=n(e);return r.concat(i.reverse())}function i(t){var e,n,r,i,o,a=0;for(e=1;e<t.length;++e)n=t[e-1],r=t[e],i=n[0]-r[0],o=n[1]-r[1],a+=Math.sqrt(i*i+o*o);return a}function o(t,e,n,r){var i,o,a,u,s,c,f=Math.abs,l=[];for(a=f(n-t),u=f(r-e),i=t<n?1:-1,o=e<r?1:-1,s=a-u;;){if(l.push([t,e]),t===n&&e===r)break;c=2*s,c>-u&&(s-=u,t+=i),c<a&&(s+=a,e+=o)}return l}function a(t){var e,n,r,i,a,u,s=[],c=t.length;if(c<2)return s;for(a=0;a<c-1;++a)for(e=t[a],n=t[a+1],r=o(e[0],e[1],n[0],n[1]),i=r.length,u=0;u<i-1;++u)s.push(r[u]);return s.push(t[c-1]),s}function u(t,e){var n,r,i,a,u,s,c,f,l,p,h,d=e.length,y=e[0][0],v=e[0][1],m=e[d-1][0],_=e[d-1][1];for(n=y,r=v,u=[[n,r]],s=2;s<d;++s){for(f=e[s],i=f[0],a=f[1],l=o(n,r,i,a),h=!1,c=1;c<l.length;++c)if(p=l[c],!t.isWalkableAt(p[0],p[1])){h=!0;break}h&&(lastValidCoord=e[s-1],u.push(lastValidCoord),n=lastValidCoord[0],r=lastValidCoord[1])}return u.push([m,_]),u}function s(t){if(t.length<3)return t;var e,n,r,i,o,a,u=[],s=t[0][0],c=t[0][1],f=t[1][0],l=t[1][1],p=f-s,h=l-c;for(o=Math.sqrt(p*p+h*h),p/=o,h/=o,u.push([s,c]),a=2;a<t.length;a++)e=f,n=l,r=p,i=h,f=t[a][0],l=t[a][1],p=f-e,h=l-n,o=Math.sqrt(p*p+h*h),p/=o,h/=o,p===r&&h===i||u.push([e,n]);return u.push([f,l]),u}e.backtrace=n,e.biBacktrace=r,e.pathLength=i,e.interpolate=o,e.expandPath=a,e.smoothenPath=u,e.compressPath=s}},[579]);